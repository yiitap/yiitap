var D3=Object.defineProperty;var w3=(t,e,n)=>e in t?D3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var be=(t,e,n)=>w3(t,typeof e!="symbol"?e+"":e,n);import{c as tu,i as mv,k as va,f as ci,b as j,d as St,e as _3,v as Gi,r as Vs,h as Xp,j as vo,a as lt,l as ja,n as Hm,o as Ka,p as qs,q as Fw,s as Wm,t as A3,w as zm,z as C3,x as Ac,y as Fh,A as Sh,B as T3,m as Vp,C as ed,D as k3,E as F3,F as S3,G as R3,H as ur,I as Vr,J as Me,K as Ce,L as cr,M as Wi,N as Sw,O as Gn,P as $r,Q as ln,R as Ym,S as Br,T as Za,U as Zt,V as xr,W as Fe,X as Cc,Y as td,Z as nc,_ as zi,$ as ca,a0 as Xm,a1 as yv,a2 as lr,a3 as ft,a4 as Cr,a5 as nd,a6 as Hr,a7 as mn,a8 as vv,a9 as qt,aa as Ja,ab as rc,ac as Er,ad as N3,ae as L3,af as M3,ag as I3}from"./vendor-utils-BJ8JZwuU.js";function O3(t){let e=0;for(let n=0;n<t.length;++n)t[n]==="&"&&++e;return e}const Rw=/\s*,(?![^(]*\))\s*/g,P3=/\s+/g;function $3(t,e){const n=[];return e.split(Rw).forEach(r=>{let i=O3(r);if(i){if(i===1){t.forEach(a=>{n.push(r.replace("&",a))});return}}else{t.forEach(a=>{n.push((a&&a+" ")+r)});return}let s=[r];for(;i--;){const a=[];s.forEach(o=>{t.forEach(u=>{a.push(o.replace("&",u))})}),s=a}s.forEach(a=>n.push(a))}),n}function B3(t,e){const n=[];return e.split(Rw).forEach(r=>{t.forEach(i=>{n.push((i&&i+" ")+r)})}),n}function U3(t){let e=[""];return t.forEach(n=>{n=n&&n.trim(),n&&(n.includes("&")?e=$3(e,n):e=B3(e,n))}),e.join(", ").replace(P3," ")}function bv(t){if(!t)return;const e=t.parentElement;e&&e.removeChild(t)}function rd(t,e){return(e??document.head).querySelector(`style[cssr-id="${t}"]`)}function G3(t){const e=document.createElement("style");return e.setAttribute("cssr-id",t),e}function nl(t){return t?/^\s*@(s|m)/.test(t):!1}const H3=/[A-Z]/g;function Nw(t){return t.replace(H3,e=>"-"+e.toLowerCase())}function W3(t,e="  "){return typeof t=="object"&&t!==null?` {
`+Object.entries(t).map(n=>e+`  ${Nw(n[0])}: ${n[1]};`).join(`
`)+`
`+e+"}":`: ${t};`}function z3(t,e,n){return typeof t=="function"?t({context:e.context,props:n}):t}function xv(t,e,n,r){if(!e)return"";const i=z3(e,n,r);if(!i)return"";if(typeof i=="string")return`${t} {
${i}
}`;const s=Object.keys(i);if(s.length===0)return n.config.keepEmptyBlock?t+` {
}`:"";const a=t?[t+" {"]:[];return s.forEach(o=>{const u=i[o];if(o==="raw"){a.push(`
`+u+`
`);return}o=Nw(o),u!=null&&a.push(`  ${o}${W3(u)}`)}),t&&a.push("}"),a.join(`
`)}function qp(t,e,n){t&&t.forEach(r=>{if(Array.isArray(r))qp(r,e,n);else if(typeof r=="function"){const i=r(e);Array.isArray(i)?qp(i,e,n):i&&n(i)}else r&&n(r)})}function Lw(t,e,n,r,i){const s=t.$;let a="";if(!s||typeof s=="string")nl(s)?a=s:e.push(s);else if(typeof s=="function"){const c=s({context:r.context,props:i});nl(c)?a=c:e.push(c)}else if(s.before&&s.before(r.context),!s.$||typeof s.$=="string")nl(s.$)?a=s.$:e.push(s.$);else if(s.$){const c=s.$({context:r.context,props:i});nl(c)?a=c:e.push(c)}const o=U3(e),u=xv(o,t.props,r,i);a?n.push(`${a} {`):u.length&&n.push(u),t.children&&qp(t.children,{context:r.context,props:i},c=>{if(typeof c=="string"){const l=xv(o,{raw:c},r,i);n.push(l)}else Lw(c,e,n,r,i)}),e.pop(),a&&n.push("}"),s&&s.after&&s.after(r.context)}function Y3(t,e,n){const r=[];return Lw(t,[],r,e,n),r.join(`

`)}function X3(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}typeof window<"u"&&(window.__cssrContext={});function V3(t,e,n,r){const{els:i}=e;if(n===void 0)i.forEach(bv),e.els=[];else{const s=rd(n,r);s&&i.includes(s)&&(bv(s),e.els=i.filter(a=>a!==s))}}function Ev(t,e){t.push(e)}function q3(t,e,n,r,i,s,a,o,u){let c;if(n===void 0&&(c=e.render(r),n=X3(c)),u){u.adapter(n,c??e.render(r));return}o===void 0&&(o=document.head);const l=rd(n,o);if(l!==null&&!s)return l;const h=l??G3(n);if(c===void 0&&(c=e.render(r)),h.textContent=c,l!==null)return l;if(a){const d=o.querySelector(`meta[name="${a}"]`);if(d)return o.insertBefore(h,d),Ev(e.els,h),h}return i?o.insertBefore(h,o.querySelector("style, link")):o.appendChild(h),Ev(e.els,h),h}function j3(t){return Y3(this,this.instance,t)}function K3(t={}){const{id:e,ssr:n,props:r,head:i=!1,force:s=!1,anchorMetaName:a,parent:o}=t;return q3(this.instance,this,e,r,i,s,a,o,n)}function Z3(t={}){const{id:e,parent:n}=t;V3(this.instance,this,e,n)}const rl=function(t,e,n,r){return{instance:t,$:e,props:n,children:r,els:[],render:j3,mount:K3,unmount:Z3}},J3=function(t,e,n,r){return Array.isArray(e)?rl(t,{$:null},null,e):Array.isArray(n)?rl(t,e,null,n):Array.isArray(r)?rl(t,e,n,r):rl(t,e,n,null)};function Qq(t={}){const e={c:((...n)=>J3(e,...n)),use:(n,...r)=>n.install(e,...r),find:rd,context:{},config:t};return e}function ej(t,e){if(t===void 0)return!1;if(e){const{context:{ids:n}}=e;return n.has(t)}return rd(t)!==null}let Rh=[];const Mw=new WeakMap;function Q3(){Rh.forEach(t=>t(...Mw.get(t))),Rh=[]}function tj(t,...e){Mw.set(t,e),!Rh.includes(t)&&Rh.push(t)===1&&requestAnimationFrame(Q3)}function nj(t,e){let{target:n}=t;for(;n;){if(n.dataset&&n.dataset[e]!==void 0)return!0;n=n.parentElement}return!1}function rj(t){return t.composedPath()[0]||null}function ij(t){return typeof t=="string"?t.endsWith("px")?Number(t.slice(0,t.length-2)):Number(t):t}function sj(t){if(t!=null)return typeof t=="number"?`${t}px`:t.endsWith("px")?t:`${t}px`}function aj(t,e){const n=t.trim().split(/\s+/g),r={top:n[0]};switch(n.length){case 1:r.right=n[0],r.bottom=n[0],r.left=n[0];break;case 2:r.right=n[1],r.left=n[1],r.bottom=n[0];break;case 3:r.right=n[1],r.bottom=n[2],r.left=n[1];break;case 4:r.right=n[1],r.bottom=n[2],r.left=n[3];break;default:throw new Error("[seemly/getMargin]:"+t+" is not a valid value.")}return e===void 0?r:r[e]}function oj(t,e){const[n,r]=t.split(" ");return{row:n,col:r||n}}const Dv={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32",transparent:"#0000"};function eF(t,e,n){e/=100,n/=100;let r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5)*255,r(3)*255,r(1)*255]}function tF(t,e,n){e/=100,n/=100;let r=e*Math.min(n,1-n),i=(s,a=(s+t/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0)*255,i(8)*255,i(4)*255]}const Ei="^\\s*",Di="\\s*$",ls="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))%\\s*",sr="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",Ps="([0-9A-Fa-f])",$s="([0-9A-Fa-f]{2})",Iw=new RegExp(`${Ei}hsl\\s*\\(${sr},${ls},${ls}\\)${Di}`),Ow=new RegExp(`${Ei}hsv\\s*\\(${sr},${ls},${ls}\\)${Di}`),Pw=new RegExp(`${Ei}hsla\\s*\\(${sr},${ls},${ls},${sr}\\)${Di}`),$w=new RegExp(`${Ei}hsva\\s*\\(${sr},${ls},${ls},${sr}\\)${Di}`),nF=new RegExp(`${Ei}rgb\\s*\\(${sr},${sr},${sr}\\)${Di}`),rF=new RegExp(`${Ei}rgba\\s*\\(${sr},${sr},${sr},${sr}\\)${Di}`),iF=new RegExp(`${Ei}#${Ps}${Ps}${Ps}${Di}`),sF=new RegExp(`${Ei}#${$s}${$s}${$s}${Di}`),aF=new RegExp(`${Ei}#${Ps}${Ps}${Ps}${Ps}${Di}`),oF=new RegExp(`${Ei}#${$s}${$s}${$s}${$s}${Di}`);function Wn(t){return parseInt(t,16)}function uF(t){try{let e;if(e=Pw.exec(t))return[Nh(e[1]),ss(e[5]),ss(e[9]),zs(e[13])];if(e=Iw.exec(t))return[Nh(e[1]),ss(e[5]),ss(e[9]),1];throw new Error(`[seemly/hsla]: Invalid color value ${t}.`)}catch(e){throw e}}function cF(t){try{let e;if(e=$w.exec(t))return[Nh(e[1]),ss(e[5]),ss(e[9]),zs(e[13])];if(e=Ow.exec(t))return[Nh(e[1]),ss(e[5]),ss(e[9]),1];throw new Error(`[seemly/hsva]: Invalid color value ${t}.`)}catch(e){throw e}}function ic(t){try{let e;if(e=sF.exec(t))return[Wn(e[1]),Wn(e[2]),Wn(e[3]),1];if(e=nF.exec(t))return[_n(e[1]),_n(e[5]),_n(e[9]),1];if(e=rF.exec(t))return[_n(e[1]),_n(e[5]),_n(e[9]),zs(e[13])];if(e=iF.exec(t))return[Wn(e[1]+e[1]),Wn(e[2]+e[2]),Wn(e[3]+e[3]),1];if(e=oF.exec(t))return[Wn(e[1]),Wn(e[2]),Wn(e[3]),zs(Wn(e[4])/255)];if(e=aF.exec(t))return[Wn(e[1]+e[1]),Wn(e[2]+e[2]),Wn(e[3]+e[3]),zs(Wn(e[4]+e[4])/255)];if(t in Dv)return ic(Dv[t]);if(Iw.test(t)||Pw.test(t)){const[n,r,i,s]=uF(t);return[...tF(n,r,i),s]}else if(Ow.test(t)||$w.test(t)){const[n,r,i,s]=cF(t);return[...eF(n,r,i),s]}throw new Error(`[seemly/rgba]: Invalid color value ${t}.`)}catch(e){throw e}}function lF(t){return t>1?1:t<0?0:t}function jp(t,e,n,r){return`rgba(${_n(t)}, ${_n(e)}, ${_n(n)}, ${lF(r)})`}function p0(t,e,n,r,i){return _n((t*e*(1-r)+n*r)/i)}function uj(t,e){Array.isArray(t)||(t=ic(t)),Array.isArray(e)||(e=ic(e));const n=t[3],r=e[3],i=zs(n+r-n*r);return jp(p0(t[0],n,e[0],r,i),p0(t[1],n,e[1],r,i),p0(t[2],n,e[2],r,i),i)}function cj(t,e){const[n,r,i,s=1]=Array.isArray(t)?t:ic(t);return typeof e.alpha=="number"?jp(n,r,i,e.alpha):jp(n,r,i,s)}function lj(t,e){const[n,r,i,s=1]=Array.isArray(t)?t:ic(t),{lightness:a=1,alpha:o=1}=e;return hF([n*a,r*a,i*a,s*o])}function zs(t){const e=Math.round(Number(t)*100)/100;return e>1?1:e<0?0:e}function Nh(t){const e=Math.round(Number(t));return e>=360||e<0?0:e}function _n(t){const e=Math.round(Number(t));return e>255?255:e<0?0:e}function ss(t){const e=Math.round(Number(t));return e>100?100:e<0?0:e}function hF(t){const[e,n,r]=t;return 3 in t?`rgba(${_n(e)}, ${_n(n)}, ${_n(r)}, ${zs(t[3])})`:`rgba(${_n(e)}, ${_n(n)}, ${_n(r)}, 1)`}function hj(t=8){return Math.random().toString(16).slice(2,2+t)}function ql(t){return t.composedPath()[0]}const fF={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function dF(t,e,n){if(t==="mousemoveoutside"){const r=i=>{e.contains(ql(i))||n(i)};return{mousemove:r,touchstart:r}}else if(t==="clickoutside"){let r=!1;const i=a=>{r=!e.contains(ql(a))},s=a=>{r&&(e.contains(ql(a))||n(a))};return{mousedown:i,mouseup:s,touchstart:i,touchend:s}}return console.error(`[evtd/create-trap-handler]: name \`${t}\` is invalid. This could be a bug of evtd.`),{}}function Bw(t,e,n){const r=fF[t];let i=r.get(e);i===void 0&&r.set(e,i=new WeakMap);let s=i.get(n);return s===void 0&&i.set(n,s=dF(t,e,n)),s}function pF(t,e,n,r){if(t==="mousemoveoutside"||t==="clickoutside"){const i=Bw(t,e,n);return Object.keys(i).forEach(s=>{yF(s,document,i[s],r)}),!0}return!1}function gF(t,e,n,r){if(t==="mousemoveoutside"||t==="clickoutside"){const i=Bw(t,e,n);return Object.keys(i).forEach(s=>{vF(s,document,i[s],r)}),!0}return!1}function mF(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const t=new WeakMap,e=new WeakMap;function n(){t.set(this,!0)}function r(){t.set(this,!0),e.set(this,!0)}function i(D,A,R){const N=D[A];return D[A]=function(){return R.apply(D,arguments),N.apply(D,arguments)},D}function s(D,A){D[A]=Event.prototype[A]}const a=new WeakMap,o=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function u(){var D;return(D=a.get(this))!==null&&D!==void 0?D:null}function c(D,A){o!==void 0&&Object.defineProperty(D,"currentTarget",{configurable:!0,enumerable:!0,get:A??o.get})}const l={bubble:{},capture:{}},h={};function d(){const D=function(A){const{type:R,eventPhase:N,bubbles:L}=A,S=ql(A);if(N===2)return;const M=N===1?"capture":"bubble";let E=S;const _=[];for(;E===null&&(E=window),_.push(E),E!==window;)E=E.parentNode||null;const C=l.capture[R],T=l.bubble[R];if(i(A,"stopPropagation",n),i(A,"stopImmediatePropagation",r),c(A,u),M==="capture"){if(C===void 0)return;for(let F=_.length-1;F>=0&&!t.has(A);--F){const I=_[F],P=C.get(I);if(P!==void 0){a.set(A,I);for(const U of P){if(e.has(A))break;U(A)}}if(F===0&&!L&&T!==void 0){const U=T.get(I);if(U!==void 0)for(const q of U){if(e.has(A))break;q(A)}}}}else if(M==="bubble"){if(T===void 0)return;for(let F=0;F<_.length&&!t.has(A);++F){const I=_[F],P=T.get(I);if(P!==void 0){a.set(A,I);for(const U of P){if(e.has(A))break;U(A)}}}}s(A,"stopPropagation"),s(A,"stopImmediatePropagation"),c(A)};return D.displayName="evtdUnifiedHandler",D}function f(){const D=function(A){const{type:R,eventPhase:N}=A;if(N!==2)return;const L=h[R];L!==void 0&&L.forEach(S=>S(A))};return D.displayName="evtdUnifiedWindowEventHandler",D}const p=d(),g=f();function m(D,A){const R=l[D];return R[A]===void 0&&(R[A]=new Map,window.addEventListener(A,p,D==="capture")),R[A]}function y(D){return h[D]===void 0&&(h[D]=new Set,window.addEventListener(D,g)),h[D]}function b(D,A){let R=D.get(A);return R===void 0&&D.set(A,R=new Set),R}function v(D,A,R,N){const L=l[A][R];if(L!==void 0){const S=L.get(D);if(S!==void 0&&S.has(N))return!0}return!1}function x(D,A){const R=h[D];return!!(R!==void 0&&R.has(A))}function w(D,A,R,N){let L;if(typeof N=="object"&&N.once===!0?L=C=>{k(D,A,L,N),R(C)}:L=R,pF(D,A,L,N))return;const M=N===!0||typeof N=="object"&&N.capture===!0?"capture":"bubble",E=m(M,D),_=b(E,A);if(_.has(L)||_.add(L),A===window){const C=y(D);C.has(L)||C.add(L)}}function k(D,A,R,N){if(gF(D,A,R,N))return;const S=N===!0||typeof N=="object"&&N.capture===!0,M=S?"capture":"bubble",E=m(M,D),_=b(E,A);if(A===window&&!v(A,S?"bubble":"capture",D,R)&&x(D,R)){const T=h[D];T.delete(R),T.size===0&&(window.removeEventListener(D,g),h[D]=void 0)}_.has(R)&&_.delete(R),_.size===0&&E.delete(A),E.size===0&&(window.removeEventListener(D,p,M==="capture"),l[M][D]=void 0)}return{on:w,off:k}}const{on:yF,off:vF}=mF();function g0(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}function No(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}function Lo(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(o)?xF(o,h=>h.test(a)):bF(o,h=>h.test(a));let c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const l=e.slice(a.length);return{value:c,rest:l}}}function bF(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function xF(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function EF(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const DF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wF=(t,e,n)=>{let r;const i=DF[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},_F={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},AF=(t,e,n,r)=>_F[t],CF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},TF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},FF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},SF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},RF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NF=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},LF={ordinalNumber:NF,era:No({values:CF,defaultWidth:"wide"}),quarter:No({values:TF,defaultWidth:"wide",argumentCallback:t=>t-1}),month:No({values:kF,defaultWidth:"wide"}),day:No({values:FF,defaultWidth:"wide"}),dayPeriod:No({values:SF,defaultWidth:"wide",formattingValues:RF,defaultFormattingWidth:"wide"})},MF=/^(\d+)(th|st|nd|rd)?/i,IF=/\d+/i,OF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},PF={any:[/^b/i,/^(a|c)/i]},$F={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},BF={any:[/1/i,/2/i,/3/i,/4/i]},UF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},GF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},HF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},WF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},YF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},XF={ordinalNumber:EF({matchPattern:MF,parsePattern:IF,valueCallback:t=>parseInt(t,10)}),era:Lo({matchPatterns:OF,defaultMatchWidth:"wide",parsePatterns:PF,defaultParseWidth:"any"}),quarter:Lo({matchPatterns:$F,defaultMatchWidth:"wide",parsePatterns:BF,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Lo({matchPatterns:UF,defaultMatchWidth:"wide",parsePatterns:GF,defaultParseWidth:"any"}),day:Lo({matchPatterns:HF,defaultMatchWidth:"wide",parsePatterns:WF,defaultParseWidth:"any"}),dayPeriod:Lo({matchPatterns:zF,defaultMatchWidth:"any",parsePatterns:YF,defaultParseWidth:"any"})},VF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},KF={date:g0({formats:VF,defaultWidth:"full"}),time:g0({formats:qF,defaultWidth:"full"}),dateTime:g0({formats:jF,defaultWidth:"full"})},fj={code:"en-US",formatDistance:wF,formatLong:KF,formatRelative:AF,localize:LF,match:XF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wv(t){return Array.isArray(t)?t:[t]}const Kp={STOP:"STOP"};function Uw(t,e){const n=e(t);t.children!==void 0&&n!==Kp.STOP&&t.children.forEach(r=>Uw(r,e))}function ZF(t,e={}){const{preserveGroup:n=!1}=e,r=[],i=n?a=>{a.isLeaf||(r.push(a.key),s(a.children))}:a=>{a.isLeaf||(a.isGroup||r.push(a.key),s(a.children))};function s(a){a.forEach(i)}return s(t),r}function JF(t,e){const{isLeaf:n}=t;return n!==void 0?n:!e(t)}function QF(t){return t.children}function eS(t){return t.key}function tS(){return!1}function nS(t,e){const{isLeaf:n}=t;return!(n===!1&&!Array.isArray(e(t)))}function rS(t){return t.disabled===!0}function iS(t,e){return t.isLeaf===!1&&!Array.isArray(e(t))}function m0(t){var e;return t==null?[]:Array.isArray(t)?t:(e=t.checkedKeys)!==null&&e!==void 0?e:[]}function y0(t){var e;return t==null||Array.isArray(t)?[]:(e=t.indeterminateKeys)!==null&&e!==void 0?e:[]}function sS(t,e){const n=new Set(t);return e.forEach(r=>{n.has(r)||n.add(r)}),Array.from(n)}function aS(t,e){const n=new Set(t);return e.forEach(r=>{n.has(r)&&n.delete(r)}),Array.from(n)}function oS(t){return(t==null?void 0:t.type)==="group"}function dj(t){const e=new Map;return t.forEach((n,r)=>{e.set(n.key,r)}),n=>{var r;return(r=e.get(n))!==null&&r!==void 0?r:null}}class uS extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function cS(t,e,n,r){return Lh(e.concat(t),n,r,!1)}function lS(t,e){const n=new Set;return t.forEach(r=>{const i=e.treeNodeMap.get(r);if(i!==void 0){let s=i.parent;for(;s!==null&&!(s.disabled||n.has(s.key));)n.add(s.key),s=s.parent}}),n}function hS(t,e,n,r){const i=Lh(e,n,r,!1),s=Lh(t,n,r,!0),a=lS(t,n),o=[];return i.forEach(u=>{(s.has(u)||a.has(u))&&o.push(u)}),o.forEach(u=>i.delete(u)),i}function v0(t,e){const{checkedKeys:n,keysToCheck:r,keysToUncheck:i,indeterminateKeys:s,cascade:a,leafOnly:o,checkStrategy:u,allowNotLoaded:c}=t;if(!a)return r!==void 0?{checkedKeys:sS(n,r),indeterminateKeys:Array.from(s)}:i!==void 0?{checkedKeys:aS(n,i),indeterminateKeys:Array.from(s)}:{checkedKeys:Array.from(n),indeterminateKeys:Array.from(s)};const{levelTreeNodeMap:l}=e;let h;i!==void 0?h=hS(i,n,e,c):r!==void 0?h=cS(r,n,e,c):h=Lh(n,e,c,!1);const d=u==="parent",f=u==="child"||o,p=h,g=new Set,m=Math.max.apply(null,Array.from(l.keys()));for(let y=m;y>=0;y-=1){const b=y===0,v=l.get(y);for(const x of v){if(x.isLeaf)continue;const{key:w,shallowLoaded:k}=x;if(f&&k&&x.children.forEach(N=>{!N.disabled&&!N.isLeaf&&N.shallowLoaded&&p.has(N.key)&&p.delete(N.key)}),x.disabled||!k)continue;let D=!0,A=!1,R=!0;for(const N of x.children){const L=N.key;if(!N.disabled){if(R&&(R=!1),p.has(L))A=!0;else if(g.has(L)){A=!0,D=!1;break}else if(D=!1,A)break}}D&&!R?(d&&x.children.forEach(N=>{!N.disabled&&p.has(N.key)&&p.delete(N.key)}),p.add(w)):A&&g.add(w),b&&f&&p.has(w)&&p.delete(w)}}return{checkedKeys:Array.from(p),indeterminateKeys:Array.from(g)}}function Lh(t,e,n,r){const{treeNodeMap:i,getChildren:s}=e,a=new Set,o=new Set(t);return t.forEach(u=>{const c=i.get(u);c!==void 0&&Uw(c,l=>{if(l.disabled)return Kp.STOP;const{key:h}=l;if(!a.has(h)&&(a.add(h),o.add(h),iS(l.rawNode,s))){if(r)return Kp.STOP;if(!n)throw new uS}})}),o}function fS(t,{includeGroup:e=!1,includeSelf:n=!0},r){var i;const s=r.treeNodeMap;let a=t==null?null:(i=s.get(t))!==null&&i!==void 0?i:null;const o={keyPath:[],treeNodePath:[],treeNode:a};if(a!=null&&a.ignored)return o.treeNode=null,o;for(;a;)!a.ignored&&(e||!a.isGroup)&&o.treeNodePath.push(a),a=a.parent;return o.treeNodePath.reverse(),n||o.treeNodePath.pop(),o.keyPath=o.treeNodePath.map(u=>u.key),o}function dS(t){if(t.length===0)return null;const e=t[0];return e.isGroup||e.ignored||e.disabled?e.getNext():e}function pS(t,e){const n=t.siblings,r=n.length,{index:i}=t;return e?n[(i+1)%r]:i===n.length-1?null:n[i+1]}function _v(t,e,{loop:n=!1,includeDisabled:r=!1}={}){const i=e==="prev"?gS:pS,s={reverse:e==="prev"};let a=!1,o=null;function u(c){if(c!==null){if(c===t){if(!a)a=!0;else if(!t.disabled&&!t.isGroup){o=t;return}}else if((!c.disabled||r)&&!c.ignored&&!c.isGroup){o=c;return}if(c.isGroup){const l=Vm(c,s);l!==null?o=l:u(i(c,n))}else{const l=i(c,!1);if(l!==null)u(l);else{const h=mS(c);h!=null&&h.isGroup?u(i(h,n)):n&&u(i(c,!0))}}}}return u(t),o}function gS(t,e){const n=t.siblings,r=n.length,{index:i}=t;return e?n[(i-1+r)%r]:i===0?null:n[i-1]}function mS(t){return t.parent}function Vm(t,e={}){const{reverse:n=!1}=e,{children:r}=t;if(r){const{length:i}=r,s=n?i-1:0,a=n?-1:i,o=n?-1:1;for(let u=s;u!==a;u+=o){const c=r[u];if(!c.disabled&&!c.ignored)if(c.isGroup){const l=Vm(c,e);if(l!==null)return l}else return c}}return null}const yS={getChild(){return this.ignored?null:Vm(this)},getParent(){const{parent:t}=this;return t!=null&&t.isGroup?t.getParent():t},getNext(t={}){return _v(this,"next",t)},getPrev(t={}){return _v(this,"prev",t)}};function vS(t,e){const n=e?new Set(e):void 0,r=[];function i(s){s.forEach(a=>{r.push(a),!(a.isLeaf||!a.children||a.ignored)&&(a.isGroup||n===void 0||n.has(a.key))&&i(a.children)})}return i(t),r}function bS(t,e){const n=t.key;for(;e;){if(e.key===n)return!0;e=e.parent}return!1}function Gw(t,e,n,r,i,s=null,a=0){const o=[];return t.forEach((u,c)=>{var l;const h=Object.create(r);if(h.rawNode=u,h.siblings=o,h.level=a,h.index=c,h.isFirstChild=c===0,h.isLastChild=c+1===t.length,h.parent=s,!h.ignored){const d=i(u);Array.isArray(d)&&(h.children=Gw(d,e,n,r,i,h,a+1))}o.push(h),e.set(h.key,h),n.has(a)||n.set(a,[]),(l=n.get(a))===null||l===void 0||l.push(h)}),o}function pj(t,e={}){var n;const r=new Map,i=new Map,{getDisabled:s=rS,getIgnored:a=tS,getIsGroup:o=oS,getKey:u=eS}=e,c=(n=e.getChildren)!==null&&n!==void 0?n:QF,l=e.ignoreEmptyChildren?x=>{const w=c(x);return Array.isArray(w)?w.length?w:null:w}:c,h=Object.assign({get key(){return u(this.rawNode)},get disabled(){return s(this.rawNode)},get isGroup(){return o(this.rawNode)},get isLeaf(){return JF(this.rawNode,l)},get shallowLoaded(){return nS(this.rawNode,l)},get ignored(){return a(this.rawNode)},contains(x){return bS(this,x)}},yS),d=Gw(t,r,i,h,l);function f(x){if(x==null)return null;const w=r.get(x);return w&&!w.isGroup&&!w.ignored?w:null}function p(x){if(x==null)return null;const w=r.get(x);return w&&!w.ignored?w:null}function g(x,w){const k=p(x);return k?k.getPrev(w):null}function m(x,w){const k=p(x);return k?k.getNext(w):null}function y(x){const w=p(x);return w?w.getParent():null}function b(x){const w=p(x);return w?w.getChild():null}const v={treeNodes:d,treeNodeMap:r,levelTreeNodeMap:i,maxLevel:Math.max(...i.keys()),getChildren:l,getFlattenedNodes(x){return vS(d,x)},getNode:f,getPrev:g,getNext:m,getParent:y,getChild:b,getFirstAvailableNode(){return dS(d)},getPath(x,w={}){return fS(x,w,v)},getCheckedKeys(x,w={}){const{cascade:k=!0,leafOnly:D=!1,checkStrategy:A="all",allowNotLoaded:R=!1}=w;return v0({checkedKeys:m0(x),indeterminateKeys:y0(x),cascade:k,leafOnly:D,checkStrategy:A,allowNotLoaded:R},v)},check(x,w,k={}){const{cascade:D=!0,leafOnly:A=!1,checkStrategy:R="all",allowNotLoaded:N=!1}=k;return v0({checkedKeys:m0(w),indeterminateKeys:y0(w),keysToCheck:x==null?[]:wv(x),cascade:D,leafOnly:A,checkStrategy:R,allowNotLoaded:N},v)},uncheck(x,w,k={}){const{cascade:D=!0,leafOnly:A=!1,checkStrategy:R="all",allowNotLoaded:N=!1}=k;return v0({checkedKeys:m0(w),indeterminateKeys:y0(w),keysToUncheck:x==null?[]:wv(x),cascade:D,leafOnly:A,checkStrategy:R,allowNotLoaded:N},v)},getNonLeafKeys(x={}){return ZF(d,x)}};return v}function Bs(){return Bs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bs.apply(this,arguments)}function xS(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,sc(t,e)}function Zp(t){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zp(t)}function sc(t,e){return sc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sc(t,e)}function ES(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jl(t,e,n){return ES()?jl=Reflect.construct.bind():jl=function(i,s,a){var o=[null];o.push.apply(o,s);var u=Function.bind.apply(i,o),c=new u;return a&&sc(c,a.prototype),c},jl.apply(null,arguments)}function DS(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Jp(t){var e=typeof Map=="function"?new Map:void 0;return Jp=function(r){if(r===null||!DS(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return jl(r,arguments,Zp(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),sc(i,r)},Jp(t)}var wS=/%[sdj%]/g,_S=function(){};function Qp(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function ar(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=0,s=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var a=t.replace(wS,function(o){if(o==="%%")return"%";if(i>=s)return o;switch(o){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}break;default:return o}});return a}return t}function AS(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Ht(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||AS(e)&&typeof t=="string"&&!t)}function CS(t,e,n){var r=[],i=0,s=t.length;function a(o){r.push.apply(r,o||[]),i++,i===s&&n(r)}t.forEach(function(o){e(o,a)})}function Av(t,e,n){var r=0,i=t.length;function s(a){if(a&&a.length){n(a);return}var o=r;r=r+1,o<i?e(t[o],s):n([])}s([])}function TS(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n]||[])}),e}var Cv=(function(t){xS(e,t);function e(n,r){var i;return i=t.call(this,"Async Validation Error")||this,i.errors=n,i.fields=r,i}return e})(Jp(Error));function kS(t,e,n,r,i){if(e.first){var s=new Promise(function(d,f){var p=function(y){return r(y),y.length?f(new Cv(y,Qp(y))):d(i)},g=TS(t);Av(g,n,p)});return s.catch(function(d){return d}),s}var a=e.firstFields===!0?Object.keys(t):e.firstFields||[],o=Object.keys(t),u=o.length,c=0,l=[],h=new Promise(function(d,f){var p=function(m){if(l.push.apply(l,m),c++,c===u)return r(l),l.length?f(new Cv(l,Qp(l))):d(i)};o.length||(r(l),d(i)),o.forEach(function(g){var m=t[g];a.indexOf(g)!==-1?Av(m,n,p):CS(m,n,p)})});return h.catch(function(d){return d}),h}function FS(t){return!!(t&&t.message!==void 0)}function SS(t,e){for(var n=t,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function Tv(t,e){return function(n){var r;return t.fullFields?r=SS(e,t.fullFields):r=e[n.field||t.fullField],FS(n)?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||t.fullField}}}function kv(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];typeof r=="object"&&typeof t[n]=="object"?t[n]=Bs({},t[n],r):t[n]=r}}return t}var Hw=function(e,n,r,i,s,a){e.required&&(!r.hasOwnProperty(e.field)||Ht(n,a||e.type))&&i.push(ar(s.messages.required,e.fullField))},RS=function(e,n,r,i,s){(/^\s+$/.test(n)||n==="")&&i.push(ar(s.messages.whitespace,e.fullField))},il,NS=(function(){if(il)return il;var t="[a-fA-F\\d:]",e=function(x){return x&&x.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+n+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+n+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+n+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+n+"$)|(?:^"+i+"$)"),a=new RegExp("^"+n+"$"),o=new RegExp("^"+i+"$"),u=function(x){return x&&x.exact?s:new RegExp("(?:"+e(x)+n+e(x)+")|(?:"+e(x)+i+e(x)+")","g")};u.v4=function(v){return v&&v.exact?a:new RegExp(""+e(v)+n+e(v),"g")},u.v6=function(v){return v&&v.exact?o:new RegExp(""+e(v)+i+e(v),"g")};var c="(?:(?:[a-z]+:)?//)",l="(?:\\S+(?::\\S*)?@)?",h=u.v4().source,d=u.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",m="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',b="(?:"+c+"|www\\.)"+l+"(?:localhost|"+h+"|"+d+"|"+f+p+g+")"+m+y;return il=new RegExp("(?:^"+b+"$)","i"),il}),Fv={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},nu={integer:function(e){return nu.number(e)&&parseInt(e,10)===e},float:function(e){return nu.number(e)&&!nu.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!nu.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Fv.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(NS())},hex:function(e){return typeof e=="string"&&!!e.match(Fv.hex)}},LS=function(e,n,r,i,s){if(e.required&&n===void 0){Hw(e,n,r,i,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;a.indexOf(o)>-1?nu[o](n)||i.push(ar(s.messages.types[o],e.fullField,e.type)):o&&typeof n!==e.type&&i.push(ar(s.messages.types[o],e.fullField,e.type))},MS=function(e,n,r,i,s){var a=typeof e.len=="number",o=typeof e.min=="number",u=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=n,h=null,d=typeof n=="number",f=typeof n=="string",p=Array.isArray(n);if(d?h="number":f?h="string":p&&(h="array"),!h)return!1;p&&(l=n.length),f&&(l=n.replace(c,"_").length),a?l!==e.len&&i.push(ar(s.messages[h].len,e.fullField,e.len)):o&&!u&&l<e.min?i.push(ar(s.messages[h].min,e.fullField,e.min)):u&&!o&&l>e.max?i.push(ar(s.messages[h].max,e.fullField,e.max)):o&&u&&(l<e.min||l>e.max)&&i.push(ar(s.messages[h].range,e.fullField,e.min,e.max))},ba="enum",IS=function(e,n,r,i,s){e[ba]=Array.isArray(e[ba])?e[ba]:[],e[ba].indexOf(n)===-1&&i.push(ar(s.messages[ba],e.fullField,e[ba].join(", ")))},OS=function(e,n,r,i,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||i.push(ar(s.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(n)||i.push(ar(s.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},Ve={required:Hw,whitespace:RS,type:LS,range:MS,enum:IS,pattern:OS},PS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n,"string")&&!e.required)return r();Ve.required(e,n,i,a,s,"string"),Ht(n,"string")||(Ve.type(e,n,i,a,s),Ve.range(e,n,i,a,s),Ve.pattern(e,n,i,a,s),e.whitespace===!0&&Ve.whitespace(e,n,i,a,s))}r(a)},$S=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n)&&!e.required)return r();Ve.required(e,n,i,a,s),n!==void 0&&Ve.type(e,n,i,a,s)}r(a)},BS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(n===""&&(n=void 0),Ht(n)&&!e.required)return r();Ve.required(e,n,i,a,s),n!==void 0&&(Ve.type(e,n,i,a,s),Ve.range(e,n,i,a,s))}r(a)},US=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n)&&!e.required)return r();Ve.required(e,n,i,a,s),n!==void 0&&Ve.type(e,n,i,a,s)}r(a)},GS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n)&&!e.required)return r();Ve.required(e,n,i,a,s),Ht(n)||Ve.type(e,n,i,a,s)}r(a)},HS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n)&&!e.required)return r();Ve.required(e,n,i,a,s),n!==void 0&&(Ve.type(e,n,i,a,s),Ve.range(e,n,i,a,s))}r(a)},WS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n)&&!e.required)return r();Ve.required(e,n,i,a,s),n!==void 0&&(Ve.type(e,n,i,a,s),Ve.range(e,n,i,a,s))}r(a)},zS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(n==null&&!e.required)return r();Ve.required(e,n,i,a,s,"array"),n!=null&&(Ve.type(e,n,i,a,s),Ve.range(e,n,i,a,s))}r(a)},YS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n)&&!e.required)return r();Ve.required(e,n,i,a,s),n!==void 0&&Ve.type(e,n,i,a,s)}r(a)},XS="enum",VS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n)&&!e.required)return r();Ve.required(e,n,i,a,s),n!==void 0&&Ve[XS](e,n,i,a,s)}r(a)},qS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n,"string")&&!e.required)return r();Ve.required(e,n,i,a,s),Ht(n,"string")||Ve.pattern(e,n,i,a,s)}r(a)},jS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n,"date")&&!e.required)return r();if(Ve.required(e,n,i,a,s),!Ht(n,"date")){var u;n instanceof Date?u=n:u=new Date(n),Ve.type(e,u,i,a,s),u&&Ve.range(e,u.getTime(),i,a,s)}}r(a)},KS=function(e,n,r,i,s){var a=[],o=Array.isArray(n)?"array":typeof n;Ve.required(e,n,i,a,s,o),r(a)},b0=function(e,n,r,i,s){var a=e.type,o=[],u=e.required||!e.required&&i.hasOwnProperty(e.field);if(u){if(Ht(n,a)&&!e.required)return r();Ve.required(e,n,i,o,s,a),Ht(n,a)||Ve.type(e,n,i,o,s)}r(o)},ZS=function(e,n,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ht(n)&&!e.required)return r();Ve.required(e,n,i,a,s)}r(a)},Vu={string:PS,method:$S,number:BS,boolean:US,regexp:GS,integer:HS,float:WS,array:zS,object:YS,enum:VS,pattern:qS,date:jS,url:b0,hex:b0,email:b0,required:KS,any:ZS};function eg(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var tg=eg(),id=(function(){function t(n){this.rules=null,this._messages=tg,this.define(n)}var e=t.prototype;return e.define=function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(s){var a=r[s];i.rules[s]=Array.isArray(a)?a:[a]})},e.messages=function(r){return r&&(this._messages=kv(eg(),r)),this._messages},e.validate=function(r,i,s){var a=this;i===void 0&&(i={}),s===void 0&&(s=function(){});var o=r,u=i,c=s;if(typeof u=="function"&&(c=u,u={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,o),Promise.resolve(o);function l(g){var m=[],y={};function b(x){if(Array.isArray(x)){var w;m=(w=m).concat.apply(w,x)}else m.push(x)}for(var v=0;v<g.length;v++)b(g[v]);m.length?(y=Qp(m),c(m,y)):c(null,o)}if(u.messages){var h=this.messages();h===tg&&(h=eg()),kv(h,u.messages),u.messages=h}else u.messages=this.messages();var d={},f=u.keys||Object.keys(this.rules);f.forEach(function(g){var m=a.rules[g],y=o[g];m.forEach(function(b){var v=b;typeof v.transform=="function"&&(o===r&&(o=Bs({},o)),y=o[g]=v.transform(y)),typeof v=="function"?v={validator:v}:v=Bs({},v),v.validator=a.getValidationMethod(v),v.validator&&(v.field=g,v.fullField=v.fullField||g,v.type=a.getType(v),d[g]=d[g]||[],d[g].push({rule:v,value:y,source:o,field:g}))})});var p={};return kS(d,u,function(g,m){var y=g.rule,b=(y.type==="object"||y.type==="array")&&(typeof y.fields=="object"||typeof y.defaultField=="object");b=b&&(y.required||!y.required&&g.value),y.field=g.field;function v(k,D){return Bs({},D,{fullField:y.fullField+"."+k,fullFields:y.fullFields?[].concat(y.fullFields,[k]):[k]})}function x(k){k===void 0&&(k=[]);var D=Array.isArray(k)?k:[k];!u.suppressWarning&&D.length&&t.warning("async-validator:",D),D.length&&y.message!==void 0&&(D=[].concat(y.message));var A=D.map(Tv(y,o));if(u.first&&A.length)return p[y.field]=1,m(A);if(!b)m(A);else{if(y.required&&!g.value)return y.message!==void 0?A=[].concat(y.message).map(Tv(y,o)):u.error&&(A=[u.error(y,ar(u.messages.required,y.field))]),m(A);var R={};y.defaultField&&Object.keys(g.value).map(function(S){R[S]=y.defaultField}),R=Bs({},R,g.rule.fields);var N={};Object.keys(R).forEach(function(S){var M=R[S],E=Array.isArray(M)?M:[M];N[S]=E.map(v.bind(null,S))});var L=new t(N);L.messages(u.messages),g.rule.options&&(g.rule.options.messages=u.messages,g.rule.options.error=u.error),L.validate(g.value,g.rule.options||u,function(S){var M=[];A&&A.length&&M.push.apply(M,A),S&&S.length&&M.push.apply(M,S),m(M.length?M:null)})}}var w;if(y.asyncValidator)w=y.asyncValidator(y,g.value,x,g.source,u);else if(y.validator){try{w=y.validator(y,g.value,x,g.source,u)}catch(k){console.error==null||console.error(k),u.suppressValidatorError||setTimeout(function(){throw k},0),x(k.message)}w===!0?x():w===!1?x(typeof y.message=="function"?y.message(y.fullField||y.field):y.message||(y.fullField||y.field)+" fails"):w instanceof Array?x(w):w instanceof Error&&x(w.message)}w&&w.then&&w.then(function(){return x()},function(k){return x(k)})},function(g){l(g)},o)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Vu.hasOwnProperty(r.type))throw new Error(ar("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),s=i.indexOf("message");return s!==-1&&i.splice(s,1),i.length===1&&i[0]==="required"?Vu.required:Vu[this.getType(r)]||void 0},t})();id.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Vu[e]=n};id.warning=_S;id.messages=tg;id.validators=Vu;function Ln(t){this.content=t}Ln.prototype={constructor:Ln,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Ln(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ln(n)},addToStart:function(t,e){return new Ln([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ln(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Ln(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ln.from(t),t.size?new Ln(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ln.from(t),t.size?new Ln(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ln.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ln.from=function(t){if(t instanceof Ln)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ln(e)};var js={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Mh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},JS=typeof navigator<"u"&&/Mac/.test(navigator.platform),QS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var dn=0;dn<10;dn++)js[48+dn]=js[96+dn]=String(dn);for(var dn=1;dn<=24;dn++)js[dn+111]="F"+dn;for(var dn=65;dn<=90;dn++)js[dn]=String.fromCharCode(dn+32),Mh[dn]=String.fromCharCode(dn);for(var x0 in js)Mh.hasOwnProperty(x0)||(Mh[x0]=js[x0]);function gj(t){var e=JS&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||QS&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Mh:js)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var Ih=200,Tn=function(){};Tn.prototype.append=function(e){return e.length?(e=Tn.from(e),!this.length&&e||e.length<Ih&&this.leafAppend(e)||this.length<Ih&&e.leafPrepend(this)||this.appendInner(e)):this};Tn.prototype.prepend=function(e){return e.length?Tn.from(e).append(this):this};Tn.prototype.appendInner=function(e){return new eR(this,e)};Tn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Tn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Tn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Tn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Tn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(e(s,a))},n,r),i};Tn.from=function(e){return e instanceof Tn?e:e&&e.length?new Ww(e):Tn.empty};var Ww=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,a,o){for(var u=s;u<a;u++)if(i(this.values[u],o+u)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,a,o){for(var u=s-1;u>=a;u--)if(i(this.values[u],o+u)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Ih)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Ih)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Tn);Tn.empty=new Ww([]);var eR=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,a){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(s,o),a)===!1||s>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,s)-o,a+o)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,a){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(s,o)-o,a+o)===!1||s<o&&this.left.forEachInvertedInner(r,Math.min(i,o),s,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Tn);const us=()=>new Map,mj=t=>{const e=us();return t.forEach((n,r)=>{e.set(r,n)}),e},tR=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},nR=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},yj=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},zw=()=>new Set,vj=t=>t[t.length-1],bj=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},rR=Array.from,qm=(t,e)=>{for(let n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},Yw=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},iR=(t,e)=>{const n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n},sd=Array.isArray;class xj{constructor(){this._observers=us()}on(e,n){return tR(this._observers,e,zw).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return rR((this._observers.get(e)||us()).values()).forEach(r=>r(...n))}destroy(){this._observers=us()}}const hs=Math.floor,sR=Math.abs,aR=(t,e)=>t<e?t:e,Xw=(t,e)=>t>e?t:e,Vw=t=>t!==0?t<0:1/t<0,Ej=1,Dj=2,wj=4,_j=8,Aj=32,qw=64,fs=128,oR=1<<29,Cj=31,ng=63,Ys=127,uR=2147483647,Oh=Number.MAX_SAFE_INTEGER,Sv=Number.MIN_SAFE_INTEGER,cR=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&hs(t)===t),jw=String.fromCharCode,lR=t=>t.toLowerCase(),hR=/^\s*/g,fR=t=>t.replace(hR,""),dR=/([A-Z])/g,Rv=(t,e)=>fR(t.replace(dR,n=>`${e}${lR(n)}`)),pR=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},ac=typeof TextEncoder<"u"?new TextEncoder:null,gR=t=>ac.encode(t),mR=ac?gR:pR;let qu=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});qu&&qu.decode(new Uint8Array).length===1&&(qu=null);const yR=(t,e)=>iR(e,()=>t).join("");class Tc{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const vR=()=>new Tc,bR=t=>{const e=vR();return t(e),ad(e)},xR=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},ad=t=>{const e=new Uint8Array(xR(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},ER=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Xw(n,e)*2),t.cpos=0)},Kt=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},Tj=Kt,ds=(t,e)=>{for(;e>Ys;)Kt(t,fs|Ys&e),e=hs(e/128);Kt(t,Ys&e)},jm=(t,e)=>{const n=Vw(e);for(n&&(e=-e),Kt(t,(e>ng?fs:0)|(n?qw:0)|ng&e),e=hs(e/64);e>0;)Kt(t,(e>Ys?fs:0)|Ys&e),e=hs(e/128)},rg=new Uint8Array(3e4),DR=rg.length/3,wR=(t,e)=>{if(e.length<DR){const n=ac.encodeInto(e,rg).written||0;ds(t,n);for(let r=0;r<n;r++)Kt(t,rg[r])}else Zw(t,mR(e))},_R=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;ds(t,r);for(let i=0;i<r;i++)Kt(t,n.codePointAt(i))},ig=ac&&ac.encodeInto?wR:_R,Kw=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=aR(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Xw(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},Zw=(t,e)=>{ds(t,e.byteLength),Kw(t,e)},Km=(t,e)=>{ER(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},AR=(t,e)=>Km(t,4).setFloat32(0,e,!1),CR=(t,e)=>Km(t,8).setFloat64(0,e,!1),TR=(t,e)=>Km(t,8).setBigInt64(0,e,!1),Nv=new DataView(new ArrayBuffer(4)),kR=t=>(Nv.setFloat32(0,t),Nv.getFloat32(0)===t),sg=(t,e)=>{switch(typeof e){case"string":Kt(t,119),ig(t,e);break;case"number":cR(e)&&sR(e)<=uR?(Kt(t,125),jm(t,e)):kR(e)?(Kt(t,124),AR(t,e)):(Kt(t,123),CR(t,e));break;case"bigint":Kt(t,122),TR(t,e);break;case"object":if(e===null)Kt(t,126);else if(sd(e)){Kt(t,117),ds(t,e.length);for(let n=0;n<e.length;n++)sg(t,e[n])}else if(e instanceof Uint8Array)Kt(t,116),Zw(t,e);else{Kt(t,118);const n=Object.keys(e);ds(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];ig(t,i),sg(t,e[i])}}break;case"boolean":Kt(t,e?120:121);break;default:Kt(t,127)}};class kj extends Tc{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&ds(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Lv=t=>{t.count>0&&(jm(t.encoder,t.count===1?t.s:-t.s),t.count>1&&ds(t.encoder,t.count-2))};class FR{constructor(){this.encoder=new Tc,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Lv(this),this.count=1,this.s=e)}toUint8Array(){return Lv(this),ad(this.encoder)}}const Mv=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);jm(t.encoder,e),t.count>1&&ds(t.encoder,t.count-2)}};class Fj{constructor(){this.encoder=new Tc,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Mv(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Mv(this),ad(this.encoder)}}class Sj{constructor(){this.sarr=[],this.s="",this.lensE=new FR}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Tc;return this.sarr.push(this.s),this.s="",ig(e,this.sarr.join("")),Kw(e,this.lensE.toUint8Array()),ad(e)}}const bo=t=>new Error(t),SR=()=>{throw bo("Method unimplemented")},Jw=()=>{throw bo("Unexpected case")},Qw=bo("Unexpected end of array"),e_=bo("Integer out of Range");class od{constructor(e){this.arr=e,this.pos=0}}const Rj=t=>new od(t),RR=t=>t.pos!==t.arr.length,NR=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},t_=t=>NR(t,Ks(t)),ag=t=>t.arr[t.pos++],Ks=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&Ys)*n,n*=128,i<fs)return e;if(e>Oh)throw e_}throw Qw},Zm=t=>{let e=t.arr[t.pos++],n=e&ng,r=64;const i=(e&qw)>0?-1:1;if((e&fs)===0)return i*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&Ys)*r,r*=128,e<fs)return i*n;if(n>Oh)throw e_}throw Qw},LR=t=>{let e=Ks(t);if(e===0)return"";{let n=String.fromCodePoint(ag(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(ag(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},MR=t=>qu.decode(t_(t)),og=qu?MR:LR,Jm=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},IR=t=>Jm(t,4).getFloat32(0,!1),OR=t=>Jm(t,8).getFloat64(0,!1),PR=t=>Jm(t,8).getBigInt64(0,!1),$R=[t=>{},t=>null,Zm,IR,OR,PR,t=>!1,t=>!0,og,t=>{const e=Ks(t),n={};for(let r=0;r<e;r++){const i=og(t);n[i]=Iv(t)}return n},t=>{const e=Ks(t),n=[];for(let r=0;r<e;r++)n.push(Iv(t));return n},t_],Iv=t=>$R[127-ag(t)](t);class Nj extends od{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),RR(this)?this.count=Ks(this)+1:this.count=-1),this.count--,this.s}}class BR extends od{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Zm(this);const e=Vw(this.s);this.count=1,e&&(this.s=-this.s,this.count=Ks(this)+2)}return this.count--,this.s}}class Lj extends od{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Zm(this),n=e&1;this.diff=hs(e/2),this.count=1,n&&(this.count=Ks(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Mj{constructor(e){this.decoder=new BR(e),this.str=og(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const UR=crypto.getRandomValues.bind(crypto),GR=Math.random,HR=()=>UR(new Uint32Array(1))[0],Ij=t=>t[hs(GR()*t.length)],WR="10000000-1000-4000-8000"+-1e11,Oj=()=>WR.replace(/[018]/g,t=>(t^HR()&15>>t/4).toString(16)),Pj=Date.now,$j=t=>new Promise(t);Promise.all.bind(Promise);const Ov=t=>t===void 0?null:t;class zR{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let n_=new zR,YR=!0;try{typeof localStorage<"u"&&localStorage&&(n_=localStorage,YR=!1)}catch{}const XR=n_,oc=Symbol("Equality"),r_=(t,e)=>{var n;return t===e||!!((n=t==null?void 0:t[oc])!=null&&n.call(t,e))||!1},VR=t=>typeof t=="object",Bj=Object.assign,qR=Object.keys,Uj=(t,e)=>{for(const n in t)e(t[n],n)},Ph=t=>qR(t).length,Gj=t=>{for(const e in t)return!1;return!0},kc=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},Qm=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Hj=(t,e)=>t===e||Ph(t)===Ph(e)&&kc(t,(n,r)=>(n!==void 0||Qm(e,r))&&r_(e[r],n)),jR=Object.freeze,KR=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&KR(t[e])}return jR(t)},ZR=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&ZR(t,e,n+1)}},Wj=t=>t,Kl=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor&&(t.constructor||Object)!==(e.constructor||Object))return!1;if(t[oc]!=null)return t[oc](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Kl(t.get(n),e.get(n)))return!1;break}case void 0:case Object:if(Ph(t)!==Ph(e))return!1;for(const n in t)if(!Qm(t,n)||!Kl(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Kl(t[n],e[n]))return!1;break;default:return!1}return!0},JR=(t,e)=>e.includes(t);var i_={};const Qa=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",QR=typeof window<"u"&&typeof document<"u"&&!Qa;let Qr;const eN=()=>{if(Qr===void 0)if(Qa){Qr=us();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&Qr.set(e,""),e=r):e!==null&&(Qr.set(e,r),e=null)}e!==null&&Qr.set(e,"")}else typeof location=="object"?(Qr=us(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Qr.set(`--${Rv(e,"-")}`,n),Qr.set(`-${Rv(e,"-")}`,n)}})):Qr=us();return Qr},ug=t=>eN().has(t),cg=t=>Ov(Qa?i_[t.toUpperCase().replaceAll("-","_")]:XR.getItem(t)),s_=t=>ug("--"+t)||cg(t)!==null,tN=s_("production"),nN=Qa&&JR(i_.FORCE_COLOR,["true","1","2"]),rN=nN||!ug("--no-colors")&&!s_("no-color")&&(!Qa||process.stdout.isTTY)&&(!Qa||ug("--color")||cg("COLORTERM")!==null||(cg("TERM")||"").includes("color")),iN=t=>new Uint8Array(t),sN=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=jw(t[n]);return btoa(e)},aN=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),zj=QR?sN:aN,Yj=t=>{const e=iN(t.byteLength);return e.set(t),e},Xj=t=>bR(e=>sg(e,t));class oN{constructor(e,n){this.left=e,this.right=n}}const Fi=(t,e)=>new oN(t,e),Pv=t=>t.next()>=.5,E0=(t,e,n)=>hs(t.next()*(n+1-e)+e),a_=(t,e,n)=>hs(t.next()*(n+1-e)+e),e1=(t,e,n)=>a_(t,e,n),uN=t=>jw(e1(t,97,122)),cN=(t,e=0,n=20)=>{const r=e1(t,e,n);let i="";for(let s=0;s<r;s++)i+=uN(t);return i},D0=(t,e)=>e[e1(t,0,e.length-1)],lN=Symbol("0schema");class hN{constructor(){this._rerrs=[]}extend(e,n,r,i=null){this._rerrs.push({path:e,expected:n,has:r,message:i})}toString(){const e=[];for(let n=this._rerrs.length-1;n>0;n--){const r=this._rerrs[n];e.push(yR(" ",(this._rerrs.length-n)*2)+`${r.path!=null?`[${r.path}] `:""}${r.has} doesn't match ${r.expected}. ${r.message}`)}return e.join(`
`)}}const lg=(t,e)=>t===e?!0:t==null||e==null||t.constructor!==e.constructor?!1:t[oc]?r_(t,e):sd(t)?qm(t,n=>Yw(e,r=>lg(n,r))):VR(t)?kc(t,(n,r)=>lg(n,e[r])):!1;class kn{extends(e){let[n,r]=[this.shape,e.shape];return this.constructor._dilutes&&([r,n]=[n,r]),lg(n,r)}equals(e){return this.constructor===e.constructor&&Kl(this.shape,e.shape)}[lN](){return!0}[oc](e){return this.equals(e)}validate(e){return this.check(e)}check(e,n){SR()}get nullable(){return xo(this,fd)}get optional(){return new c_(this)}cast(e){return $v(e,this),e}expect(e){return $v(e,this),e}}be(kn,"_dilutes",!1);class t1 extends kn{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n=void 0){const r=(e==null?void 0:e.constructor)===this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name,(e==null?void 0:e.constructor)!==this.shape?"Constructor match failed":"Check failed")),r}}const $t=(t,e=null)=>new t1(t,e);$t(t1);class n1 extends kn{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape(e);return!r&&(n==null||n.extend(null,"custom prop",e==null?void 0:e.constructor.name,"failed to check custom prop")),r}}const en=t=>new n1(t);$t(n1);class ud extends kn{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape.some(i=>i===e);return!r&&(n==null||n.extend(null,this.shape.join(" | "),e.toString())),r}}const cd=(...t)=>new ud(t),o_=$t(ud),fN=RegExp.escape||(t=>t.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),u_=t=>{if(eo.check(t))return[fN(t)];if(o_.check(t))return t.shape.map(e=>e+"");if(v_.check(t))return["[+-]?\\d+.?\\d*"];if(b_.check(t))return[".*"];if(Bh.check(t))return t.shape.map(u_).flat(1);Jw()};class dN extends kn{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(u_).map(n=>`(${n.join("|")})`).join("")+"$")}check(e,n){const r=this._r.exec(e)!=null;return!r&&(n==null||n.extend(null,this._r.toString(),e.toString(),"String doesn't match string template.")),r}}$t(dN);const pN=Symbol("optional");class c_ extends kn{constructor(e){super(),this.shape=e}check(e,n){const r=e===void 0||this.shape.check(e);return!r&&(n==null||n.extend(null,"undefined (optional)","()")),r}get[pN](){return!0}}const gN=$t(c_);class mN extends kn{check(e,n){return n==null||n.extend(null,"never",typeof e),!1}}$t(mN);const Qf=class Qf extends kn{constructor(e,n=!1){super(),this.shape=e,this._isPartial=n}get partial(){return new Qf(this.shape,!0)}check(e,n){return e==null?(n==null||n.extend(null,"object","null"),!1):kc(this.shape,(r,i)=>{const s=this._isPartial&&!Qm(e,i)||r.check(e[i],n);return!s&&(n==null||n.extend(i.toString(),r.toString(),typeof e[i],"Object property does not match")),s})}};be(Qf,"_dilutes",!0);let $h=Qf;const yN=t=>new $h(t),vN=$t($h),bN=en(t=>t!=null&&(t.constructor===Object||t.constructor==null));class l_ extends kn{constructor(e,n){super(),this.shape={keys:e,values:n}}check(e,n){return e!=null&&kc(e,(r,i)=>{const s=this.shape.keys.check(i,n);return!s&&(n==null||n.extend(i+"","Record",typeof e,s?"Key doesn't match schema":"Value doesn't match value")),s&&this.shape.values.check(r,n)})}}const h_=(t,e)=>new l_(t,e),xN=$t(l_);class f_ extends kn{constructor(e){super(),this.shape=e}check(e,n){return e!=null&&kc(this.shape,(r,i)=>{const s=r.check(e[i],n);return!s&&(n==null||n.extend(i.toString(),"Tuple",typeof r)),s})}}const EN=(...t)=>new f_(t);$t(f_);class d_ extends kn{constructor(e){super(),this.shape=e.length===1?e[0]:new ld(e)}check(e,n){const r=sd(e)&&qm(e,i=>this.shape.check(i));return!r&&(n==null||n.extend(null,"Array","")),r}}const p_=(...t)=>new d_(t),DN=$t(d_),wN=en(t=>sd(t));class g_ extends kn{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n){const r=e instanceof this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name)),r}}const _N=(t,e=null)=>new g_(t,e);$t(g_);const AN=_N(kn);class CN extends kn{constructor(e){super(),this.len=e.length-1,this.args=EN(...e.slice(-1)),this.res=e[this.len]}check(e,n){const r=e.constructor===Function&&e.length<=this.len;return!r&&(n==null||n.extend(null,"function",typeof e)),r}}const TN=$t(CN),kN=en(t=>typeof t=="function");class FN extends kn{constructor(e){super(),this.shape=e}check(e,n){const r=qm(this.shape,i=>i.check(e,n));return!r&&(n==null||n.extend(null,"Intersectinon",typeof e)),r}}$t(FN,t=>t.shape.length>0);class ld extends kn{constructor(e){super(),this.shape=e}check(e,n){const r=Yw(this.shape,i=>i.check(e,n));return n==null||n.extend(null,"Union",typeof e),r}}be(ld,"_dilutes",!0);const xo=(...t)=>t.findIndex(e=>Bh.check(e))>=0?xo(...t.map(e=>uc(e)).map(e=>Bh.check(e)?e.shape:[e]).flat(1)):t.length===1?t[0]:new ld(t),Bh=$t(ld),m_=()=>!0,Uh=en(m_),SN=$t(n1,t=>t.shape===m_),r1=en(t=>typeof t=="bigint"),RN=en(t=>t===r1),y_=en(t=>typeof t=="symbol");en(t=>t===y_);const Pa=en(t=>typeof t=="number"),v_=en(t=>t===Pa),eo=en(t=>typeof t=="string"),b_=en(t=>t===eo),hd=en(t=>typeof t=="boolean"),NN=en(t=>t===hd),x_=cd(void 0);$t(ud,t=>t.shape.length===1&&t.shape[0]===void 0);cd(void 0);const fd=cd(null),LN=$t(ud,t=>t.shape.length===1&&t.shape[0]===null);$t(Uint8Array);$t(t1,t=>t.shape===Uint8Array);const MN=xo(Pa,eo,fd,x_,r1,hd,y_);(()=>{const t=p_(Uh),e=h_(eo,Uh),n=xo(Pa,eo,fd,hd,t,e);return t.shape=n,e.shape.values=n,n})();const uc=t=>{if(AN.check(t))return t;if(bN.check(t)){const e={};for(const n in t)e[n]=uc(t[n]);return yN(e)}else{if(wN.check(t))return xo(...t.map(uc));if(MN.check(t))return cd(t);if(kN.check(t))return $t(t)}Jw()},$v=tN?()=>{}:(t,e)=>{const n=new hN;if(!e.check(t,n))throw bo(`Expected value to be of type ${e.constructor.name}.
${n.toString()}`)};class IN{constructor(e){this.patterns=[],this.$state=e}if(e,n){return this.patterns.push({if:uc(e),h:n}),this}else(e){return this.if(Uh,e)}done(){return(e,n)=>{for(let r=0;r<this.patterns.length;r++){const i=this.patterns[r];if(i.if.check(e))return i.h(e,n)}throw bo("Unhandled pattern")}}}const ON=t=>new IN(t),E_=ON(Uh).if(v_,(t,e)=>E0(e,Sv,Oh)).if(b_,(t,e)=>cN(e)).if(NN,(t,e)=>Pv(e)).if(RN,(t,e)=>BigInt(E0(e,Sv,Oh))).if(Bh,(t,e)=>xa(e,D0(e,t.shape))).if(vN,(t,e)=>{const n={};for(const r in t.shape){let i=t.shape[r];if(gN.check(i)){if(Pv(e))continue;i=i.shape}n[r]=E_(i,e)}return n}).if(DN,(t,e)=>{const n=[],r=a_(e,0,42);for(let i=0;i<r;i++)n.push(xa(e,t.shape));return n}).if(o_,(t,e)=>D0(e,t.shape)).if(LN,(t,e)=>null).if(TN,(t,e)=>{const n=xa(e,t.res);return()=>n}).if(SN,(t,e)=>xa(e,D0(e,[Pa,eo,fd,x_,r1,hd,p_(Pa),h_(xo("a","b","c"),Pa)]))).if(xN,(t,e)=>{const n={},r=E0(e,0,3);for(let i=0;i<r;i++){const s=xa(e,t.shape.keys),a=xa(e,t.shape.values);n[s]=a}return n}).done(),xa=(t,e)=>E_(uc(e),t),dd=typeof document<"u"?document:{};en(t=>t.nodeType===GN);typeof DOMParser<"u"&&new DOMParser;en(t=>t.nodeType===$N);en(t=>t.nodeType===BN);const PN=t=>nR(t,(e,n)=>`${n}:${e};`).join(""),$N=dd.ELEMENT_NODE,BN=dd.TEXT_NODE,UN=dd.DOCUMENT_NODE,GN=dd.DOCUMENT_FRAGMENT_NODE;en(t=>t.nodeType===UN);const HN=t=>class{constructor(n){this._=n}destroy(){t(this._)}},WN=HN(clearTimeout),qj=(t,e)=>new WN(setTimeout(e,t)),ji=Symbol,zN=ji(),YN=ji(),XN=ji(),VN=ji(),qN=ji(),jN=ji(),KN=ji(),D_=ji(),ZN=ji(),JN=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const s=t[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const s=t[r];s instanceof Symbol||n.push(s)}return n},QN={[zN]:Fi("font-weight","bold"),[YN]:Fi("font-weight","normal"),[XN]:Fi("color","blue"),[qN]:Fi("color","green"),[VN]:Fi("color","grey"),[jN]:Fi("color","red"),[KN]:Fi("color","purple"),[D_]:Fi("color","orange"),[ZN]:Fi("color","black")},eL=t=>{var a;t.length===1&&((a=t[0])==null?void 0:a.constructor)===Function&&(t=t[0]());const e=[],n=[],r=us();let i=[],s=0;for(;s<t.length;s++){const o=t[s],u=QN[o];if(u!==void 0)r.set(u.left,u.right);else{if(o===void 0)break;if(o.constructor===String||o.constructor===Number){const c=PN(r);s>0||c.length>0?(e.push("%c"+o),n.push(c)):e.push(o)}else break}}for(s>0&&(i=n,i.unshift(e.join("")));s<t.length;s++){const o=t[s];o instanceof Symbol||i.push(o)}return i},w_=rN?eL:JN,jj=(...t)=>{console.log(...w_(t)),__.forEach(e=>e.print(t))},Kj=(...t)=>{console.warn(...w_(t)),t.unshift(D_),__.forEach(e=>e.print(t))},__=zw(),A_=t=>({[Symbol.iterator](){return this},next:t}),Zj=(t,e)=>A_(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),Jj=(t,e)=>A_(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}}),Qj=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},tL=/[\uD800-\uDBFF]/,nL=/[\uDC00-\uDFFF]/,rL=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&tL.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&nL.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},eK=rL,gi=(t,e)=>t>>>e|t<<32-e,iL=t=>gi(t,2)^gi(t,13)^gi(t,22),sL=t=>gi(t,6)^gi(t,11)^gi(t,25),aL=t=>gi(t,7)^gi(t,18)^t>>>3,oL=t=>gi(t,17)^gi(t,19)^t>>>10,uL=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cL=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class lL{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(cL),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let h=16;h<64;h++)n[h]=oL(n[h-2])+n[h-7]+aL(n[h-15])+n[h-16];let r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7];for(let h=0,d,f;h<64;h++)d=l+sL(o)+(o&u^~o&c)+uL[h]+n[h]>>>0,f=iL(r)+(r&i^r&s^i&s)>>>0,l=c,c=u,u=o,o=a+d>>>0,a=s,s=i,i=r,r=d+f>>>0;e[0]+=r,e[1]+=i,e[2]+=s,e[3]+=a,e[4]+=o,e[5]+=u,e[6]+=c,e[7]+=l}digest(e){let n=0;for(;n+56<=e.length;){let a=0;for(;a<16&&n+3<e.length;a++)this._W[a]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,a,16);n<e.length;)this._W[a]|=e[n]<<(3-n%4)*8,n++;this._W[a]|=fs<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let i=0;for(;n<e.length;i++)for(let a=3;a>=0&&n<e.length;a--)this._W[i]|=e[n++]<<a*8;r||(this._W[i-(n%4===0?0:1)]|=fs<<(3-n%4)*8),this._W[14]=e.byteLength/oR,this._W[15]=e.byteLength*8,this._updateHash();const s=new Uint8Array(32);for(let a=0;a<this._H.length;a++)for(let o=0;o<4;o++)s[a*4+o]=this._H[a]>>>(3-o)*8;return s}}const tK=t=>new lL().digest(t);function i1(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var la=i1();function C_(t){la=t}var ju={exec:()=>null};function rt(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(i,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(In.caret,"$1"),n=n.replace(i,a),r},getRegex:()=>new RegExp(n,e)};return r}var In={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},hL=/^(?:[ \t]*(?:\n|$))+/,fL=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,dL=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Fc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,pL=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,s1=/(?:[*+-]|\d{1,9}[.)])/,T_=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,k_=rt(T_).replace(/bull/g,s1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),gL=rt(T_).replace(/bull/g,s1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),a1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,mL=/^[^\n]+/,o1=/(?!\s*\])(?:\\.|[^\[\]\\])+/,yL=rt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",o1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),vL=rt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,s1).getRegex(),pd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",u1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,bL=rt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",u1).replace("tag",pd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),F_=rt(a1).replace("hr",Fc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",pd).getRegex(),xL=rt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",F_).getRegex(),c1={blockquote:xL,code:fL,def:yL,fences:dL,heading:pL,hr:Fc,html:bL,lheading:k_,list:vL,newline:hL,paragraph:F_,table:ju,text:mL},Bv=rt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Fc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",pd).getRegex(),EL={...c1,lheading:gL,table:Bv,paragraph:rt(a1).replace("hr",Fc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Bv).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",pd).getRegex()},DL={...c1,html:rt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",u1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ju,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:rt(a1).replace("hr",Fc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",k_).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},wL=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,_L=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,S_=/^( {2,}|\\)\n(?!\s*$)/,AL=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,gd=/[\p{P}\p{S}]/u,l1=/[\s\p{P}\p{S}]/u,R_=/[^\s\p{P}\p{S}]/u,CL=rt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,l1).getRegex(),N_=/(?!~)[\p{P}\p{S}]/u,TL=/(?!~)[\s\p{P}\p{S}]/u,kL=/(?:[^\s\p{P}\p{S}]|~)/u,FL=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,L_=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,SL=rt(L_,"u").replace(/punct/g,gd).getRegex(),RL=rt(L_,"u").replace(/punct/g,N_).getRegex(),M_="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",NL=rt(M_,"gu").replace(/notPunctSpace/g,R_).replace(/punctSpace/g,l1).replace(/punct/g,gd).getRegex(),LL=rt(M_,"gu").replace(/notPunctSpace/g,kL).replace(/punctSpace/g,TL).replace(/punct/g,N_).getRegex(),ML=rt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,R_).replace(/punctSpace/g,l1).replace(/punct/g,gd).getRegex(),IL=rt(/\\(punct)/,"gu").replace(/punct/g,gd).getRegex(),OL=rt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),PL=rt(u1).replace("(?:-->|$)","-->").getRegex(),$L=rt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",PL).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Gh=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,BL=rt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Gh).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),I_=rt(/^!?\[(label)\]\[(ref)\]/).replace("label",Gh).replace("ref",o1).getRegex(),O_=rt(/^!?\[(ref)\](?:\[\])?/).replace("ref",o1).getRegex(),UL=rt("reflink|nolink(?!\\()","g").replace("reflink",I_).replace("nolink",O_).getRegex(),h1={_backpedal:ju,anyPunctuation:IL,autolink:OL,blockSkip:FL,br:S_,code:_L,del:ju,emStrongLDelim:SL,emStrongRDelimAst:NL,emStrongRDelimUnd:ML,escape:wL,link:BL,nolink:O_,punctuation:CL,reflink:I_,reflinkSearch:UL,tag:$L,text:AL,url:ju},GL={...h1,link:rt(/^!?\[(label)\]\((.*?)\)/).replace("label",Gh).getRegex(),reflink:rt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Gh).getRegex()},hg={...h1,emStrongRDelimAst:LL,emStrongLDelim:RL,url:rt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},HL={...hg,br:rt(S_).replace("{2,}","*").getRegex(),text:rt(hg.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},sl={normal:c1,gfm:EL,pedantic:DL},Mo={normal:h1,gfm:hg,breaks:HL,pedantic:GL},WL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uv=t=>WL[t];function ni(t,e){if(e){if(In.escapeTest.test(t))return t.replace(In.escapeReplace,Uv)}else if(In.escapeTestNoEncode.test(t))return t.replace(In.escapeReplaceNoEncode,Uv);return t}function Gv(t){try{t=encodeURI(t).replace(In.percentDecode,"%")}catch{return null}return t}function Hv(t,e){var s;const n=t.replace(In.findPipe,(a,o,u)=>{let c=!1,l=o;for(;--l>=0&&u[l]==="\\";)c=!c;return c?"|":" |"}),r=n.split(In.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(In.slashPipe,"|");return r}function Io(t,e,n){const r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function zL(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function Wv(t,e,n,r,i){const s=e.href,a=e.title||null,o=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;const u={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:a,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,u}function YL(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const i=r[1];return e.split(`
`).map(s=>{const a=s.match(n.other.beginningSpace);if(a===null)return s;const[o]=a;return o.length>=i.length?s.slice(i.length):s}).join(`
`)}var Hh=class{constructor(t){be(this,"options");be(this,"rules");be(this,"lexer");this.options=t||la}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Io(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=YL(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const r=Io(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Io(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=Io(e[0],`
`).split(`
`),r="",i="";const s=[];for(;n.length>0;){let a=!1;const o=[];let u;for(u=0;u<n.length;u++)if(this.rules.other.blockquoteStart.test(n[u]))o.push(n[u]),a=!0;else if(!a)o.push(n[u]);else break;n=n.slice(u);const c=o.join(`
`),l=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,i=i?`${i}
${l}`:l;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,s,!0),this.lexer.state.top=h,n.length===0)break;const d=s.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){const f=d,p=f.raw+`
`+n.join(`
`),g=this.blockquote(p);s[s.length-1]=g,r=r.substring(0,r.length-f.raw.length)+g.raw,i=i.substring(0,i.length-f.text.length)+g.text;break}else if((d==null?void 0:d.type)==="list"){const f=d,p=f.raw+`
`+n.join(`
`),g=this.list(p);s[s.length-1]=g,r=r.substring(0,r.length-d.raw.length)+g.raw,i=i.substring(0,i.length-f.raw.length)+g.raw,n=p.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:i}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const s=this.rules.other.listItemRegex(n);let a=!1;for(;t;){let u=!1,c="",l="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let h=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),d=t.split(`
`,1)[0],f=!h.trim(),p=0;if(this.options.pedantic?(p=2,l=h.trimStart()):f?p=e[1].length+1:(p=e[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,l=h.slice(p),p+=e[1].length),f&&this.rules.other.blankLine.test(d)&&(c+=d+`
`,t=t.substring(d.length+1),u=!0),!u){const y=this.rules.other.nextBulletRegex(p),b=this.rules.other.hrRegex(p),v=this.rules.other.fencesBeginRegex(p),x=this.rules.other.headingBeginRegex(p),w=this.rules.other.htmlBeginRegex(p);for(;t;){const k=t.split(`
`,1)[0];let D;if(d=k,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),D=d):D=d.replace(this.rules.other.tabCharGlobal,"    "),v.test(d)||x.test(d)||w.test(d)||y.test(d)||b.test(d))break;if(D.search(this.rules.other.nonSpaceChar)>=p||!d.trim())l+=`
`+D.slice(p);else{if(f||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||v.test(h)||x.test(h)||b.test(h))break;l+=`
`+d}!f&&!d.trim()&&(f=!0),c+=k+`
`,t=t.substring(k.length+1),h=D.slice(p)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0));let g=null,m;this.options.gfm&&(g=this.rules.other.listIsTask.exec(l),g&&(m=g[0]!=="[ ] ",l=l.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!g,checked:m,loose:!1,text:l,tokens:[]}),i.raw+=c}const o=i.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let u=0;u<i.items.length;u++)if(this.lexer.state.top=!1,i.items[u].tokens=this.lexer.blockTokens(i.items[u].text,[]),!i.loose){const c=i.items[u].tokens.filter(h=>h.type==="space"),l=c.length>0&&c.some(h=>this.rules.other.anyLine.test(h.raw));i.loose=l}if(i.loose)for(let u=0;u<i.items.length;u++)i.items[u].loose=!0;return i}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:i}}}table(t){var a;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=Hv(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(a=e[3])!=null&&a.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const o of r)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<n.length;o++)s.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:s.align[o]});for(const o of i)s.rows.push(Hv(o,s.header.length).map((u,c)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:s.align[c]})));return s}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const s=Io(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{const s=zL(e[2],"()");if(s===-2)return;if(s>-1){const o=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),Wv(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[r.toLowerCase()];if(!i){const s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return Wv(n,i,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const s=[...r[0]].length-1;let a,o,u=s,c=0;const l=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,e=e.slice(-1*t.length+s);(r=l.exec(e))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(o=[...a].length,r[3]||r[4]){u+=o;continue}else if((r[5]||r[6])&&s%3&&!((s+o)%3)){c+=o;continue}if(u-=o,u>0)continue;o=Math.min(o,o+u+c);const h=[...r[0]][0].length,d=t.slice(0,s+r.index+h+o);if(Math.min(s,o)%2){const p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}const f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let r,i;if(e[2]==="@")r=e[0],i="mailto:"+r;else{let s;do s=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(s!==e[0]);r=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},Oi=class fg{constructor(e){be(this,"tokens");be(this,"options");be(this,"state");be(this,"tokenizer");be(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||la,this.options.tokenizer=this.options.tokenizer||new Hh,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:In,block:sl.normal,inline:Mo.normal};this.options.pedantic?(n.block=sl.pedantic,n.inline=Mo.pedantic):this.options.gfm&&(n.block=sl.gfm,this.options.breaks?n.inline=Mo.breaks:n.inline=Mo.gfm),this.tokenizer.rules=n}static get rules(){return{block:sl,inline:Mo}}static lex(e,n){return new fg(n).lex(e)}static lexInline(e,n){return new fg(n).inlineTokens(e)}lex(e){e=e.replace(In.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var i,s,a;for(this.options.pedantic&&(e=e.replace(In.tabCharGlobal,"    ").replace(In.spaceLine,""));e;){let o;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(o=c.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);const c=n.at(-1);o.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.at(-1).src=c.text):n.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),n.push(o);continue}let u=e;if((a=this.options.extensions)!=null&&a.startBlock){let c=1/0;const l=e.slice(1);let h;this.options.extensions.startBlock.forEach(d=>{h=d.call({lexer:this},l),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(u=e.substring(0,c+1))}if(this.state.top&&(o=this.tokenizer.paragraph(u))){const c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(o),r=u.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(o);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var o,u,c;let r=e,i=null;if(this.tokens.links){const l=Object.keys(this.tokens.links);if(l.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,a="";for(;e;){s||(a=""),s=!1;let l;if((u=(o=this.options.extensions)==null?void 0:o.inline)!=null&&u.some(d=>(l=d.call({lexer:this},e,n))?(e=e.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);const d=n.at(-1);l.type==="text"&&(d==null?void 0:d.type)==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(e,r,a)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),n.push(l);continue}let h=e;if((c=this.options.extensions)!=null&&c.startInline){let d=1/0;const f=e.slice(1);let p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},f),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(h=e.substring(0,d+1))}if(l=this.tokenizer.inlineText(h)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),s=!0;const d=n.at(-1);(d==null?void 0:d.type)==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}},Wh=class{constructor(t){be(this,"options");be(this,"parser");this.options=t||la}space(t){return""}code({text:t,lang:e,escaped:n}){var s;const r=(s=(e||"").match(In.notSpaceStart))==null?void 0:s[0],i=t.replace(In.endingNewline,"")+`
`;return r?'<pre><code class="language-'+ni(r)+'">'+(n?i:ni(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:ni(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let r="";for(let a=0;a<t.items.length;a++){const o=t.items[a];r+=this.listitem(o)}const i=e?"ol":"ul",s=e&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(t){var n;let e="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+ni(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let i=0;i<t.header.length;i++)n+=this.tablecell(t.header[i]);e+=this.tablerow({text:n});let r="";for(let i=0;i<t.rows.length;i++){const s=t.rows[i];n="";for(let a=0;a<s.length;a++)n+=this.tablecell(s[a]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${ni(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const r=this.parser.parseInline(n),i=Gv(t);if(i===null)return r;t=i;let s='<a href="'+t+'"';return e&&(s+=' title="'+ni(e)+'"'),s+=">"+r+"</a>",s}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const i=Gv(t);if(i===null)return ni(n);t=i;let s=`<img src="${t}" alt="${n}"`;return e&&(s+=` title="${ni(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:ni(t.text)}},f1=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Pi=class dg{constructor(e){be(this,"options");be(this,"renderer");be(this,"textRenderer");this.options=e||la,this.options.renderer=this.options.renderer||new Wh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new f1}static parse(e,n){return new dg(n).parse(e)}static parseInline(e,n){return new dg(n).parseInline(e)}parse(e,n=!0){var i,s;let r="";for(let a=0;a<e.length;a++){const o=e[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[o.type]){const c=o,l=this.options.extensions.renderers[c.type].call({parser:this},c);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=l||"";continue}}const u=o;switch(u.type){case"space":{r+=this.renderer.space(u);continue}case"hr":{r+=this.renderer.hr(u);continue}case"heading":{r+=this.renderer.heading(u);continue}case"code":{r+=this.renderer.code(u);continue}case"table":{r+=this.renderer.table(u);continue}case"blockquote":{r+=this.renderer.blockquote(u);continue}case"list":{r+=this.renderer.list(u);continue}case"html":{r+=this.renderer.html(u);continue}case"paragraph":{r+=this.renderer.paragraph(u);continue}case"text":{let c=u,l=this.renderer.text(c);for(;a+1<e.length&&e[a+1].type==="text";)c=e[++a],l+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{const c='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,n=this.renderer){var i,s;let r="";for(let a=0;a<e.length;a++){const o=e[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[o.type]){const c=this.options.extensions.renderers[o.type].call({parser:this},o);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=c||"";continue}}const u=o;switch(u.type){case"escape":{r+=n.text(u);break}case"html":{r+=n.html(u);break}case"link":{r+=n.link(u);break}case"image":{r+=n.image(u);break}case"strong":{r+=n.strong(u);break}case"em":{r+=n.em(u);break}case"codespan":{r+=n.codespan(u);break}case"br":{r+=n.br(u);break}case"del":{r+=n.del(u);break}case"text":{r+=n.text(u);break}default:{const c='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},Yp,Zl=(Yp=class{constructor(t){be(this,"options");be(this,"block");this.options=t||la}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Oi.lex:Oi.lexInline}provideParser(){return this.block?Pi.parse:Pi.parseInline}},be(Yp,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Yp),XL=class{constructor(...t){be(this,"defaults",i1());be(this,"options",this.setOptions);be(this,"parse",this.parseMarkdown(!0));be(this,"parseInline",this.parseMarkdown(!1));be(this,"Parser",Pi);be(this,"Renderer",Wh);be(this,"TextRenderer",f1);be(this,"Lexer",Oi);be(this,"Tokenizer",Hh);be(this,"Hooks",Zl);this.use(...t)}walkTokens(t,e){var r,i;let n=[];for(const s of t)switch(n=n.concat(e.call(this,s)),s.type){case"table":{const a=s;for(const o of a.header)n=n.concat(this.walkTokens(o.tokens,e));for(const o of a.rows)for(const u of o)n=n.concat(this.walkTokens(u.tokens,e));break}case"list":{const a=s;n=n.concat(this.walkTokens(a.items,e));break}default:{const a=s;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(o=>{const u=a[o].flat(1/0);n=n.concat(this.walkTokens(u,e))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=e.renderers[i.name];s?e.renderers[i.name]=function(...a){let o=i.renderer.apply(this,a);return o===!1&&(o=s.apply(this,a)),o}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=e[i.level];s?s.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),n.renderer){const i=this.defaults.renderer||new Wh(this.defaults);for(const s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const a=s,o=n.renderer[a],u=i[a];i[a]=(...c)=>{let l=o.apply(i,c);return l===!1&&(l=u.apply(i,c)),l||""}}r.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new Hh(this.defaults);for(const s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const a=s,o=n.tokenizer[a],u=i[a];i[a]=(...c)=>{let l=o.apply(i,c);return l===!1&&(l=u.apply(i,c)),l}}r.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new Zl;for(const s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const a=s,o=n.hooks[a],u=i[a];Zl.passThroughHooks.has(s)?i[a]=c=>{if(this.defaults.async)return Promise.resolve(o.call(i,c)).then(h=>u.call(i,h));const l=o.call(i,c);return u.call(i,l)}:i[a]=(...c)=>{let l=o.apply(i,c);return l===!1&&(l=u.apply(i,c)),l}}r.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(a){let o=[];return o.push(s.call(this,a)),i&&(o=o.concat(i.call(this,a))),o}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Oi.lex(t,e??this.defaults)}parser(t,e){return Pi.parse(t,e??this.defaults)}parseMarkdown(t){return(n,r)=>{const i={...r},s={...this.defaults,...i},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=t);const o=s.hooks?s.hooks.provideLexer():t?Oi.lex:Oi.lexInline,u=s.hooks?s.hooks.provideParser():t?Pi.parse:Pi.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(c=>o(c,s)).then(c=>s.hooks?s.hooks.processAllTokens(c):c).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>u(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(a);try{s.hooks&&(n=s.hooks.preprocess(n));let c=o(n,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let l=u(c,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+ni(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},Zs=new XL;function ut(t,e){return Zs.parse(t,e)}ut.options=ut.setOptions=function(t){return Zs.setOptions(t),ut.defaults=Zs.defaults,C_(ut.defaults),ut};ut.getDefaults=i1;ut.defaults=la;ut.use=function(...t){return Zs.use(...t),ut.defaults=Zs.defaults,C_(ut.defaults),ut};ut.walkTokens=function(t,e){return Zs.walkTokens(t,e)};ut.parseInline=Zs.parseInline;ut.Parser=Pi;ut.parser=Pi.parse;ut.Renderer=Wh;ut.TextRenderer=f1;ut.Lexer=Oi;ut.lexer=Oi.lex;ut.Tokenizer=Hh;ut.Hooks=Zl;ut.parse=ut;ut.options;ut.setOptions;ut.use;ut.walkTokens;ut.parseInline;Pi.parse;Oi.lex;const nK=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED8\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFE])))?))?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE8A\uDE8E-\uDEC2\uDEC6\uDEC8\uDECD-\uDEDC\uDEDF-\uDEEA\uDEEF]|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;var w0=new Map;function rK(t){if(w0.has(t))return w0.get(t);var e=VL(t);return w0.set(t,e),e}var VL=(function(){var t=null;try{t=document.createElement("canvas").getContext("2d")}catch{}if(!t)return function(){return!1};var e=25,n=20,r=Math.floor(e/2);return t.font=r+"px Arial, Sans-Serif",t.textBaseline="top",t.canvas.width=n*2,t.canvas.height=e,function(i){t.clearRect(0,0,n*2,e),t.fillStyle="#FF0000",t.fillText(i,0,22),t.fillStyle="#0000FF",t.fillText(i,n,22);for(var s=t.getImageData(0,0,n,e).data,a=s.length,o=0;o<a&&!s[o+3];o+=4);if(o>=a)return!1;var u=n+o/4%n,c=Math.floor(o/4/n),l=t.getImageData(u,c,1,1).data;return!(s[o]!==l[0]||s[o+2]!==l[2]||t.measureText(i).width>=n)}})(),un=[];for(var _0=0;_0<256;++_0)un.push((_0+256).toString(16).slice(1));function qL(t,e=0){return(un[t[e+0]]+un[t[e+1]]+un[t[e+2]]+un[t[e+3]]+"-"+un[t[e+4]]+un[t[e+5]]+"-"+un[t[e+6]]+un[t[e+7]]+"-"+un[t[e+8]]+un[t[e+9]]+"-"+un[t[e+10]]+un[t[e+11]]+un[t[e+12]]+un[t[e+13]]+un[t[e+14]]+un[t[e+15]]).toLowerCase()}var al,jL=new Uint8Array(16);function KL(){if(!al&&(al=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!al))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return al(jL)}var ZL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const zv={randomUUID:ZL};function iK(t,e,n){if(zv.randomUUID&&!t)return zv.randomUUID();t=t||{};var r=t.random||(t.rng||KL)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,qL(r)}const pg="RFC3986",gg={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},JL="RFC1738",QL=Array.isArray,ei=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),A0=1024,eM=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<s.length;o+=A0){const u=s.length>=A0?s.slice(o,o+A0):s,c=[];for(let l=0;l<u.length;++l){let h=u.charCodeAt(l);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===JL&&(h===40||h===41)){c[c.length]=u.charAt(l);continue}if(h<128){c[c.length]=ei[h];continue}if(h<2048){c[c.length]=ei[192|h>>6]+ei[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=ei[224|h>>12]+ei[128|h>>6&63]+ei[128|h&63];continue}l+=1,h=65536+((h&1023)<<10|u.charCodeAt(l)&1023),c[c.length]=ei[240|h>>18]+ei[128|h>>12&63]+ei[128|h>>6&63]+ei[128|h&63]}a+=c.join("")}return a};function tM(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Yv(t,e){if(QL(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const nM=Object.prototype.hasOwnProperty,P_={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},si=Array.isArray,rM=Array.prototype.push,$_=function(t,e){rM.apply(t,si(e)?e:[e])},iM=Date.prototype.toISOString,Gt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:eM,encodeValuesOnly:!1,format:pg,formatter:gg[pg],indices:!1,serializeDate(t){return iM.call(t)},skipNulls:!1,strictNullHandling:!1};function sM(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const C0={};function B_(t,e,n,r,i,s,a,o,u,c,l,h,d,f,p,g,m,y){let b=t,v=y,x=0,w=!1;for(;(v=v.get(C0))!==void 0&&!w;){const N=v.get(t);if(x+=1,typeof N<"u"){if(N===x)throw new RangeError("Cyclic object value");w=!0}typeof v.get(C0)>"u"&&(x=0)}if(typeof c=="function"?b=c(e,b):b instanceof Date?b=d==null?void 0:d(b):n==="comma"&&si(b)&&(b=Yv(b,function(N){return N instanceof Date?d==null?void 0:d(N):N})),b===null){if(s)return u&&!g?u(e,Gt.encoder,m,"key",f):e;b=""}if(sM(b)||tM(b)){if(u){const N=g?e:u(e,Gt.encoder,m,"key",f);return[(p==null?void 0:p(N))+"="+(p==null?void 0:p(u(b,Gt.encoder,m,"value",f)))]}return[(p==null?void 0:p(e))+"="+(p==null?void 0:p(String(b)))]}const k=[];if(typeof b>"u")return k;let D;if(n==="comma"&&si(b))g&&u&&(b=Yv(b,u)),D=[{value:b.length>0?b.join(",")||null:void 0}];else if(si(c))D=c;else{const N=Object.keys(b);D=l?N.sort(l):N}const A=o?String(e).replace(/\./g,"%2E"):String(e),R=r&&si(b)&&b.length===1?A+"[]":A;if(i&&si(b)&&b.length===0)return R+"[]";for(let N=0;N<D.length;++N){const L=D[N],S=typeof L=="object"&&typeof L.value<"u"?L.value:b[L];if(a&&S===null)continue;const M=h&&o?L.replace(/\./g,"%2E"):L,E=si(b)?typeof n=="function"?n(R,M):R:R+(h?"."+M:"["+M+"]");y.set(t,x);const _=new WeakMap;_.set(C0,y),$_(k,B_(S,E,n,r,i,s,a,o,n==="comma"&&g&&si(b)?null:u,c,l,h,d,f,p,g,m,_))}return k}function aM(t=Gt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Gt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=pg;if(typeof t.format<"u"){if(!nM.call(gg,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=gg[n];let i=Gt.filter;(typeof t.filter=="function"||si(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in P_?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=Gt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Gt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Gt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Gt.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Gt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Gt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Gt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Gt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Gt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Gt.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Gt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Gt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Gt.strictNullHandling}}function oM(t,e={}){let n=t;const r=aM(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):si(r.filter)&&(s=r.filter,i=s);const a=[];if(typeof n!="object"||n===null)return"";const o=P_[r.arrayFormat],u=o==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const c=new WeakMap;for(let d=0;d<i.length;++d){const f=i[d];r.skipNulls&&n[f]===null||$_(a,B_(n[f],f,o,u,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const l=a.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),l.length>0?h+l:""}const Fa="4.104.0";let Xv=!1,Ku,U_,G_,mg,H_,W_,z_,Y_,X_;function uM(t,e={auto:!1}){if(Xv)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Ku)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Ku}'\``);Xv=e.auto,Ku=t.kind,U_=t.fetch,G_=t.FormData,mg=t.File,H_=t.ReadableStream,W_=t.getMultipartRequestOptions,z_=t.getDefaultAgent,Y_=t.fileFromPath,X_=t.isFsReadStream}class cM{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function lM({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new cM(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}const V_=()=>{Ku||uM(lM(),{auto:!0})};V_();class Ne extends Error{}class yn extends Ne{constructor(e,n,r,i){super(`${yn.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"],this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new md({message:r,cause:vg(n)});const s=n==null?void 0:n.error;return e===400?new q_(e,s,r,i):e===401?new j_(e,s,r,i):e===403?new K_(e,s,r,i):e===404?new Z_(e,s,r,i):e===409?new J_(e,s,r,i):e===422?new Q_(e,s,r,i):e===429?new e2(e,s,r,i):e>=500?new t2(e,s,r,i):new yn(e,s,r,i)}}class vr extends yn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class md extends yn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class d1 extends md{constructor({message:e}={}){super({message:e??"Request timed out."})}}class q_ extends yn{}class j_ extends yn{}class K_ extends yn{}class Z_ extends yn{}class J_ extends yn{}class Q_ extends yn{}class e2 extends yn{}class t2 extends yn{}class n2 extends Ne{constructor(){super("Could not parse response content as the length limit was reached")}}class r2 extends Ne{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var ol=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},ks=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},tr;class yd{constructor(){tr.set(this,void 0),this.buffer=new Uint8Array,ol(this,tr,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const i=[];let s;for(;(s=hM(this.buffer,ks(this,tr,"f")))!=null;){if(s.carriage&&ks(this,tr,"f")==null){ol(this,tr,s.index,"f");continue}if(ks(this,tr,"f")!=null&&(s.index!==ks(this,tr,"f")+1||s.carriage)){i.push(this.decodeText(this.buffer.slice(0,ks(this,tr,"f")-1))),this.buffer=this.buffer.slice(ks(this,tr,"f")),ol(this,tr,null,"f");continue}const a=ks(this,tr,"f")!==null?s.preceding-1:s.preceding,o=this.decodeText(this.buffer.slice(0,a));i.push(o),this.buffer=this.buffer.slice(s.index),ol(this,tr,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Ne(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Ne(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Ne("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}tr=new WeakMap;yd.NEWLINE_CHARS=new Set([`
`,"\r"]);yd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function hM(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function fM(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function i2(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class li{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const a of dM(e,n))if(!s){if(a.data.startsWith("[DONE]")){s=!0;continue}if(a.event===null||a.event.startsWith("response.")||a.event.startsWith("transcript.")){let o;try{o=JSON.parse(a.data)}catch(u){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),u}if(o&&o.error)throw new yn(void 0,o.error,void 0,h2(e.headers));yield o}else{let o;try{o=JSON.parse(a.data)}catch(u){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),u}if(a.event=="error")throw new yn(void 0,o.error,o.message,void 0);yield{event:a.event,data:o}}}s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||n.abort()}}return new li(i,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const a=new yd,o=i2(e);for await(const u of o)for(const c of a.decode(u))yield c;for(const u of a.flush())yield u}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of i())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||n.abort()}}return new li(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const a=r.next();e.push(a),n.push(a)}return s.shift()}});return[new li(()=>i(e),this.controller),new li(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new H_({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:a}=await n.next();if(a)return i.close();const o=r.encode(JSON.stringify(s)+`
`);i.enqueue(o)}catch(s){i.error(s)}},async cancel(){var i;await((i=n.return)==null?void 0:i.call(n))}})}}async function*dM(t,e){if(!t.body)throw e.abort(),new Ne("Attempted to iterate over a response with no body");const n=new gM,r=new yd,i=i2(t.body);for await(const s of pM(i))for(const a of r.decode(s)){const o=n.decode(a);o&&(yield o)}for(const s of r.flush()){const a=n.decode(s);a&&(yield a)}}async function*pM(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=fM(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class gM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=mM(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function mM(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const s2=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",a2=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&vd(t),vd=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",yM=t=>a2(t)||s2(t)||X_(t);async function o2(t,e,n){var i;if(t=await t,a2(t))return t;if(s2(t)){const s=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=vd(s)?[await s.arrayBuffer()]:[s];return new mg(a,e,n)}const r=await vM(t);if(e||(e=xM(t)??"unknown_file"),!(n!=null&&n.type)){const s=(i=r[0])==null?void 0:i.type;typeof s=="string"&&(n={...n,type:s})}return new mg(r,e,n)}async function vM(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(vd(t))e.push(await t.arrayBuffer());else if(EM(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${bM(t)}`);return e}function bM(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function xM(t){var e;return T0(t.name)||T0(t.filename)||((e=T0(t.path))==null?void 0:e.split(/[\\/]/).pop())}const T0=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},EM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Vv=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Js=async t=>{const e=await DM(t.body);return W_(e,t)},DM=async t=>{const e=new G_;return await Promise.all(Object.entries(t||{}).map(([n,r])=>yg(e,n,r))),e},yg=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(yM(n)){const r=await o2(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>yg(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>yg(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var $a={},wM=function(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},_M=function(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ul;V_();async function u2(t){var a;const{response:e}=t;if(t.options.stream)return cs("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):li.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(a=n==null?void 0:n.split(";")[0])==null?void 0:a.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const o=await e.json();return cs("response",e.status,e.url,e.headers,o),c2(o,e)}const s=await e.text();return cs("response",e.status,e.url,e.headers,s),s}function c2(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class bd extends Promise{constructor(e,n=u2){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new bd(this.responsePromise,async n=>c2(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class AM{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=k0("maxRetries",n),this.timeout=k0("timeout",r),this.httpAgent=i,this.fetch=s??U_}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...SM(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${MM()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async i=>{const s=i&&vd(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:n,...i,body:s}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var g;const r={...e},{method:i,path:s,query:a,headers:o={}}=r,u=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:Vv(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,c=this.calculateContentLength(u),l=this.buildURL(s,a);"timeout"in r&&k0("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const h=r.httpAgent??this.httpAgent??z_(l),d=r.timeout+1e3;typeof((g=h==null?void 0:h.options)==null?void 0:g.timeout)=="number"&&d>(h.options.timeout??0)&&(h.options.timeout=d),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const f=this.buildHeaders({options:r,headers:o,contentLength:c,retryCount:n});return{req:{method:i,...u&&{body:u},headers:f,...h&&{agent:h},signal:r.signal??null},url:l,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:i}){const s={};r&&(s["content-length"]=r);const a=this.defaultHeaders(e);return Zv(s,a),Zv(s,n),Vv(e.body)&&Ku!=="node"&&delete s["content-type"],ll(a,"x-stainless-retry-count")===void 0&&ll(n,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(i)),ll(a,"x-stainless-timeout")===void 0&&ll(n,"x-stainless-timeout")===void 0&&e.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(s,n),s}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return yn.generate(e,n,r,i)}request(e,n=null){return new bd(this.makeRequest(e,n))}async makeRequest(e,n){var h,d;const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:s,url:a,timeout:o}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(s,{url:a,options:r}),cs("request",a,r,s.headers),(h=r.signal)!=null&&h.aborted)throw new vr;const u=new AbortController,c=await this.fetchWithTimeout(a,s,o,u).catch(vg);if(c instanceof Error){if((d=r.signal)!=null&&d.aborted)throw new vr;if(n)return this.retryRequest(r,n);throw c.name==="AbortError"?new d1:new md({cause:c})}const l=h2(c.headers);if(!c.ok){if(n&&this.shouldRetry(c)){const b=`retrying, ${n} attempts remaining`;return cs(`response (error; ${b})`,c.status,a,l),this.retryRequest(r,n,l)}const f=await c.text().catch(b=>vg(b).message),p=RM(f),g=p?void 0:f;throw cs(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,c.status,a,l,g),this.makeStatusError(c.status,p,g,l)}return{response:c,options:r,controller:u}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new CM(this,r,e)}buildURL(e,n){const r=LM(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return f2(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Ne(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:s,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),r),u={signal:i.signal,...a};return u.method&&(u.method=u.method.toUpperCase()),this.fetch.call(void 0,e,u).finally(()=>{clearTimeout(o)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const s=r==null?void 0:r["retry-after-ms"];if(s){const o=parseFloat(s);Number.isNaN(o)||(i=o)}const a=r==null?void 0:r["retry-after"];if(a&&!i){const o=parseFloat(a);Number.isNaN(o)?i=Date.parse(a)-Date.now():i=o*1e3}if(!(i&&0<=i&&i<60*1e3)){const o=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,o)}return await Sc(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,a=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Fa}`}}class l2{constructor(e,n,r,i){ul.set(this,void 0),wM(this,ul,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Ne("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[i,s]of r)e.url.searchParams.set(i,s);n.query=void 0,n.path=e.url.toString()}return await _M(this,ul,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ul=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class CM extends bd{constructor(e,n,r){super(n,async i=>new r(e,i.response,await u2(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const h2=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),TM={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Et=t=>typeof t=="object"&&t!==null&&!f2(t)&&Object.keys(t).every(e=>d2(TM,e)),kM=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fa,"X-Stainless-OS":jv(Deno.build.os),"X-Stainless-Arch":qv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fa,"X-Stainless-OS":jv(process.platform),"X-Stainless-Arch":qv(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=FM();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function FM(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:e,version:`${i}.${s}.${a}`}}}return null}const qv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",jv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Kv;const SM=()=>Kv??(Kv=kM()),RM=t=>{try{return JSON.parse(t)}catch{return}},NM=/^[a-z][a-z0-9+.-]*:/i,LM=t=>NM.test(t),Sc=t=>new Promise(e=>setTimeout(e,t)),k0=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ne(`${t} must be an integer`);if(e<0)throw new Ne(`${t} must be a positive integer`);return e},vg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},cl=t=>{var e,n,r,i;if(typeof process<"u")return((e=$a==null?void 0:$a[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};function f2(t){if(!t)return!0;for(const e in t)return!1;return!0}function d2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Zv(t,e){for(const n in e){if(!d2(e,n))continue;const r=n.toLowerCase();if(!r)continue;const i=e[n];i===null?delete t[r]:i!==void 0&&(t[r]=i)}}const Jv=new Set(["authorization","api-key"]);function cs(t,...e){if(typeof process<"u"&&($a==null?void 0:$a.DEBUG)==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const s={...r,headers:{...r.headers}};for(const a in r.headers)Jv.has(a.toLowerCase())&&(s.headers[a]="REDACTED");return s}let i=null;for(const s in r)Jv.has(s.toLowerCase())&&(i??(i={...r}),i[s]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const MM=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),IM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",OM=t=>typeof(t==null?void 0:t.get)=="function",ll=(t,e)=>{var r;const n=e.toLowerCase();if(OM(t)){const i=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(s,a,o)=>a+o.toUpperCase());for(const s of[e,n,e.toUpperCase(),i]){const a=t.get(s);if(a)return a}}for(const[i,s]of Object.entries(t))if(i.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${e} header, using the first entry.`),s[0]):s},PM=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function F0(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class xd extends l2{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Wt extends l2{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const n=(r=e[e.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class $e{constructor(e){this._client=e}}let p2=class extends $e{list(e,n={},r){return Et(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,$M,{query:n,...r})}},Ed=class extends $e{constructor(){super(...arguments),this.messages=new p2(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return Et(e)?this.list({},e):this._client.getAPIList("/chat/completions",Dd,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class Dd extends Wt{}class $M extends Wt{}Ed.ChatCompletionsPage=Dd;Ed.Messages=p2;let wd=class extends $e{constructor(){super(...arguments),this.completions=new Ed(this._client)}};wd.Completions=Ed;wd.ChatCompletionsPage=Dd;class g2 extends $e{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class m2 extends $e{create(e,n){return this._client.post("/audio/transcriptions",Js({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class y2 extends $e{create(e,n){return this._client.post("/audio/translations",Js({body:e,...n,__metadata:{model:e.model}}))}}class Rc extends $e{constructor(){super(...arguments),this.transcriptions=new m2(this._client),this.translations=new y2(this._client),this.speech=new g2(this._client)}}Rc.Transcriptions=m2;Rc.Translations=y2;Rc.Speech=g2;class p1 extends $e{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return Et(e)?this.list({},e):this._client.getAPIList("/batches",g1,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class g1 extends Wt{}p1.BatchesPage=g1;var Fr=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},vt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},bg,Jl,Ql,ru,iu,eh,su,Ni,au,zh,Yh,Sa,v2;class m1{constructor(){bg.add(this),this.controller=new AbortController,Jl.set(this,void 0),Ql.set(this,()=>{}),ru.set(this,()=>{}),iu.set(this,void 0),eh.set(this,()=>{}),su.set(this,()=>{}),Ni.set(this,{}),au.set(this,!1),zh.set(this,!1),Yh.set(this,!1),Sa.set(this,!1),Fr(this,Jl,new Promise((e,n)=>{Fr(this,Ql,e,"f"),Fr(this,ru,n,"f")}),"f"),Fr(this,iu,new Promise((e,n)=>{Fr(this,eh,e,"f"),Fr(this,su,n,"f")}),"f"),vt(this,Jl,"f").catch(()=>{}),vt(this,iu,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},vt(this,bg,"m",v2).bind(this))},0)}_connected(){this.ended||(vt(this,Ql,"f").call(this),this._emit("connect"))}get ended(){return vt(this,au,"f")}get errored(){return vt(this,zh,"f")}get aborted(){return vt(this,Yh,"f")}abort(){this.controller.abort()}on(e,n){return(vt(this,Ni,"f")[e]||(vt(this,Ni,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=vt(this,Ni,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(vt(this,Ni,"f")[e]||(vt(this,Ni,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Fr(this,Sa,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Fr(this,Sa,!0,"f"),await vt(this,iu,"f")}_emit(e,...n){if(vt(this,au,"f"))return;e==="end"&&(Fr(this,au,!0,"f"),vt(this,eh,"f").call(this));const r=vt(this,Ni,"f")[e];if(r&&(vt(this,Ni,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!vt(this,Sa,"f")&&!(r!=null&&r.length)&&Promise.reject(i),vt(this,ru,"f").call(this,i),vt(this,su,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!vt(this,Sa,"f")&&!(r!=null&&r.length)&&Promise.reject(i),vt(this,ru,"f").call(this,i),vt(this,su,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Jl=new WeakMap,Ql=new WeakMap,ru=new WeakMap,iu=new WeakMap,eh=new WeakMap,su=new WeakMap,Ni=new WeakMap,au=new WeakMap,zh=new WeakMap,Yh=new WeakMap,Sa=new WeakMap,bg=new WeakSet,v2=function(e){if(Fr(this,zh,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new vr),e instanceof vr)return Fr(this,Yh,!0,"f"),this._emit("abort",e);if(e instanceof Ne)return this._emit("error",e);if(e instanceof Error){const n=new Ne(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Ne(String(e)))};var Ae=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Qn=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},hn,xg,ai,th,Rr,Us,Na,Os,Xh,nr,nh,rh,Zu,ou,uu,Qv,eb,tb,nb,rb,ib,sb;class Pr extends m1{constructor(){super(...arguments),hn.add(this),xg.set(this,[]),ai.set(this,{}),th.set(this,{}),Rr.set(this,void 0),Us.set(this,void 0),Na.set(this,void 0),Os.set(this,void 0),Xh.set(this,void 0),nr.set(this,void 0),nh.set(this,void 0),rh.set(this,void 0),Zu.set(this,void 0)}[(xg=new WeakMap,ai=new WeakMap,th=new WeakMap,Rr=new WeakMap,Us=new WeakMap,Na=new WeakMap,Os=new WeakMap,Xh=new WeakMap,nr=new WeakMap,nh=new WeakMap,rh=new WeakMap,Zu=new WeakMap,hn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Pr;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=li.fromReadableStream(e,this.controller);for await(const a of i)Ae(this,hn,"m",ou).call(this,a);if((s=i.controller.signal)!=null&&s.aborted)throw new vr;return this._addRun(Ae(this,hn,"m",uu).call(this))}toReadableStream(){return new li(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i,s){const a=new Pr;return a._run(()=>a._runToolAssistantStream(e,n,r,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,i,s){var c;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...i,stream:!0},u=await e.submitToolOutputs(n,r,o,{...s,signal:this.controller.signal});this._connected();for await(const l of u)Ae(this,hn,"m",ou).call(this,l);if((c=u.controller.signal)!=null&&c.aborted)throw new vr;return this._addRun(Ae(this,hn,"m",uu).call(this))}static createThreadAssistantStream(e,n,r){const i=new Pr;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new Pr;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return Ae(this,nh,"f")}currentRun(){return Ae(this,rh,"f")}currentMessageSnapshot(){return Ae(this,Rr,"f")}currentRunStepSnapshot(){return Ae(this,Zu,"f")}async finalRunSteps(){return await this.done(),Object.values(Ae(this,ai,"f"))}async finalMessages(){return await this.done(),Object.values(Ae(this,th,"f"))}async finalRun(){if(await this.done(),!Ae(this,Us,"f"))throw Error("Final run was not received.");return Ae(this,Us,"f")}async _createThreadAssistantStream(e,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},a=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const u of a)Ae(this,hn,"m",ou).call(this,u);if((o=a.controller.signal)!=null&&o.aborted)throw new vr;return this._addRun(Ae(this,hn,"m",uu).call(this))}async _createAssistantStream(e,n,r,i){var u;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.create(n,a,{...i,signal:this.controller.signal});this._connected();for await(const c of o)Ae(this,hn,"m",ou).call(this,c);if((u=o.controller.signal)!=null&&u.aborted)throw new vr;return this._addRun(Ae(this,hn,"m",uu).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(F0(s)&&F0(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...i);continue}for(const a of i){if(!F0(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const u=s[o];u==null?s.push(a):s[o]=this.accumulateDelta(u,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i,s){return await this._createToolAssistantStream(r,e,n,i,s)}}ou=function(e){if(!this.ended)switch(Qn(this,nh,e,"f"),Ae(this,hn,"m",tb).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Ae(this,hn,"m",sb).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ae(this,hn,"m",eb).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Ae(this,hn,"m",Qv).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},uu=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");if(!Ae(this,Us,"f"))throw Error("Final run has not been received");return Ae(this,Us,"f")},Qv=function(e){const[n,r]=Ae(this,hn,"m",rb).call(this,e,Ae(this,Rr,"f"));Qn(this,Rr,n,"f"),Ae(this,th,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,a=n.content[i.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Ae(this,Na,"f")){if(Ae(this,Os,"f"))switch(Ae(this,Os,"f").type){case"text":this._emit("textDone",Ae(this,Os,"f").text,Ae(this,Rr,"f"));break;case"image_file":this._emit("imageFileDone",Ae(this,Os,"f").image_file,Ae(this,Rr,"f"));break}Qn(this,Na,i.index,"f")}Qn(this,Os,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Ae(this,Na,"f")!==void 0){const i=e.data.content[Ae(this,Na,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Ae(this,Rr,"f"));break;case"text":this._emit("textDone",i.text,Ae(this,Rr,"f"));break}}Ae(this,Rr,"f")&&this._emit("messageDone",e.data),Qn(this,Rr,void 0,"f")}},eb=function(e){const n=Ae(this,hn,"m",nb).call(this,e);switch(Qn(this,Zu,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==Ae(this,Xh,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(Ae(this,nr,"f")&&this._emit("toolCallDone",Ae(this,nr,"f")),Qn(this,Xh,s.index,"f"),Qn(this,nr,n.step_details.tool_calls[s.index],"f"),Ae(this,nr,"f")&&this._emit("toolCallCreated",Ae(this,nr,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Qn(this,Zu,void 0,"f"),e.data.step_details.type=="tool_calls"&&Ae(this,nr,"f")&&(this._emit("toolCallDone",Ae(this,nr,"f")),Qn(this,nr,void 0,"f")),this._emit("runStepDone",e.data,n);break}},tb=function(e){Ae(this,xg,"f").push(e),this._emit("event",e)},nb=function(e){switch(e.event){case"thread.run.step.created":return Ae(this,ai,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=Ae(this,ai,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Pr.accumulateDelta(n,r.delta);Ae(this,ai,"f")[e.data.id]=i}return Ae(this,ai,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Ae(this,ai,"f")[e.data.id]=e.data;break}if(Ae(this,ai,"f")[e.data.id])return Ae(this,ai,"f")[e.data.id];throw new Error("No snapshot available")},rb=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let a=n.content[s.index];n.content[s.index]=Ae(this,hn,"m",ib).call(this,s,a)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ib=function(e,n){return Pr.accumulateDelta(n,e)},sb=function(e){switch(Qn(this,rh,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Qn(this,Us,e.data,"f"),Ae(this,nr,"f")&&(this._emit("toolCallDone",Ae(this,nr,"f")),Qn(this,nr,void 0,"f"));break}};class y1 extends $e{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return Et(e)?this.list({},e):this._client.getAPIList("/assistants",v1,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class v1 extends Wt{}y1.AssistantsPage=v1;function ab(t){return typeof t.parse=="function"}const Ba=t=>(t==null?void 0:t.role)==="assistant",b2=t=>(t==null?void 0:t.role)==="function",x2=t=>(t==null?void 0:t.role)==="tool";function b1(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Nc(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function BM(t,e){return!e||!E2(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:x1(t,e)}function x1(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new n2;if(r.finish_reason==="content_filter")throw new r2;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>GM(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?UM(e,r.message.content):null}}});return{...t,choices:n}}function UM(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function GM(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Nc(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function HM(t,e){var r;if(!t)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return((s=i.function)==null?void 0:s.name)===e.function.name});return Nc(n)||(n==null?void 0:n.function.strict)||!1}function E2(t){var e;return b1(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Nc(n)||n.type==="function"&&n.function.strict===!0))??!1}function WM(t){for(const e of t??[]){if(e.type!=="function")throw new Ne(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ne(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Yn=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},En,Eg,Vh,Dg,wg,_g,D2,Ag;const ob=10;class w2 extends m1{constructor(){super(...arguments),En.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(b2(e)||x2(e))&&e.content)this._emit("functionCallResult",e.content);else if(Ba(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Ba(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ne("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Yn(this,En,"m",Eg).call(this)}async finalMessage(){return await this.done(),Yn(this,En,"m",Vh).call(this)}async finalFunctionCall(){return await this.done(),Yn(this,En,"m",Dg).call(this)}async finalFunctionCallResult(){return await this.done(),Yn(this,En,"m",wg).call(this)}async totalUsage(){return await this.done(),Yn(this,En,"m",_g).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Yn(this,En,"m",Vh).call(this);n&&this._emit("finalMessage",n);const r=Yn(this,En,"m",Eg).call(this);r&&this._emit("finalContent",r);const i=Yn(this,En,"m",Dg).call(this);i&&this._emit("finalFunctionCall",i);const s=Yn(this,En,"m",wg).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",Yn(this,En,"m",_g).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Yn(this,En,"m",D2).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(x1(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var d;const i="function",{function_call:s="auto",stream:a,...o}=n,u=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:c=ob}=r||{},l={};for(const f of n.functions)l[f.name||f.function.name]=f;const h=n.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of n.messages)this._addMessage(f,!1);for(let f=0;f<c;++f){const g=(d=(await this._createChatCompletion(e,{...o,function_call:s,functions:h,messages:[...this.messages]},r)).choices[0])==null?void 0:d.message;if(!g)throw new Ne("missing message in ChatCompletion response");if(!g.function_call)return;const{name:m,arguments:y}=g.function_call,b=l[m];if(b){if(u&&u!==m){const k=`Invalid function_call: ${JSON.stringify(m)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:i,name:m,content:k});continue}}else{const k=`Invalid function_call: ${JSON.stringify(m)}. Available options are: ${h.map(D=>JSON.stringify(D.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:m,content:k});continue}let v;try{v=ab(b)?await b.parse(y):y}catch(k){this._addMessage({role:i,name:m,content:k instanceof Error?k.message:String(k)});continue}const x=await b.function(v,this),w=Yn(this,En,"m",Ag).call(this,x);if(this._addMessage({role:i,name:m,content:w}),u)return}}async _runTools(e,n,r){var f,p,g;const i="tool",{tool_choice:s="auto",stream:a,...o}=n,u=typeof s!="string"&&((f=s==null?void 0:s.function)==null?void 0:f.name),{maxChatCompletions:c=ob}=r||{},l=n.tools.map(m=>{if(Nc(m)){if(!m.$callback)throw new Ne("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:m.$callback,name:m.function.name,description:m.function.description||"",parameters:m.function.parameters,parse:m.$parseRaw,strict:!0}}}return m}),h={};for(const m of l)m.type==="function"&&(h[m.function.name||m.function.function.name]=m.function);const d="tools"in n?l.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description,strict:m.function.strict}}:m):void 0;for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<c;++m){const b=(p=(await this._createChatCompletion(e,{...o,tool_choice:s,tools:d,messages:[...this.messages]},r)).choices[0])==null?void 0:p.message;if(!b)throw new Ne("missing message in ChatCompletion response");if(!((g=b.tool_calls)!=null&&g.length))return;for(const v of b.tool_calls){if(v.type!=="function")continue;const x=v.id,{name:w,arguments:k}=v.function,D=h[w];if(D){if(u&&u!==w){const L=`Invalid tool_call: ${JSON.stringify(w)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:i,tool_call_id:x,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(w)}. Available options are: ${Object.keys(h).map(S=>JSON.stringify(S)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:x,content:L});continue}let A;try{A=ab(D)?await D.parse(k):k}catch(L){const S=L instanceof Error?L.message:String(L);this._addMessage({role:i,tool_call_id:x,content:S});continue}const R=await D.function(A,this),N=Yn(this,En,"m",Ag).call(this,R);if(this._addMessage({role:i,tool_call_id:x,content:N}),u)return}}}}En=new WeakSet,Eg=function(){return Yn(this,En,"m",Vh).call(this).content??null},Vh=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Ba(n)){const{function_call:r,...i}=n,s={...i,content:n.content??null,refusal:n.refusal??null};return r&&(s.function_call=r),s}}throw new Ne("stream ended without producing a ChatCompletionMessage with role=assistant")},Dg=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(Ba(i)&&(i!=null&&i.function_call))return i.function_call;if(Ba(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.at(-1))==null?void 0:n.function}},wg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(b2(n)&&n.content!=null||x2(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},_g=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},D2=function(e){if(e.n!=null&&e.n>1)throw new Ne("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Ag=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class cc extends w2{static runFunctions(e,n,r){const i=new cc,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,s)),i}static runTools(e,n,r){const i=new cc,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),Ba(e)&&e.content&&this._emit("content",e.content)}}const _2=1,A2=2,C2=4,T2=8,k2=16,F2=32,S2=64,R2=128,N2=256,L2=R2|N2,M2=k2|F2|L2|S2,I2=_2|A2|M2,O2=C2|T2,zM=I2|O2,jt={STR:_2,NUM:A2,ARR:C2,OBJ:T2,NULL:k2,BOOL:F2,NAN:S2,INFINITY:R2,MINUS_INFINITY:N2,INF:L2,SPECIAL:M2,ATOM:I2,COLLECTION:O2,ALL:zM};class YM extends Error{}class XM extends Error{}function VM(t,e=jt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return qM(t.trim(),e)}const qM=(t,e)=>{const n=t.length;let r=0;const i=d=>{throw new YM(`${d} at position ${r}`)},s=d=>{throw new XM(`${d} at position ${r}`)},a=()=>(h(),r>=n&&i("Unexpected end of input"),t[r]==='"'?o():t[r]==="{"?u():t[r]==="["?c():t.substring(r,r+4)==="null"||jt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||jt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||jt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||jt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||jt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||jt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):l()),o=()=>{const d=r;let f=!1;for(r++;r<n&&(t[r]!=='"'||f&&t[r-1]==="\\");)f=t[r]==="\\"?!f:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(d,++r-Number(f)))}catch(p){s(String(p))}else if(jt.STR&e)try{return JSON.parse(t.substring(d,r-Number(f))+'"')}catch{return JSON.parse(t.substring(d,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},u=()=>{r++,h();const d={};try{for(;t[r]!=="}";){if(h(),r>=n&&jt.OBJ&e)return d;const f=o();h(),r++;try{const p=a();Object.defineProperty(d,f,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(jt.OBJ&e)return d;throw p}h(),t[r]===","&&r++}}catch{if(jt.OBJ&e)return d;i("Expected '}' at end of object")}return r++,d},c=()=>{r++;const d=[];try{for(;t[r]!=="]";)d.push(a()),h(),t[r]===","&&r++}catch{if(jt.ARR&e)return d;i("Expected ']' at end of array")}return r++,d},l=()=>{if(r===0){t==="-"&&jt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(f){if(jt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(f))}}const d=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(jt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(d,r))}catch{t.substring(d,r)==="-"&&jt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(d,t.lastIndexOf("e")))}catch(p){s(String(p))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return a()},ub=t=>VM(t,jt.ALL^jt.NUM);var Ea=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},ot=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Bt,Si,Da,Qi,S0,hl,R0,N0,L0,fl,M0,cb;class lc extends w2{constructor(e){super(),Bt.add(this),Si.set(this,void 0),Da.set(this,void 0),Qi.set(this,void 0),Ea(this,Si,e,"f"),Ea(this,Da,[],"f")}get currentChatCompletionSnapshot(){return ot(this,Qi,"f")}static fromReadableStream(e){const n=new lc(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new lc(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var a;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ot(this,Bt,"m",S0).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)ot(this,Bt,"m",R0).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new vr;return this._addChatCompletion(ot(this,Bt,"m",fl).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ot(this,Bt,"m",S0).call(this),this._connected();const i=li.fromReadableStream(e,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(ot(this,Bt,"m",fl).call(this)),ot(this,Bt,"m",R0).call(this,o),s=o.id;if((a=i.controller.signal)!=null&&a.aborted)throw new vr;return this._addChatCompletion(ot(this,Bt,"m",fl).call(this))}[(Si=new WeakMap,Da=new WeakMap,Qi=new WeakMap,Bt=new WeakSet,S0=function(){this.ended||Ea(this,Qi,void 0,"f")},hl=function(n){let r=ot(this,Da,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ot(this,Da,"f")[n.index]=r,r)},R0=function(n){var i,s,a,o,u,c,l,h,d,f,p,g,m,y,b;if(this.ended)return;const r=ot(this,Bt,"m",cb).call(this,n);this._emit("chunk",n,r);for(const v of n.choices){const x=r.choices[v.index];v.delta.content!=null&&((i=x.message)==null?void 0:i.role)==="assistant"&&((s=x.message)!=null&&s.content)&&(this._emit("content",v.delta.content,x.message.content),this._emit("content.delta",{delta:v.delta.content,snapshot:x.message.content,parsed:x.message.parsed})),v.delta.refusal!=null&&((a=x.message)==null?void 0:a.role)==="assistant"&&((o=x.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:v.delta.refusal,snapshot:x.message.refusal}),((u=v.logprobs)==null?void 0:u.content)!=null&&((c=x.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(l=v.logprobs)==null?void 0:l.content,snapshot:((h=x.logprobs)==null?void 0:h.content)??[]}),((d=v.logprobs)==null?void 0:d.refusal)!=null&&((f=x.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(p=v.logprobs)==null?void 0:p.refusal,snapshot:((g=x.logprobs)==null?void 0:g.refusal)??[]});const w=ot(this,Bt,"m",hl).call(this,x);x.finish_reason&&(ot(this,Bt,"m",L0).call(this,x),w.current_tool_call_index!=null&&ot(this,Bt,"m",N0).call(this,x,w.current_tool_call_index));for(const k of v.delta.tool_calls??[])w.current_tool_call_index!==k.index&&(ot(this,Bt,"m",L0).call(this,x),w.current_tool_call_index!=null&&ot(this,Bt,"m",N0).call(this,x,w.current_tool_call_index)),w.current_tool_call_index=k.index;for(const k of v.delta.tool_calls??[]){const D=(m=x.message.tool_calls)==null?void 0:m[k.index];D!=null&&D.type&&((D==null?void 0:D.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(y=D.function)==null?void 0:y.name,index:k.index,arguments:D.function.arguments,parsed_arguments:D.function.parsed_arguments,arguments_delta:((b=k.function)==null?void 0:b.arguments)??""}):(D==null||D.type,void 0))}}},N0=function(n,r){var a,o,u;if(ot(this,Bt,"m",hl).call(this,n).done_tool_calls.has(r))return;const s=(a=n.message.tool_calls)==null?void 0:a[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const c=(u=(o=ot(this,Si,"f"))==null?void 0:o.tools)==null?void 0:u.find(l=>l.type==="function"&&l.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:Nc(c)?c.$parseRaw(s.function.arguments):c!=null&&c.function.strict?JSON.parse(s.function.arguments):null})}else s.type},L0=function(n){var i,s;const r=ot(this,Bt,"m",hl).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=ot(this,Bt,"m",M0).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},fl=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");const n=ot(this,Qi,"f");if(!n)throw new Ne("request ended without sending any chunks");return Ea(this,Qi,void 0,"f"),Ea(this,Da,[],"f"),jM(n,ot(this,Si,"f"))},M0=function(){var r;const n=(r=ot(this,Si,"f"))==null?void 0:r.response_format;return b1(n)?n:null},cb=function(n){var r,i,s,a;let o=ot(this,Qi,"f");const{choices:u,...c}=n;o?Object.assign(o,c):o=Ea(this,Qi,{...c,choices:[]},"f");for(const{delta:l,finish_reason:h,index:d,logprobs:f=null,...p}of n.choices){let g=o.choices[d];if(g||(g=o.choices[d]={finish_reason:h,index:d,message:{},logprobs:f,...p}),f)if(!g.logprobs)g.logprobs=Object.assign({},f);else{const{content:k,refusal:D,...A}=f;Object.assign(g.logprobs,A),k&&((r=g.logprobs).content??(r.content=[]),g.logprobs.content.push(...k)),D&&((i=g.logprobs).refusal??(i.refusal=[]),g.logprobs.refusal.push(...D))}if(h&&(g.finish_reason=h,ot(this,Si,"f")&&E2(ot(this,Si,"f")))){if(h==="length")throw new n2;if(h==="content_filter")throw new r2}if(Object.assign(g,p),!l)continue;const{content:m,refusal:y,function_call:b,role:v,tool_calls:x,...w}=l;if(Object.assign(g.message,w),y&&(g.message.refusal=(g.message.refusal||"")+y),v&&(g.message.role=v),b&&(g.message.function_call?(b.name&&(g.message.function_call.name=b.name),b.arguments&&((s=g.message.function_call).arguments??(s.arguments=""),g.message.function_call.arguments+=b.arguments)):g.message.function_call=b),m&&(g.message.content=(g.message.content||"")+m,!g.message.refusal&&ot(this,Bt,"m",M0).call(this)&&(g.message.parsed=ub(g.message.content))),x){g.message.tool_calls||(g.message.tool_calls=[]);for(const{index:k,id:D,type:A,function:R,...N}of x){const L=(a=g.message.tool_calls)[k]??(a[k]={});Object.assign(L,N),D&&(L.id=D),A&&(L.type=A),R&&(L.function??(L.function={name:R.name??"",arguments:""})),R!=null&&R.name&&(L.function.name=R.name),R!=null&&R.arguments&&(L.function.arguments+=R.arguments,HM(ot(this,Si,"f"),L)&&(L.function.parsed_arguments=ub(L.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new li(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function jM(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:a,...o}=t,u={...o,id:n,choices:r.map(({message:c,finish_reason:l,index:h,logprobs:d,...f})=>{if(!l)throw new Ne(`missing finish_reason for choice ${h}`);const{content:p=null,function_call:g,tool_calls:m,...y}=c,b=c.role;if(!b)throw new Ne(`missing role for choice ${h}`);if(g){const{arguments:v,name:x}=g;if(v==null)throw new Ne(`missing function_call.arguments for choice ${h}`);if(!x)throw new Ne(`missing function_call.name for choice ${h}`);return{...f,message:{content:p,function_call:{arguments:v,name:x},role:b,refusal:c.refusal??null},finish_reason:l,index:h,logprobs:d}}return m?{...f,index:h,finish_reason:l,logprobs:d,message:{...y,role:b,content:p,refusal:c.refusal??null,tool_calls:m.map((v,x)=>{const{function:w,type:k,id:D,...A}=v,{arguments:R,name:N,...L}=w||{};if(D==null)throw new Ne(`missing choices[${h}].tool_calls[${x}].id
${dl(t)}`);if(k==null)throw new Ne(`missing choices[${h}].tool_calls[${x}].type
${dl(t)}`);if(N==null)throw new Ne(`missing choices[${h}].tool_calls[${x}].function.name
${dl(t)}`);if(R==null)throw new Ne(`missing choices[${h}].tool_calls[${x}].function.arguments
${dl(t)}`);return{...A,id:D,type:k,function:{...L,name:N,arguments:R}}})}}:{...f,message:{...y,content:p,role:b,refusal:c.refusal??null},finish_reason:l,index:h,logprobs:d}}),created:i,model:s,object:"chat.completion",...a?{system_fingerprint:a}:{}};return BM(u,e)}function dl(t){return JSON.stringify(t)}class Ua extends lc{static fromReadableStream(e){const n=new Ua(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const i=new Ua(null),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,s)),i}static runTools(e,n,r){const i=new Ua(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let P2=class extends $e{parse(e,n){return WM(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>x1(r,e))}runFunctions(e,n){return e.stream?Ua.runFunctions(this._client,e,n):cc.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?Ua.runTools(this._client,e,n):cc.runTools(this._client,e,n)}stream(e,n){return lc.createChatCompletion(this._client,e,n)}};class Cg extends $e{constructor(){super(...arguments),this.completions=new P2(this._client)}}(function(t){t.Completions=P2})(Cg||(Cg={}));class $2 extends $e{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class B2 extends $e{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class _d extends $e{constructor(){super(...arguments),this.sessions=new $2(this._client),this.transcriptionSessions=new B2(this._client)}}_d.Sessions=$2;_d.TranscriptionSessions=B2;class E1 extends $e{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return Et(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,D1,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class D1 extends Wt{}E1.MessagesPage=D1;class w1 extends $e{retrieve(e,n,r,i={},s){return Et(i)?this.retrieve(e,n,r,{},i):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n,r={},i){return Et(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,_1,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class _1 extends Wt{}w1.RunStepsPage=_1;let Lc=class extends $e{constructor(){super(...arguments),this.steps=new w1(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return Et(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,A1,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}createAndStream(e,n,r){return Pr.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(o=c)}}await Sc(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,n,r){return Pr.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,i){const s=await this.submitToolOutputs(e,n,r,i);return await this.poll(e,s.id,i)}submitToolOutputsStream(e,n,r,i){return Pr.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,i)}};class A1 extends Wt{}Lc.RunsPage=A1;Lc.Steps=w1;Lc.RunStepsPage=_1;class Eo extends $e{constructor(){super(...arguments),this.runs=new Lc(this._client),this.messages=new E1(this._client)}create(e={},n){return Et(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return Pr.createThreadAssistantStream(e,this._client.beta.threads,n)}}Eo.Runs=Lc;Eo.RunsPage=A1;Eo.Messages=E1;Eo.MessagesPage=D1;class Do extends $e{constructor(){super(...arguments),this.realtime=new _d(this._client),this.chat=new Cg(this._client),this.assistants=new y1(this._client),this.threads=new Eo(this._client)}}Do.Realtime=_d;Do.Assistants=y1;Do.AssistantsPage=v1;Do.Threads=Eo;class U2 extends $e{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class G2 extends $e{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let Ad=class extends $e{constructor(){super(...arguments),this.content=new G2(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,Js({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return Et(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,C1,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class C1 extends Wt{}Ad.FileListResponsesPage=C1;Ad.Content=G2;class Mc extends $e{constructor(){super(...arguments),this.files=new Ad(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return Et(e)?this.list({},e):this._client.getAPIList("/containers",T1,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class T1 extends Wt{}Mc.ContainerListResponsesPage=T1;Mc.Files=Ad;Mc.FileListResponsesPage=C1;class H2 extends $e{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&cs("Request","User defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(cs("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const u=o.embedding;o.embedding=PM(u)}),a)))}}class k1 extends $e{retrieve(e,n,r,i){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,i)}list(e,n,r={},i){return Et(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,F1,{query:r,...i})}}class F1 extends Wt{}k1.OutputItemListResponsesPage=F1;class Ic extends $e{constructor(){super(...arguments),this.outputItems=new k1(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return Et(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,S1,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class S1 extends Wt{}Ic.RunListResponsesPage=S1;Ic.OutputItems=k1;Ic.OutputItemListResponsesPage=F1;class Oc extends $e{constructor(){super(...arguments),this.runs=new Ic(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return Et(e)?this.list({},e):this._client.getAPIList("/evals",R1,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class R1 extends Wt{}Oc.EvalListResponsesPage=R1;Oc.Runs=Ic;Oc.RunListResponsesPage=S1;let N1=class extends $e{create(e,n){return this._client.post("/files",Js({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return Et(e)?this.list({},e):this._client.getAPIList("/files",L1,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let a=await this.retrieve(e);for(;!a.status||!i.has(a.status);)if(await Sc(n),a=await this.retrieve(e),Date.now()-s>r)throw new d1({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}};class L1 extends Wt{}N1.FileObjectsPage=L1;class W2 extends $e{}let z2=class extends $e{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class M1 extends $e{constructor(){super(...arguments),this.graders=new z2(this._client)}}M1.Graders=z2;class I1 extends $e{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,O1,{body:n,method:"post",...r})}retrieve(e,n={},r){return Et(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class O1 extends xd{}I1.PermissionCreateResponsesPage=O1;let Cd=class extends $e{constructor(){super(...arguments),this.permissions=new I1(this._client)}};Cd.Permissions=I1;Cd.PermissionCreateResponsesPage=O1;class P1 extends $e{list(e,n={},r){return Et(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,$1,{query:n,...r})}}class $1 extends Wt{}P1.FineTuningJobCheckpointsPage=$1;class wo extends $e{constructor(){super(...arguments),this.checkpoints=new P1(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return Et(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",B1,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return Et(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,U1,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class B1 extends Wt{}class U1 extends Wt{}wo.FineTuningJobsPage=B1;wo.FineTuningJobEventsPage=U1;wo.Checkpoints=P1;wo.FineTuningJobCheckpointsPage=$1;class ws extends $e{constructor(){super(...arguments),this.methods=new W2(this._client),this.jobs=new wo(this._client),this.checkpoints=new Cd(this._client),this.alpha=new M1(this._client)}}ws.Methods=W2;ws.Jobs=wo;ws.FineTuningJobsPage=B1;ws.FineTuningJobEventsPage=U1;ws.Checkpoints=Cd;ws.Alpha=M1;class Y2 extends $e{}class G1 extends $e{constructor(){super(...arguments),this.graderModels=new Y2(this._client)}}G1.GraderModels=Y2;class X2 extends $e{createVariation(e,n){return this._client.post("/images/variations",Js({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",Js({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class H1 extends $e{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",W1,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class W1 extends xd{}H1.ModelsPage=W1;class V2 extends $e{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function KM(t,e){return!e||!JM(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:q2(t,e)}function q2(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:tI(e,i)};if(i.type==="message"){const s=i.content.map(a=>a.type==="output_text"?{...a,parsed:ZM(e,a.text)}:a);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||j2(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function ZM(t,e){var n,r,i,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function JM(t){var e;return!!b1((e=t.text)==null?void 0:e.format)}function QM(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function eI(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function tI(t,e){const n=eI(t.tools??[],e.name);return{...e,...e,parsed_arguments:QM(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function j2(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class K2 extends $e{list(e,n={},r){return Et(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,rI,{query:n,...r})}}var wa=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},es=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},_a,pl,ts,gl,lb,hb,fb,db;class z1 extends m1{constructor(e){super(),_a.add(this),pl.set(this,void 0),ts.set(this,void 0),gl.set(this,void 0),wa(this,pl,e,"f")}static createResponse(e,n,r){const i=new z1(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),es(this,_a,"m",lb).call(this);let s,a=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),a=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of s)es(this,_a,"m",hb).call(this,u,a);if((o=s.controller.signal)!=null&&o.aborted)throw new vr;return es(this,_a,"m",fb).call(this)}[(pl=new WeakMap,ts=new WeakMap,gl=new WeakMap,_a=new WeakSet,lb=function(){this.ended||wa(this,ts,void 0,"f")},hb=function(n,r){if(this.ended)return;const i=(a,o)=>{(r==null||o.sequence_number>r)&&this._emit(a,o)},s=es(this,_a,"m",db).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const a=s.output[n.output_index];if(!a)throw new Ne(`missing output at index ${n.output_index}`);if(a.type==="message"){const o=a.content[n.content_index];if(!o)throw new Ne(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new Ne(`expected content to be 'output_text', got ${o.type}`);i("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const a=s.output[n.output_index];if(!a)throw new Ne(`missing output at index ${n.output_index}`);a.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:a.arguments});break}default:i(n.type,n);break}},fb=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");const n=es(this,ts,"f");if(!n)throw new Ne("request ended without sending any events");wa(this,ts,void 0,"f");const r=nI(n,es(this,pl,"f"));return wa(this,gl,r,"f"),r},db=function(n){let r=es(this,ts,"f");if(!r){if(n.type!=="response.created")throw new Ne(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=wa(this,ts,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new Ne(`missing output at index ${n.output_index}`);i.type==="message"&&i.content.push(n.part);break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new Ne(`missing output at index ${n.output_index}`);if(i.type==="message"){const s=i.content[n.content_index];if(!s)throw new Ne(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new Ne(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new Ne(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.completed":{wa(this,ts,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=es(this,gl,"f");if(!e)throw new Ne("stream ended without producing a ChatCompletion");return e}}function nI(t,e){return KM(t,e)}class Y1 extends $e{constructor(){super(...arguments),this.inputItems=new K2(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&j2(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>q2(r,e))}stream(e,n){return z1.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class rI extends Wt{}Y1.InputItems=K2;class Z2 extends $e{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,Js({body:n,...r}))}}class X1 extends $e{constructor(){super(...arguments),this.parts=new Z2(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}X1.Parts=Z2;const iI=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class Td extends $e{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return Et(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,kd,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const s=await this.retrieve(e,n,{...r,headers:i}).withResponse(),a=s.data;switch(a.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const u=s.response.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(o=c)}}await Sc(o);break;case"failed":case"completed":return a}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,V1,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class kd extends Wt{}class V1 extends xd{}Td.VectorStoreFilesPage=kd;Td.FileContentResponsesPage=V1;class J2 extends $e{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r={},i){return Et(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,kd,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:a}=await this.retrieve(e,n,{...r,headers:i}).withResponse();switch(s.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(o=c)}}await Sc(o);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,a=Math.min(s,n.length),o=this._client,u=n.values(),c=[...r];async function l(d){for(let f of d){const p=await o.files.create({file:f,purpose:"assistants"},i);c.push(p.id)}}const h=Array(a).fill(u).map(l);return await iI(h),await this.createAndPoll(e,{file_ids:c})}}class _s extends $e{constructor(){super(...arguments),this.files=new Td(this._client),this.fileBatches=new J2(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return Et(e)?this.list({},e):this._client.getAPIList("/vector_stores",q1,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,j1,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class q1 extends Wt{}class j1 extends xd{}_s.VectorStoresPage=q1;_s.VectorStoreSearchResponsesPage=j1;_s.Files=Td;_s.VectorStoreFilesPage=kd;_s.FileContentResponsesPage=V1;_s.FileBatches=J2;var Q2;class He extends AM{constructor({baseURL:e=cl("OPENAI_BASE_URL"),apiKey:n=cl("OPENAI_API_KEY"),organization:r=cl("OPENAI_ORG_ID")??null,project:i=cl("OPENAI_PROJECT_ID")??null,...s}={}){if(n===void 0)throw new Ne("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:n,organization:r,project:i,...s,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&IM())throw new Ne(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new U2(this),this.chat=new wd(this),this.embeddings=new H2(this),this.files=new N1(this),this.images=new X2(this),this.audio=new Rc(this),this.moderations=new V2(this),this.models=new H1(this),this.fineTuning=new ws(this),this.graders=new G1(this),this.vectorStores=new _s(this),this.beta=new Do(this),this.batches=new p1(this),this.uploads=new X1(this),this.responses=new Y1(this),this.evals=new Oc(this),this.containers=new Mc(this),this._options=a,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return oM(e,{arrayFormat:"brackets"})}}Q2=He;He.OpenAI=Q2;He.DEFAULT_TIMEOUT=6e5;He.OpenAIError=Ne;He.APIError=yn;He.APIConnectionError=md;He.APIConnectionTimeoutError=d1;He.APIUserAbortError=vr;He.NotFoundError=Z_;He.ConflictError=J_;He.RateLimitError=e2;He.BadRequestError=q_;He.AuthenticationError=j_;He.InternalServerError=t2;He.PermissionDeniedError=K_;He.UnprocessableEntityError=Q_;He.toFile=o2;He.fileFromPath=Y_;He.Completions=U2;He.Chat=wd;He.ChatCompletionsPage=Dd;He.Embeddings=H2;He.Files=N1;He.FileObjectsPage=L1;He.Images=X2;He.Audio=Rc;He.Moderations=V2;He.Models=H1;He.ModelsPage=W1;He.FineTuning=ws;He.Graders=G1;He.VectorStores=_s;He.VectorStoresPage=q1;He.VectorStoreSearchResponsesPage=j1;He.Beta=Do;He.Batches=p1;He.BatchesPage=g1;He.Uploads=X1;He.Responses=Y1;He.Evals=Oc;He.EvalListResponsesPage=R1;He.Containers=Mc;He.ContainerListResponsesPage=T1;const pb={};function sI(t){let e=pb[t];if(e)return e;e=pb[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);e.push(r)}for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function to(t,e){typeof e!="string"&&(e=to.defaultChars);const n=sI(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,a=r.length;s<a;s+=3){const o=parseInt(r.slice(s+1,s+3),16);if(o<128){i+=n[o];continue}if((o&224)===192&&s+3<a){const u=parseInt(r.slice(s+4,s+6),16);if((u&192)===128){const c=o<<6&1984|u&63;c<128?i+="":i+=String.fromCharCode(c),s+=3;continue}}if((o&240)===224&&s+6<a){const u=parseInt(r.slice(s+4,s+6),16),c=parseInt(r.slice(s+7,s+9),16);if((u&192)===128&&(c&192)===128){const l=o<<12&61440|u<<6&4032|c&63;l<2048||l>=55296&&l<=57343?i+="":i+=String.fromCharCode(l),s+=6;continue}}if((o&248)===240&&s+9<a){const u=parseInt(r.slice(s+4,s+6),16),c=parseInt(r.slice(s+7,s+9),16),l=parseInt(r.slice(s+10,s+12),16);if((u&192)===128&&(c&192)===128&&(l&192)===128){let h=o<<18&1835008|u<<12&258048|c<<6&4032|l&63;h<65536||h>1114111?i+="":(h-=65536,i+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),s+=9;continue}}i+=""}return i})}to.defaultChars=";/?:@&=+$,#";to.componentChars="";const gb={};function aI(t){let e=gb[t];if(e)return e;e=gb[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<t.length;n++)e[t.charCodeAt(n)]=t[n];return e}function Pc(t,e,n){typeof e!="string"&&(n=e,e=Pc.defaultChars),typeof n>"u"&&(n=!0);const r=aI(e);let i="";for(let s=0,a=t.length;s<a;s++){const o=t.charCodeAt(s);if(n&&o===37&&s+2<a&&/^[0-9a-f]{2}$/i.test(t.slice(s+1,s+3))){i+=t.slice(s,s+3),s+=2;continue}if(o<128){i+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&s+1<a){const u=t.charCodeAt(s+1);if(u>=56320&&u<=57343){i+=encodeURIComponent(t[s]+t[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[s])}return i}Pc.defaultChars=";/?:@&=+$,-_.!~*'()#";Pc.componentChars="-_.!~*'()";function K1(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function qh(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const oI=/^([a-z0-9.+-]+:)/i,uI=/:[0-9]*$/,cI=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,lI=["<",">",'"',"`"," ","\r",`
`,"	"],hI=["{","}","|","\\","^","`"].concat(lI),fI=["'"].concat(hI),mb=["%","/","?",";","#"].concat(fI),yb=["/","?","#"],dI=255,vb=/^[+a-z0-9A-Z_-]{0,63}$/,pI=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,bb={javascript:!0,"javascript:":!0},xb={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Z1(t,e){if(t&&t instanceof qh)return t;const n=new qh;return n.parse(t,e),n}qh.prototype.parse=function(t,e){let n,r,i,s=t;if(s=s.trim(),!e&&t.split("#").length===1){const c=cI.exec(s);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let a=oI.exec(s);if(a&&(a=a[0],n=a.toLowerCase(),this.protocol=a,s=s.substr(a.length)),(e||a||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(a&&bb[a])&&(s=s.substr(2),this.slashes=!0)),!bb[a]&&(i||a&&!xb[a])){let c=-1;for(let p=0;p<yb.length;p++)r=s.indexOf(yb[p]),r!==-1&&(c===-1||r<c)&&(c=r);let l,h;c===-1?h=s.lastIndexOf("@"):h=s.lastIndexOf("@",c),h!==-1&&(l=s.slice(0,h),s=s.slice(h+1),this.auth=l),c=-1;for(let p=0;p<mb.length;p++)r=s.indexOf(mb[p]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=s.length),s[c-1]===":"&&c--;const d=s.slice(0,c);s=s.slice(c),this.parseHost(d),this.hostname=this.hostname||"";const f=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!f){const p=this.hostname.split(/\./);for(let g=0,m=p.length;g<m;g++){const y=p[g];if(y&&!y.match(vb)){let b="";for(let v=0,x=y.length;v<x;v++)y.charCodeAt(v)>127?b+="x":b+=y[v];if(!b.match(vb)){const v=p.slice(0,g),x=p.slice(g+1),w=y.match(pI);w&&(v.push(w[1]),x.unshift(w[2])),x.length&&(s=x.join(".")+s),this.hostname=v.join(".");break}}}}this.hostname.length>dI&&(this.hostname=""),f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=s.indexOf("#");o!==-1&&(this.hash=s.substr(o),s=s.slice(0,o));const u=s.indexOf("?");return u!==-1&&(this.search=s.substr(u),s=s.slice(0,u)),s&&(this.pathname=s),xb[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};qh.prototype.parseHost=function(t){let e=uI.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const gI=Object.freeze(Object.defineProperty({__proto__:null,decode:to,encode:Pc,format:K1,parse:Z1},Symbol.toStringTag,{value:"Module"})),eA=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tA=/[\0-\x1F\x7F-\x9F]/,mI=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,J1=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,nA=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,rA=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,yI=Object.freeze(Object.defineProperty({__proto__:null,Any:eA,Cc:tA,Cf:mI,P:J1,S:nA,Z:rA},Symbol.toStringTag,{value:"Module"})),vI=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),bI=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var I0;const xI=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),EI=(I0=String.fromCodePoint)!==null&&I0!==void 0?I0:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function DI(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=xI.get(t))!==null&&e!==void 0?e:t}var Jt;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Jt||(Jt={}));const wI=32;var as;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(as||(as={}));function Tg(t){return t>=Jt.ZERO&&t<=Jt.NINE}function _I(t){return t>=Jt.UPPER_A&&t<=Jt.UPPER_F||t>=Jt.LOWER_A&&t<=Jt.LOWER_F}function AI(t){return t>=Jt.UPPER_A&&t<=Jt.UPPER_Z||t>=Jt.LOWER_A&&t<=Jt.LOWER_Z||Tg(t)}function CI(t){return t===Jt.EQUALS||AI(t)}var Vt;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Vt||(Vt={}));var is;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(is||(is={}));class TI{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=Vt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=is.Strict}startEntity(e){this.decodeMode=e,this.state=Vt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case Vt.EntityStart:return e.charCodeAt(n)===Jt.NUM?(this.state=Vt.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=Vt.NamedEntity,this.stateNamedEntity(e,n));case Vt.NumericStart:return this.stateNumericStart(e,n);case Vt.NumericDecimal:return this.stateNumericDecimal(e,n);case Vt.NumericHex:return this.stateNumericHex(e,n);case Vt.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|wI)===Jt.LOWER_X?(this.state=Vt.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=Vt.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(n,s),i),this.consumed+=s}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(Tg(i)||_I(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(Tg(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Jt.SEMI)this.consumed+=1;else if(this.decodeMode===is.Strict)return 0;return this.emitCodePoint(DI(this.result),this.consumed),this.errors&&(e!==Jt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&as.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const a=e.charCodeAt(n);if(this.treeIndex=kI(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===is.Attribute&&(s===0||CI(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&as.VALUE_LENGTH)>>14,s!==0){if(a===Jt.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==is.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&as.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~as.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case Vt.NamedEntity:return this.result!==0&&(this.decodeMode!==is.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Vt.NumericDecimal:return this.emitNumericEntity(0,2);case Vt.NumericHex:return this.emitNumericEntity(0,3);case Vt.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Vt.EntityStart:return 0}}}function iA(t){let e="";const n=new TI(t,r=>e+=EI(r));return function(i,s){let a=0,o=0;for(;(o=i.indexOf("&",o))>=0;){e+=i.slice(a,o),n.startEntity(s);const c=n.write(i,o+1);if(c<0){a=o+n.end();break}a=o+c,o=c===0?a+1:a}const u=e+i.slice(a);return e="",u}}function kI(t,e,n,r){const i=(e&as.BRANCH_LENGTH)>>7,s=e&as.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:t[n+u]-1}let a=n,o=a+i-1;for(;a<=o;){const u=a+o>>>1,c=t[u];if(c<r)a=u+1;else if(c>r)o=u-1;else return t[u+i]}return-1}const FI=iA(vI);iA(bI);function sA(t,e=is.Legacy){return FI(t,e)}function SI(t){return Object.prototype.toString.call(t)}function Q1(t){return SI(t)==="[object String]"}const RI=Object.prototype.hasOwnProperty;function NI(t,e){return RI.call(t,e)}function Fd(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}function aA(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}function ey(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function jh(t){if(t>65535){t-=65536;const e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}const oA=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,LI=/&([a-z#][a-z0-9]{1,31});/gi,MI=new RegExp(oA.source+"|"+LI.source,"gi"),II=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function OI(t,e){if(e.charCodeAt(0)===35&&II.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return ey(r)?jh(r):t}const n=sA(t);return n!==t?n:t}function PI(t){return t.indexOf("\\")<0?t:t.replace(oA,"$1")}function no(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(MI,function(e,n,r){return n||OI(e,r)})}const $I=/[&<>"]/,BI=/[&<>"]/g,UI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function GI(t){return UI[t]}function ps(t){return $I.test(t)?t.replace(BI,GI):t}const HI=/[.?*+^$[\]\\(){}|-]/g;function WI(t){return t.replace(HI,"\\$&")}function dt(t){switch(t){case 9:case 32:return!0}return!1}function hc(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function fc(t){return J1.test(t)||nA.test(t)}function dc(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Sd(t){return t=t.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const zI={mdurl:gI,ucmicro:yI},YI=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:aA,assign:Fd,escapeHtml:ps,escapeRE:WI,fromCodePoint:jh,has:NI,isMdAsciiPunct:dc,isPunctChar:fc,isSpace:dt,isString:Q1,isValidEntityCode:ey,isWhiteSpace:hc,lib:zI,normalizeReference:Sd,unescapeAll:no,unescapeMd:PI},Symbol.toStringTag,{value:"Module"}));function XI(t,e,n){let r,i,s,a;const o=t.posMax,u=t.pos;for(t.pos=e+1,r=1;t.pos<o;){if(s=t.src.charCodeAt(t.pos),s===93&&(r--,r===0)){i=!0;break}if(a=t.pos,t.md.inline.skipToken(t),s===91){if(a===t.pos-1)r++;else if(n)return t.pos=u,-1}}let c=-1;return i&&(c=t.pos),t.pos=u,c}function VI(t,e,n){let r,i=e;const s={ok:!1,pos:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<n;){if(r=t.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=no(t.slice(e+1,i)),s.ok=!0,s;if(r===92&&i+1<n){i+=2;continue}i++}return s}let a=0;for(;i<n&&(r=t.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(a++,a>32))return s;if(r===41){if(a===0)break;a--}i++}return e===i||a!==0||(s.str=no(t.slice(e,i)),s.pos=i,s.ok=!0),s}function qI(t,e,n,r){let i,s=e;const a={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)a.str=r.str,a.marker=r.marker;else{if(s>=n)return a;let o=t.charCodeAt(s);if(o!==34&&o!==39&&o!==40)return a;e++,s++,o===40&&(o=41),a.marker=o}for(;s<n;){if(i=t.charCodeAt(s),i===a.marker)return a.pos=s+1,a.str+=no(t.slice(e,s)),a.ok=!0,a;if(i===40&&a.marker===41)return a;i===92&&s+1<n&&s++,s++}return a.can_continue=!0,a.str+=no(t.slice(e,s)),a}const jI=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:VI,parseLinkLabel:XI,parseLinkTitle:qI},Symbol.toStringTag,{value:"Module"})),wi={};wi.code_inline=function(t,e,n,r,i){const s=t[e];return"<code"+i.renderAttrs(s)+">"+ps(s.content)+"</code>"};wi.code_block=function(t,e,n,r,i){const s=t[e];return"<pre"+i.renderAttrs(s)+"><code>"+ps(t[e].content)+`</code></pre>
`};wi.fence=function(t,e,n,r,i){const s=t[e],a=s.info?no(s.info).trim():"";let o="",u="";if(a){const l=a.split(/(\s+)/g);o=l[0],u=l.slice(2).join("")}let c;if(n.highlight?c=n.highlight(s.content,o,u)||ps(s.content):c=ps(s.content),c.indexOf("<pre")===0)return c+`
`;if(a){const l=s.attrIndex("class"),h=s.attrs?s.attrs.slice():[];l<0?h.push(["class",n.langPrefix+o]):(h[l]=h[l].slice(),h[l][1]+=" "+n.langPrefix+o);const d={attrs:h};return`<pre><code${i.renderAttrs(d)}>${c}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${c}</code></pre>
`};wi.image=function(t,e,n,r,i){const s=t[e];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,n,r),i.renderToken(t,e,n)};wi.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};wi.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};wi.text=function(t,e){return ps(t[e].content)};wi.html_block=function(t,e){return t[e].content};wi.html_inline=function(t,e){return t[e].content};function _o(){this.rules=Fd({},wi)}_o.prototype.renderAttrs=function(e){let n,r,i;if(!e.attrs)return"";for(i="",n=0,r=e.attrs.length;n<r;n++)i+=" "+ps(e.attrs[n][0])+'="'+ps(e.attrs[n][1])+'"';return i};_o.prototype.renderToken=function(e,n,r){const i=e[n];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&e[n-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let a=!1;if(i.block&&(a=!0,i.nesting===1&&n+1<e.length)){const o=e[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===i.tag)&&(a=!1)}return s+=a?`>
`:">",s};_o.prototype.renderInline=function(t,e,n){let r="";const i=this.rules;for(let s=0,a=t.length;s<a;s++){const o=t[s].type;typeof i[o]<"u"?r+=i[o](t,s,e,n,this):r+=this.renderToken(t,s,e)}return r};_o.prototype.renderInlineAsText=function(t,e,n){let r="";for(let i=0,s=t.length;i<s;i++)switch(t[i].type){case"text":r+=t[i].content;break;case"image":r+=this.renderInlineAsText(t[i].children,e,n);break;case"html_inline":case"html_block":r+=t[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};_o.prototype.render=function(t,e,n){let r="";const i=this.rules;for(let s=0,a=t.length;s<a;s++){const o=t[s].type;o==="inline"?r+=this.renderInline(t[s].children,e,n):typeof i[o]<"u"?r+=i[o](t,s,e,n,this):r+=this.renderToken(t,s,e,n)}return r};function Vn(){this.__rules__=[],this.__cache__=null}Vn.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Vn.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};Vn.prototype.at=function(t,e,n){const r=this.__find__(t),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Vn.prototype.before=function(t,e,n,r){const i=this.__find__(t),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Vn.prototype.after=function(t,e,n,r){const i=this.__find__(t),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Vn.prototype.push=function(t,e,n){const r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Vn.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Vn.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};Vn.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Vn.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function qr(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}qr.prototype.attrIndex=function(e){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===e)return r;return-1};qr.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};qr.prototype.attrSet=function(e,n){const r=this.attrIndex(e),i=[e,n];r<0?this.attrPush(i):this.attrs[r]=i};qr.prototype.attrGet=function(e){const n=this.attrIndex(e);let r=null;return n>=0&&(r=this.attrs[n][1]),r};qr.prototype.attrJoin=function(e,n){const r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function uA(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}uA.prototype.Token=qr;const KI=/\r\n?|\n/g,ZI=/\0/g;function JI(t){let e;e=t.src.replace(KI,`
`),e=e.replace(ZI,""),t.src=e}function QI(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function eO(t){const e=t.tokens;for(let n=0,r=e.length;n<r;n++){const i=e[n];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function tO(t){return/^<a[>\s]/i.test(t)}function nO(t){return/^<\/a\s*>/i.test(t)}function rO(t){const e=t.tokens;if(t.md.options.linkify)for(let n=0,r=e.length;n<r;n++){if(e[n].type!=="inline"||!t.md.linkify.pretest(e[n].content))continue;let i=e[n].children,s=0;for(let a=i.length-1;a>=0;a--){const o=i[a];if(o.type==="link_close"){for(a--;i[a].level!==o.level&&i[a].type!=="link_open";)a--;continue}if(o.type==="html_inline"&&(tO(o.content)&&s>0&&s--,nO(o.content)&&s++),!(s>0)&&o.type==="text"&&t.md.linkify.test(o.content)){const u=o.content;let c=t.md.linkify.match(u);const l=[];let h=o.level,d=0;c.length>0&&c[0].index===0&&a>0&&i[a-1].type==="text_special"&&(c=c.slice(1));for(let f=0;f<c.length;f++){const p=c[f].url,g=t.md.normalizeLink(p);if(!t.md.validateLink(g))continue;let m=c[f].text;c[f].schema?c[f].schema==="mailto:"&&!/^mailto:/i.test(m)?m=t.md.normalizeLinkText("mailto:"+m).replace(/^mailto:/,""):m=t.md.normalizeLinkText(m):m=t.md.normalizeLinkText("http://"+m).replace(/^http:\/\//,"");const y=c[f].index;if(y>d){const w=new t.Token("text","",0);w.content=u.slice(d,y),w.level=h,l.push(w)}const b=new t.Token("link_open","a",1);b.attrs=[["href",g]],b.level=h++,b.markup="linkify",b.info="auto",l.push(b);const v=new t.Token("text","",0);v.content=m,v.level=h,l.push(v);const x=new t.Token("link_close","a",-1);x.level=--h,x.markup="linkify",x.info="auto",l.push(x),d=c[f].lastIndex}if(d<u.length){const f=new t.Token("text","",0);f.content=u.slice(d),f.level=h,l.push(f)}e[n].children=i=aA(i,a,l)}}}}const cA=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,iO=/\((c|tm|r)\)/i,sO=/\((c|tm|r)\)/ig,aO={c:"",r:"",tm:""};function oO(t,e){return aO[e.toLowerCase()]}function uO(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&(r.content=r.content.replace(sO,oO)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function cO(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&cA.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function lO(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(iO.test(t.tokens[e].content)&&uO(t.tokens[e].children),cA.test(t.tokens[e].content)&&cO(t.tokens[e].children))}const hO=/['"]/,Eb=/['"]/g,Db="";function ml(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function fO(t,e){let n;const r=[];for(let i=0;i<t.length;i++){const s=t[i],a=t[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=a);n--);if(r.length=n+1,s.type!=="text")continue;let o=s.content,u=0,c=o.length;e:for(;u<c;){Eb.lastIndex=u;const l=Eb.exec(o);if(!l)break;let h=!0,d=!0;u=l.index+1;const f=l[0]==="'";let p=32;if(l.index-1>=0)p=o.charCodeAt(l.index-1);else for(n=i-1;n>=0&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n--)if(t[n].content){p=t[n].content.charCodeAt(t[n].content.length-1);break}let g=32;if(u<c)g=o.charCodeAt(u);else for(n=i+1;n<t.length&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n++)if(t[n].content){g=t[n].content.charCodeAt(0);break}const m=dc(p)||fc(String.fromCharCode(p)),y=dc(g)||fc(String.fromCharCode(g)),b=hc(p),v=hc(g);if(v?h=!1:y&&(b||m||(h=!1)),b?d=!1:m&&(v||y||(d=!1)),g===34&&l[0]==='"'&&p>=48&&p<=57&&(d=h=!1),h&&d&&(h=m,d=y),!h&&!d){f&&(s.content=ml(s.content,l.index,Db));continue}if(d)for(n=r.length-1;n>=0;n--){let x=r[n];if(r[n].level<a)break;if(x.single===f&&r[n].level===a){x=r[n];let w,k;f?(w=e.md.options.quotes[2],k=e.md.options.quotes[3]):(w=e.md.options.quotes[0],k=e.md.options.quotes[1]),s.content=ml(s.content,l.index,k),t[x.token].content=ml(t[x.token].content,x.pos,w),u+=k.length-1,x.token===i&&(u+=w.length-1),o=s.content,c=o.length,r.length=n;continue e}}h?r.push({token:i,pos:l.index,single:f,level:a}):d&&f&&(s.content=ml(s.content,l.index,Db))}}}function dO(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!hO.test(t.tokens[e].content)||fO(t.tokens[e].children,t)}function pO(t){let e,n;const r=t.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const a=r[s].children,o=a.length;for(e=0;e<o;e++)a[e].type==="text_special"&&(a[e].type="text");for(e=n=0;e<o;e++)a[e].type==="text"&&e+1<o&&a[e+1].type==="text"?a[e+1].content=a[e].content+a[e+1].content:(e!==n&&(a[n]=a[e]),n++);e!==n&&(a.length=n)}}const O0=[["normalize",JI],["block",QI],["inline",eO],["linkify",rO],["replacements",lO],["smartquotes",dO],["text_join",pO]];function ty(){this.ruler=new Vn;for(let t=0;t<O0.length;t++)this.ruler.push(O0[t][0],O0[t][1])}ty.prototype.process=function(t){const e=this.ruler.getRules("");for(let n=0,r=e.length;n<r;n++)e[n](t)};ty.prototype.State=uA;function _i(t,e,n,r){this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,a=0,o=0,u=0,c=i.length,l=!1;a<c;a++){const h=i.charCodeAt(a);if(!l)if(dt(h)){o++,h===9?u+=4-u%4:u++;continue}else l=!0;(h===10||a===c-1)&&(h!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(o),this.sCount.push(u),this.bsCount.push(0),l=!1,o=0,u=0,s=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}_i.prototype.push=function(t,e,n){const r=new qr(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};_i.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};_i.prototype.skipEmptyLines=function(e){for(let n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};_i.prototype.skipSpaces=function(e){for(let n=this.src.length;e<n;e++){const r=this.src.charCodeAt(e);if(!dt(r))break}return e};_i.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!dt(this.src.charCodeAt(--e)))return e+1;return e};_i.prototype.skipChars=function(e,n){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};_i.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};_i.prototype.getLines=function(e,n,r,i){if(e>=n)return"";const s=new Array(n-e);for(let a=0,o=e;o<n;o++,a++){let u=0;const c=this.bMarks[o];let l=c,h;for(o+1<n||i?h=this.eMarks[o]+1:h=this.eMarks[o];l<h&&u<r;){const d=this.src.charCodeAt(l);if(dt(d))d===9?u+=4-(u+this.bsCount[o])%4:u++;else if(l-c<this.tShift[o])u++;else break;l++}u>r?s[a]=new Array(u-r+1).join(" ")+this.src.slice(l,h):s[a]=this.src.slice(l,h)}return s.join("")};_i.prototype.Token=qr;const gO=65536;function P0(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function wb(t){const e=[],n=t.length;let r=0,i=t.charCodeAt(r),s=!1,a=0,o="";for(;r<n;)i===124&&(s?(o+=t.substring(a,r-1),a=r):(e.push(o+t.substring(a,r)),o="",a=r+1)),s=i===92,r++,i=t.charCodeAt(r);return e.push(o+t.substring(a)),e}function mO(t,e,n,r){if(e+2>n)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let s=t.bMarks[i]+t.tShift[i];if(s>=t.eMarks[i])return!1;const a=t.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58||s>=t.eMarks[i])return!1;const o=t.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58&&!dt(o)||a===45&&dt(o))return!1;for(;s<t.eMarks[i];){const x=t.src.charCodeAt(s);if(x!==124&&x!==45&&x!==58&&!dt(x))return!1;s++}let u=P0(t,e+1),c=u.split("|");const l=[];for(let x=0;x<c.length;x++){const w=c[x].trim();if(!w){if(x===0||x===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(w))return!1;w.charCodeAt(w.length-1)===58?l.push(w.charCodeAt(0)===58?"center":"right"):w.charCodeAt(0)===58?l.push("left"):l.push("")}if(u=P0(t,e).trim(),u.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;c=wb(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==l.length)return!1;if(r)return!0;const d=t.parentType;t.parentType="table";const f=t.md.block.ruler.getRules("blockquote"),p=t.push("table_open","table",1),g=[e,0];p.map=g;const m=t.push("thead_open","thead",1);m.map=[e,e+1];const y=t.push("tr_open","tr",1);y.map=[e,e+1];for(let x=0;x<c.length;x++){const w=t.push("th_open","th",1);l[x]&&(w.attrs=[["style","text-align:"+l[x]]]);const k=t.push("inline","",0);k.content=c[x].trim(),k.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let b,v=0;for(i=e+2;i<n&&!(t.sCount[i]<t.blkIndent);i++){let x=!1;for(let k=0,D=f.length;k<D;k++)if(f[k](t,i,n,!0)){x=!0;break}if(x||(u=P0(t,i).trim(),!u)||t.sCount[i]-t.blkIndent>=4||(c=wb(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),v+=h-c.length,v>gO))break;if(i===e+2){const k=t.push("tbody_open","tbody",1);k.map=b=[e+2,0]}const w=t.push("tr_open","tr",1);w.map=[i,i+1];for(let k=0;k<h;k++){const D=t.push("td_open","td",1);l[k]&&(D.attrs=[["style","text-align:"+l[k]]]);const A=t.push("inline","",0);A.content=c[k]?c[k].trim():"",A.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return b&&(t.push("tbody_close","tbody",-1),b[1]=i),t.push("table_close","table",-1),g[1]=i,t.parentType=d,t.line=i,!0}function yO(t,e,n){if(t.sCount[e]-t.blkIndent<4)return!1;let r=e+1,i=r;for(;r<n;){if(t.isEmpty(r)){r++;continue}if(t.sCount[r]-t.blkIndent>=4){r++,i=r;continue}break}t.line=i;const s=t.push("code_block","code",0);return s.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,s.map=[e,t.line],!0}function vO(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>s)return!1;const a=t.src.charCodeAt(i);if(a!==126&&a!==96)return!1;let o=i;i=t.skipChars(i,a);let u=i-o;if(u<3)return!1;const c=t.src.slice(o,i),l=t.src.slice(i,s);if(a===96&&l.indexOf(String.fromCharCode(a))>=0)return!1;if(r)return!0;let h=e,d=!1;for(;h++,!(h>=n||(i=o=t.bMarks[h]+t.tShift[h],s=t.eMarks[h],i<s&&t.sCount[h]<t.blkIndent));)if(t.src.charCodeAt(i)===a&&!(t.sCount[h]-t.blkIndent>=4)&&(i=t.skipChars(i,a),!(i-o<u)&&(i=t.skipSpaces(i),!(i<s)))){d=!0;break}u=t.sCount[e],t.line=h+(d?1:0);const f=t.push("fence","code",0);return f.info=l,f.content=t.getLines(e+1,h,u,!0),f.markup=c,f.map=[e,t.line],!0}function bO(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];const a=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(r)return!0;const o=[],u=[],c=[],l=[],h=t.md.block.ruler.getRules("blockquote"),d=t.parentType;t.parentType="blockquote";let f=!1,p;for(p=e;p<n;p++){const v=t.sCount[p]<t.blkIndent;if(i=t.bMarks[p]+t.tShift[p],s=t.eMarks[p],i>=s)break;if(t.src.charCodeAt(i++)===62&&!v){let w=t.sCount[p]+1,k,D;t.src.charCodeAt(i)===32?(i++,w++,D=!1,k=!0):t.src.charCodeAt(i)===9?(k=!0,(t.bsCount[p]+w)%4===3?(i++,w++,D=!1):D=!0):k=!1;let A=w;for(o.push(t.bMarks[p]),t.bMarks[p]=i;i<s;){const R=t.src.charCodeAt(i);if(dt(R))R===9?A+=4-(A+t.bsCount[p]+(D?1:0))%4:A++;else break;i++}f=i>=s,u.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(k?1:0),c.push(t.sCount[p]),t.sCount[p]=A-w,l.push(t.tShift[p]),t.tShift[p]=i-t.bMarks[p];continue}if(f)break;let x=!1;for(let w=0,k=h.length;w<k;w++)if(h[w](t,p,n,!0)){x=!0;break}if(x){t.lineMax=p,t.blkIndent!==0&&(o.push(t.bMarks[p]),u.push(t.bsCount[p]),l.push(t.tShift[p]),c.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}o.push(t.bMarks[p]),u.push(t.bsCount[p]),l.push(t.tShift[p]),c.push(t.sCount[p]),t.sCount[p]=-1}const g=t.blkIndent;t.blkIndent=0;const m=t.push("blockquote_open","blockquote",1);m.markup=">";const y=[e,0];m.map=y,t.md.block.tokenize(t,e,p);const b=t.push("blockquote_close","blockquote",-1);b.markup=">",t.lineMax=a,t.parentType=d,y[1]=t.line;for(let v=0;v<l.length;v++)t.bMarks[v+e]=o[v],t.tShift[v+e]=l[v],t.sCount[v+e]=c[v],t.bsCount[v+e]=u[v];return t.blkIndent=g,!0}function xO(t,e,n,r){const i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.bMarks[e]+t.tShift[e];const a=t.src.charCodeAt(s++);if(a!==42&&a!==45&&a!==95)return!1;let o=1;for(;s<i;){const c=t.src.charCodeAt(s++);if(c!==a&&!dt(c))return!1;c===a&&o++}if(o<3)return!1;if(r)return!0;t.line=e+1;const u=t.push("hr","hr",0);return u.map=[e,t.line],u.markup=Array(o+1).join(String.fromCharCode(a)),!0}function _b(t,e){const n=t.eMarks[e];let r=t.bMarks[e]+t.tShift[e];const i=t.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const s=t.src.charCodeAt(r);if(!dt(s))return-1}return r}function Ab(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];let i=n;if(i+1>=r)return-1;let s=t.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=t.src.charCodeAt(i++),s>=48&&s<=57){if(i-n>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=t.src.charCodeAt(i),!dt(s))?-1:i}function EO(t,e){const n=t.level+2;for(let r=e+2,i=t.tokens.length-2;r<i;r++)t.tokens[r].level===n&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}function DO(t,e,n,r){let i,s,a,o,u=e,c=!0;if(t.sCount[u]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[u]-t.listIndent>=4&&t.sCount[u]<t.blkIndent)return!1;let l=!1;r&&t.parentType==="paragraph"&&t.sCount[u]>=t.blkIndent&&(l=!0);let h,d,f;if((f=Ab(t,u))>=0){if(h=!0,a=t.bMarks[u]+t.tShift[u],d=Number(t.src.slice(a,f-1)),l&&d!==1)return!1}else if((f=_b(t,u))>=0)h=!1;else return!1;if(l&&t.skipSpaces(f)>=t.eMarks[u])return!1;if(r)return!0;const p=t.src.charCodeAt(f-1),g=t.tokens.length;h?(o=t.push("ordered_list_open","ol",1),d!==1&&(o.attrs=[["start",d]])):o=t.push("bullet_list_open","ul",1);const m=[u,0];o.map=m,o.markup=String.fromCharCode(p);let y=!1;const b=t.md.block.ruler.getRules("list"),v=t.parentType;for(t.parentType="list";u<n;){s=f,i=t.eMarks[u];const x=t.sCount[u]+f-(t.bMarks[u]+t.tShift[u]);let w=x;for(;s<i;){const _=t.src.charCodeAt(s);if(_===9)w+=4-(w+t.bsCount[u])%4;else if(_===32)w++;else break;s++}const k=s;let D;k>=i?D=1:D=w-x,D>4&&(D=1);const A=x+D;o=t.push("list_item_open","li",1),o.markup=String.fromCharCode(p);const R=[u,0];o.map=R,h&&(o.info=t.src.slice(a,f-1));const N=t.tight,L=t.tShift[u],S=t.sCount[u],M=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=A,t.tight=!0,t.tShift[u]=k-t.bMarks[u],t.sCount[u]=w,k>=i&&t.isEmpty(u+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,u,n,!0),(!t.tight||y)&&(c=!1),y=t.line-u>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=M,t.tShift[u]=L,t.sCount[u]=S,t.tight=N,o=t.push("list_item_close","li",-1),o.markup=String.fromCharCode(p),u=t.line,R[1]=u,u>=n||t.sCount[u]<t.blkIndent||t.sCount[u]-t.blkIndent>=4)break;let E=!1;for(let _=0,C=b.length;_<C;_++)if(b[_](t,u,n,!0)){E=!0;break}if(E)break;if(h){if(f=Ab(t,u),f<0)break;a=t.bMarks[u]+t.tShift[u]}else if(f=_b(t,u),f<0)break;if(p!==t.src.charCodeAt(f-1))break}return h?o=t.push("ordered_list_close","ol",-1):o=t.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(p),m[1]=u,t.line=u,t.parentType=v,c&&EO(t,g),!0}function wO(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e],a=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==91)return!1;function o(b){const v=t.lineMax;if(b>=v||t.isEmpty(b))return null;let x=!1;if(t.sCount[b]-t.blkIndent>3&&(x=!0),t.sCount[b]<0&&(x=!0),!x){const D=t.md.block.ruler.getRules("reference"),A=t.parentType;t.parentType="reference";let R=!1;for(let N=0,L=D.length;N<L;N++)if(D[N](t,b,v,!0)){R=!0;break}if(t.parentType=A,R)return null}const w=t.bMarks[b]+t.tShift[b],k=t.eMarks[b];return t.src.slice(w,k+1)}let u=t.src.slice(i,s+1);s=u.length;let c=-1;for(i=1;i<s;i++){const b=u.charCodeAt(i);if(b===91)return!1;if(b===93){c=i;break}else if(b===10){const v=o(a);v!==null&&(u+=v,s=u.length,a++)}else if(b===92&&(i++,i<s&&u.charCodeAt(i)===10)){const v=o(a);v!==null&&(u+=v,s=u.length,a++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(i=c+2;i<s;i++){const b=u.charCodeAt(i);if(b===10){const v=o(a);v!==null&&(u+=v,s=u.length,a++)}else if(!dt(b))break}const l=t.md.helpers.parseLinkDestination(u,i,s);if(!l.ok)return!1;const h=t.md.normalizeLink(l.str);if(!t.md.validateLink(h))return!1;i=l.pos;const d=i,f=a,p=i;for(;i<s;i++){const b=u.charCodeAt(i);if(b===10){const v=o(a);v!==null&&(u+=v,s=u.length,a++)}else if(!dt(b))break}let g=t.md.helpers.parseLinkTitle(u,i,s);for(;g.can_continue;){const b=o(a);if(b===null)break;u+=b,i=s,s=u.length,a++,g=t.md.helpers.parseLinkTitle(u,i,s,g)}let m;for(i<s&&p!==i&&g.ok?(m=g.str,i=g.pos):(m="",i=d,a=f);i<s;){const b=u.charCodeAt(i);if(!dt(b))break;i++}if(i<s&&u.charCodeAt(i)!==10&&m)for(m="",i=d,a=f;i<s;){const b=u.charCodeAt(i);if(!dt(b))break;i++}if(i<s&&u.charCodeAt(i)!==10)return!1;const y=Sd(u.slice(1,c));return y?(r||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[y]>"u"&&(t.env.references[y]={title:m,href:h}),t.line=a),!0):!1}const _O=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],AO="[a-zA-Z_:][a-zA-Z0-9:._-]*",CO="[^\"'=<>`\\x00-\\x20]+",TO="'[^']*'",kO='"[^"]*"',FO="(?:"+CO+"|"+TO+"|"+kO+")",SO="(?:\\s+"+AO+"(?:\\s*=\\s*"+FO+")?)",lA="<[A-Za-z][A-Za-z0-9\\-]*"+SO+"*\\s*\\/?>",hA="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",RO="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",NO="<[?][\\s\\S]*?[?]>",LO="<![A-Za-z][^>]*>",MO="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",IO=new RegExp("^(?:"+lA+"|"+hA+"|"+RO+"|"+NO+"|"+LO+"|"+MO+")"),OO=new RegExp("^(?:"+lA+"|"+hA+")"),Aa=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+_O.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(OO.source+"\\s*$"),/^$/,!1]];function PO(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let a=t.src.slice(i,s),o=0;for(;o<Aa.length&&!Aa[o][0].test(a);o++);if(o===Aa.length)return!1;if(r)return Aa[o][2];let u=e+1;if(!Aa[o][1].test(a)){for(;u<n&&!(t.sCount[u]<t.blkIndent);u++)if(i=t.bMarks[u]+t.tShift[u],s=t.eMarks[u],a=t.src.slice(i,s),Aa[o][1].test(a)){a.length!==0&&u++;break}}t.line=u;const c=t.push("html_block","",0);return c.map=[e,u],c.content=t.getLines(e,u,t.blkIndent,!0),!0}function $O(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let a=t.src.charCodeAt(i);if(a!==35||i>=s)return!1;let o=1;for(a=t.src.charCodeAt(++i);a===35&&i<s&&o<=6;)o++,a=t.src.charCodeAt(++i);if(o>6||i<s&&!dt(a))return!1;if(r)return!0;s=t.skipSpacesBack(s,i);const u=t.skipCharsBack(s,35,i);u>i&&dt(t.src.charCodeAt(u-1))&&(s=u),t.line=e+1;const c=t.push("heading_open","h"+String(o),1);c.markup="########".slice(0,o),c.map=[e,t.line];const l=t.push("inline","",0);l.content=t.src.slice(i,s).trim(),l.map=[e,t.line],l.children=[];const h=t.push("heading_close","h"+String(o),-1);return h.markup="########".slice(0,o),!0}function BO(t,e,n){const r=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const i=t.parentType;t.parentType="paragraph";let s=0,a,o=e+1;for(;o<n&&!t.isEmpty(o);o++){if(t.sCount[o]-t.blkIndent>3)continue;if(t.sCount[o]>=t.blkIndent){let f=t.bMarks[o]+t.tShift[o];const p=t.eMarks[o];if(f<p&&(a=t.src.charCodeAt(f),(a===45||a===61)&&(f=t.skipChars(f,a),f=t.skipSpaces(f),f>=p))){s=a===61?1:2;break}}if(t.sCount[o]<0)continue;let d=!1;for(let f=0,p=r.length;f<p;f++)if(r[f](t,o,n,!0)){d=!0;break}if(d)break}if(!s)return!1;const u=t.getLines(e,o,t.blkIndent,!1).trim();t.line=o+1;const c=t.push("heading_open","h"+String(s),1);c.markup=String.fromCharCode(a),c.map=[e,t.line];const l=t.push("inline","",0);l.content=u,l.map=[e,t.line-1],l.children=[];const h=t.push("heading_close","h"+String(s),-1);return h.markup=String.fromCharCode(a),t.parentType=i,!0}function UO(t,e,n){const r=t.md.block.ruler.getRules("paragraph"),i=t.parentType;let s=e+1;for(t.parentType="paragraph";s<n&&!t.isEmpty(s);s++){if(t.sCount[s]-t.blkIndent>3||t.sCount[s]<0)continue;let c=!1;for(let l=0,h=r.length;l<h;l++)if(r[l](t,s,n,!0)){c=!0;break}if(c)break}const a=t.getLines(e,s,t.blkIndent,!1).trim();t.line=s;const o=t.push("paragraph_open","p",1);o.map=[e,t.line];const u=t.push("inline","",0);return u.content=a,u.map=[e,t.line],u.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}const yl=[["table",mO,["paragraph","reference"]],["code",yO],["fence",vO,["paragraph","reference","blockquote","list"]],["blockquote",bO,["paragraph","reference","blockquote","list"]],["hr",xO,["paragraph","reference","blockquote","list"]],["list",DO,["paragraph","reference","blockquote"]],["reference",wO],["html_block",PO,["paragraph","reference","blockquote"]],["heading",$O,["paragraph","reference","blockquote"]],["lheading",BO],["paragraph",UO]];function Rd(){this.ruler=new Vn;for(let t=0;t<yl.length;t++)this.ruler.push(yl[t][0],yl[t][1],{alt:(yl[t][2]||[]).slice()})}Rd.prototype.tokenize=function(t,e,n){const r=this.ruler.getRules(""),i=r.length,s=t.md.options.maxNesting;let a=e,o=!1;for(;a<n&&(t.line=a=t.skipEmptyLines(a),!(a>=n||t.sCount[a]<t.blkIndent));){if(t.level>=s){t.line=n;break}const u=t.line;let c=!1;for(let l=0;l<i;l++)if(c=r[l](t,a,n,!1),c){if(u>=t.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");t.tight=!o,t.isEmpty(t.line-1)&&(o=!0),a=t.line,a<n&&t.isEmpty(a)&&(o=!0,a++,t.line=a)}};Rd.prototype.parse=function(t,e,n,r){if(!t)return;const i=new this.State(t,e,n,r);this.tokenize(i,i.line,i.lineMax)};Rd.prototype.State=_i;function $c(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}$c.prototype.pushPending=function(){const t=new qr("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};$c.prototype.push=function(t,e,n){this.pending&&this.pushPending();const r=new qr(t,e,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};$c.prototype.scanDelims=function(t,e){const n=this.posMax,r=this.src.charCodeAt(t),i=t>0?this.src.charCodeAt(t-1):32;let s=t;for(;s<n&&this.src.charCodeAt(s)===r;)s++;const a=s-t,o=s<n?this.src.charCodeAt(s):32,u=dc(i)||fc(String.fromCharCode(i)),c=dc(o)||fc(String.fromCharCode(o)),l=hc(i),h=hc(o),d=!h&&(!c||l||u),f=!l&&(!u||h||c);return{can_open:d&&(e||!f||u),can_close:f&&(e||!d||c),length:a}};$c.prototype.Token=qr;function GO(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function HO(t,e){let n=t.pos;for(;n<t.posMax&&!GO(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}const WO=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function zO(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const n=t.pos,r=t.posMax;if(n+3>r||t.src.charCodeAt(n)!==58||t.src.charCodeAt(n+1)!==47||t.src.charCodeAt(n+2)!==47)return!1;const i=t.pending.match(WO);if(!i)return!1;const s=i[1],a=t.md.linkify.matchAtStart(t.src.slice(n-s.length));if(!a)return!1;let o=a.url;if(o.length<=s.length)return!1;o=o.replace(/\*+$/,"");const u=t.md.normalizeLink(o);if(!t.md.validateLink(u))return!1;if(!e){t.pending=t.pending.slice(0,-s.length);const c=t.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(o);const h=t.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return t.pos+=o.length-s.length,!0}function YO(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==10)return!1;const r=t.pending.length-1,i=t.posMax;if(!e)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&t.pending.charCodeAt(s-1)===32;)s--;t.pending=t.pending.slice(0,s),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(n++;n<i&&dt(t.src.charCodeAt(n));)n++;return t.pos=n,!0}const ny=[];for(let t=0;t<256;t++)ny.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){ny[t.charCodeAt(0)]=1});function XO(t,e){let n=t.pos;const r=t.posMax;if(t.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=t.src.charCodeAt(n);if(i===10){for(e||t.push("hardbreak","br",0),n++;n<r&&(i=t.src.charCodeAt(n),!!dt(i));)n++;return t.pos=n,!0}let s=t.src[n];if(i>=55296&&i<=56319&&n+1<r){const o=t.src.charCodeAt(n+1);o>=56320&&o<=57343&&(s+=t.src[n+1],n++)}const a="\\"+s;if(!e){const o=t.push("text_special","",0);i<256&&ny[i]!==0?o.content=s:o.content=a,o.markup=a,o.info="escape"}return t.pos=n+1,!0}function VO(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==96)return!1;const i=n;n++;const s=t.posMax;for(;n<s&&t.src.charCodeAt(n)===96;)n++;const a=t.src.slice(i,n),o=a.length;if(t.backticksScanned&&(t.backticks[o]||0)<=i)return e||(t.pending+=a),t.pos+=o,!0;let u=n,c;for(;(c=t.src.indexOf("`",u))!==-1;){for(u=c+1;u<s&&t.src.charCodeAt(u)===96;)u++;const l=u-c;if(l===o){if(!e){const h=t.push("code_inline","code",0);h.markup=a,h.content=t.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=u,!0}t.backticks[l]=c}return t.backticksScanned=!0,e||(t.pending+=a),t.pos+=o,!0}function qO(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==126)return!1;const i=t.scanDelims(t.pos,!0);let s=i.length;const a=String.fromCharCode(r);if(s<2)return!1;let o;s%2&&(o=t.push("text","",0),o.content=a,s--);for(let u=0;u<s;u+=2)o=t.push("text","",0),o.content=a+a,t.delimiters.push({marker:r,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function Cb(t,e){let n;const r=[],i=e.length;for(let s=0;s<i;s++){const a=e[s];if(a.marker!==126||a.end===-1)continue;const o=e[a.end];n=t.tokens[a.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=t.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",t.tokens[o.token-1].type==="text"&&t.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const s=r.pop();let a=s+1;for(;a<t.tokens.length&&t.tokens[a].type==="s_close";)a++;a--,s!==a&&(n=t.tokens[a],t.tokens[a]=t.tokens[s],t.tokens[s]=n)}}function jO(t){const e=t.tokens_meta,n=t.tokens_meta.length;Cb(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&Cb(t,e[r].delimiters)}const fA={tokenize:qO,postProcess:jO};function KO(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==95&&r!==42)return!1;const i=t.scanDelims(t.pos,r===42);for(let s=0;s<i.length;s++){const a=t.push("text","",0);a.content=String.fromCharCode(r),t.delimiters.push({marker:r,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function Tb(t,e){const n=e.length;for(let r=n-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=e[i.end],a=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===s.token+1,o=String.fromCharCode(i.marker),u=t.tokens[i.token];u.type=a?"strong_open":"em_open",u.tag=a?"strong":"em",u.nesting=1,u.markup=a?o+o:o,u.content="";const c=t.tokens[s.token];c.type=a?"strong_close":"em_close",c.tag=a?"strong":"em",c.nesting=-1,c.markup=a?o+o:o,c.content="",a&&(t.tokens[e[r-1].token].content="",t.tokens[e[i.end+1].token].content="",r--)}}function ZO(t){const e=t.tokens_meta,n=t.tokens_meta.length;Tb(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&Tb(t,e[r].delimiters)}const dA={tokenize:KO,postProcess:ZO};function JO(t,e){let n,r,i,s,a="",o="",u=t.pos,c=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const l=t.pos,h=t.posMax,d=t.pos+1,f=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(f<0)return!1;let p=f+1;if(p<h&&t.src.charCodeAt(p)===40){for(c=!1,p++;p<h&&(n=t.src.charCodeAt(p),!(!dt(n)&&n!==10));p++);if(p>=h)return!1;if(u=p,i=t.md.helpers.parseLinkDestination(t.src,p,t.posMax),i.ok){for(a=t.md.normalizeLink(i.str),t.md.validateLink(a)?p=i.pos:a="",u=p;p<h&&(n=t.src.charCodeAt(p),!(!dt(n)&&n!==10));p++);if(i=t.md.helpers.parseLinkTitle(t.src,p,t.posMax),p<h&&u!==p&&i.ok)for(o=i.str,p=i.pos;p<h&&(n=t.src.charCodeAt(p),!(!dt(n)&&n!==10));p++);}(p>=h||t.src.charCodeAt(p)!==41)&&(c=!0),p++}if(c){if(typeof t.env.references>"u")return!1;if(p<h&&t.src.charCodeAt(p)===91?(u=p+1,p=t.md.helpers.parseLinkLabel(t,p),p>=0?r=t.src.slice(u,p++):p=f+1):p=f+1,r||(r=t.src.slice(d,f)),s=t.env.references[Sd(r)],!s)return t.pos=l,!1;a=s.href,o=s.title}if(!e){t.pos=d,t.posMax=f;const g=t.push("link_open","a",1),m=[["href",a]];g.attrs=m,o&&m.push(["title",o]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=p,t.posMax=h,!0}function QO(t,e){let n,r,i,s,a,o,u,c,l="";const h=t.pos,d=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const f=t.pos+2,p=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(p<0)return!1;if(s=p+1,s<d&&t.src.charCodeAt(s)===40){for(s++;s<d&&(n=t.src.charCodeAt(s),!(!dt(n)&&n!==10));s++);if(s>=d)return!1;for(c=s,o=t.md.helpers.parseLinkDestination(t.src,s,t.posMax),o.ok&&(l=t.md.normalizeLink(o.str),t.md.validateLink(l)?s=o.pos:l=""),c=s;s<d&&(n=t.src.charCodeAt(s),!(!dt(n)&&n!==10));s++);if(o=t.md.helpers.parseLinkTitle(t.src,s,t.posMax),s<d&&c!==s&&o.ok)for(u=o.str,s=o.pos;s<d&&(n=t.src.charCodeAt(s),!(!dt(n)&&n!==10));s++);else u="";if(s>=d||t.src.charCodeAt(s)!==41)return t.pos=h,!1;s++}else{if(typeof t.env.references>"u")return!1;if(s<d&&t.src.charCodeAt(s)===91?(c=s+1,s=t.md.helpers.parseLinkLabel(t,s),s>=0?i=t.src.slice(c,s++):s=p+1):s=p+1,i||(i=t.src.slice(f,p)),a=t.env.references[Sd(i)],!a)return t.pos=h,!1;l=a.href,u=a.title}if(!e){r=t.src.slice(f,p);const g=[];t.md.inline.parse(r,t.md,t.env,g);const m=t.push("image","img",0),y=[["src",l],["alt",""]];m.attrs=y,m.children=g,m.content=r,u&&y.push(["title",u])}return t.pos=s,t.posMax=d,!0}const e6=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,t6=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function n6(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==60)return!1;const r=t.pos,i=t.posMax;for(;;){if(++n>=i)return!1;const a=t.src.charCodeAt(n);if(a===60)return!1;if(a===62)break}const s=t.src.slice(r+1,n);if(t6.test(s)){const a=t.md.normalizeLink(s);if(!t.md.validateLink(a))return!1;if(!e){const o=t.push("link_open","a",1);o.attrs=[["href",a]],o.markup="autolink",o.info="auto";const u=t.push("text","",0);u.content=t.md.normalizeLinkText(s);const c=t.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return t.pos+=s.length+2,!0}if(e6.test(s)){const a=t.md.normalizeLink("mailto:"+s);if(!t.md.validateLink(a))return!1;if(!e){const o=t.push("link_open","a",1);o.attrs=[["href",a]],o.markup="autolink",o.info="auto";const u=t.push("text","",0);u.content=t.md.normalizeLinkText(s);const c=t.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return t.pos+=s.length+2,!0}return!1}function r6(t){return/^<a[>\s]/i.test(t)}function i6(t){return/^<\/a\s*>/i.test(t)}function s6(t){const e=t|32;return e>=97&&e<=122}function a6(t,e){if(!t.md.options.html)return!1;const n=t.posMax,r=t.pos;if(t.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=t.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!s6(i))return!1;const s=t.src.slice(r).match(IO);if(!s)return!1;if(!e){const a=t.push("html_inline","",0);a.content=s[0],r6(a.content)&&t.linkLevel++,i6(a.content)&&t.linkLevel--}return t.pos+=s[0].length,!0}const o6=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,u6=/^&([a-z][a-z0-9]{1,31});/i;function c6(t,e){const n=t.pos,r=t.posMax;if(t.src.charCodeAt(n)!==38||n+1>=r)return!1;if(t.src.charCodeAt(n+1)===35){const s=t.src.slice(n).match(o6);if(s){if(!e){const a=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),o=t.push("text_special","",0);o.content=ey(a)?jh(a):jh(65533),o.markup=s[0],o.info="entity"}return t.pos+=s[0].length,!0}}else{const s=t.src.slice(n).match(u6);if(s){const a=sA(s[0]);if(a!==s[0]){if(!e){const o=t.push("text_special","",0);o.content=a,o.markup=s[0],o.info="entity"}return t.pos+=s[0].length,!0}}}return!1}function kb(t){const e={},n=t.length;if(!n)return;let r=0,i=-2;const s=[];for(let a=0;a<n;a++){const o=t[a];if(s.push(0),(t[r].marker!==o.marker||i!==o.token-1)&&(r=a),i=o.token,o.length=o.length||0,!o.close)continue;e.hasOwnProperty(o.marker)||(e[o.marker]=[-1,-1,-1,-1,-1,-1]);const u=e[o.marker][(o.open?3:0)+o.length%3];let c=r-s[r]-1,l=c;for(;c>u;c-=s[c]+1){const h=t[c];if(h.marker===o.marker&&h.open&&h.end<0){let d=!1;if((h.close||o.open)&&(h.length+o.length)%3===0&&(h.length%3!==0||o.length%3!==0)&&(d=!0),!d){const f=c>0&&!t[c-1].open?s[c-1]+1:0;s[a]=a-c+f,s[c]=f,o.open=!1,h.end=a,h.close=!1,l=-1,i=-2;break}}}l!==-1&&(e[o.marker][(o.open?3:0)+(o.length||0)%3]=l)}}function l6(t){const e=t.tokens_meta,n=t.tokens_meta.length;kb(t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&kb(e[r].delimiters)}function h6(t){let e,n,r=0;const i=t.tokens,s=t.tokens.length;for(e=n=0;e<s;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<s&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==n&&(i[n]=i[e]),n++);e!==n&&(i.length=n)}const $0=[["text",HO],["linkify",zO],["newline",YO],["escape",XO],["backticks",VO],["strikethrough",fA.tokenize],["emphasis",dA.tokenize],["link",JO],["image",QO],["autolink",n6],["html_inline",a6],["entity",c6]],B0=[["balance_pairs",l6],["strikethrough",fA.postProcess],["emphasis",dA.postProcess],["fragments_join",h6]];function Bc(){this.ruler=new Vn;for(let t=0;t<$0.length;t++)this.ruler.push($0[t][0],$0[t][1]);this.ruler2=new Vn;for(let t=0;t<B0.length;t++)this.ruler2.push(B0[t][0],B0[t][1])}Bc.prototype.skipToken=function(t){const e=t.pos,n=this.ruler.getRules(""),r=n.length,i=t.md.options.maxNesting,s=t.cache;if(typeof s[e]<"u"){t.pos=s[e];return}let a=!1;if(t.level<i){for(let o=0;o<r;o++)if(t.level++,a=n[o](t,!0),t.level--,a){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;a||t.pos++,s[e]=t.pos};Bc.prototype.tokenize=function(t){const e=this.ruler.getRules(""),n=e.length,r=t.posMax,i=t.md.options.maxNesting;for(;t.pos<r;){const s=t.pos;let a=!1;if(t.level<i){for(let o=0;o<n;o++)if(a=e[o](t,!1),a){if(s>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(a){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};Bc.prototype.parse=function(t,e,n,r){const i=new this.State(t,e,n,r);this.tokenize(i);const s=this.ruler2.getRules(""),a=s.length;for(let o=0;o<a;o++)s[o](i)};Bc.prototype.State=$c;function f6(t){const e={};t=t||{},e.src_Any=eA.source,e.src_Cc=tA.source,e.src_Z=rA.source,e.src_P=J1.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function kg(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function Nd(t){return Object.prototype.toString.call(t)}function d6(t){return Nd(t)==="[object String]"}function p6(t){return Nd(t)==="[object Object]"}function g6(t){return Nd(t)==="[object RegExp]"}function Fb(t){return Nd(t)==="[object Function]"}function m6(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const pA={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function y6(t){return Object.keys(t||{}).reduce(function(e,n){return e||pA.hasOwnProperty(n)},!1)}const v6={"http:":{validate:function(t,e,n){const r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){const r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){const r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},b6="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",x6="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function E6(t){t.__index__=-1,t.__text_cache__=""}function D6(t){return function(e,n){const r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function Sb(){return function(t,e){e.normalize(t)}}function Kh(t){const e=t.re=f6(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(b6),n.push(e.src_xn),e.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];t.__compiled__={};function s(o,u){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+u)}Object.keys(t.__schemas__).forEach(function(o){const u=t.__schemas__[o];if(u===null)return;const c={validate:null,link:null};if(t.__compiled__[o]=c,p6(u)){g6(u.validate)?c.validate=D6(u.validate):Fb(u.validate)?c.validate=u.validate:s(o,u),Fb(u.normalize)?c.normalize=u.normalize:u.normalize?s(o,u):c.normalize=Sb();return}if(d6(u)){i.push(o);return}s(o,u)}),i.forEach(function(o){t.__compiled__[t.__schemas__[o]]&&(t.__compiled__[o].validate=t.__compiled__[t.__schemas__[o]].validate,t.__compiled__[o].normalize=t.__compiled__[t.__schemas__[o]].normalize)}),t.__compiled__[""]={validate:null,normalize:Sb()};const a=Object.keys(t.__compiled__).filter(function(o){return o.length>0&&t.__compiled__[o]}).map(m6).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+a+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+a+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),E6(t)}function w6(t,e){const n=t.__index__,r=t.__last_index__,i=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function Fg(t,e){const n=new w6(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function hr(t,e){if(!(this instanceof hr))return new hr(t,e);e||y6(t)&&(e=t,t={}),this.__opts__=kg({},pA,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=kg({},v6,t),this.__compiled__={},this.__tlds__=x6,this.__tlds_replaced__=!1,this.re={},Kh(this)}hr.prototype.add=function(e,n){return this.__schemas__[e]=n,Kh(this),this};hr.prototype.set=function(e){return this.__opts__=kg(this.__opts__,e),this};hr.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let n,r,i,s,a,o,u,c,l;if(this.re.schema_test.test(e)){for(u=this.re.schema_search,u.lastIndex=0;(n=u.exec(e))!==null;)if(s=this.testSchemaAt(e,n[2],u.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(a=r.index+r[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=e.indexOf("@"),l>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(a=i.index+i[1].length,o=i.index+i[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=o))),this.__index__>=0};hr.prototype.pretest=function(e){return this.re.pretest.test(e)};hr.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};hr.prototype.match=function(e){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(n.push(Fg(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)n.push(Fg(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};hr.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const n=this.re.schema_at_start.exec(e);if(!n)return null;const r=this.testSchemaAt(e,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Fg(this,0)):null};hr.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),Kh(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Kh(this),this)};hr.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};hr.prototype.onCompile=function(){};const Ga=2147483647,hi=36,ry=1,pc=26,_6=38,A6=700,gA=72,mA=128,yA="-",C6=/^xn--/,T6=/[^\0-\x7F]/,k6=/[\x2E\u3002\uFF0E\uFF61]/g,F6={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U0=hi-ry,fi=Math.floor,G0=String.fromCharCode;function rs(t){throw new RangeError(F6[t])}function S6(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}function vA(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(k6,".");const i=t.split("."),s=S6(i,e).join(".");return r+s}function bA(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}const R6=t=>String.fromCodePoint(...t),N6=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:hi},Rb=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},xA=function(t,e,n){let r=0;for(t=n?fi(t/A6):t>>1,t+=fi(t/e);t>U0*pc>>1;r+=hi)t=fi(t/U0);return fi(r+(U0+1)*t/(t+_6))},EA=function(t){const e=[],n=t.length;let r=0,i=mA,s=gA,a=t.lastIndexOf(yA);a<0&&(a=0);for(let o=0;o<a;++o)t.charCodeAt(o)>=128&&rs("not-basic"),e.push(t.charCodeAt(o));for(let o=a>0?a+1:0;o<n;){const u=r;for(let l=1,h=hi;;h+=hi){o>=n&&rs("invalid-input");const d=N6(t.charCodeAt(o++));d>=hi&&rs("invalid-input"),d>fi((Ga-r)/l)&&rs("overflow"),r+=d*l;const f=h<=s?ry:h>=s+pc?pc:h-s;if(d<f)break;const p=hi-f;l>fi(Ga/p)&&rs("overflow"),l*=p}const c=e.length+1;s=xA(r-u,c,u==0),fi(r/c)>Ga-i&&rs("overflow"),i+=fi(r/c),r%=c,e.splice(r++,0,i)}return String.fromCodePoint(...e)},DA=function(t){const e=[];t=bA(t);const n=t.length;let r=mA,i=0,s=gA;for(const u of t)u<128&&e.push(G0(u));const a=e.length;let o=a;for(a&&e.push(yA);o<n;){let u=Ga;for(const l of t)l>=r&&l<u&&(u=l);const c=o+1;u-r>fi((Ga-i)/c)&&rs("overflow"),i+=(u-r)*c,r=u;for(const l of t)if(l<r&&++i>Ga&&rs("overflow"),l===r){let h=i;for(let d=hi;;d+=hi){const f=d<=s?ry:d>=s+pc?pc:d-s;if(h<f)break;const p=h-f,g=hi-f;e.push(G0(Rb(f+p%g,0))),h=fi(p/g)}e.push(G0(Rb(h,0))),s=xA(i,c,o===a),i=0,++o}++i,++r}return e.join("")},L6=function(t){return vA(t,function(e){return C6.test(e)?EA(e.slice(4).toLowerCase()):e})},M6=function(t){return vA(t,function(e){return T6.test(e)?"xn--"+DA(e):e})},wA={version:"2.3.1",ucs2:{decode:bA,encode:R6},decode:EA,encode:DA,toASCII:M6,toUnicode:L6},I6={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},O6={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},P6={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},$6={default:I6,zero:O6,commonmark:P6},B6=/^(vbscript|javascript|file|data):/,U6=/^data:image\/(gif|png|jpeg|webp);/;function G6(t){const e=t.trim().toLowerCase();return B6.test(e)?U6.test(e):!0}const _A=["http:","https:","mailto:"];function H6(t){const e=Z1(t,!0);if(e.hostname&&(!e.protocol||_A.indexOf(e.protocol)>=0))try{e.hostname=wA.toASCII(e.hostname)}catch{}return Pc(K1(e))}function W6(t){const e=Z1(t,!0);if(e.hostname&&(!e.protocol||_A.indexOf(e.protocol)>=0))try{e.hostname=wA.toUnicode(e.hostname)}catch{}return to(K1(e),to.defaultChars+"%")}function Wr(t,e){if(!(this instanceof Wr))return new Wr(t,e);e||Q1(t)||(e=t||{},t="default"),this.inline=new Bc,this.block=new Rd,this.core=new ty,this.renderer=new _o,this.linkify=new hr,this.validateLink=G6,this.normalizeLink=H6,this.normalizeLinkText=W6,this.utils=YI,this.helpers=Fd({},jI),this.options={},this.configure(t),e&&this.set(e)}Wr.prototype.set=function(t){return Fd(this.options,t),this};Wr.prototype.configure=function(t){const e=this;if(Q1(t)){const n=t;if(t=$6[n],!t)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};Wr.prototype.enable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Wr.prototype.disable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Wr.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};Wr.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};Wr.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Wr.prototype.parseInline=function(t,e){const n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};Wr.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var vK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z6(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var H0,Nb;function Y6(){if(Nb)return H0;Nb=1;function t(O){return O instanceof Map?O.clear=O.delete=O.set=function(){throw new Error("map is read-only")}:O instanceof Set&&(O.add=O.clear=O.delete=function(){throw new Error("set is read-only")}),Object.freeze(O),Object.getOwnPropertyNames(O).forEach(X=>{const z=O[X],ne=typeof z;(ne==="object"||ne==="function")&&!Object.isFrozen(z)&&t(z)}),O}class e{constructor(X){X.data===void 0&&(X.data={}),this.data=X.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(O){return O.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(O,...X){const z=Object.create(null);for(const ne in O)z[ne]=O[ne];return X.forEach(function(ne){for(const ke in ne)z[ke]=ne[ke]}),z}const i="</span>",s=O=>!!O.scope,a=(O,{prefix:X})=>{if(O.startsWith("language:"))return O.replace("language:","language-");if(O.includes(".")){const z=O.split(".");return[`${X}${z.shift()}`,...z.map((ne,ke)=>`${ne}${"_".repeat(ke+1)}`)].join(" ")}return`${X}${O}`};class o{constructor(X,z){this.buffer="",this.classPrefix=z.classPrefix,X.walk(this)}addText(X){this.buffer+=n(X)}openNode(X){if(!s(X))return;const z=a(X.scope,{prefix:this.classPrefix});this.span(z)}closeNode(X){s(X)&&(this.buffer+=i)}value(){return this.buffer}span(X){this.buffer+=`<span class="${X}">`}}const u=(O={})=>{const X={children:[]};return Object.assign(X,O),X};class c{constructor(){this.rootNode=u(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(X){this.top.children.push(X)}openNode(X){const z=u({scope:X});this.add(z),this.stack.push(z)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(X){return this.constructor._walk(X,this.rootNode)}static _walk(X,z){return typeof z=="string"?X.addText(z):z.children&&(X.openNode(z),z.children.forEach(ne=>this._walk(X,ne)),X.closeNode(z)),X}static _collapse(X){typeof X!="string"&&X.children&&(X.children.every(z=>typeof z=="string")?X.children=[X.children.join("")]:X.children.forEach(z=>{c._collapse(z)}))}}class l extends c{constructor(X){super(),this.options=X}addText(X){X!==""&&this.add(X)}startScope(X){this.openNode(X)}endScope(){this.closeNode()}__addSublanguage(X,z){const ne=X.root;z&&(ne.scope=`language:${z}`),this.add(ne)}toHTML(){return new o(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function h(O){return O?typeof O=="string"?O:O.source:null}function d(O){return g("(?=",O,")")}function f(O){return g("(?:",O,")*")}function p(O){return g("(?:",O,")?")}function g(...O){return O.map(z=>h(z)).join("")}function m(O){const X=O[O.length-1];return typeof X=="object"&&X.constructor===Object?(O.splice(O.length-1,1),X):{}}function y(...O){return"("+(m(O).capture?"":"?:")+O.map(ne=>h(ne)).join("|")+")"}function b(O){return new RegExp(O.toString()+"|").exec("").length-1}function v(O,X){const z=O&&O.exec(X);return z&&z.index===0}const x=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function w(O,{joinWith:X}){let z=0;return O.map(ne=>{z+=1;const ke=z;let he=h(ne),Z="";for(;he.length>0;){const ue=x.exec(he);if(!ue){Z+=he;break}Z+=he.substring(0,ue.index),he=he.substring(ue.index+ue[0].length),ue[0][0]==="\\"&&ue[1]?Z+="\\"+String(Number(ue[1])+ke):(Z+=ue[0],ue[0]==="("&&z++)}return Z}).map(ne=>`(${ne})`).join(X)}const k=/\b\B/,D="[a-zA-Z]\\w*",A="[a-zA-Z_]\\w*",R="\\b\\d+(\\.\\d+)?",N="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",L="\\b(0b[01]+)",S="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",M=(O={})=>{const X=/^#![ ]*\//;return O.binary&&(O.begin=g(X,/.*\b/,O.binary,/\b.*/)),r({scope:"meta",begin:X,end:/$/,relevance:0,"on:begin":(z,ne)=>{z.index!==0&&ne.ignoreMatch()}},O)},E={begin:"\\\\[\\s\\S]",relevance:0},_={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[E]},C={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[E]},T={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},F=function(O,X,z={}){const ne=r({scope:"comment",begin:O,end:X,contains:[]},z);ne.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const ke=y("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return ne.contains.push({begin:g(/[ ]+/,"(",ke,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),ne},I=F("//","$"),P=F("/\\*","\\*/"),U=F("#","$"),q={scope:"number",begin:R,relevance:0},Y={scope:"number",begin:N,relevance:0},te={scope:"number",begin:L,relevance:0},V={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[E,{begin:/\[/,end:/\]/,relevance:0,contains:[E]}]},K={scope:"title",begin:D,relevance:0},ae={scope:"title",begin:A,relevance:0},se={begin:"\\.\\s*"+A,relevance:0};var W=Object.freeze({__proto__:null,APOS_STRING_MODE:_,BACKSLASH_ESCAPE:E,BINARY_NUMBER_MODE:te,BINARY_NUMBER_RE:L,COMMENT:F,C_BLOCK_COMMENT_MODE:P,C_LINE_COMMENT_MODE:I,C_NUMBER_MODE:Y,C_NUMBER_RE:N,END_SAME_AS_BEGIN:function(O){return Object.assign(O,{"on:begin":(X,z)=>{z.data._beginMatch=X[1]},"on:end":(X,z)=>{z.data._beginMatch!==X[1]&&z.ignoreMatch()}})},HASH_COMMENT_MODE:U,IDENT_RE:D,MATCH_NOTHING_RE:k,METHOD_GUARD:se,NUMBER_MODE:q,NUMBER_RE:R,PHRASAL_WORDS_MODE:T,QUOTE_STRING_MODE:C,REGEXP_MODE:V,RE_STARTERS_RE:S,SHEBANG:M,TITLE_MODE:K,UNDERSCORE_IDENT_RE:A,UNDERSCORE_TITLE_MODE:ae});function Q(O,X){O.input[O.index-1]==="."&&X.ignoreMatch()}function H(O,X){O.className!==void 0&&(O.scope=O.className,delete O.className)}function pe(O,X){X&&O.beginKeywords&&(O.begin="\\b("+O.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",O.__beforeBegin=Q,O.keywords=O.keywords||O.beginKeywords,delete O.beginKeywords,O.relevance===void 0&&(O.relevance=0))}function J(O,X){Array.isArray(O.illegal)&&(O.illegal=y(...O.illegal))}function Be(O,X){if(O.match){if(O.begin||O.end)throw new Error("begin & end are not supported with match");O.begin=O.match,delete O.match}}function Se(O,X){O.relevance===void 0&&(O.relevance=1)}const Rt=(O,X)=>{if(!O.beforeMatch)return;if(O.starts)throw new Error("beforeMatch cannot be used with starts");const z=Object.assign({},O);Object.keys(O).forEach(ne=>{delete O[ne]}),O.keywords=z.keywords,O.begin=g(z.beforeMatch,d(z.begin)),O.starts={relevance:0,contains:[Object.assign(z,{endsParent:!0})]},O.relevance=0,delete z.beforeMatch},Tt=["of","and","for","in","not","or","if","then","parent","list","value"],Ke="keyword";function Yt(O,X,z=Ke){const ne=Object.create(null);return typeof O=="string"?ke(z,O.split(" ")):Array.isArray(O)?ke(z,O):Object.keys(O).forEach(function(he){Object.assign(ne,Yt(O[he],X,he))}),ne;function ke(he,Z){X&&(Z=Z.map(ue=>ue.toLowerCase())),Z.forEach(function(ue){const oe=ue.split("|");ne[oe[0]]=[he,Fn(oe[0],oe[1])]})}}function Fn(O,X){return X?Number(X):Kr(O)?0:1}function Kr(O){return Tt.includes(O.toLowerCase())}const Nt={},Xt=O=>{console.error(O)},Dt=(O,...X)=>{console.log(`WARN: ${O}`,...X)},yt=(O,X)=>{Nt[`${O}/${X}`]||(console.log(`Deprecated as of ${O}. ${X}`),Nt[`${O}/${X}`]=!0)},wt=new Error;function gr(O,X,{key:z}){let ne=0;const ke=O[z],he={},Z={};for(let ue=1;ue<=X.length;ue++)Z[ue+ne]=ke[ue],he[ue+ne]=!0,ne+=b(X[ue-1]);O[z]=Z,O[z]._emit=he,O[z]._multi=!0}function nn(O){if(Array.isArray(O.begin)){if(O.skip||O.excludeBegin||O.returnBegin)throw Xt("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),wt;if(typeof O.beginScope!="object"||O.beginScope===null)throw Xt("beginScope must be object"),wt;gr(O,O.begin,{key:"beginScope"}),O.begin=w(O.begin,{joinWith:""})}}function Hn(O){if(Array.isArray(O.end)){if(O.skip||O.excludeEnd||O.returnEnd)throw Xt("skip, excludeEnd, returnEnd not compatible with endScope: {}"),wt;if(typeof O.endScope!="object"||O.endScope===null)throw Xt("endScope must be object"),wt;gr(O,O.end,{key:"endScope"}),O.end=w(O.end,{joinWith:""})}}function rn(O){O.scope&&typeof O.scope=="object"&&O.scope!==null&&(O.beginScope=O.scope,delete O.scope)}function re(O){rn(O),typeof O.beginScope=="string"&&(O.beginScope={_wrap:O.beginScope}),typeof O.endScope=="string"&&(O.endScope={_wrap:O.endScope}),nn(O),Hn(O)}function ce(O){function X(Z,ue){return new RegExp(h(Z),"m"+(O.case_insensitive?"i":"")+(O.unicodeRegex?"u":"")+(ue?"g":""))}class z{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(ue,oe){oe.position=this.position++,this.matchIndexes[this.matchAt]=oe,this.regexes.push([oe,ue]),this.matchAt+=b(ue)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const ue=this.regexes.map(oe=>oe[1]);this.matcherRe=X(w(ue,{joinWith:"|"}),!0),this.lastIndex=0}exec(ue){this.matcherRe.lastIndex=this.lastIndex;const oe=this.matcherRe.exec(ue);if(!oe)return null;const Te=oe.findIndex((Je,Lt)=>Lt>0&&Je!==void 0),Ue=this.matchIndexes[Te];return oe.splice(0,Te),Object.assign(oe,Ue)}}class ne{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(ue){if(this.multiRegexes[ue])return this.multiRegexes[ue];const oe=new z;return this.rules.slice(ue).forEach(([Te,Ue])=>oe.addRule(Te,Ue)),oe.compile(),this.multiRegexes[ue]=oe,oe}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(ue,oe){this.rules.push([ue,oe]),oe.type==="begin"&&this.count++}exec(ue){const oe=this.getMatcher(this.regexIndex);oe.lastIndex=this.lastIndex;let Te=oe.exec(ue);if(this.resumingScanAtSamePosition()&&!(Te&&Te.index===this.lastIndex)){const Ue=this.getMatcher(0);Ue.lastIndex=this.lastIndex+1,Te=Ue.exec(ue)}return Te&&(this.regexIndex+=Te.position+1,this.regexIndex===this.count&&this.considerAll()),Te}}function ke(Z){const ue=new ne;return Z.contains.forEach(oe=>ue.addRule(oe.begin,{rule:oe,type:"begin"})),Z.terminatorEnd&&ue.addRule(Z.terminatorEnd,{type:"end"}),Z.illegal&&ue.addRule(Z.illegal,{type:"illegal"}),ue}function he(Z,ue){const oe=Z;if(Z.isCompiled)return oe;[H,Be,re,Rt].forEach(Ue=>Ue(Z,ue)),O.compilerExtensions.forEach(Ue=>Ue(Z,ue)),Z.__beforeBegin=null,[pe,J,Se].forEach(Ue=>Ue(Z,ue)),Z.isCompiled=!0;let Te=null;return typeof Z.keywords=="object"&&Z.keywords.$pattern&&(Z.keywords=Object.assign({},Z.keywords),Te=Z.keywords.$pattern,delete Z.keywords.$pattern),Te=Te||/\w+/,Z.keywords&&(Z.keywords=Yt(Z.keywords,O.case_insensitive)),oe.keywordPatternRe=X(Te,!0),ue&&(Z.begin||(Z.begin=/\B|\b/),oe.beginRe=X(oe.begin),!Z.end&&!Z.endsWithParent&&(Z.end=/\B|\b/),Z.end&&(oe.endRe=X(oe.end)),oe.terminatorEnd=h(oe.end)||"",Z.endsWithParent&&ue.terminatorEnd&&(oe.terminatorEnd+=(Z.end?"|":"")+ue.terminatorEnd)),Z.illegal&&(oe.illegalRe=X(Z.illegal)),Z.contains||(Z.contains=[]),Z.contains=[].concat(...Z.contains.map(function(Ue){return Ee(Ue==="self"?Z:Ue)})),Z.contains.forEach(function(Ue){he(Ue,oe)}),Z.starts&&he(Z.starts,ue),oe.matcher=ke(oe),oe}if(O.compilerExtensions||(O.compilerExtensions=[]),O.contains&&O.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return O.classNameAliases=r(O.classNameAliases||{}),he(O)}function xe(O){return O?O.endsWithParent||xe(O.starts):!1}function Ee(O){return O.variants&&!O.cachedVariants&&(O.cachedVariants=O.variants.map(function(X){return r(O,{variants:null},X)})),O.cachedVariants?O.cachedVariants:xe(O)?r(O,{starts:O.starts?r(O.starts):null}):Object.isFrozen(O)?r(O):O}var ye="11.11.1";class Ie extends Error{constructor(X,z){super(X),this.name="HTMLInjectionError",this.html=z}}const Ze=n,qe=r,De=Symbol("nomatch"),me=7,Xe=function(O){const X=Object.create(null),z=Object.create(null),ne=[];let ke=!0;const he="Could not find the language '{}', did you forget to load/include a language module?",Z={disableAutodetect:!0,name:"Plain text",contains:[]};let ue={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:l};function oe(ie){return ue.noHighlightRe.test(ie)}function Te(ie){let le=ie.className+" ";le+=ie.parentNode?ie.parentNode.className:"";const _e=ue.languageDetectRe.exec(le);if(_e){const de=ee(_e[1]);return de||(Dt(he.replace("{}",_e[1])),Dt("Falling back to no-highlight mode for this block.",ie)),de?_e[1]:"no-highlight"}return le.split(/\s+/).find(de=>oe(de)||ee(de))}function Ue(ie,le,_e){let de="",Re="";typeof le=="object"?(de=ie,_e=le.ignoreIllegals,Re=le.language):(yt("10.7.0","highlight(lang, code, ...args) has been deprecated."),yt("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Re=ie,de=le),_e===void 0&&(_e=!0);const It={code:de,language:Re};sn("before:highlight",It);const kt=It.result?It.result:Je(It.language,It.code,_e);return kt.code=It.code,sn("after:highlight",kt),kt}function Je(ie,le,_e,de){const Re=Object.create(null);function It(fe,we){return fe.keywords[we]}function kt(){if(!Ge.keywords){an.addText(ht);return}let fe=0;Ge.keywordPatternRe.lastIndex=0;let we=Ge.keywordPatternRe.exec(ht),We="";for(;we;){We+=ht.substring(fe,we.index);const st=Jr.case_insensitive?we[0].toLowerCase():we[0],bn=It(Ge,st);if(bn){const[ki,x3]=bn;if(an.addText(We),We="",Re[st]=(Re[st]||0)+1,Re[st]<=me&&(tl+=x3),ki.startsWith("_"))We+=we[0];else{const E3=Jr.classNameAliases[ki]||ki;Zr(we[0],E3)}}else We+=we[0];fe=Ge.keywordPatternRe.lastIndex,we=Ge.keywordPatternRe.exec(ht)}We+=ht.substring(fe),an.addText(We)}function Qc(){if(ht==="")return;let fe=null;if(typeof Ge.subLanguage=="string"){if(!X[Ge.subLanguage]){an.addText(ht);return}fe=Je(Ge.subLanguage,ht,!0,gv[Ge.subLanguage]),gv[Ge.subLanguage]=fe._top}else fe=at(ht,Ge.subLanguage.length?Ge.subLanguage:null);Ge.relevance>0&&(tl+=fe.relevance),an.__addSublanguage(fe._emitter,fe.language)}function Jn(){Ge.subLanguage!=null?Qc():kt(),ht=""}function Zr(fe,we){fe!==""&&(an.startScope(we),an.addText(fe),an.endScope())}function hv(fe,we){let We=1;const st=we.length-1;for(;We<=st;){if(!fe._emit[We]){We++;continue}const bn=Jr.classNameAliases[fe[We]]||fe[We],ki=we[We];bn?Zr(ki,bn):(ht=ki,kt(),ht=""),We++}}function fv(fe,we){return fe.scope&&typeof fe.scope=="string"&&an.openNode(Jr.classNameAliases[fe.scope]||fe.scope),fe.beginScope&&(fe.beginScope._wrap?(Zr(ht,Jr.classNameAliases[fe.beginScope._wrap]||fe.beginScope._wrap),ht=""):fe.beginScope._multi&&(hv(fe.beginScope,we),ht="")),Ge=Object.create(fe,{parent:{value:Ge}}),Ge}function dv(fe,we,We){let st=v(fe.endRe,We);if(st){if(fe["on:end"]){const bn=new e(fe);fe["on:end"](we,bn),bn.isMatchIgnored&&(st=!1)}if(st){for(;fe.endsParent&&fe.parent;)fe=fe.parent;return fe}}if(fe.endsWithParent)return dv(fe.parent,we,We)}function g3(fe){return Ge.matcher.regexIndex===0?(ht+=fe[0],1):(d0=!0,0)}function m3(fe){const we=fe[0],We=fe.rule,st=new e(We),bn=[We.__beforeBegin,We["on:begin"]];for(const ki of bn)if(ki&&(ki(fe,st),st.isMatchIgnored))return g3(we);return We.skip?ht+=we:(We.excludeBegin&&(ht+=we),Jn(),!We.returnBegin&&!We.excludeBegin&&(ht=we)),fv(We,fe),We.returnBegin?0:we.length}function y3(fe){const we=fe[0],We=le.substring(fe.index),st=dv(Ge,fe,We);if(!st)return De;const bn=Ge;Ge.endScope&&Ge.endScope._wrap?(Jn(),Zr(we,Ge.endScope._wrap)):Ge.endScope&&Ge.endScope._multi?(Jn(),hv(Ge.endScope,fe)):bn.skip?ht+=we:(bn.returnEnd||bn.excludeEnd||(ht+=we),Jn(),bn.excludeEnd&&(ht=we));do Ge.scope&&an.closeNode(),!Ge.skip&&!Ge.subLanguage&&(tl+=Ge.relevance),Ge=Ge.parent;while(Ge!==st.parent);return st.starts&&fv(st.starts,fe),bn.returnEnd?0:we.length}function v3(){const fe=[];for(let we=Ge;we!==Jr;we=we.parent)we.scope&&fe.unshift(we.scope);fe.forEach(we=>an.openNode(we))}let el={};function pv(fe,we){const We=we&&we[0];if(ht+=fe,We==null)return Jn(),0;if(el.type==="begin"&&we.type==="end"&&el.index===we.index&&We===""){if(ht+=le.slice(we.index,we.index+1),!ke){const st=new Error(`0 width match regex (${ie})`);throw st.languageName=ie,st.badRule=el.rule,st}return 1}if(el=we,we.type==="begin")return m3(we);if(we.type==="illegal"&&!_e){const st=new Error('Illegal lexeme "'+We+'" for mode "'+(Ge.scope||"<unnamed>")+'"');throw st.mode=Ge,st}else if(we.type==="end"){const st=y3(we);if(st!==De)return st}if(we.type==="illegal"&&We==="")return ht+=`
`,1;if(f0>1e5&&f0>we.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ht+=We,We.length}const Jr=ee(ie);if(!Jr)throw Xt(he.replace("{}",ie)),new Error('Unknown language: "'+ie+'"');const b3=ce(Jr);let h0="",Ge=de||b3;const gv={},an=new ue.__emitter(ue);v3();let ht="",tl=0,Ts=0,f0=0,d0=!1;try{if(Jr.__emitTokens)Jr.__emitTokens(le,an);else{for(Ge.matcher.considerAll();;){f0++,d0?d0=!1:Ge.matcher.considerAll(),Ge.matcher.lastIndex=Ts;const fe=Ge.matcher.exec(le);if(!fe)break;const we=le.substring(Ts,fe.index),We=pv(we,fe);Ts=fe.index+We}pv(le.substring(Ts))}return an.finalize(),h0=an.toHTML(),{language:ie,value:h0,relevance:tl,illegal:!1,_emitter:an,_top:Ge}}catch(fe){if(fe.message&&fe.message.includes("Illegal"))return{language:ie,value:Ze(le),illegal:!0,relevance:0,_illegalBy:{message:fe.message,index:Ts,context:le.slice(Ts-100,Ts+100),mode:fe.mode,resultSoFar:h0},_emitter:an};if(ke)return{language:ie,value:Ze(le),illegal:!1,relevance:0,errorRaised:fe,_emitter:an,_top:Ge};throw fe}}function Lt(ie){const le={value:Ze(ie),illegal:!1,relevance:0,_top:Z,_emitter:new ue.__emitter(ue)};return le._emitter.addText(ie),le}function at(ie,le){le=le||ue.languages||Object.keys(X);const _e=Lt(ie),de=le.filter(ee).filter(tt).map(Jn=>Je(Jn,ie,!1));de.unshift(_e);const Re=de.sort((Jn,Zr)=>{if(Jn.relevance!==Zr.relevance)return Zr.relevance-Jn.relevance;if(Jn.language&&Zr.language){if(ee(Jn.language).supersetOf===Zr.language)return 1;if(ee(Zr.language).supersetOf===Jn.language)return-1}return 0}),[It,kt]=Re,Qc=It;return Qc.secondBest=kt,Qc}function vn(ie,le,_e){const de=le&&z[le]||_e;ie.classList.add("hljs"),ie.classList.add(`language-${de}`)}function Zn(ie){let le=null;const _e=Te(ie);if(oe(_e))return;if(sn("before:highlightElement",{el:ie,language:_e}),ie.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",ie);return}if(ie.children.length>0&&(ue.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(ie)),ue.throwUnescapedHTML))throw new Ie("One of your code blocks includes unescaped HTML.",ie.innerHTML);le=ie;const de=le.textContent,Re=_e?Ue(de,{language:_e,ignoreIllegals:!0}):at(de);ie.innerHTML=Re.value,ie.dataset.highlighted="yes",vn(ie,_e,Re.language),ie.result={language:Re.language,re:Re.relevance,relevance:Re.relevance},Re.secondBest&&(ie.secondBest={language:Re.secondBest.language,relevance:Re.secondBest.relevance}),sn("after:highlightElement",{el:ie,result:Re,text:de})}function Sn(ie){ue=qe(ue,ie)}const mr=()=>{Rn(),yt("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Tr(){Rn(),yt("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let yr=!1;function Rn(){function ie(){Rn()}if(document.readyState==="loading"){yr||window.addEventListener("DOMContentLoaded",ie,!1),yr=!0;return}document.querySelectorAll(ue.cssSelector).forEach(Zn)}function Ji(ie,le){let _e=null;try{_e=le(O)}catch(de){if(Xt("Language definition for '{}' could not be registered.".replace("{}",ie)),ke)Xt(de);else throw de;_e=Z}_e.name||(_e.name=ie),X[ie]=_e,_e.rawDefinition=le.bind(null,O),_e.aliases&&ge(_e.aliases,{languageName:ie})}function ve(ie){delete X[ie];for(const le of Object.keys(z))z[le]===ie&&delete z[le]}function $(){return Object.keys(X)}function ee(ie){return ie=(ie||"").toLowerCase(),X[ie]||X[z[ie]]}function ge(ie,{languageName:le}){typeof ie=="string"&&(ie=[ie]),ie.forEach(_e=>{z[_e.toLowerCase()]=le})}function tt(ie){const le=ee(ie);return le&&!le.disableAutodetect}function _t(ie){ie["before:highlightBlock"]&&!ie["before:highlightElement"]&&(ie["before:highlightElement"]=le=>{ie["before:highlightBlock"](Object.assign({block:le.el},le))}),ie["after:highlightBlock"]&&!ie["after:highlightElement"]&&(ie["after:highlightElement"]=le=>{ie["after:highlightBlock"](Object.assign({block:le.el},le))})}function gt(ie){_t(ie),ne.push(ie)}function Mt(ie){const le=ne.indexOf(ie);le!==-1&&ne.splice(le,1)}function sn(ie,le){const _e=ie;ne.forEach(function(de){de[_e]&&de[_e](le)})}function kr(ie){return yt("10.7.0","highlightBlock will be removed entirely in v12.0"),yt("10.7.0","Please use highlightElement now."),Zn(ie)}Object.assign(O,{highlight:Ue,highlightAuto:at,highlightAll:Rn,highlightElement:Zn,highlightBlock:kr,configure:Sn,initHighlighting:mr,initHighlightingOnLoad:Tr,registerLanguage:Ji,unregisterLanguage:ve,listLanguages:$,getLanguage:ee,registerAliases:ge,autoDetection:tt,inherit:qe,addPlugin:gt,removePlugin:Mt}),O.debugMode=function(){ke=!1},O.safeMode=function(){ke=!0},O.versionString=ye,O.regex={concat:g,lookahead:d,either:y,optional:p,anyNumberOfTimes:f};for(const ie in W)typeof W[ie]=="object"&&t(W[ie]);return Object.assign(O,W),O},ze=Xe({});return ze.newInstance=()=>Xe({}),H0=ze,ze.HighlightJS=ze,ze.default=ze,H0}var X6=Y6();const bK=z6(X6),ih={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},r)=>{if(!e)return n*2.55;t/=360,e/=100,n/=100;const i=n<.5?n*(1+e):n+e-n*e,s=2*n-i;switch(r){case"r":return ih.hue2rgb(s,i,t+1/3)*255;case"g":return ih.hue2rgb(s,i,t)*255;case"b":return ih.hue2rgb(s,i,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:n},r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),s=Math.min(t,e,n),a=(i+s)/2;if(r==="l")return a*100;if(i===s)return 0;const o=i-s,u=a>.5?o/(2-i-s):o/(i+s);if(r==="s")return u*100;switch(i){case t:return((e-n)/o+(e<n?6:0))*60;case e:return((n-t)/o+2)*60;case n:return((t-e)/o+4)*60;default:return-1}}},V6={clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},q6={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},Pe={channel:ih,lang:V6,unit:q6},ns={};for(let t=0;t<=255;t++)ns[t]=Pe.unit.dec2hex(t);const Dn={ALL:0,RGB:1,HSL:2};let j6=class{constructor(){this.type=Dn.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=Dn.ALL}is(e){return this.type===e}};class K6{constructor(e,n){this.color=n,this.changed=!1,this.data=e,this.type=new j6}set(e,n){return this.color=n,this.changed=!1,this.data=e,this.type.type=Dn.ALL,this}_ensureHSL(){const e=this.data,{h:n,s:r,l:i}=e;n===void 0&&(e.h=Pe.channel.rgb2hsl(e,"h")),r===void 0&&(e.s=Pe.channel.rgb2hsl(e,"s")),i===void 0&&(e.l=Pe.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:n,g:r,b:i}=e;n===void 0&&(e.r=Pe.channel.hsl2rgb(e,"r")),r===void 0&&(e.g=Pe.channel.hsl2rgb(e,"g")),i===void 0&&(e.b=Pe.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,n=e.r;return!this.type.is(Dn.HSL)&&n!==void 0?n:(this._ensureHSL(),Pe.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,n=e.g;return!this.type.is(Dn.HSL)&&n!==void 0?n:(this._ensureHSL(),Pe.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,n=e.b;return!this.type.is(Dn.HSL)&&n!==void 0?n:(this._ensureHSL(),Pe.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,n=e.h;return!this.type.is(Dn.RGB)&&n!==void 0?n:(this._ensureRGB(),Pe.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,n=e.s;return!this.type.is(Dn.RGB)&&n!==void 0?n:(this._ensureRGB(),Pe.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,n=e.l;return!this.type.is(Dn.RGB)&&n!==void 0?n:(this._ensureRGB(),Pe.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(Dn.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(Dn.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(Dn.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(Dn.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(Dn.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(Dn.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const Ld=new K6({r:0,g:0,b:0,a:0},"transparent"),Ha={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(Ha.re);if(!e)return;const n=e[1],r=parseInt(n,16),i=n.length,s=i%4===0,a=i>4,o=a?1:17,u=a?8:4,c=s?0:-1,l=a?255:15;return Ld.set({r:(r>>u*(c+3)&l)*o,g:(r>>u*(c+2)&l)*o,b:(r>>u*(c+1)&l)*o,a:s?(r&l)*o/255:1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`#${ns[Math.round(e)]}${ns[Math.round(n)]}${ns[Math.round(r)]}${ns[Math.round(i*255)]}`:`#${ns[Math.round(e)]}${ns[Math.round(n)]}${ns[Math.round(r)]}`}},Gs={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(Gs.hueRe);if(e){const[,n,r]=e;switch(r){case"grad":return Pe.channel.clamp.h(parseFloat(n)*.9);case"rad":return Pe.channel.clamp.h(parseFloat(n)*180/Math.PI);case"turn":return Pe.channel.clamp.h(parseFloat(n)*360)}}return Pe.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const n=t.match(Gs.re);if(!n)return;const[,r,i,s,a,o]=n;return Ld.set({h:Gs._hue2deg(r),s:Pe.channel.clamp.s(parseFloat(i)),l:Pe.channel.clamp.l(parseFloat(s)),a:a?Pe.channel.clamp.a(o?parseFloat(a)/100:parseFloat(a)):1},t)},stringify:t=>{const{h:e,s:n,l:r,a:i}=t;return i<1?`hsla(${Pe.lang.round(e)}, ${Pe.lang.round(n)}%, ${Pe.lang.round(r)}%, ${i})`:`hsl(${Pe.lang.round(e)}, ${Pe.lang.round(n)}%, ${Pe.lang.round(r)}%)`}},Ju={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=Ju.colors[t];if(e)return Ha.parse(e)},stringify:t=>{const e=Ha.stringify(t);for(const n in Ju.colors)if(Ju.colors[n]===e)return n}},cu={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const n=t.match(cu.re);if(!n)return;const[,r,i,s,a,o,u,c,l]=n;return Ld.set({r:Pe.channel.clamp.r(i?parseFloat(r)*2.55:parseFloat(r)),g:Pe.channel.clamp.g(a?parseFloat(s)*2.55:parseFloat(s)),b:Pe.channel.clamp.b(u?parseFloat(o)*2.55:parseFloat(o)),a:c?Pe.channel.clamp.a(l?parseFloat(c)/100:parseFloat(c)):1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`rgba(${Pe.lang.round(e)}, ${Pe.lang.round(n)}, ${Pe.lang.round(r)}, ${Pe.lang.round(i)})`:`rgb(${Pe.lang.round(e)}, ${Pe.lang.round(n)}, ${Pe.lang.round(r)})`}},zr={format:{keyword:Ju,hex:Ha,rgb:cu,rgba:cu,hsl:Gs,hsla:Gs},parse:t=>{if(typeof t!="string")return t;const e=Ha.parse(t)||cu.parse(t)||Gs.parse(t)||Ju.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(Dn.HSL)||t.data.r===void 0?Gs.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?cu.stringify(t):Ha.stringify(t)},AA=(t,e)=>{const n=zr.parse(t);for(const r in e)n[r]=Pe.channel.clamp[r](e[r]);return zr.stringify(n)},Z6=(t,e,n=0,r=1)=>{if(typeof t!="number")return AA(t,{a:e});const i=Ld.set({r:Pe.channel.clamp.r(t),g:Pe.channel.clamp.g(e),b:Pe.channel.clamp.b(n),a:Pe.channel.clamp.a(r)});return zr.stringify(i)},EK=(t,e)=>Pe.lang.round(zr.parse(t)[e]),J6=t=>{const{r:e,g:n,b:r}=zr.parse(t),i=.2126*Pe.channel.toLinear(e)+.7152*Pe.channel.toLinear(n)+.0722*Pe.channel.toLinear(r);return Pe.lang.round(i)},Q6=t=>J6(t)>=.5,DK=t=>!Q6(t),CA=(t,e,n)=>{const r=zr.parse(t),i=r[e],s=Pe.channel.clamp[e](i+n);return i!==s&&(r[e]=s),zr.stringify(r)},wK=(t,e)=>CA(t,"l",e),_K=(t,e)=>CA(t,"l",-e),AK=(t,e)=>{const n=zr.parse(t),r={};for(const i in e)e[i]&&(r[i]=n[i]+e[i]);return AA(t,r)},e8=(t,e,n=50)=>{const{r,g:i,b:s,a}=zr.parse(t),{r:o,g:u,b:c,a:l}=zr.parse(e),h=n/100,d=h*2-1,f=a-l,g=((d*f===-1?d:(d+f)/(1+d*f))+1)/2,m=1-g,y=r*g+o*m,b=i*g+u*m,v=s*g+c*m,x=a*h+l*(1-h);return Z6(y,b,v,x)},CK=(t,e=100)=>{const n=zr.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,e8(n,t,e)};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:TA,setPrototypeOf:Lb,isFrozen:t8,getPrototypeOf:n8,getOwnPropertyDescriptor:r8}=Object;let{freeze:Pn,seal:Dr,create:Sg}=Object,{apply:Rg,construct:Ng}=typeof Reflect<"u"&&Reflect;Pn||(Pn=function(e){return e});Dr||(Dr=function(e){return e});Rg||(Rg=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return e.apply(n,i)});Ng||(Ng=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const vl=$n(Array.prototype.forEach),i8=$n(Array.prototype.lastIndexOf),Mb=$n(Array.prototype.pop),Oo=$n(Array.prototype.push),s8=$n(Array.prototype.splice),sh=$n(String.prototype.toLowerCase),W0=$n(String.prototype.toString),z0=$n(String.prototype.match),Po=$n(String.prototype.replace),a8=$n(String.prototype.indexOf),o8=$n(String.prototype.trim),Sr=$n(Object.prototype.hasOwnProperty),Nn=$n(RegExp.prototype.test),$o=u8(TypeError);function $n(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Rg(t,e,r)}}function u8(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ng(t,n)}}function Ye(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sh;Lb&&Lb(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(t8(e)||(e[r]=s),i=s)}t[i]=!0}return t}function c8(t){for(let e=0;e<t.length;e++)Sr(t,e)||(t[e]=null);return t}function ri(t){const e=Sg(null);for(const[n,r]of TA(t))Sr(t,n)&&(Array.isArray(r)?e[n]=c8(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=ri(r):e[n]=r);return e}function Bo(t,e){for(;t!==null;){const r=r8(t,e);if(r){if(r.get)return $n(r.get);if(typeof r.value=="function")return $n(r.value)}t=n8(t)}function n(){return null}return n}const Ib=Pn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Y0=Pn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),X0=Pn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),l8=Pn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),V0=Pn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),h8=Pn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ob=Pn(["#text"]),Pb=Pn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),q0=Pn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$b=Pn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bl=Pn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),f8=Dr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),d8=Dr(/<%[\w\W]*|[\w\W]*%>/gm),p8=Dr(/\$\{[\w\W]*/gm),g8=Dr(/^data-[\-\w.\u00B7-\uFFFF]+$/),m8=Dr(/^aria-[\-\w]+$/),kA=Dr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),y8=Dr(/^(?:\w+script|data):/i),v8=Dr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),FA=Dr(/^html$/i),b8=Dr(/^[a-z][.\w]*(-[.\w]+)+$/i);var Bb=Object.freeze({__proto__:null,ARIA_ATTR:m8,ATTR_WHITESPACE:v8,CUSTOM_ELEMENT:b8,DATA_ATTR:g8,DOCTYPE_NAME:FA,ERB_EXPR:d8,IS_ALLOWED_URI:kA,IS_SCRIPT_OR_DATA:y8,MUSTACHE_EXPR:f8,TMPLIT_EXPR:p8});const Uo={element:1,text:3,progressingInstruction:7,comment:8,document:9},x8=function(){return typeof window>"u"?null:window},E8=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Ub=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function SA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x8();const e=ve=>SA(ve);if(e.version="3.3.1",e.removed=[],!t||!t.document||t.document.nodeType!==Uo.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:o,Element:u,NodeFilter:c,NamedNodeMap:l=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:f}=t,p=u.prototype,g=Bo(p,"cloneNode"),m=Bo(p,"remove"),y=Bo(p,"nextSibling"),b=Bo(p,"childNodes"),v=Bo(p,"parentNode");if(typeof a=="function"){const ve=n.createElement("template");ve.content&&ve.content.ownerDocument&&(n=ve.content.ownerDocument)}let x,w="";const{implementation:k,createNodeIterator:D,createDocumentFragment:A,getElementsByTagName:R}=n,{importNode:N}=r;let L=Ub();e.isSupported=typeof TA=="function"&&typeof v=="function"&&k&&k.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:S,ERB_EXPR:M,TMPLIT_EXPR:E,DATA_ATTR:_,ARIA_ATTR:C,IS_SCRIPT_OR_DATA:T,ATTR_WHITESPACE:F,CUSTOM_ELEMENT:I}=Bb;let{IS_ALLOWED_URI:P}=Bb,U=null;const q=Ye({},[...Ib,...Y0,...X0,...V0,...Ob]);let Y=null;const te=Ye({},[...Pb,...q0,...$b,...bl]);let V=Object.seal(Sg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,ae=null;const se=Object.seal(Sg(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let B=!0,W=!0,Q=!1,H=!0,pe=!1,J=!0,Be=!1,Se=!1,Rt=!1,Tt=!1,Ke=!1,Yt=!1,Fn=!0,Kr=!1;const Nt="user-content-";let Xt=!0,Dt=!1,yt={},wt=null;const gr=Ye({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let nn=null;const Hn=Ye({},["audio","video","img","source","image","track"]);let rn=null;const re=Ye({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ce="http://www.w3.org/1998/Math/MathML",xe="http://www.w3.org/2000/svg",Ee="http://www.w3.org/1999/xhtml";let ye=Ee,Ie=!1,Ze=null;const qe=Ye({},[ce,xe,Ee],W0);let De=Ye({},["mi","mo","mn","ms","mtext"]),me=Ye({},["annotation-xml"]);const Xe=Ye({},["title","style","font","a","script"]);let ze=null;const O=["application/xhtml+xml","text/html"],X="text/html";let z=null,ne=null;const ke=n.createElement("form"),he=function($){return $ instanceof RegExp||$ instanceof Function},Z=function(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ne&&ne===$)){if((!$||typeof $!="object")&&($={}),$=ri($),ze=O.indexOf($.PARSER_MEDIA_TYPE)===-1?X:$.PARSER_MEDIA_TYPE,z=ze==="application/xhtml+xml"?W0:sh,U=Sr($,"ALLOWED_TAGS")?Ye({},$.ALLOWED_TAGS,z):q,Y=Sr($,"ALLOWED_ATTR")?Ye({},$.ALLOWED_ATTR,z):te,Ze=Sr($,"ALLOWED_NAMESPACES")?Ye({},$.ALLOWED_NAMESPACES,W0):qe,rn=Sr($,"ADD_URI_SAFE_ATTR")?Ye(ri(re),$.ADD_URI_SAFE_ATTR,z):re,nn=Sr($,"ADD_DATA_URI_TAGS")?Ye(ri(Hn),$.ADD_DATA_URI_TAGS,z):Hn,wt=Sr($,"FORBID_CONTENTS")?Ye({},$.FORBID_CONTENTS,z):gr,K=Sr($,"FORBID_TAGS")?Ye({},$.FORBID_TAGS,z):ri({}),ae=Sr($,"FORBID_ATTR")?Ye({},$.FORBID_ATTR,z):ri({}),yt=Sr($,"USE_PROFILES")?$.USE_PROFILES:!1,B=$.ALLOW_ARIA_ATTR!==!1,W=$.ALLOW_DATA_ATTR!==!1,Q=$.ALLOW_UNKNOWN_PROTOCOLS||!1,H=$.ALLOW_SELF_CLOSE_IN_ATTR!==!1,pe=$.SAFE_FOR_TEMPLATES||!1,J=$.SAFE_FOR_XML!==!1,Be=$.WHOLE_DOCUMENT||!1,Tt=$.RETURN_DOM||!1,Ke=$.RETURN_DOM_FRAGMENT||!1,Yt=$.RETURN_TRUSTED_TYPE||!1,Rt=$.FORCE_BODY||!1,Fn=$.SANITIZE_DOM!==!1,Kr=$.SANITIZE_NAMED_PROPS||!1,Xt=$.KEEP_CONTENT!==!1,Dt=$.IN_PLACE||!1,P=$.ALLOWED_URI_REGEXP||kA,ye=$.NAMESPACE||Ee,De=$.MATHML_TEXT_INTEGRATION_POINTS||De,me=$.HTML_INTEGRATION_POINTS||me,V=$.CUSTOM_ELEMENT_HANDLING||{},$.CUSTOM_ELEMENT_HANDLING&&he($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&he($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(V.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pe&&(W=!1),Ke&&(Tt=!0),yt&&(U=Ye({},Ob),Y=[],yt.html===!0&&(Ye(U,Ib),Ye(Y,Pb)),yt.svg===!0&&(Ye(U,Y0),Ye(Y,q0),Ye(Y,bl)),yt.svgFilters===!0&&(Ye(U,X0),Ye(Y,q0),Ye(Y,bl)),yt.mathMl===!0&&(Ye(U,V0),Ye(Y,$b),Ye(Y,bl))),$.ADD_TAGS&&(typeof $.ADD_TAGS=="function"?se.tagCheck=$.ADD_TAGS:(U===q&&(U=ri(U)),Ye(U,$.ADD_TAGS,z))),$.ADD_ATTR&&(typeof $.ADD_ATTR=="function"?se.attributeCheck=$.ADD_ATTR:(Y===te&&(Y=ri(Y)),Ye(Y,$.ADD_ATTR,z))),$.ADD_URI_SAFE_ATTR&&Ye(rn,$.ADD_URI_SAFE_ATTR,z),$.FORBID_CONTENTS&&(wt===gr&&(wt=ri(wt)),Ye(wt,$.FORBID_CONTENTS,z)),$.ADD_FORBID_CONTENTS&&(wt===gr&&(wt=ri(wt)),Ye(wt,$.ADD_FORBID_CONTENTS,z)),Xt&&(U["#text"]=!0),Be&&Ye(U,["html","head","body"]),U.table&&(Ye(U,["tbody"]),delete K.tbody),$.TRUSTED_TYPES_POLICY){if(typeof $.TRUSTED_TYPES_POLICY.createHTML!="function")throw $o('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw $o('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=$.TRUSTED_TYPES_POLICY,w=x.createHTML("")}else x===void 0&&(x=E8(f,i)),x!==null&&typeof w=="string"&&(w=x.createHTML(""));Pn&&Pn($),ne=$}},ue=Ye({},[...Y0,...X0,...l8]),oe=Ye({},[...V0,...h8]),Te=function($){let ee=v($);(!ee||!ee.tagName)&&(ee={namespaceURI:ye,tagName:"template"});const ge=sh($.tagName),tt=sh(ee.tagName);return Ze[$.namespaceURI]?$.namespaceURI===xe?ee.namespaceURI===Ee?ge==="svg":ee.namespaceURI===ce?ge==="svg"&&(tt==="annotation-xml"||De[tt]):!!ue[ge]:$.namespaceURI===ce?ee.namespaceURI===Ee?ge==="math":ee.namespaceURI===xe?ge==="math"&&me[tt]:!!oe[ge]:$.namespaceURI===Ee?ee.namespaceURI===xe&&!me[tt]||ee.namespaceURI===ce&&!De[tt]?!1:!oe[ge]&&(Xe[ge]||!ue[ge]):!!(ze==="application/xhtml+xml"&&Ze[$.namespaceURI]):!1},Ue=function($){Oo(e.removed,{element:$});try{v($).removeChild($)}catch{m($)}},Je=function($,ee){try{Oo(e.removed,{attribute:ee.getAttributeNode($),from:ee})}catch{Oo(e.removed,{attribute:null,from:ee})}if(ee.removeAttribute($),$==="is")if(Tt||Ke)try{Ue(ee)}catch{}else try{ee.setAttribute($,"")}catch{}},Lt=function($){let ee=null,ge=null;if(Rt)$="<remove></remove>"+$;else{const gt=z0($,/^[\r\n\t ]+/);ge=gt&&gt[0]}ze==="application/xhtml+xml"&&ye===Ee&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");const tt=x?x.createHTML($):$;if(ye===Ee)try{ee=new d().parseFromString(tt,ze)}catch{}if(!ee||!ee.documentElement){ee=k.createDocument(ye,"template",null);try{ee.documentElement.innerHTML=Ie?w:tt}catch{}}const _t=ee.body||ee.documentElement;return $&&ge&&_t.insertBefore(n.createTextNode(ge),_t.childNodes[0]||null),ye===Ee?R.call(ee,Be?"html":"body")[0]:Be?ee.documentElement:_t},at=function($){return D.call($.ownerDocument||$,$,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},vn=function($){return $ instanceof h&&(typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof l)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function"||typeof $.hasChildNodes!="function")},Zn=function($){return typeof o=="function"&&$ instanceof o};function Sn(ve,$,ee){vl(ve,ge=>{ge.call(e,$,ee,ne)})}const mr=function($){let ee=null;if(Sn(L.beforeSanitizeElements,$,null),vn($))return Ue($),!0;const ge=z($.nodeName);if(Sn(L.uponSanitizeElement,$,{tagName:ge,allowedTags:U}),J&&$.hasChildNodes()&&!Zn($.firstElementChild)&&Nn(/<[/\w!]/g,$.innerHTML)&&Nn(/<[/\w!]/g,$.textContent)||$.nodeType===Uo.progressingInstruction||J&&$.nodeType===Uo.comment&&Nn(/<[/\w]/g,$.data))return Ue($),!0;if(!(se.tagCheck instanceof Function&&se.tagCheck(ge))&&(!U[ge]||K[ge])){if(!K[ge]&&yr(ge)&&(V.tagNameCheck instanceof RegExp&&Nn(V.tagNameCheck,ge)||V.tagNameCheck instanceof Function&&V.tagNameCheck(ge)))return!1;if(Xt&&!wt[ge]){const tt=v($)||$.parentNode,_t=b($)||$.childNodes;if(_t&&tt){const gt=_t.length;for(let Mt=gt-1;Mt>=0;--Mt){const sn=g(_t[Mt],!0);sn.__removalCount=($.__removalCount||0)+1,tt.insertBefore(sn,y($))}}}return Ue($),!0}return $ instanceof u&&!Te($)||(ge==="noscript"||ge==="noembed"||ge==="noframes")&&Nn(/<\/no(script|embed|frames)/i,$.innerHTML)?(Ue($),!0):(pe&&$.nodeType===Uo.text&&(ee=$.textContent,vl([S,M,E],tt=>{ee=Po(ee,tt," ")}),$.textContent!==ee&&(Oo(e.removed,{element:$.cloneNode()}),$.textContent=ee)),Sn(L.afterSanitizeElements,$,null),!1)},Tr=function($,ee,ge){if(Fn&&(ee==="id"||ee==="name")&&(ge in n||ge in ke))return!1;if(!(W&&!ae[ee]&&Nn(_,ee))){if(!(B&&Nn(C,ee))){if(!(se.attributeCheck instanceof Function&&se.attributeCheck(ee,$))){if(!Y[ee]||ae[ee]){if(!(yr($)&&(V.tagNameCheck instanceof RegExp&&Nn(V.tagNameCheck,$)||V.tagNameCheck instanceof Function&&V.tagNameCheck($))&&(V.attributeNameCheck instanceof RegExp&&Nn(V.attributeNameCheck,ee)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(ee,$))||ee==="is"&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&Nn(V.tagNameCheck,ge)||V.tagNameCheck instanceof Function&&V.tagNameCheck(ge))))return!1}else if(!rn[ee]){if(!Nn(P,Po(ge,F,""))){if(!((ee==="src"||ee==="xlink:href"||ee==="href")&&$!=="script"&&a8(ge,"data:")===0&&nn[$])){if(!(Q&&!Nn(T,Po(ge,F,"")))){if(ge)return!1}}}}}}}return!0},yr=function($){return $!=="annotation-xml"&&z0($,I)},Rn=function($){Sn(L.beforeSanitizeAttributes,$,null);const{attributes:ee}=$;if(!ee||vn($))return;const ge={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y,forceKeepAttr:void 0};let tt=ee.length;for(;tt--;){const _t=ee[tt],{name:gt,namespaceURI:Mt,value:sn}=_t,kr=z(gt),ie=sn;let le=gt==="value"?ie:o8(ie);if(ge.attrName=kr,ge.attrValue=le,ge.keepAttr=!0,ge.forceKeepAttr=void 0,Sn(L.uponSanitizeAttribute,$,ge),le=ge.attrValue,Kr&&(kr==="id"||kr==="name")&&(Je(gt,$),le=Nt+le),J&&Nn(/((--!?|])>)|<\/(style|title|textarea)/i,le)){Je(gt,$);continue}if(kr==="attributename"&&z0(le,"href")){Je(gt,$);continue}if(ge.forceKeepAttr)continue;if(!ge.keepAttr){Je(gt,$);continue}if(!H&&Nn(/\/>/i,le)){Je(gt,$);continue}pe&&vl([S,M,E],de=>{le=Po(le,de," ")});const _e=z($.nodeName);if(!Tr(_e,kr,le)){Je(gt,$);continue}if(x&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!Mt)switch(f.getAttributeType(_e,kr)){case"TrustedHTML":{le=x.createHTML(le);break}case"TrustedScriptURL":{le=x.createScriptURL(le);break}}if(le!==ie)try{Mt?$.setAttributeNS(Mt,gt,le):$.setAttribute(gt,le),vn($)?Ue($):Mb(e.removed)}catch{Je(gt,$)}}Sn(L.afterSanitizeAttributes,$,null)},Ji=function ve($){let ee=null;const ge=at($);for(Sn(L.beforeSanitizeShadowDOM,$,null);ee=ge.nextNode();)Sn(L.uponSanitizeShadowNode,ee,null),mr(ee),Rn(ee),ee.content instanceof s&&ve(ee.content);Sn(L.afterSanitizeShadowDOM,$,null)};return e.sanitize=function(ve){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=null,ge=null,tt=null,_t=null;if(Ie=!ve,Ie&&(ve="<!-->"),typeof ve!="string"&&!Zn(ve))if(typeof ve.toString=="function"){if(ve=ve.toString(),typeof ve!="string")throw $o("dirty is not a string, aborting")}else throw $o("toString is not a function");if(!e.isSupported)return ve;if(Se||Z($),e.removed=[],typeof ve=="string"&&(Dt=!1),Dt){if(ve.nodeName){const sn=z(ve.nodeName);if(!U[sn]||K[sn])throw $o("root node is forbidden and cannot be sanitized in-place")}}else if(ve instanceof o)ee=Lt("<!---->"),ge=ee.ownerDocument.importNode(ve,!0),ge.nodeType===Uo.element&&ge.nodeName==="BODY"||ge.nodeName==="HTML"?ee=ge:ee.appendChild(ge);else{if(!Tt&&!pe&&!Be&&ve.indexOf("<")===-1)return x&&Yt?x.createHTML(ve):ve;if(ee=Lt(ve),!ee)return Tt?null:Yt?w:""}ee&&Rt&&Ue(ee.firstChild);const gt=at(Dt?ve:ee);for(;tt=gt.nextNode();)mr(tt),Rn(tt),tt.content instanceof s&&Ji(tt.content);if(Dt)return ve;if(Tt){if(Ke)for(_t=A.call(ee.ownerDocument);ee.firstChild;)_t.appendChild(ee.firstChild);else _t=ee;return(Y.shadowroot||Y.shadowrootmode)&&(_t=N.call(r,_t,!0)),_t}let Mt=Be?ee.outerHTML:ee.innerHTML;return Be&&U["!doctype"]&&ee.ownerDocument&&ee.ownerDocument.doctype&&ee.ownerDocument.doctype.name&&Nn(FA,ee.ownerDocument.doctype.name)&&(Mt="<!DOCTYPE "+ee.ownerDocument.doctype.name+`>
`+Mt),pe&&vl([S,M,E],sn=>{Mt=Po(Mt,sn," ")}),x&&Yt?x.createHTML(Mt):Mt},e.setConfig=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Z(ve),Se=!0},e.clearConfig=function(){ne=null,Se=!1},e.isValidAttribute=function(ve,$,ee){ne||Z({});const ge=z(ve),tt=z($);return Tr(ge,tt,ee)},e.addHook=function(ve,$){typeof $=="function"&&Oo(L[ve],$)},e.removeHook=function(ve,$){if($!==void 0){const ee=i8(L[ve],$);return ee===-1?void 0:s8(L[ve],ee,1)[0]}return Mb(L[ve])},e.removeHooks=function(ve){L[ve]=[]},e.removeAllHooks=function(){L=Ub()},e}var TK=SA();function ah(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function D8(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function iy(t){let e,n,r;t.length!==2?(e=ah,n=(o,u)=>ah(t(o),u),r=(o,u)=>t(o)-u):(e=t===ah||t===D8?t:w8,n=t,r=t);function i(o,u,c=0,l=o.length){if(c<l){if(e(u,u)!==0)return l;do{const h=c+l>>>1;n(o[h],u)<0?c=h+1:l=h}while(c<l)}return c}function s(o,u,c=0,l=o.length){if(c<l){if(e(u,u)!==0)return l;do{const h=c+l>>>1;n(o[h],u)<=0?c=h+1:l=h}while(c<l)}return c}function a(o,u,c=0,l=o.length){const h=i(o,u,c,l-1);return h>c&&r(o[h-1],u)>-r(o[h],u)?h-1:h}return{left:i,center:a,right:s}}function w8(){return 0}function _8(t){return t===null?NaN:+t}const A8=iy(ah),C8=A8.right;iy(_8).center;class Gb extends Map{constructor(e,n=F8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Hb(this,e))}has(e){return super.has(Hb(this,e))}set(e,n){return super.set(T8(this,e),n)}delete(e){return super.delete(k8(this,e))}}function Hb({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function T8({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function k8({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function F8(t){return t!==null&&typeof t=="object"?t.valueOf():t}const S8=Math.sqrt(50),R8=Math.sqrt(10),N8=Math.sqrt(2);function Zh(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=S8?10:s>=R8?5:s>=N8?2:1;let o,u,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),u=Math.round(e*c),o/c<t&&++o,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),u=Math.round(e/c),o*c<t&&++o,u*c>e&&--u),u<o&&.5<=n&&n<2?Zh(t,e,n*2):[o,u,c]}function L8(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?Zh(e,t,n):Zh(t,e,n);if(!(s>=i))return[];const o=s-i+1,u=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)u[c]=(s-c)/-a;else for(let c=0;c<o;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)u[c]=(i+c)/-a;else for(let c=0;c<o;++c)u[c]=(i+c)*a;return u}function Lg(t,e,n){return e=+e,t=+t,n=+n,Zh(t,e,n)[2]}function Mg(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Lg(e,t,n):Lg(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function kK(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function FK(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function M8(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function I8(t){return t}var oh=1,j0=2,Ig=3,xl=4,Wb=1e-6;function O8(t){return"translate("+t+",0)"}function P8(t){return"translate(0,"+t+")"}function $8(t){return e=>+t(e)}function B8(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function U8(){return!this.__axis}function RA(t,e){var n=[],r=null,i=null,s=6,a=6,o=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===oh||t===xl?-1:1,l=t===xl||t===j0?"x":"y",h=t===oh||t===Ig?O8:P8;function d(f){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),g=i??(e.tickFormat?e.tickFormat.apply(e,n):I8),m=Math.max(s,0)+o,y=e.range(),b=+y[0]+u,v=+y[y.length-1]+u,x=(e.bandwidth?B8:$8)(e.copy(),u),w=f.selection?f.selection():f,k=w.selectAll(".domain").data([null]),D=w.selectAll(".tick").data(p,e).order(),A=D.exit(),R=D.enter().append("g").attr("class","tick"),N=D.select("line"),L=D.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),D=D.merge(R),N=N.merge(R.append("line").attr("stroke","currentColor").attr(l+"2",c*s)),L=L.merge(R.append("text").attr("fill","currentColor").attr(l,c*m).attr("dy",t===oh?"0em":t===Ig?"0.71em":"0.32em")),f!==w&&(k=k.transition(f),D=D.transition(f),N=N.transition(f),L=L.transition(f),A=A.transition(f).attr("opacity",Wb).attr("transform",function(S){return isFinite(S=x(S))?h(S+u):this.getAttribute("transform")}),R.attr("opacity",Wb).attr("transform",function(S){var M=this.parentNode.__axis;return h((M&&isFinite(M=M(S))?M:x(S))+u)})),A.remove(),k.attr("d",t===xl||t===j0?a?"M"+c*a+","+b+"H"+u+"V"+v+"H"+c*a:"M"+u+","+b+"V"+v:a?"M"+b+","+c*a+"V"+u+"H"+v+"V"+c*a:"M"+b+","+u+"H"+v),D.attr("opacity",1).attr("transform",function(S){return h(x(S)+u)}),N.attr(l+"2",c*s),L.attr(l,c*m).text(g),w.filter(U8).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===j0?"start":t===xl?"end":"middle"),w.each(function(){this.__axis=x})}return d.scale=function(f){return arguments.length?(e=f,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(f){return arguments.length?(n=f==null?[]:Array.from(f),d):n.slice()},d.tickValues=function(f){return arguments.length?(r=f==null?null:Array.from(f),d):r&&r.slice()},d.tickFormat=function(f){return arguments.length?(i=f,d):i},d.tickSize=function(f){return arguments.length?(s=a=+f,d):s},d.tickSizeInner=function(f){return arguments.length?(s=+f,d):s},d.tickSizeOuter=function(f){return arguments.length?(a=+f,d):a},d.tickPadding=function(f){return arguments.length?(o=+f,d):o},d.offset=function(f){return arguments.length?(u=+f,d):u},d}function SK(t){return RA(oh,t)}function RK(t){return RA(Ig,t)}var G8={value:()=>{}};function NA(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new uh(n)}function uh(t){this._=t}function H8(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}uh.prototype=NA.prototype={constructor:uh,on:function(t,e){var n=this._,r=H8(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=W8(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=zb(n[i],t.name,e);else if(e==null)for(i in n)n[i]=zb(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new uh(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function W8(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function zb(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=G8,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Og="http://www.w3.org/1999/xhtml";const Yb={svg:"http://www.w3.org/2000/svg",xhtml:Og,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Md(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Yb.hasOwnProperty(e)?{space:Yb[e],local:t}:t}function z8(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Og&&e.documentElement.namespaceURI===Og?e.createElement(t):e.createElementNS(n,t)}}function Y8(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function LA(t){var e=Md(t);return(e.local?Y8:z8)(e)}function X8(){}function sy(t){return t==null?X8:function(){return this.querySelector(t)}}function V8(t){typeof t!="function"&&(t=sy(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),u,c,l=0;l<a;++l)(u=s[l])&&(c=t.call(u,u.__data__,l,s))&&("__data__"in u&&(c.__data__=u.__data__),o[l]=c);return new fr(r,this._parents)}function q8(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function j8(){return[]}function MA(t){return t==null?j8:function(){return this.querySelectorAll(t)}}function K8(t){return function(){return q8(t.apply(this,arguments))}}function Z8(t){typeof t=="function"?t=K8(t):t=MA(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,u,c=0;c<o;++c)(u=a[c])&&(r.push(t.call(u,u.__data__,c,a)),i.push(u));return new fr(r,i)}function IA(t){return function(){return this.matches(t)}}function OA(t){return function(e){return e.matches(t)}}var J8=Array.prototype.find;function Q8(t){return function(){return J8.call(this.children,t)}}function e4(){return this.firstElementChild}function t4(t){return this.select(t==null?e4:Q8(typeof t=="function"?t:OA(t)))}var n4=Array.prototype.filter;function r4(){return Array.from(this.children)}function i4(t){return function(){return n4.call(this.children,t)}}function s4(t){return this.selectAll(t==null?r4:i4(typeof t=="function"?t:OA(t)))}function a4(t){typeof t!="function"&&(t=IA(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],u,c=0;c<a;++c)(u=s[c])&&t.call(u,u.__data__,c,s)&&o.push(u);return new fr(r,this._parents)}function PA(t){return new Array(t.length)}function o4(){return new fr(this._enter||this._groups.map(PA),this._parents)}function Jh(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Jh.prototype={constructor:Jh,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function u4(t){return function(){return t}}function c4(t,e,n,r,i,s){for(var a=0,o,u=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new Jh(t,s[a]);for(;a<u;++a)(o=e[a])&&(i[a]=o)}function l4(t,e,n,r,i,s,a){var o,u,c=new Map,l=e.length,h=s.length,d=new Array(l),f;for(o=0;o<l;++o)(u=e[o])&&(d[o]=f=a.call(u,u.__data__,o,e)+"",c.has(f)?i[o]=u:c.set(f,u));for(o=0;o<h;++o)f=a.call(t,s[o],o,s)+"",(u=c.get(f))?(r[o]=u,u.__data__=s[o],c.delete(f)):n[o]=new Jh(t,s[o]);for(o=0;o<l;++o)(u=e[o])&&c.get(d[o])===u&&(i[o]=u)}function h4(t){return t.__data__}function f4(t,e){if(!arguments.length)return Array.from(this,h4);var n=e?l4:c4,r=this._parents,i=this._groups;typeof t!="function"&&(t=u4(t));for(var s=i.length,a=new Array(s),o=new Array(s),u=new Array(s),c=0;c<s;++c){var l=r[c],h=i[c],d=h.length,f=d4(t.call(l,l&&l.__data__,c,r)),p=f.length,g=o[c]=new Array(p),m=a[c]=new Array(p),y=u[c]=new Array(d);n(l,h,g,m,y,f,e);for(var b=0,v=0,x,w;b<p;++b)if(x=g[b]){for(b>=v&&(v=b+1);!(w=m[v])&&++v<p;);x._next=w||null}}return a=new fr(a,r),a._enter=o,a._exit=u,a}function d4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function p4(){return new fr(this._exit||this._groups.map(PA),this._parents)}function g4(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function m4(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),u=0;u<a;++u)for(var c=n[u],l=r[u],h=c.length,d=o[u]=new Array(h),f,p=0;p<h;++p)(f=c[p]||l[p])&&(d[p]=f);for(;u<i;++u)o[u]=n[u];return new fr(o,this._parents)}function y4(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function v4(t){t||(t=b4);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,u=i[s]=new Array(o),c,l=0;l<o;++l)(c=a[l])&&(u[l]=c);u.sort(e)}return new fr(i,this._parents).order()}function b4(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function x4(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function E4(){return Array.from(this)}function D4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function w4(){let t=0;for(const e of this)++t;return t}function _4(){return!this.node()}function A4(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function C4(t){return function(){this.removeAttribute(t)}}function T4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function k4(t,e){return function(){this.setAttribute(t,e)}}function F4(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function S4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function R4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function N4(t,e){var n=Md(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?T4:C4:typeof e=="function"?n.local?R4:S4:n.local?F4:k4)(n,e))}function $A(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function L4(t){return function(){this.style.removeProperty(t)}}function M4(t,e,n){return function(){this.style.setProperty(t,e,n)}}function I4(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function O4(t,e,n){return arguments.length>1?this.each((e==null?L4:typeof e=="function"?I4:M4)(t,e,n??"")):ro(this.node(),t)}function ro(t,e){return t.style.getPropertyValue(e)||$A(t).getComputedStyle(t,null).getPropertyValue(e)}function P4(t){return function(){delete this[t]}}function $4(t,e){return function(){this[t]=e}}function B4(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function U4(t,e){return arguments.length>1?this.each((e==null?P4:typeof e=="function"?B4:$4)(t,e)):this.node()[t]}function BA(t){return t.trim().split(/^|\s+/)}function ay(t){return t.classList||new UA(t)}function UA(t){this._node=t,this._names=BA(t.getAttribute("class")||"")}UA.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function GA(t,e){for(var n=ay(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function HA(t,e){for(var n=ay(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function G4(t){return function(){GA(this,t)}}function H4(t){return function(){HA(this,t)}}function W4(t,e){return function(){(e.apply(this,arguments)?GA:HA)(this,t)}}function z4(t,e){var n=BA(t+"");if(arguments.length<2){for(var r=ay(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?W4:e?G4:H4)(n,e))}function Y4(){this.textContent=""}function X4(t){return function(){this.textContent=t}}function V4(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function q4(t){return arguments.length?this.each(t==null?Y4:(typeof t=="function"?V4:X4)(t)):this.node().textContent}function j4(){this.innerHTML=""}function K4(t){return function(){this.innerHTML=t}}function Z4(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function J4(t){return arguments.length?this.each(t==null?j4:(typeof t=="function"?Z4:K4)(t)):this.node().innerHTML}function Q4(){this.nextSibling&&this.parentNode.appendChild(this)}function eP(){return this.each(Q4)}function tP(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nP(){return this.each(tP)}function rP(t){var e=typeof t=="function"?t:LA(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function iP(){return null}function sP(t,e){var n=typeof t=="function"?t:LA(t),r=e==null?iP:typeof e=="function"?e:sy(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function aP(){var t=this.parentNode;t&&t.removeChild(this)}function oP(){return this.each(aP)}function uP(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function cP(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lP(t){return this.select(t?cP:uP)}function hP(t){return arguments.length?this.property("__data__",t):this.node().__data__}function fP(t){return function(e){t.call(this,e,this.__data__)}}function dP(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function pP(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function gP(t,e,n){return function(){var r=this.__on,i,s=fP(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function mP(t,e,n){var r=dP(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,c=o.length,l;u<c;++u)for(i=0,l=o[u];i<s;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(o=e?gP:pP,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function WA(t,e,n){var r=$A(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function yP(t,e){return function(){return WA(this,t,e)}}function vP(t,e){return function(){return WA(this,t,e.apply(this,arguments))}}function bP(t,e){return this.each((typeof e=="function"?vP:yP)(t,e))}function*xP(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var zA=[null];function fr(t,e){this._groups=t,this._parents=e}function Uc(){return new fr([[document.documentElement]],zA)}function EP(){return this}fr.prototype=Uc.prototype={constructor:fr,select:V8,selectAll:Z8,selectChild:t4,selectChildren:s4,filter:a4,data:f4,enter:o4,exit:p4,join:g4,merge:m4,selection:EP,order:y4,sort:v4,call:x4,nodes:E4,node:D4,size:w4,empty:_4,each:A4,attr:N4,style:O4,property:U4,classed:z4,text:q4,html:J4,raise:eP,lower:nP,append:rP,insert:sP,remove:oP,clone:lP,datum:hP,on:mP,dispatch:bP,[Symbol.iterator]:xP};function NK(t){return typeof t=="string"?new fr([[document.querySelector(t)]],[document.documentElement]):new fr([[t]],zA)}function Gc(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Id(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ha(){}var gc=.7,Qh=1/gc,Wa="\\s*([+-]?\\d+)\\s*",mc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DP=/^#([0-9a-f]{3,8})$/,wP=new RegExp(`^rgb\\(${Wa},${Wa},${Wa}\\)$`),_P=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),AP=new RegExp(`^rgba\\(${Wa},${Wa},${Wa},${mc}\\)$`),CP=new RegExp(`^rgba\\(${mi},${mi},${mi},${mc}\\)$`),TP=new RegExp(`^hsl\\(${mc},${mi},${mi}\\)$`),kP=new RegExp(`^hsla\\(${mc},${mi},${mi},${mc}\\)$`),Xb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gc(ha,Qs,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Vb,formatHex:Vb,formatHex8:FP,formatHsl:SP,formatRgb:qb,toString:qb});function Vb(){return this.rgb().formatHex()}function FP(){return this.rgb().formatHex8()}function SP(){return XA(this).formatHsl()}function qb(){return this.rgb().formatRgb()}function Qs(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=DP.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?jb(e):n===3?new An(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?El(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?El(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=wP.exec(t))?new An(e[1],e[2],e[3],1):(e=_P.exec(t))?new An(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=AP.exec(t))?El(e[1],e[2],e[3],e[4]):(e=CP.exec(t))?El(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=TP.exec(t))?Jb(e[1],e[2]/100,e[3]/100,1):(e=kP.exec(t))?Jb(e[1],e[2]/100,e[3]/100,e[4]):Xb.hasOwnProperty(t)?jb(Xb[t]):t==="transparent"?new An(NaN,NaN,NaN,0):null}function jb(t){return new An(t>>16&255,t>>8&255,t&255,1)}function El(t,e,n,r){return r<=0&&(t=e=n=NaN),new An(t,e,n,r)}function YA(t){return t instanceof ha||(t=Qs(t)),t?(t=t.rgb(),new An(t.r,t.g,t.b,t.opacity)):new An}function Pg(t,e,n,r){return arguments.length===1?YA(t):new An(t,e,n,r??1)}function An(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Gc(An,Pg,Id(ha,{brighter(t){return t=t==null?Qh:Math.pow(Qh,t),new An(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gc:Math.pow(gc,t),new An(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new An(Xs(this.r),Xs(this.g),Xs(this.b),ef(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kb,formatHex:Kb,formatHex8:RP,formatRgb:Zb,toString:Zb}));function Kb(){return`#${Hs(this.r)}${Hs(this.g)}${Hs(this.b)}`}function RP(){return`#${Hs(this.r)}${Hs(this.g)}${Hs(this.b)}${Hs((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zb(){const t=ef(this.opacity);return`${t===1?"rgb(":"rgba("}${Xs(this.r)}, ${Xs(this.g)}, ${Xs(this.b)}${t===1?")":`, ${t})`}`}function ef(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hs(t){return t=Xs(t),(t<16?"0":"")+t.toString(16)}function Jb(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ir(t,e,n,r)}function XA(t){if(t instanceof Ir)return new Ir(t.h,t.s,t.l,t.opacity);if(t instanceof ha||(t=Qs(t)),!t)return new Ir;if(t instanceof Ir)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,u=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=u<.5?s+i:2-s-i,a*=60):o=u>0&&u<1?0:a,new Ir(a,o,u,t.opacity)}function NP(t,e,n,r){return arguments.length===1?XA(t):new Ir(t,e,n,r??1)}function Ir(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Gc(Ir,NP,Id(ha,{brighter(t){return t=t==null?Qh:Math.pow(Qh,t),new Ir(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gc:Math.pow(gc,t),new Ir(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new An(K0(t>=240?t-240:t+120,i,r),K0(t,i,r),K0(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ir(Qb(this.h),Dl(this.s),Dl(this.l),ef(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ef(this.opacity);return`${t===1?"hsl(":"hsla("}${Qb(this.h)}, ${Dl(this.s)*100}%, ${Dl(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Qb(t){return t=(t||0)%360,t<0?t+360:t}function Dl(t){return Math.max(0,Math.min(1,t||0))}function K0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const LP=Math.PI/180,MP=180/Math.PI,tf=18,VA=.96422,qA=1,jA=.82521,KA=4/29,za=6/29,ZA=3*za*za,IP=za*za*za;function JA(t){if(t instanceof yi)return new yi(t.l,t.a,t.b,t.opacity);if(t instanceof $i)return QA(t);t instanceof An||(t=YA(t));var e=ep(t.r),n=ep(t.g),r=ep(t.b),i=Z0((.2225045*e+.7168786*n+.0606169*r)/qA),s,a;return e===n&&n===r?s=a=i:(s=Z0((.4360747*e+.3850649*n+.1430804*r)/VA),a=Z0((.0139322*e+.0971045*n+.7141733*r)/jA)),new yi(116*i-16,500*(s-i),200*(i-a),t.opacity)}function OP(t,e,n,r){return arguments.length===1?JA(t):new yi(t,e,n,r??1)}function yi(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Gc(yi,OP,Id(ha,{brighter(t){return new yi(this.l+tf*(t??1),this.a,this.b,this.opacity)},darker(t){return new yi(this.l-tf*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=VA*J0(e),t=qA*J0(t),n=jA*J0(n),new An(Q0(3.1338561*e-1.6168667*t-.4906146*n),Q0(-.9787684*e+1.9161415*t+.033454*n),Q0(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Z0(t){return t>IP?Math.pow(t,1/3):t/ZA+KA}function J0(t){return t>za?t*t*t:ZA*(t-KA)}function Q0(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ep(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function PP(t){if(t instanceof $i)return new $i(t.h,t.c,t.l,t.opacity);if(t instanceof yi||(t=JA(t)),t.a===0&&t.b===0)return new $i(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*MP;return new $i(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function $g(t,e,n,r){return arguments.length===1?PP(t):new $i(t,e,n,r??1)}function $i(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function QA(t){if(isNaN(t.h))return new yi(t.l,0,0,t.opacity);var e=t.h*LP;return new yi(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Gc($i,$g,Id(ha,{brighter(t){return new $i(this.h,this.c,this.l+tf*(t??1),this.opacity)},darker(t){return new $i(this.h,this.c,this.l-tf*(t??1),this.opacity)},rgb(){return QA(this).rgb()}}));const Od=t=>()=>t;function eC(t,e){return function(n){return t+n*e}}function $P(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function BP(t,e){var n=e-t;return n?eC(t,n>180||n<-180?n-360*Math.round(n/360):n):Od(isNaN(t)?e:t)}function UP(t){return(t=+t)==1?Qu:function(e,n){return n-e?$P(e,n,t):Od(isNaN(e)?n:e)}}function Qu(t,e){var n=e-t;return n?eC(t,n):Od(isNaN(t)?e:t)}const nf=(function t(e){var n=UP(e);function r(i,s){var a=n((i=Pg(i)).r,(s=Pg(s)).r),o=n(i.g,s.g),u=n(i.b,s.b),c=Qu(i.opacity,s.opacity);return function(l){return i.r=a(l),i.g=o(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=t,r})(1);function GP(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function HP(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function WP(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=oy(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function zP(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Nr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function YP(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=oy(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Bg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tp=new RegExp(Bg.source,"g");function XP(t){return function(){return t}}function VP(t){return function(e){return t(e)+""}}function tC(t,e){var n=Bg.lastIndex=tp.lastIndex=0,r,i,s,a=-1,o=[],u=[];for(t=t+"",e=e+"";(r=Bg.exec(t))&&(i=tp.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,u.push({i:a,x:Nr(r,i)})),n=tp.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?VP(u[0].x):XP(e):(e=u.length,function(c){for(var l=0,h;l<e;++l)o[(h=u[l]).i]=h.x(c);return o.join("")})}function oy(t,e){var n=typeof e,r;return e==null||n==="boolean"?Od(e):(n==="number"?Nr:n==="string"?(r=Qs(e))?(e=r,nf):tC:e instanceof Qs?nf:e instanceof Date?zP:HP(e)?GP:Array.isArray(e)?WP:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?YP:Nr)(t,e)}function qP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ex=180/Math.PI,Ug={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nC(t,e,n,r,i,s){var a,o,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,u/=o),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*ex,skewX:Math.atan(u)*ex,scaleX:a,scaleY:o}}var wl;function jP(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ug:nC(e.a,e.b,e.c,e.d,e.e,e.f)}function KP(t){return t==null||(wl||(wl=document.createElementNS("http://www.w3.org/2000/svg","g")),wl.setAttribute("transform",t),!(t=wl.transform.baseVal.consolidate()))?Ug:(t=t.matrix,nC(t.a,t.b,t.c,t.d,t.e,t.f))}function rC(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,l,h,d,f,p){if(c!==h||l!==d){var g=f.push("translate(",null,e,null,n);p.push({i:g-4,x:Nr(c,h)},{i:g-2,x:Nr(l,d)})}else(h||d)&&f.push("translate("+h+e+d+n)}function a(c,l,h,d){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Nr(c,l)})):l&&h.push(i(h)+"rotate("+l+r)}function o(c,l,h,d){c!==l?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Nr(c,l)}):l&&h.push(i(h)+"skewX("+l+r)}function u(c,l,h,d,f,p){if(c!==h||l!==d){var g=f.push(i(f)+"scale(",null,",",null,")");p.push({i:g-4,x:Nr(c,h)},{i:g-2,x:Nr(l,d)})}else(h!==1||d!==1)&&f.push(i(f)+"scale("+h+","+d+")")}return function(c,l){var h=[],d=[];return c=t(c),l=t(l),s(c.translateX,c.translateY,l.translateX,l.translateY,h,d),a(c.rotate,l.rotate,h,d),o(c.skewX,l.skewX,h,d),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,h,d),c=l=null,function(f){for(var p=-1,g=d.length,m;++p<g;)h[(m=d[p]).i]=m.x(f);return h.join("")}}}var ZP=rC(jP,"px, ","px)","deg)"),JP=rC(KP,", ",")",")");function QP(t){return function(e,n){var r=t((e=$g(e)).h,(n=$g(n)).h),i=Qu(e.c,n.c),s=Qu(e.l,n.l),a=Qu(e.opacity,n.opacity);return function(o){return e.h=r(o),e.c=i(o),e.l=s(o),e.opacity=a(o),e+""}}}const LK=QP(BP);var io=0,lu=0,Go=0,iC=1e3,rf,hu,sf=0,ea=0,Pd=0,yc=typeof performance=="object"&&performance.now?performance:Date,sC=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function uy(){return ea||(sC(e5),ea=yc.now()+Pd)}function e5(){ea=0}function af(){this._call=this._time=this._next=null}af.prototype=aC.prototype={constructor:af,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?uy():+n)+(e==null?0:+e),!this._next&&hu!==this&&(hu?hu._next=this:rf=this,hu=this),this._call=t,this._time=n,Gg()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gg())}};function aC(t,e,n){var r=new af;return r.restart(t,e,n),r}function t5(){uy(),++io;for(var t=rf,e;t;)(e=ea-t._time)>=0&&t._call.call(void 0,e),t=t._next;--io}function tx(){ea=(sf=yc.now())+Pd,io=lu=0;try{t5()}finally{io=0,r5(),ea=0}}function n5(){var t=yc.now(),e=t-sf;e>iC&&(Pd-=e,sf=t)}function r5(){for(var t,e=rf,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:rf=n);hu=t,Gg(r)}function Gg(t){if(!io){lu&&(lu=clearTimeout(lu));var e=t-ea;e>24?(t<1/0&&(lu=setTimeout(tx,t-yc.now()-Pd)),Go&&(Go=clearInterval(Go))):(Go||(sf=yc.now(),Go=setInterval(n5,iC)),io=1,sC(tx))}}function nx(t,e,n){var r=new af;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var i5=NA("start","end","cancel","interrupt"),s5=[],oC=0,rx=1,Hg=2,ch=3,ix=4,Wg=5,lh=6;function $d(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;a5(t,n,{name:e,index:r,group:i,on:i5,tween:s5,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:oC})}function cy(t,e){var n=jr(t,e);if(n.state>oC)throw new Error("too late; already scheduled");return n}function Ai(t,e){var n=jr(t,e);if(n.state>ch)throw new Error("too late; already running");return n}function jr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function a5(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=aC(s,0,n.time);function s(c){n.state=rx,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var l,h,d,f;if(n.state!==rx)return u();for(l in r)if(f=r[l],f.name===n.name){if(f.state===ch)return nx(a);f.state===ix?(f.state=lh,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[l]):+l<e&&(f.state=lh,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[l])}if(nx(function(){n.state===ch&&(n.state=ix,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Hg,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Hg){for(n.state=ch,i=new Array(d=n.tween.length),l=0,h=-1;l<d;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=f);i.length=h+1}}function o(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Wg,1),h=-1,d=i.length;++h<d;)i[h].call(t,l);n.state===Wg&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=lh,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function o5(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>Hg&&r.state<Wg,r.state=lh,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function u5(t){return this.each(function(){o5(this,t)})}function c5(t,e){var n,r;return function(){var i=Ai(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function l5(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ai(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=o;break}u===c&&i.push(o)}s.tween=i}}function h5(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=jr(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?c5:l5)(n,t,e))}function ly(t,e,n){var r=t._id;return t.each(function(){var i=Ai(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return jr(i,r).value[e]}}function uC(t,e){var n;return(typeof e=="number"?Nr:e instanceof Qs?nf:(n=Qs(e))?(e=n,nf):tC)(t,e)}function f5(t){return function(){this.removeAttribute(t)}}function d5(t){return function(){this.removeAttributeNS(t.space,t.local)}}function p5(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function g5(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function m5(t,e,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o)))}}function y5(t,e,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o)))}}function v5(t,e){var n=Md(t),r=n==="transform"?JP:uC;return this.attrTween(t,typeof e=="function"?(n.local?y5:m5)(n,r,ly(this,"attr."+t,e)):e==null?(n.local?d5:f5)(n):(n.local?g5:p5)(n,r,e))}function b5(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function x5(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function E5(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&x5(t,s)),n}return i._value=e,i}function D5(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&b5(t,s)),n}return i._value=e,i}function w5(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Md(t);return this.tween(n,(r.local?E5:D5)(r,e))}function _5(t,e){return function(){cy(this,t).delay=+e.apply(this,arguments)}}function A5(t,e){return e=+e,function(){cy(this,t).delay=e}}function C5(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?_5:A5)(e,t)):jr(this.node(),e).delay}function T5(t,e){return function(){Ai(this,t).duration=+e.apply(this,arguments)}}function k5(t,e){return e=+e,function(){Ai(this,t).duration=e}}function F5(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?T5:k5)(e,t)):jr(this.node(),e).duration}function S5(t,e){if(typeof e!="function")throw new Error;return function(){Ai(this,t).ease=e}}function R5(t){var e=this._id;return arguments.length?this.each(S5(e,t)):jr(this.node(),e).ease}function N5(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ai(this,t).ease=n}}function L5(t){if(typeof t!="function")throw new Error;return this.each(N5(this._id,t))}function M5(t){typeof t!="function"&&(t=IA(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],u,c=0;c<a;++c)(u=s[c])&&t.call(u,u.__data__,c,s)&&o.push(u);return new Yi(r,this._parents,this._name,this._id)}function I5(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var u=e[o],c=n[o],l=u.length,h=a[o]=new Array(l),d,f=0;f<l;++f)(d=u[f]||c[f])&&(h[f]=d);for(;o<r;++o)a[o]=e[o];return new Yi(a,this._parents,this._name,this._id)}function O5(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function P5(t,e,n){var r,i,s=O5(e)?cy:Ai;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function $5(t,e){var n=this._id;return arguments.length<2?jr(this.node(),n).on.on(t):this.each(P5(n,t,e))}function B5(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function U5(){return this.on("end.remove",B5(this._id))}function G5(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sy(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],u=o.length,c=s[a]=new Array(u),l,h,d=0;d<u;++d)(l=o[d])&&(h=t.call(l,l.__data__,d,o))&&("__data__"in l&&(h.__data__=l.__data__),c[d]=h,$d(c[d],e,n,d,c,jr(l,n)));return new Yi(s,this._parents,e,n)}function H5(t){var e=this._name,n=this._id;typeof t!="function"&&(t=MA(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var u=r[o],c=u.length,l,h=0;h<c;++h)if(l=u[h]){for(var d=t.call(l,l.__data__,h,u),f,p=jr(l,n),g=0,m=d.length;g<m;++g)(f=d[g])&&$d(f,e,n,g,d,p);s.push(d),a.push(l)}return new Yi(s,a,e,n)}var W5=Uc.prototype.constructor;function z5(){return new W5(this._groups,this._parents)}function Y5(t,e){var n,r,i;return function(){var s=ro(this,t),a=(this.style.removeProperty(t),ro(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function cC(t){return function(){this.style.removeProperty(t)}}function X5(t,e,n){var r,i=n+"",s;return function(){var a=ro(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function V5(t,e,n){var r,i,s;return function(){var a=ro(this,t),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(t),ro(this,t))),a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o))}}function q5(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var u=Ai(this,t),c=u.on,l=u.value[s]==null?o||(o=cC(e)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(a,i=l),u.on=r}}function j5(t,e,n){var r=(t+="")=="transform"?ZP:uC;return e==null?this.styleTween(t,Y5(t,r)).on("end.style."+t,cC(t)):typeof e=="function"?this.styleTween(t,V5(t,r,ly(this,"style."+t,e))).each(q5(this._id,t)):this.styleTween(t,X5(t,r,e),n).on("end.style."+t,null)}function K5(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Z5(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&K5(t,a,n)),r}return s._value=e,s}function J5(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Z5(t,e,n??""))}function Q5(t){return function(){this.textContent=t}}function e9(t){return function(){var e=t(this);this.textContent=e??""}}function t9(t){return this.tween("text",typeof t=="function"?e9(ly(this,"text",t)):Q5(t==null?"":t+""))}function n9(t){return function(e){this.textContent=t.call(this,e)}}function r9(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&n9(i)),e}return r._value=t,r}function i9(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,r9(t))}function s9(){for(var t=this._name,e=this._id,n=lC(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,c=0;c<o;++c)if(u=a[c]){var l=jr(u,e);$d(u,t,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Yi(r,this._parents,t,n)}function a9(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},u={value:function(){--i===0&&s()}};n.each(function(){var c=Ai(this,r),l=c.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(u)),c.on=e}),i===0&&s()})}var o9=0;function Yi(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function lC(){return++o9}var Ri=Uc.prototype;Yi.prototype={constructor:Yi,select:G5,selectAll:H5,selectChild:Ri.selectChild,selectChildren:Ri.selectChildren,filter:M5,merge:I5,selection:z5,transition:s9,call:Ri.call,nodes:Ri.nodes,node:Ri.node,size:Ri.size,empty:Ri.empty,each:Ri.each,on:$5,attr:v5,attrTween:w5,style:j5,styleTween:J5,text:t9,textTween:i9,remove:U5,tween:h5,delay:C5,duration:F5,ease:R5,easeVarying:L5,end:a9,[Symbol.iterator]:Ri[Symbol.iterator]};function u9(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var c9={time:null,delay:0,duration:250,ease:u9};function l9(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function h9(t){var e,n;t instanceof Yi?(e=t._id,t=t._name):(e=lC(),(n=c9).time=uy(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,c=0;c<o;++c)(u=a[c])&&$d(u,t,e,c,a,n||l9(u,e));return new Yi(r,this._parents,t,e)}Uc.prototype.interrupt=u5;Uc.prototype.transition=h9;const zg=Math.PI,Yg=2*zg,Ls=1e-6,f9=Yg-Ls;function hC(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function d9(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return hC;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let p9=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?hC:d9(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,u=r-e,c=i-n,l=a-e,h=o-n,d=l*l+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>Ls)if(!(Math.abs(h*u-c*l)>Ls)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let f=r-a,p=i-o,g=u*u+c*c,m=f*f+p*p,y=Math.sqrt(g),b=Math.sqrt(d),v=s*Math.tan((zg-Math.acos((g+d-m)/(2*y*b)))/2),x=v/b,w=v/y;Math.abs(x-1)>Ls&&this._append`L${e+x*l},${n+x*h}`,this._append`A${s},${s},0,0,${+(h*f>l*p)},${this._x1=e+w*u},${this._y1=n+w*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),u=r*Math.sin(i),c=e+o,l=n+u,h=1^a,d=a?i-s:s-i;this._x1===null?this._append`M${c},${l}`:(Math.abs(this._x1-c)>Ls||Math.abs(this._y1-l)>Ls)&&this._append`L${c},${l}`,r&&(d<0&&(d=d%Yg+Yg),d>f9?this._append`A${r},${r},0,1,${h},${e-o},${n-u}A${r},${r},0,1,${h},${this._x1=c},${this._y1=l}`:d>Ls&&this._append`A${r},${r},0,${+(d>=zg)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function g9(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function of(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function so(t){return t=of(Math.abs(t)),t?t[1]:NaN}function m9(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],u=0;i>0&&o>0&&(u+o+1>r&&(o=Math.max(1,r-u)),s.push(n.substring(i-=o,i+o)),!((u+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function y9(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var v9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uf(t){if(!(e=v9.exec(t)))throw new Error("invalid format: "+t);var e;return new hy({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}uf.prototype=hy.prototype;function hy(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}hy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function b9(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var cf;function x9(t,e){var n=of(t,e);if(!n)return cf=void 0,t.toPrecision(e);var r=n[0],i=n[1],s=i-(cf=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+of(t,Math.max(0,e+s-1))[0]}function sx(t,e){var n=of(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ax={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:g9,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>sx(t*100,e),r:sx,s:x9,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ox(t){return t}var ux=Array.prototype.map,cx=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function E9(t){var e=t.grouping===void 0||t.thousands===void 0?ox:m9(ux.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?ox:y9(ux.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(h,d){h=uf(h);var f=h.fill,p=h.align,g=h.sign,m=h.symbol,y=h.zero,b=h.width,v=h.comma,x=h.precision,w=h.trim,k=h.type;k==="n"?(v=!0,k="g"):ax[k]||(x===void 0&&(x=12),w=!0,k="g"),(y||f==="0"&&p==="=")&&(y=!0,f="0",p="=");var D=(d&&d.prefix!==void 0?d.prefix:"")+(m==="$"?n:m==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),A=(m==="$"?r:/[%p]/.test(k)?a:"")+(d&&d.suffix!==void 0?d.suffix:""),R=ax[k],N=/[defgprs%]/.test(k);x=x===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function L(S){var M=D,E=A,_,C,T;if(k==="c")E=R(S)+E,S="";else{S=+S;var F=S<0||1/S<0;if(S=isNaN(S)?u:R(Math.abs(S),x),w&&(S=b9(S)),F&&+S==0&&g!=="+"&&(F=!1),M=(F?g==="("?g:o:g==="-"||g==="("?"":g)+M,E=(k==="s"&&!isNaN(S)&&cf!==void 0?cx[8+cf/3]:"")+E+(F&&g==="("?")":""),N){for(_=-1,C=S.length;++_<C;)if(T=S.charCodeAt(_),48>T||T>57){E=(T===46?i+S.slice(_+1):S.slice(_))+E,S=S.slice(0,_);break}}}v&&!y&&(S=e(S,1/0));var I=M.length+S.length+E.length,P=I<b?new Array(b-I+1).join(f):"";switch(v&&y&&(S=e(P+S,P.length?b-E.length:1/0),P=""),p){case"<":S=M+S+E+P;break;case"=":S=M+P+S+E;break;case"^":S=P.slice(0,I=P.length>>1)+M+S+E+P.slice(I);break;default:S=P+M+S+E;break}return s(S)}return L.toString=function(){return h+""},L}function l(h,d){var f=Math.max(-8,Math.min(8,Math.floor(so(d)/3)))*3,p=Math.pow(10,-f),g=c((h=uf(h),h.type="f",h),{suffix:cx[8+f/3]});return function(m){return g(p*m)}}return{format:c,formatPrefix:l}}var _l,fC,dC;D9({thousands:",",grouping:[3],currency:["$",""]});function D9(t){return _l=E9(t),fC=_l.format,dC=_l.formatPrefix,_l}function w9(t){return Math.max(0,-so(Math.abs(t)))}function _9(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(so(e)/3)))*3-so(Math.abs(t)))}function A9(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,so(e)-so(t))+1}function C9(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function T9(){return this.eachAfter(C9)}function k9(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function F9(t,e){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function S9(t,e){for(var n=this,r=[n],i=[],s,a,o,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)t.call(e,n,++u,this);return this}function R9(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function N9(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function L9(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function M9(t){for(var e=this,n=I9(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function I9(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function O9(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function P9(){return Array.from(this)}function $9(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function B9(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*U9(){var t=this,e,n=[t],r,i,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function pC(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=W9)):e===void 0&&(e=H9);for(var n=new lf(t),r,i=[n],s,a,o,u;r=i.pop();)if((a=e(r.data))&&(u=(a=Array.from(a)).length))for(r.children=a,o=u-1;o>=0;--o)i.push(s=a[o]=new lf(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Y9)}function G9(){return pC(this).eachBefore(z9)}function H9(t){return t.children}function W9(t){return Array.isArray(t)?t[1]:null}function z9(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Y9(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function lf(t){this.data=t,this.depth=this.height=0,this.parent=null}lf.prototype=pC.prototype={constructor:lf,count:T9,each:k9,eachAfter:S9,eachBefore:F9,find:R9,sum:N9,sort:L9,path:M9,ancestors:O9,descendants:P9,leaves:$9,links:B9,copy:G9,[Symbol.iterator]:U9};function X9(t){if(typeof t!="function")throw new Error;return t}function Ho(){return 0}function Wo(t){return function(){return t}}function V9(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function q9(t,e,n,r,i){for(var s=t.children,a,o=-1,u=s.length,c=t.value&&(r-e)/t.value;++o<u;)a=s[o],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c}function j9(t,e,n,r,i){for(var s=t.children,a,o=-1,u=s.length,c=t.value&&(i-n)/t.value;++o<u;)a=s[o],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c}var K9=(1+Math.sqrt(5))/2;function Z9(t,e,n,r,i,s){for(var a=[],o=e.children,u,c,l=0,h=0,d=o.length,f,p,g=e.value,m,y,b,v,x,w,k;l<d;){f=i-n,p=s-r;do m=o[h++].value;while(!m&&h<d);for(y=b=m,w=Math.max(p/f,f/p)/(g*t),k=m*m*w,x=Math.max(b/k,k/y);h<d;++h){if(m+=c=o[h].value,c<y&&(y=c),c>b&&(b=c),k=m*m*w,v=Math.max(b/k,k/y),v>x){m-=c;break}x=v}a.push(u={value:m,dice:f<p,children:o.slice(l,h)}),u.dice?q9(u,n,r,i,g?r+=p*m/g:s):j9(u,n,r,g?n+=f*m/g:i,s),g-=m,l=h}return a}const J9=(function t(e){function n(r,i,s,a,o){Z9(e,r,i,s,a,o)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(K9);function IK(){var t=J9,e=!1,n=1,r=1,i=[0],s=Ho,a=Ho,o=Ho,u=Ho,c=Ho;function l(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(h),i=[0],e&&d.eachBefore(V9),d}function h(d){var f=i[d.depth],p=d.x0+f,g=d.y0+f,m=d.x1-f,y=d.y1-f;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(f=i[d.depth+1]=s(d)/2,p+=c(d)-f,g+=a(d)-f,m-=o(d)-f,y-=u(d)-f,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),t(d,p,g,m,y))}return l.round=function(d){return arguments.length?(e=!!d,l):e},l.size=function(d){return arguments.length?(n=+d[0],r=+d[1],l):[n,r]},l.tile=function(d){return arguments.length?(t=X9(d),l):t},l.padding=function(d){return arguments.length?l.paddingInner(d).paddingOuter(d):l.paddingInner()},l.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:Wo(+d),l):s},l.paddingOuter=function(d){return arguments.length?l.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):l.paddingTop()},l.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:Wo(+d),l):a},l.paddingRight=function(d){return arguments.length?(o=typeof d=="function"?d:Wo(+d),l):o},l.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:Wo(+d),l):u},l.paddingLeft=function(d){return arguments.length?(c=typeof d=="function"?d:Wo(+d),l):c},l}function Bd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const lx=Symbol("implicit");function gC(){var t=new Gb,e=[],n=[],r=lx;function i(s){let a=t.get(s);if(a===void 0){if(r!==lx)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Gb;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return gC(e,n).unknown(r)},Bd.apply(i,arguments),i}function Q9(){var t=gC().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,u=0,c=0,l=.5;delete t.unknown;function h(){var d=e().length,f=i<r,p=f?i:r,g=f?r:i;s=(g-p)/Math.max(1,d-u+c*2),o&&(s=Math.floor(s)),p+=(g-p-s*(d-u))*l,a=s*(1-u),o&&(p=Math.round(p),a=Math.round(a));var m=M8(d).map(function(y){return p+s*y});return n(f?m.reverse():m)}return t.domain=function(d){return arguments.length?(e(d),h()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(d){return arguments.length?(o=!!d,h()):o},t.padding=function(d){return arguments.length?(u=Math.min(1,c=+d),h()):u},t.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),h()):u},t.paddingOuter=function(d){return arguments.length?(c=+d,h()):c},t.align=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),h()):l},t.copy=function(){return Q9(e(),[r,i]).round(o).paddingInner(u).paddingOuter(c).align(l)},Bd.apply(h(),arguments)}function e$(t){return function(){return t}}function t$(t){return+t}var hx=[0,1];function La(t){return t}function Xg(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:e$(isNaN(e)?NaN:.5)}function n$(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function r$(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=Xg(i,r),s=n(a,s)):(r=Xg(r,i),s=n(s,a)),function(o){return s(r(o))}}function i$(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Xg(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var u=C8(t,o,1,r)-1;return s[u](i[u](o))}}function mC(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function s$(){var t=hx,e=hx,n=oy,r,i,s,a=La,o,u,c;function l(){var d=Math.min(t.length,e.length);return a!==La&&(a=n$(t[0],t[d-1])),o=d>2?i$:r$,u=c=null,h}function h(d){return d==null||isNaN(d=+d)?s:(u||(u=o(t.map(r),e,n)))(r(a(d)))}return h.invert=function(d){return a(i((c||(c=o(e,t.map(r),Nr)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,t$),l()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),l()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),n=qP,l()},h.clamp=function(d){return arguments.length?(a=d?!0:La,l()):a!==La},h.interpolate=function(d){return arguments.length?(n=d,l()):n},h.unknown=function(d){return arguments.length?(s=d,h):s},function(d,f){return r=d,i=f,l()}}function yC(){return s$()(La,La)}function a$(t,e,n,r){var i=Mg(t,e,n),s;switch(r=uf(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=_9(i,a))&&(r.precision=s),dC(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=A9(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=w9(i))&&(r.precision=s-(r.type==="%")*2);break}}return fC(r)}function o$(t){var e=t.domain;return t.ticks=function(n){var r=e();return L8(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return a$(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],u,c,l=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);l-- >0;){if(c=Lg(a,o,n),c===u)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;u=c}return t},t}function u$(){var t=yC();return t.copy=function(){return mC(t,u$())},Bd.apply(t,arguments),o$(t)}function c$(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}const np=new Date,rp=new Date;function zt(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const u=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return u;let c;do u.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return u},i.filter=s=>zt(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(np.setTime(+s),rp.setTime(+a),t(np),t(rp),Math.floor(n(np,rp))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const hf=zt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);hf.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?zt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):hf);hf.range;const Bi=1e3,br=Bi*60,Ui=br*60,Xi=Ui*24,fy=Xi*7,fx=Xi*30,ip=Xi*365,Ma=zt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Bi)},(t,e)=>(e-t)/Bi,t=>t.getUTCSeconds());Ma.range;const dy=zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Bi)},(t,e)=>{t.setTime(+t+e*br)},(t,e)=>(e-t)/br,t=>t.getMinutes());dy.range;const l$=zt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*br)},(t,e)=>(e-t)/br,t=>t.getUTCMinutes());l$.range;const py=zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Bi-t.getMinutes()*br)},(t,e)=>{t.setTime(+t+e*Ui)},(t,e)=>(e-t)/Ui,t=>t.getHours());py.range;const h$=zt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ui)},(t,e)=>(e-t)/Ui,t=>t.getUTCHours());h$.range;const Hc=zt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*br)/Xi,t=>t.getDate()-1);Hc.range;const gy=zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Xi,t=>t.getUTCDate()-1);gy.range;const f$=zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Xi,t=>Math.floor(t/Xi));f$.range;function fa(t){return zt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*br)/fy)}const Ud=fa(0),ff=fa(1),d$=fa(2),p$=fa(3),ao=fa(4),g$=fa(5),m$=fa(6);Ud.range;ff.range;d$.range;p$.range;ao.range;g$.range;m$.range;function da(t){return zt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/fy)}const vC=da(0),df=da(1),y$=da(2),v$=da(3),oo=da(4),b$=da(5),x$=da(6);vC.range;df.range;y$.range;v$.range;oo.range;b$.range;x$.range;const my=zt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());my.range;const E$=zt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());E$.range;const Vi=zt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Vi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Vi.range;const ta=zt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ta.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ta.range;function D$(t,e,n,r,i,s){const a=[[Ma,1,Bi],[Ma,5,5*Bi],[Ma,15,15*Bi],[Ma,30,30*Bi],[s,1,br],[s,5,5*br],[s,15,15*br],[s,30,30*br],[i,1,Ui],[i,3,3*Ui],[i,6,6*Ui],[i,12,12*Ui],[r,1,Xi],[r,2,2*Xi],[n,1,fy],[e,1,fx],[e,3,3*fx],[t,1,ip]];function o(c,l,h){const d=l<c;d&&([c,l]=[l,c]);const f=h&&typeof h.range=="function"?h:u(c,l,h),p=f?f.range(c,+l+1):[];return d?p.reverse():p}function u(c,l,h){const d=Math.abs(l-c)/h,f=iy(([,,m])=>m).right(a,d);if(f===a.length)return t.every(Mg(c/ip,l/ip,h));if(f===0)return hf.every(Math.max(Mg(c,l,h),1));const[p,g]=a[d/a[f-1][2]<a[f][2]/d?f-1:f];return p.every(g)}return[o,u]}const[w$,_$]=D$(Vi,my,Ud,Hc,py,dy);function sp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ap(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function zo(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function A$(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,u=t.shortMonths,c=Yo(i),l=Xo(i),h=Yo(s),d=Xo(s),f=Yo(a),p=Xo(a),g=Yo(o),m=Xo(o),y=Yo(u),b=Xo(u),v={a:T,A:F,b:I,B:P,c:null,d:vx,e:vx,f:q$,g:i7,G:a7,H:Y$,I:X$,j:V$,L:bC,m:j$,M:K$,p:U,q,Q:Ex,s:Dx,S:Z$,u:J$,U:Q$,V:e7,w:t7,W:n7,x:null,X:null,y:r7,Y:s7,Z:o7,"%":xx},x={a:Y,A:te,b:V,B:K,c:null,d:bx,e:bx,f:h7,g:E7,G:w7,H:u7,I:c7,j:l7,L:EC,m:f7,M:d7,p:ae,q:se,Q:Ex,s:Dx,S:p7,u:g7,U:m7,V:y7,w:v7,W:b7,x:null,X:null,y:x7,Y:D7,Z:_7,"%":xx},w={a:N,A:L,b:S,B:M,c:E,d:mx,e:mx,f:G$,g:gx,G:px,H:yx,I:yx,j:P$,L:U$,m:O$,M:$$,p:R,q:I$,Q:W$,s:z$,S:B$,u:S$,U:R$,V:N$,w:F$,W:L$,x:_,X:C,y:gx,Y:px,Z:M$,"%":H$};v.x=k(n,v),v.X=k(r,v),v.c=k(e,v),x.x=k(n,x),x.X=k(r,x),x.c=k(e,x);function k(B,W){return function(Q){var H=[],pe=-1,J=0,Be=B.length,Se,Rt,Tt;for(Q instanceof Date||(Q=new Date(+Q));++pe<Be;)B.charCodeAt(pe)===37&&(H.push(B.slice(J,pe)),(Rt=dx[Se=B.charAt(++pe)])!=null?Se=B.charAt(++pe):Rt=Se==="e"?" ":"0",(Tt=W[Se])&&(Se=Tt(Q,Rt)),H.push(Se),J=pe+1);return H.push(B.slice(J,pe)),H.join("")}}function D(B,W){return function(Q){var H=zo(1900,void 0,1),pe=A(H,B,Q+="",0),J,Be;if(pe!=Q.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(W&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(J=ap(zo(H.y,0,1)),Be=J.getUTCDay(),J=Be>4||Be===0?df.ceil(J):df(J),J=gy.offset(J,(H.V-1)*7),H.y=J.getUTCFullYear(),H.m=J.getUTCMonth(),H.d=J.getUTCDate()+(H.w+6)%7):(J=sp(zo(H.y,0,1)),Be=J.getDay(),J=Be>4||Be===0?ff.ceil(J):ff(J),J=Hc.offset(J,(H.V-1)*7),H.y=J.getFullYear(),H.m=J.getMonth(),H.d=J.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),Be="Z"in H?ap(zo(H.y,0,1)).getUTCDay():sp(zo(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(Be+5)%7:H.w+H.U*7-(Be+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,ap(H)):sp(H)}}function A(B,W,Q,H){for(var pe=0,J=W.length,Be=Q.length,Se,Rt;pe<J;){if(H>=Be)return-1;if(Se=W.charCodeAt(pe++),Se===37){if(Se=W.charAt(pe++),Rt=w[Se in dx?W.charAt(pe++):Se],!Rt||(H=Rt(B,Q,H))<0)return-1}else if(Se!=Q.charCodeAt(H++))return-1}return H}function R(B,W,Q){var H=c.exec(W.slice(Q));return H?(B.p=l.get(H[0].toLowerCase()),Q+H[0].length):-1}function N(B,W,Q){var H=f.exec(W.slice(Q));return H?(B.w=p.get(H[0].toLowerCase()),Q+H[0].length):-1}function L(B,W,Q){var H=h.exec(W.slice(Q));return H?(B.w=d.get(H[0].toLowerCase()),Q+H[0].length):-1}function S(B,W,Q){var H=y.exec(W.slice(Q));return H?(B.m=b.get(H[0].toLowerCase()),Q+H[0].length):-1}function M(B,W,Q){var H=g.exec(W.slice(Q));return H?(B.m=m.get(H[0].toLowerCase()),Q+H[0].length):-1}function E(B,W,Q){return A(B,e,W,Q)}function _(B,W,Q){return A(B,n,W,Q)}function C(B,W,Q){return A(B,r,W,Q)}function T(B){return a[B.getDay()]}function F(B){return s[B.getDay()]}function I(B){return u[B.getMonth()]}function P(B){return o[B.getMonth()]}function U(B){return i[+(B.getHours()>=12)]}function q(B){return 1+~~(B.getMonth()/3)}function Y(B){return a[B.getUTCDay()]}function te(B){return s[B.getUTCDay()]}function V(B){return u[B.getUTCMonth()]}function K(B){return o[B.getUTCMonth()]}function ae(B){return i[+(B.getUTCHours()>=12)]}function se(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var W=k(B+="",v);return W.toString=function(){return B},W},parse:function(B){var W=D(B+="",!1);return W.toString=function(){return B},W},utcFormat:function(B){var W=k(B+="",x);return W.toString=function(){return B},W},utcParse:function(B){var W=D(B+="",!0);return W.toString=function(){return B},W}}}var dx={"-":"",_:" ",0:"0"},tn=/^\s*\d+/,C$=/^%/,T$=/[\\^$*+?|[\]().{}]/g;function Qe(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function k$(t){return t.replace(T$,"\\$&")}function Yo(t){return new RegExp("^(?:"+t.map(k$).join("|")+")","i")}function Xo(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function F$(t,e,n){var r=tn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function S$(t,e,n){var r=tn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function R$(t,e,n){var r=tn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function N$(t,e,n){var r=tn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function L$(t,e,n){var r=tn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function px(t,e,n){var r=tn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function gx(t,e,n){var r=tn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function M$(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function I$(t,e,n){var r=tn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function O$(t,e,n){var r=tn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function mx(t,e,n){var r=tn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function P$(t,e,n){var r=tn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function yx(t,e,n){var r=tn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function $$(t,e,n){var r=tn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function B$(t,e,n){var r=tn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function U$(t,e,n){var r=tn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function G$(t,e,n){var r=tn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function H$(t,e,n){var r=C$.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function W$(t,e,n){var r=tn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function z$(t,e,n){var r=tn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function vx(t,e){return Qe(t.getDate(),e,2)}function Y$(t,e){return Qe(t.getHours(),e,2)}function X$(t,e){return Qe(t.getHours()%12||12,e,2)}function V$(t,e){return Qe(1+Hc.count(Vi(t),t),e,3)}function bC(t,e){return Qe(t.getMilliseconds(),e,3)}function q$(t,e){return bC(t,e)+"000"}function j$(t,e){return Qe(t.getMonth()+1,e,2)}function K$(t,e){return Qe(t.getMinutes(),e,2)}function Z$(t,e){return Qe(t.getSeconds(),e,2)}function J$(t){var e=t.getDay();return e===0?7:e}function Q$(t,e){return Qe(Ud.count(Vi(t)-1,t),e,2)}function xC(t){var e=t.getDay();return e>=4||e===0?ao(t):ao.ceil(t)}function e7(t,e){return t=xC(t),Qe(ao.count(Vi(t),t)+(Vi(t).getDay()===4),e,2)}function t7(t){return t.getDay()}function n7(t,e){return Qe(ff.count(Vi(t)-1,t),e,2)}function r7(t,e){return Qe(t.getFullYear()%100,e,2)}function i7(t,e){return t=xC(t),Qe(t.getFullYear()%100,e,2)}function s7(t,e){return Qe(t.getFullYear()%1e4,e,4)}function a7(t,e){var n=t.getDay();return t=n>=4||n===0?ao(t):ao.ceil(t),Qe(t.getFullYear()%1e4,e,4)}function o7(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qe(e/60|0,"0",2)+Qe(e%60,"0",2)}function bx(t,e){return Qe(t.getUTCDate(),e,2)}function u7(t,e){return Qe(t.getUTCHours(),e,2)}function c7(t,e){return Qe(t.getUTCHours()%12||12,e,2)}function l7(t,e){return Qe(1+gy.count(ta(t),t),e,3)}function EC(t,e){return Qe(t.getUTCMilliseconds(),e,3)}function h7(t,e){return EC(t,e)+"000"}function f7(t,e){return Qe(t.getUTCMonth()+1,e,2)}function d7(t,e){return Qe(t.getUTCMinutes(),e,2)}function p7(t,e){return Qe(t.getUTCSeconds(),e,2)}function g7(t){var e=t.getUTCDay();return e===0?7:e}function m7(t,e){return Qe(vC.count(ta(t)-1,t),e,2)}function DC(t){var e=t.getUTCDay();return e>=4||e===0?oo(t):oo.ceil(t)}function y7(t,e){return t=DC(t),Qe(oo.count(ta(t),t)+(ta(t).getUTCDay()===4),e,2)}function v7(t){return t.getUTCDay()}function b7(t,e){return Qe(df.count(ta(t)-1,t),e,2)}function x7(t,e){return Qe(t.getUTCFullYear()%100,e,2)}function E7(t,e){return t=DC(t),Qe(t.getUTCFullYear()%100,e,2)}function D7(t,e){return Qe(t.getUTCFullYear()%1e4,e,4)}function w7(t,e){var n=t.getUTCDay();return t=n>=4||n===0?oo(t):oo.ceil(t),Qe(t.getUTCFullYear()%1e4,e,4)}function _7(){return"+0000"}function xx(){return"%"}function Ex(t){return+t}function Dx(t){return Math.floor(+t/1e3)}var Ca,wC;A7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function A7(t){return Ca=A$(t),wC=Ca.format,Ca.parse,Ca.utcFormat,Ca.utcParse,Ca}function C7(t){return new Date(t)}function T7(t){return t instanceof Date?+t:+new Date(+t)}function _C(t,e,n,r,i,s,a,o,u,c){var l=yC(),h=l.invert,d=l.domain,f=c(".%L"),p=c(":%S"),g=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),b=c("%b %d"),v=c("%B"),x=c("%Y");function w(k){return(u(k)<k?f:o(k)<k?p:a(k)<k?g:s(k)<k?m:r(k)<k?i(k)<k?y:b:n(k)<k?v:x)(k)}return l.invert=function(k){return new Date(h(k))},l.domain=function(k){return arguments.length?d(Array.from(k,T7)):d().map(C7)},l.ticks=function(k){var D=d();return t(D[0],D[D.length-1],k??10)},l.tickFormat=function(k,D){return D==null?w:c(D)},l.nice=function(k){var D=d();return(!k||typeof k.range!="function")&&(k=e(D[0],D[D.length-1],k??10)),k?d(c$(D,k)):l},l.copy=function(){return mC(l,_C(t,e,n,r,i,s,a,o,u,c))},l}function OK(){return Bd.apply(_C(w$,_$,Vi,my,Ud,Hc,py,dy,Ma,wC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function k7(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const PK=k7("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Ft(t){return function(){return t}}const wx=Math.abs,xn=Math.atan2,Fs=Math.cos,F7=Math.max,op=Math.min,ti=Math.sin,Ia=Math.sqrt,wn=1e-12,vc=Math.PI,pf=vc/2,hh=2*vc;function S7(t){return t>1?0:t<-1?vc:Math.acos(t)}function _x(t){return t>=1?pf:t<=-1?-pf:Math.asin(t)}function AC(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new p9(e)}function R7(t){return t.innerRadius}function N7(t){return t.outerRadius}function L7(t){return t.startAngle}function M7(t){return t.endAngle}function I7(t){return t&&t.padAngle}function O7(t,e,n,r,i,s,a,o){var u=n-t,c=r-e,l=a-i,h=o-s,d=h*u-l*c;if(!(d*d<wn))return d=(l*(e-s)-h*(t-i))/d,[t+d*u,e+d*c]}function Al(t,e,n,r,i,s,a){var o=t-n,u=e-r,c=(a?s:-s)/Ia(o*o+u*u),l=c*u,h=-c*o,d=t+l,f=e+h,p=n+l,g=r+h,m=(d+p)/2,y=(f+g)/2,b=p-d,v=g-f,x=b*b+v*v,w=i-s,k=d*g-p*f,D=(v<0?-1:1)*Ia(F7(0,w*w*x-k*k)),A=(k*v-b*D)/x,R=(-k*b-v*D)/x,N=(k*v+b*D)/x,L=(-k*b+v*D)/x,S=A-m,M=R-y,E=N-m,_=L-y;return S*S+M*M>E*E+_*_&&(A=N,R=L),{cx:A,cy:R,x01:-l,y01:-h,x11:A*(i/w-1),y11:R*(i/w-1)}}function $K(){var t=R7,e=N7,n=Ft(0),r=null,i=L7,s=M7,a=I7,o=null,u=AC(c);function c(){var l,h,d=+t.apply(this,arguments),f=+e.apply(this,arguments),p=i.apply(this,arguments)-pf,g=s.apply(this,arguments)-pf,m=wx(g-p),y=g>p;if(o||(o=l=u()),f<d&&(h=f,f=d,d=h),!(f>wn))o.moveTo(0,0);else if(m>hh-wn)o.moveTo(f*Fs(p),f*ti(p)),o.arc(0,0,f,p,g,!y),d>wn&&(o.moveTo(d*Fs(g),d*ti(g)),o.arc(0,0,d,g,p,y));else{var b=p,v=g,x=p,w=g,k=m,D=m,A=a.apply(this,arguments)/2,R=A>wn&&(r?+r.apply(this,arguments):Ia(d*d+f*f)),N=op(wx(f-d)/2,+n.apply(this,arguments)),L=N,S=N,M,E;if(R>wn){var _=_x(R/d*ti(A)),C=_x(R/f*ti(A));(k-=_*2)>wn?(_*=y?1:-1,x+=_,w-=_):(k=0,x=w=(p+g)/2),(D-=C*2)>wn?(C*=y?1:-1,b+=C,v-=C):(D=0,b=v=(p+g)/2)}var T=f*Fs(b),F=f*ti(b),I=d*Fs(w),P=d*ti(w);if(N>wn){var U=f*Fs(v),q=f*ti(v),Y=d*Fs(x),te=d*ti(x),V;if(m<vc)if(V=O7(T,F,Y,te,U,q,I,P)){var K=T-V[0],ae=F-V[1],se=U-V[0],B=q-V[1],W=1/ti(S7((K*se+ae*B)/(Ia(K*K+ae*ae)*Ia(se*se+B*B)))/2),Q=Ia(V[0]*V[0]+V[1]*V[1]);L=op(N,(d-Q)/(W-1)),S=op(N,(f-Q)/(W+1))}else L=S=0}D>wn?S>wn?(M=Al(Y,te,T,F,f,S,y),E=Al(U,q,I,P,f,S,y),o.moveTo(M.cx+M.x01,M.cy+M.y01),S<N?o.arc(M.cx,M.cy,S,xn(M.y01,M.x01),xn(E.y01,E.x01),!y):(o.arc(M.cx,M.cy,S,xn(M.y01,M.x01),xn(M.y11,M.x11),!y),o.arc(0,0,f,xn(M.cy+M.y11,M.cx+M.x11),xn(E.cy+E.y11,E.cx+E.x11),!y),o.arc(E.cx,E.cy,S,xn(E.y11,E.x11),xn(E.y01,E.x01),!y))):(o.moveTo(T,F),o.arc(0,0,f,b,v,!y)):o.moveTo(T,F),!(d>wn)||!(k>wn)?o.lineTo(I,P):L>wn?(M=Al(I,P,U,q,d,-L,y),E=Al(T,F,Y,te,d,-L,y),o.lineTo(M.cx+M.x01,M.cy+M.y01),L<N?o.arc(M.cx,M.cy,L,xn(M.y01,M.x01),xn(E.y01,E.x01),!y):(o.arc(M.cx,M.cy,L,xn(M.y01,M.x01),xn(M.y11,M.x11),!y),o.arc(0,0,d,xn(M.cy+M.y11,M.cx+M.x11),xn(E.cy+E.y11,E.cx+E.x11),y),o.arc(E.cx,E.cy,L,xn(E.y11,E.x11),xn(E.y01,E.x01),!y))):o.arc(0,0,d,w,x,y)}if(o.closePath(),l)return o=null,l+""||null}return c.centroid=function(){var l=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-vc/2;return[Fs(h)*l,ti(h)*l]},c.innerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:Ft(+l),c):t},c.outerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:Ft(+l),c):e},c.cornerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:Ft(+l),c):n},c.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:Ft(+l),c):r},c.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Ft(+l),c):i},c.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Ft(+l),c):s},c.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:Ft(+l),c):a},c.context=function(l){return arguments.length?(o=l??null,c):o},c}function CC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function TC(t){this._context=t}TC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function P7(t){return new TC(t)}function $7(t){return t[0]}function B7(t){return t[1]}function BK(t,e){var n=Ft(!0),r=null,i=P7,s=null,a=AC(o);t=typeof t=="function"?t:t===void 0?$7:Ft(t),e=typeof e=="function"?e:e===void 0?B7:Ft(e);function o(u){var c,l=(u=CC(u)).length,h,d=!1,f;for(r==null&&(s=i(f=a())),c=0;c<=l;++c)!(c<l&&n(h=u[c],c,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(h,c,u),+e(h,c,u));if(f)return s=null,f+""||null}return o.x=function(u){return arguments.length?(t=typeof u=="function"?u:Ft(+u),o):t},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:Ft(+u),o):e},o.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Ft(!!u),o):n},o.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),o):i},o.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),o):r},o}function U7(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function G7(t){return t}function UK(){var t=G7,e=U7,n=null,r=Ft(0),i=Ft(hh),s=Ft(0);function a(o){var u,c=(o=CC(o)).length,l,h,d=0,f=new Array(c),p=new Array(c),g=+r.apply(this,arguments),m=Math.min(hh,Math.max(-hh,i.apply(this,arguments)-g)),y,b=Math.min(Math.abs(m)/c,s.apply(this,arguments)),v=b*(m<0?-1:1),x;for(u=0;u<c;++u)(x=p[f[u]=u]=+t(o[u],u,o))>0&&(d+=x);for(e!=null?f.sort(function(w,k){return e(p[w],p[k])}):n!=null&&f.sort(function(w,k){return n(o[w],o[k])}),u=0,h=d?(m-c*v)/d:0;u<c;++u,g=y)l=f[u],x=p[l],y=g+(x>0?x*h:0)+v,p[l]={data:o[l],index:u,value:x,startAngle:g,endAngle:y,padAngle:b};return p}return a.value=function(o){return arguments.length?(t=typeof o=="function"?o:Ft(+o),a):t},a.sortValues=function(o){return arguments.length?(e=o,n=null,a):e},a.sort=function(o){return arguments.length?(n=o,e=null,a):n},a.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:Ft(+o),a):r},a.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Ft(+o),a):i},a.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:Ft(+o),a):s},a}class kC{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function GK(t){return new kC(t,!0)}function HK(t){return new kC(t,!1)}function gs(){}function gf(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Gd(t){this._context=t}Gd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gf(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function WK(t){return new Gd(t)}function FC(t){this._context=t}FC.prototype={areaStart:gs,areaEnd:gs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:gf(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zK(t){return new FC(t)}function SC(t){this._context=t}SC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gf(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function YK(t){return new SC(t)}function RC(t,e){this._basis=new Gd(t),this._beta=e}RC.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,a=e[n]-i,o=-1,u;++o<=n;)u=o/n,this._basis.point(this._beta*t[o]+(1-this._beta)*(r+u*s),this._beta*e[o]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const XK=(function t(e){function n(r){return e===1?new Gd(r):new RC(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function mf(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function yy(t,e){this._context=t,this._k=(1-e)/6}yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:mf(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:mf(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const VK=(function t(e){function n(r){return new yy(r,e)}return n.tension=function(r){return t(+r)},n})(0);function vy(t,e){this._context=t,this._k=(1-e)/6}vy.prototype={areaStart:gs,areaEnd:gs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:mf(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const qK=(function t(e){function n(r){return new vy(r,e)}return n.tension=function(r){return t(+r)},n})(0);function by(t,e){this._context=t,this._k=(1-e)/6}by.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:mf(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const jK=(function t(e){function n(r){return new by(r,e)}return n.tension=function(r){return t(+r)},n})(0);function xy(t,e,n){var r=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>wn){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>wn){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,s,a,t._x2,t._y2)}function NC(t,e){this._context=t,this._alpha=e}NC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:xy(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const KK=(function t(e){function n(r){return e?new NC(r,e):new yy(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function LC(t,e){this._context=t,this._alpha=e}LC.prototype={areaStart:gs,areaEnd:gs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:xy(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ZK=(function t(e){function n(r){return e?new LC(r,e):new vy(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function MC(t,e){this._context=t,this._alpha=e}MC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xy(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const JK=(function t(e){function n(r){return e?new MC(r,e):new by(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function IC(t){this._context=t}IC.prototype={areaStart:gs,areaEnd:gs,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function QK(t){return new IC(t)}function Ax(t){return t<0?-1:1}function Cx(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(Ax(s)+Ax(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function Tx(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function up(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function yf(t){this._context=t}yf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:up(this,this._t0,Tx(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,up(this,Tx(this,n=Cx(this,t,e)),n);break;default:up(this,this._t0,n=Cx(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function OC(t){this._context=new PC(t)}(OC.prototype=Object.create(yf.prototype)).point=function(t,e){yf.prototype.point.call(this,e,t)};function PC(t){this._context=t}PC.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function eZ(t){return new yf(t)}function tZ(t){return new OC(t)}function $C(t){this._context=t}$C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=kx(t),i=kx(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function kx(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function nZ(t){return new $C(t)}function Hd(t,e){this._context=t,this._t=e}Hd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function rZ(t){return new Hd(t,.5)}function iZ(t){return new Hd(t,0)}function sZ(t){return new Hd(t,1)}function fu(t,e,n){this.k=t,this.x=e,this.y=n}fu.prototype={constructor:fu,scale:function(t){return t===1?this:new fu(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new fu(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};fu.prototype;var Vo={},Ut={},Fx;function H7(){return Fx||(Fx=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.BLANK_URL=Ut.relativeFirstCharacters=Ut.whitespaceEscapeCharsRegex=Ut.urlSchemeRegex=Ut.ctrlCharactersRegex=Ut.htmlCtrlEntityRegex=Ut.htmlEntitiesRegex=Ut.invalidProtocolRegex=void 0,Ut.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Ut.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Ut.htmlCtrlEntityRegex=/&(newline|tab);/gi,Ut.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Ut.urlSchemeRegex=/^.+(:|&colon;)/gim,Ut.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Ut.relativeFirstCharacters=[".","/"],Ut.BLANK_URL="about:blank"),Ut}var Sx;function W7(){if(Sx)return Vo;Sx=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.sanitizeUrl=void 0;var t=H7();function e(a){return t.relativeFirstCharacters.indexOf(a[0])>-1}function n(a){var o=a.replace(t.ctrlCharactersRegex,"");return o.replace(t.htmlEntitiesRegex,function(u,c){return String.fromCharCode(c)})}function r(a){return URL.canParse(a)}function i(a){try{return decodeURIComponent(a)}catch{return a}}function s(a){if(!a)return t.BLANK_URL;var o,u=i(a.trim());do u=n(u).replace(t.htmlCtrlEntityRegex,"").replace(t.ctrlCharactersRegex,"").replace(t.whitespaceEscapeCharsRegex,"").trim(),u=i(u),o=u.match(t.ctrlCharactersRegex)||u.match(t.htmlEntitiesRegex)||u.match(t.htmlCtrlEntityRegex)||u.match(t.whitespaceEscapeCharsRegex);while(o&&o.length>0);var c=u;if(!c)return t.BLANK_URL;if(e(c))return c;var l=c.trimStart(),h=l.match(t.urlSchemeRegex);if(!h)return c;var d=h[0].toLowerCase().trim();if(t.invalidProtocolRegex.test(d))return t.BLANK_URL;var f=l.replace(/\\/g,"/");if(d==="mailto:"||d.includes("://"))return f;if(d==="http:"||d==="https:"){if(!r(f))return t.BLANK_URL;var p=new URL(f);return p.protocol=p.protocol.toLowerCase(),p.hostname=p.hostname.toLowerCase(),p.toString()}return f}return Vo.sanitizeUrl=s,Vo}var aZ=W7();const z7=Object.freeze({left:0,top:0,width:16,height:16}),vf=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),BC=Object.freeze({...z7,...vf}),Y7=Object.freeze({...BC,body:"",hidden:!1}),X7=Object.freeze({width:null,height:null}),V7=Object.freeze({...X7,...vf}),oZ=(t,e,n,r="")=>{const i=t.split(":");if(t.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const o=i.pop(),u=i.pop(),c={provider:i.length>0?i[0]:r,prefix:u,name:o};return cp(c)?c:null}const s=i[0],a=s.split("-");if(a.length>1){const o={provider:r,prefix:a.shift(),name:a.join("-")};return cp(o)?o:null}if(n&&r===""){const o={provider:r,prefix:"",name:s};return cp(o,n)?o:null}return null},cp=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1;function q7(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}function Rx(t,e){const n=q7(t,e);for(const r in Y7)r in vf?r in t&&!(r in n)&&(n[r]=vf[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function j7(t,e){const n=t.icons,r=t.aliases||Object.create(null),i=Object.create(null);function s(a){if(n[a])return i[a]=[];if(!(a in i)){i[a]=null;const o=r[a]&&r[a].parent,u=o&&s(o);u&&(i[a]=[o].concat(u))}return i[a]}return(e||Object.keys(n).concat(Object.keys(r))).forEach(s),i}function Nx(t,e,n){const r=t.icons,i=t.aliases||Object.create(null);let s={};function a(o){s=Rx(r[o]||i[o],s)}return a(e),n.forEach(a),Rx(t,s)}function uZ(t,e){if(t.icons[e])return Nx(t,e,[]);const n=j7(t,[e])[e];return n?Nx(t,e,n):null}const K7=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Z7=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Lx(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const r=t.split(K7);if(r===null||!r.length)return t;const i=[];let s=r.shift(),a=Z7.test(s);for(;;){if(a){const o=parseFloat(s);isNaN(o)?i.push(s):i.push(Math.ceil(o*e*n)/n)}else i.push(s);if(s=r.shift(),s===void 0)return i.join("");a=!a}}function J7(t,e="defs"){let n="";const r=t.indexOf("<"+e);for(;r>=0;){const i=t.indexOf(">",r),s=t.indexOf("</"+e);if(i===-1||s===-1)break;const a=t.indexOf(">",s);if(a===-1)break;n+=t.slice(i+1,s).trim(),t=t.slice(0,r).trim()+t.slice(a+1)}return{defs:n,content:t}}function Q7(t,e){return t?"<defs>"+t+"</defs>"+e:e}function eB(t,e,n){const r=J7(t);return Q7(r.defs,e+r.content+n)}const tB=t=>t==="unset"||t==="undefined"||t==="none";function cZ(t,e){const n={...BC,...t},r={...V7,...e},i={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,r].forEach(g=>{const m=[],y=g.hFlip,b=g.vFlip;let v=g.rotate;y?b?v+=2:(m.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),m.push("scale(-1 1)"),i.top=i.left=0):b&&(m.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),m.push("scale(1 -1)"),i.top=i.left=0);let x;switch(v<0&&(v-=Math.floor(v/4)*4),v=v%4,v){case 1:x=i.height/2+i.top,m.unshift("rotate(90 "+x.toString()+" "+x.toString()+")");break;case 2:m.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:x=i.width/2+i.left,m.unshift("rotate(-90 "+x.toString()+" "+x.toString()+")");break}v%2===1&&(i.left!==i.top&&(x=i.left,i.left=i.top,i.top=x),i.width!==i.height&&(x=i.width,i.width=i.height,i.height=x)),m.length&&(s=eB(s,'<g transform="'+m.join(" ")+'">',"</g>"))});const a=r.width,o=r.height,u=i.width,c=i.height;let l,h;a===null?(h=o===null?"1em":o==="auto"?c:o,l=Lx(h,u/c)):(l=a==="auto"?u:a,h=o===null?Lx(l,c/u):o==="auto"?c:o);const d={},f=(g,m)=>{tB(m)||(d[g]=m.toString())};f("width",l),f("height",h);const p=[i.left,i.top,u,c];return d.viewBox=p.join(" "),{attributes:d,viewBox:p,body:s}}const nB=/\sid="(\S+)"/g,Mx=new Map;function rB(t){t=t.replace(/[0-9]+$/,"")||"a";const e=Mx.get(t)||0;return Mx.set(t,e+1),e?`${t}${e}`:t}function lZ(t){const e=[];let n;for(;n=nB.exec(t);)e.push(n[1]);if(!e.length)return t;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return e.forEach(i=>{const s=rB(i),a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+s+r+"$3")}),t=t.replace(new RegExp(r,"g"),""),t}function hZ(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)n+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function Ey(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var pa=Ey();function UC(t){pa=t}var ec={exec:()=>null};function et(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(i,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(On.caret,"$1"),n=n.replace(i,a),r},getRegex:()=>new RegExp(n,e)};return r}var iB=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),On={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},sB=/^(?:[ \t]*(?:\n|$))+/,aB=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,oB=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Wc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,uB=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Dy=/(?:[*+-]|\d{1,9}[.)])/,GC=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,HC=et(GC).replace(/bull/g,Dy).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),cB=et(GC).replace(/bull/g,Dy).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),wy=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,lB=/^[^\n]+/,_y=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,hB=et(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",_y).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),fB=et(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Dy).getRegex(),Wd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ay=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,dB=et("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ay).replace("tag",Wd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),WC=et(wy).replace("hr",Wc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wd).getRegex(),pB=et(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",WC).getRegex(),Cy={blockquote:pB,code:aB,def:hB,fences:oB,heading:uB,hr:Wc,html:dB,lheading:HC,list:fB,newline:sB,paragraph:WC,table:ec,text:lB},Ix=et("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Wc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wd).getRegex(),gB={...Cy,lheading:cB,table:Ix,paragraph:et(wy).replace("hr",Wc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ix).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wd).getRegex()},mB={...Cy,html:et(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ay).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ec,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:et(wy).replace("hr",Wc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",HC).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},yB=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,vB=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,zC=/^( {2,}|\\)\n(?!\s*$)/,bB=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,zd=/[\p{P}\p{S}]/u,Ty=/[\s\p{P}\p{S}]/u,YC=/[^\s\p{P}\p{S}]/u,xB=et(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ty).getRegex(),XC=/(?!~)[\p{P}\p{S}]/u,EB=/(?!~)[\s\p{P}\p{S}]/u,DB=/(?:[^\s\p{P}\p{S}]|~)/u,wB=et(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",iB?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),VC=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,_B=et(VC,"u").replace(/punct/g,zd).getRegex(),AB=et(VC,"u").replace(/punct/g,XC).getRegex(),qC="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",CB=et(qC,"gu").replace(/notPunctSpace/g,YC).replace(/punctSpace/g,Ty).replace(/punct/g,zd).getRegex(),TB=et(qC,"gu").replace(/notPunctSpace/g,DB).replace(/punctSpace/g,EB).replace(/punct/g,XC).getRegex(),kB=et("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,YC).replace(/punctSpace/g,Ty).replace(/punct/g,zd).getRegex(),FB=et(/\\(punct)/,"gu").replace(/punct/g,zd).getRegex(),SB=et(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),RB=et(Ay).replace("(?:-->|$)","-->").getRegex(),NB=et("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",RB).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),bf=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,LB=et(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",bf).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),jC=et(/^!?\[(label)\]\[(ref)\]/).replace("label",bf).replace("ref",_y).getRegex(),KC=et(/^!?\[(ref)\](?:\[\])?/).replace("ref",_y).getRegex(),MB=et("reflink|nolink(?!\\()","g").replace("reflink",jC).replace("nolink",KC).getRegex(),Ox=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,ky={_backpedal:ec,anyPunctuation:FB,autolink:SB,blockSkip:wB,br:zC,code:vB,del:ec,emStrongLDelim:_B,emStrongRDelimAst:CB,emStrongRDelimUnd:kB,escape:yB,link:LB,nolink:KC,punctuation:xB,reflink:jC,reflinkSearch:MB,tag:NB,text:bB,url:ec},IB={...ky,link:et(/^!?\[(label)\]\((.*?)\)/).replace("label",bf).getRegex(),reflink:et(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",bf).getRegex()},Vg={...ky,emStrongRDelimAst:TB,emStrongLDelim:AB,url:et(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Ox).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:et(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Ox).getRegex()},OB={...Vg,br:et(zC).replace("{2,}","*").getRegex(),text:et(Vg.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Cl={normal:Cy,gfm:gB,pedantic:mB},qo={normal:ky,gfm:Vg,breaks:OB,pedantic:IB},PB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Px=t=>PB[t];function ii(t,e){if(e){if(On.escapeTest.test(t))return t.replace(On.escapeReplace,Px)}else if(On.escapeTestNoEncode.test(t))return t.replace(On.escapeReplaceNoEncode,Px);return t}function $x(t){try{t=encodeURI(t).replace(On.percentDecode,"%")}catch{return null}return t}function Bx(t,e){var s;let n=t.replace(On.findPipe,(a,o,u)=>{let c=!1,l=o;for(;--l>=0&&u[l]==="\\";)c=!c;return c?"|":" |"}),r=n.split(On.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(On.slashPipe,"|");return r}function jo(t,e,n){let r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function $B(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function Ux(t,e,n,r,i){let s=e.href,a=e.title||null,o=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let u={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:a,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,u}function BB(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let a=s.match(n.other.beginningSpace);if(a===null)return s;let[o]=a;return o.length>=i.length?s.slice(i.length):s}).join(`
`)}var xf=class{constructor(e){be(this,"options");be(this,"rules");be(this,"lexer");this.options=e||pa}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:jo(r,`
`)}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let r=n[0],i=BB(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){let i=jo(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:jo(n[0],`
`)}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let r=jo(n[0],`
`).split(`
`),i="",s="",a=[];for(;r.length>0;){let o=!1,u=[],c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))u.push(r[c]),o=!0;else if(!o)u.push(r[c]);else break;r=r.slice(c);let l=u.join(`
`),h=l.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${l}`:l,s=s?`${s}
${h}`:h;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,a,!0),this.lexer.state.top=d,r.length===0)break;let f=a.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){let p=f,g=p.raw+`
`+r.join(`
`),m=this.blockquote(g);a[a.length-1]=m,i=i.substring(0,i.length-p.raw.length)+m.raw,s=s.substring(0,s.length-p.text.length)+m.text;break}else if((f==null?void 0:f.type)==="list"){let p=f,g=p.raw+`
`+r.join(`
`),m=this.list(g);a[a.length-1]=m,i=i.substring(0,i.length-f.raw.length)+m.raw,s=s.substring(0,s.length-p.raw.length)+m.raw,r=g.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:s}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let a=this.rules.other.listItemRegex(r),o=!1;for(;e;){let c=!1,l="",h="";if(!(n=a.exec(e))||this.rules.block.hr.test(e))break;l=n[0],e=e.substring(l.length);let d=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),f=e.split(`
`,1)[0],p=!d.trim(),g=0;if(this.options.pedantic?(g=2,h=d.trimStart()):p?g=n[1].length+1:(g=n[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,h=d.slice(g),g+=n[1].length),p&&this.rules.other.blankLine.test(f)&&(l+=f+`
`,e=e.substring(f.length+1),c=!0),!c){let b=this.rules.other.nextBulletRegex(g),v=this.rules.other.hrRegex(g),x=this.rules.other.fencesBeginRegex(g),w=this.rules.other.headingBeginRegex(g),k=this.rules.other.htmlBeginRegex(g);for(;e;){let D=e.split(`
`,1)[0],A;if(f=D,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),A=f):A=f.replace(this.rules.other.tabCharGlobal,"    "),x.test(f)||w.test(f)||k.test(f)||b.test(f)||v.test(f))break;if(A.search(this.rules.other.nonSpaceChar)>=g||!f.trim())h+=`
`+A.slice(g);else{if(p||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||x.test(d)||w.test(d)||v.test(d))break;h+=`
`+f}!p&&!f.trim()&&(p=!0),l+=D+`
`,e=e.substring(D.length+1),d=A.slice(g)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(l)&&(o=!0));let m=null,y;this.options.gfm&&(m=this.rules.other.listIsTask.exec(h),m&&(y=m[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:l,task:!!m,checked:y,loose:!1,text:h,tokens:[]}),s.raw+=l}let u=s.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){let l=s.items[c].tokens.filter(d=>d.type==="space"),h=l.length>0&&l.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=h}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(e){let n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){let n=this.rules.block.def.exec(e);if(n){let r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:s}}}table(e){var o;let n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=Bx(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(o=n[3])!=null&&o.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let u of i)this.rules.other.tableAlignRight.test(u)?a.align.push("right"):this.rules.other.tableAlignCenter.test(u)?a.align.push("center"):this.rules.other.tableAlignLeft.test(u)?a.align.push("left"):a.align.push(null);for(let u=0;u<r.length;u++)a.header.push({text:r[u],tokens:this.lexer.inline(r[u]),header:!0,align:a.align[u]});for(let u of s)a.rows.push(Bx(u,a.header.length).map((c,l)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:a.align[l]})));return a}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let a=jo(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{let a=$B(n[2],"()");if(a===-2)return;if(a>-1){let o=(n[0].indexOf("!")===0?5:4)+n[1].length+a;n[2]=n[2].substring(0,a),n[0]=n[0].substring(0,o).trim(),n[3]=""}}let i=n[2],s="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(i);a&&(i=a[1],s=a[3])}else s=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),Ux(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=n[i.toLowerCase()];if(!s){let a=r[0].charAt(0);return{type:"text",raw:a,text:a}}return Ux(r,s,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let s=[...i[0]].length-1,a,o,u=s,c=0,l=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,n=n.slice(-1*e.length+s);(i=l.exec(n))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(o=[...a].length,i[3]||i[4]){u+=o;continue}else if((i[5]||i[6])&&s%3&&!((s+o)%3)){c+=o;continue}if(u-=o,u>0)continue;o=Math.min(o,o+u+c);let h=[...i[0]][0].length,d=e.slice(0,s+i.index+h+o);if(Math.min(s,o)%2){let p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}let f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){let n=this.rules.inline.autolink.exec(e);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let n;if(n=this.rules.inline.url.exec(e)){let i,s;if(n[2]==="@")i=n[0],s="mailto:"+i;else{let a;do a=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(a!==n[0]);i=n[0],n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){let n=this.rules.inline.text.exec(e);if(n){let r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}},Lr=class qg{constructor(e){be(this,"tokens");be(this,"options");be(this,"state");be(this,"tokenizer");be(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||pa,this.options.tokenizer=this.options.tokenizer||new xf,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:On,block:Cl.normal,inline:qo.normal};this.options.pedantic?(n.block=Cl.pedantic,n.inline=qo.pedantic):this.options.gfm&&(n.block=Cl.gfm,this.options.breaks?n.inline=qo.breaks:n.inline=qo.gfm),this.tokenizer.rules=n}static get rules(){return{block:Cl,inline:qo}}static lex(e,n){return new qg(n).lex(e)}static lexInline(e,n){return new qg(n).inlineTokens(e)}lex(e){e=e.replace(On.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var i,s,a;for(this.options.pedantic&&(e=e.replace(On.tabCharGlobal,"    ").replace(On.spaceLine,""));e;){let o;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(c=>(o=c.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);let c=n.at(-1);o.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+o.raw,c.text+=`
`+o.text,this.inlineQueue.at(-1).src=c.text):n.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+o.raw,c.text+=`
`+o.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),n.push(o);continue}let u=e;if((a=this.options.extensions)!=null&&a.startBlock){let c=1/0,l=e.slice(1),h;this.options.extensions.startBlock.forEach(d=>{h=d.call({lexer:this},l),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(u=e.substring(0,c+1))}if(this.state.top&&(o=this.tokenizer.paragraph(u))){let c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(o),r=u.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(o);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var u,c,l,h,d;let r=e,i=null;if(this.tokens.links){let f=Object.keys(this.tokens.links);if(f.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)f.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)s=i[2]?i[2].length:0,r=r.slice(0,i.index+s)+"["+"a".repeat(i[0].length-s-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=((c=(u=this.options.hooks)==null?void 0:u.emStrongMask)==null?void 0:c.call({lexer:this},r))??r;let a=!1,o="";for(;e;){a||(o=""),a=!1;let f;if((h=(l=this.options.extensions)==null?void 0:l.inline)!=null&&h.some(g=>(f=g.call({lexer:this},e,n))?(e=e.substring(f.raw.length),n.push(f),!0):!1))continue;if(f=this.tokenizer.escape(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.tag(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.link(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(f.raw.length);let g=n.at(-1);f.type==="text"&&(g==null?void 0:g.type)==="text"?(g.raw+=f.raw,g.text+=f.text):n.push(f);continue}if(f=this.tokenizer.emStrong(e,r,o)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.codespan(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.br(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.del(e)){e=e.substring(f.raw.length),n.push(f);continue}if(f=this.tokenizer.autolink(e)){e=e.substring(f.raw.length),n.push(f);continue}if(!this.state.inLink&&(f=this.tokenizer.url(e))){e=e.substring(f.raw.length),n.push(f);continue}let p=e;if((d=this.options.extensions)!=null&&d.startInline){let g=1/0,m=e.slice(1),y;this.options.extensions.startInline.forEach(b=>{y=b.call({lexer:this},m),typeof y=="number"&&y>=0&&(g=Math.min(g,y))}),g<1/0&&g>=0&&(p=e.substring(0,g+1))}if(f=this.tokenizer.inlineText(p)){e=e.substring(f.raw.length),f.raw.slice(-1)!=="_"&&(o=f.raw.slice(-1)),a=!0;let g=n.at(-1);(g==null?void 0:g.type)==="text"?(g.raw+=f.raw,g.text+=f.text):n.push(f);continue}if(e){let g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return n}},Ef=class{constructor(e){be(this,"options");be(this,"parser");this.options=e||pa}space(e){return""}code({text:e,lang:n,escaped:r}){var a;let i=(a=(n||"").match(On.notSpaceStart))==null?void 0:a[0],s=e.replace(On.endingNewline,"")+`
`;return i?'<pre><code class="language-'+ii(i)+'">'+(r?s:ii(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:ii(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){let n=e.ordered,r=e.start,i="";for(let o=0;o<e.items.length;o++){let u=e.items[o];i+=this.listitem(u)}let s=n?"ol":"ul",a=n&&r!==1?' start="'+r+'"':"";return"<"+s+a+`>
`+i+"</"+s+`>
`}listitem(e){var r;let n="";if(e.task){let i=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+ii(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):n+=i+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);n+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){let a=e.rows[s];r="";for(let o=0;o<a.length;o++)r+=this.tablecell(a[o]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${ii(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){let i=this.parser.parseInline(r),s=$x(e);if(s===null)return i;e=s;let a='<a href="'+e+'"';return n&&(a+=' title="'+ii(n)+'"'),a+=">"+i+"</a>",a}image({href:e,title:n,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let s=$x(e);if(s===null)return ii(r);e=s;let a=`<img src="${e}" alt="${r}"`;return n&&(a+=` title="${ii(n)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:ii(e.text)}},Fy=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Mr=class jg{constructor(e){be(this,"options");be(this,"renderer");be(this,"textRenderer");this.options=e||pa,this.options.renderer=this.options.renderer||new Ef,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Fy}static parse(e,n){return new jg(n).parse(e)}static parseInline(e,n){return new jg(n).parseInline(e)}parse(e,n=!0){var i,s;let r="";for(let a=0;a<e.length;a++){let o=e[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[o.type]){let c=o,l=this.options.extensions.renderers[c.type].call({parser:this},c);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){r+=l||"";continue}}let u=o;switch(u.type){case"space":{r+=this.renderer.space(u);continue}case"hr":{r+=this.renderer.hr(u);continue}case"heading":{r+=this.renderer.heading(u);continue}case"code":{r+=this.renderer.code(u);continue}case"table":{r+=this.renderer.table(u);continue}case"blockquote":{r+=this.renderer.blockquote(u);continue}case"list":{r+=this.renderer.list(u);continue}case"html":{r+=this.renderer.html(u);continue}case"def":{r+=this.renderer.def(u);continue}case"paragraph":{r+=this.renderer.paragraph(u);continue}case"text":{let c=u,l=this.renderer.text(c);for(;a+1<e.length&&e[a+1].type==="text";)c=e[++a],l+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{let c='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,n=this.renderer){var i,s;let r="";for(let a=0;a<e.length;a++){let o=e[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[o.type]){let c=this.options.extensions.renderers[o.type].call({parser:this},o);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=c||"";continue}}let u=o;switch(u.type){case"escape":{r+=n.text(u);break}case"html":{r+=n.html(u);break}case"link":{r+=n.link(u);break}case"image":{r+=n.image(u);break}case"strong":{r+=n.strong(u);break}case"em":{r+=n.em(u);break}case"codespan":{r+=n.codespan(u);break}case"br":{r+=n.br(u);break}case"del":{r+=n.del(u);break}case"text":{r+=n.text(u);break}default:{let c='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},Vl,du=(Vl=class{constructor(e){be(this,"options");be(this,"block");this.options=e||pa}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Lr.lex:Lr.lexInline}provideParser(){return this.block?Mr.parse:Mr.parseInline}},be(Vl,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),be(Vl,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),Vl),UB=class{constructor(...e){be(this,"defaults",Ey());be(this,"options",this.setOptions);be(this,"parse",this.parseMarkdown(!0));be(this,"parseInline",this.parseMarkdown(!1));be(this,"Parser",Mr);be(this,"Renderer",Ef);be(this,"TextRenderer",Fy);be(this,"Lexer",Lr);be(this,"Tokenizer",xf);be(this,"Hooks",du);this.use(...e)}walkTokens(e,n){var i,s;let r=[];for(let a of e)switch(r=r.concat(n.call(this,a)),a.type){case"table":{let o=a;for(let u of o.header)r=r.concat(this.walkTokens(u.tokens,n));for(let u of o.rows)for(let c of u)r=r.concat(this.walkTokens(c.tokens,n));break}case"list":{let o=a;r=r.concat(this.walkTokens(o.items,n));break}default:{let o=a;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(u=>{let c=o[u].flat(1/0);r=r.concat(this.walkTokens(c,n))}):o.tokens&&(r=r.concat(this.walkTokens(o.tokens,n)))}}return r}use(...e){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let a=n.renderers[s.name];a?n.renderers[s.name]=function(...o){let u=s.renderer.apply(this,o);return u===!1&&(u=a.apply(this,o)),u}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=n[s.level];a?a.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),i.extensions=n),r.renderer){let s=this.defaults.renderer||new Ef(this.defaults);for(let a in r.renderer){if(!(a in s))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let o=a,u=r.renderer[o],c=s[o];s[o]=(...l)=>{let h=u.apply(s,l);return h===!1&&(h=c.apply(s,l)),h||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new xf(this.defaults);for(let a in r.tokenizer){if(!(a in s))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let o=a,u=r.tokenizer[o],c=s[o];s[o]=(...l)=>{let h=u.apply(s,l);return h===!1&&(h=c.apply(s,l)),h}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new du;for(let a in r.hooks){if(!(a in s))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let o=a,u=r.hooks[o],c=s[o];du.passThroughHooks.has(a)?s[o]=l=>{if(this.defaults.async&&du.passThroughHooksRespectAsync.has(a))return(async()=>{let d=await u.call(s,l);return c.call(s,d)})();let h=u.call(s,l);return c.call(s,h)}:s[o]=(...l)=>{if(this.defaults.async)return(async()=>{let d=await u.apply(s,l);return d===!1&&(d=await c.apply(s,l)),d})();let h=u.apply(s,l);return h===!1&&(h=c.apply(s,l)),h}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,a=r.walkTokens;i.walkTokens=function(o){let u=[];return u.push(a.call(this,o)),s&&(u=u.concat(s.call(this,o))),u}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return Lr.lex(e,n??this.defaults)}parser(e,n){return Mr.parse(e,n??this.defaults)}parseMarkdown(e){return(n,r)=>{let i={...r},s={...this.defaults,...i},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=e),s.async)return(async()=>{let o=s.hooks?await s.hooks.preprocess(n):n,u=await(s.hooks?await s.hooks.provideLexer():e?Lr.lex:Lr.lexInline)(o,s),c=s.hooks?await s.hooks.processAllTokens(u):u;s.walkTokens&&await Promise.all(this.walkTokens(c,s.walkTokens));let l=await(s.hooks?await s.hooks.provideParser():e?Mr.parse:Mr.parseInline)(c,s);return s.hooks?await s.hooks.postprocess(l):l})().catch(a);try{s.hooks&&(n=s.hooks.preprocess(n));let o=(s.hooks?s.hooks.provideLexer():e?Lr.lex:Lr.lexInline)(n,s);s.hooks&&(o=s.hooks.processAllTokens(o)),s.walkTokens&&this.walkTokens(o,s.walkTokens);let u=(s.hooks?s.hooks.provideParser():e?Mr.parse:Mr.parseInline)(o,s);return s.hooks&&(u=s.hooks.postprocess(u)),u}catch(o){return a(o)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+ii(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}},na=new UB;function ct(t,e){return na.parse(t,e)}ct.options=ct.setOptions=function(t){return na.setOptions(t),ct.defaults=na.defaults,UC(ct.defaults),ct};ct.getDefaults=Ey;ct.defaults=pa;ct.use=function(...t){return na.use(...t),ct.defaults=na.defaults,UC(ct.defaults),ct};ct.walkTokens=function(t,e){return na.walkTokens(t,e)};ct.parseInline=na.parseInline;ct.Parser=Mr;ct.parser=Mr.parse;ct.Renderer=Ef;ct.TextRenderer=Fy;ct.Lexer=Lr;ct.lexer=Lr.lex;ct.Tokenizer=xf;ct.Hooks=du;ct.parse=ct;ct.options;ct.setOptions;ct.use;ct.walkTokens;ct.parseInline;Mr.parse;Lr.lex;function yZ(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from(typeof t=="string"?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(o,u){var c=u.match(/\n([\t ]+|(?!\s).)/g);return c?o.concat(c.map(function(l){var h,d;return(d=(h=l.match(/[\t ]/g))===null||h===void 0?void 0:h.length)!==null&&d!==void 0?d:0})):o},[]);if(i.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(o){return o.replace(s,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return e.forEach(function(o,u){var c=a.match(/(?:^|\n)( *)$/),l=c?c[1]:"",h=o;typeof o=="string"&&o.includes(`
`)&&(h=String(o).split(`
`).map(function(d,f){return f===0?d:""+l+d}).join(`
`)),a+=h+r[u+1]}),a}function lp(t,e,n){if(t&&t.length){const[r,i]=e,s=Math.PI/180*n,a=Math.cos(s),o=Math.sin(s);for(const u of t){const[c,l]=u;u[0]=(c-r)*a-(l-i)*o+r,u[1]=(c-r)*o+(l-i)*a+i}}}function GB(t,e){return t[0]===e[0]&&t[1]===e[1]}function HB(t,e,n,r=1){const i=n,s=Math.max(e,.1),a=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,o=[0,0];if(i)for(const c of a)lp(c,o,i);const u=(function(c,l,h){const d=[];for(const b of c){const v=[...b];GB(v[0],v[v.length-1])||v.push([v[0][0],v[0][1]]),v.length>2&&d.push(v)}const f=[];l=Math.max(l,.1);const p=[];for(const b of d)for(let v=0;v<b.length-1;v++){const x=b[v],w=b[v+1];if(x[1]!==w[1]){const k=Math.min(x[1],w[1]);p.push({ymin:k,ymax:Math.max(x[1],w[1]),x:k===x[1]?x[0]:w[0],islope:(w[0]-x[0])/(w[1]-x[1])})}}if(p.sort(((b,v)=>b.ymin<v.ymin?-1:b.ymin>v.ymin?1:b.x<v.x?-1:b.x>v.x?1:b.ymax===v.ymax?0:(b.ymax-v.ymax)/Math.abs(b.ymax-v.ymax))),!p.length)return f;let g=[],m=p[0].ymin,y=0;for(;g.length||p.length;){if(p.length){let b=-1;for(let v=0;v<p.length&&!(p[v].ymin>m);v++)b=v;p.splice(0,b+1).forEach((v=>{g.push({s:m,edge:v})}))}if(g=g.filter((b=>!(b.edge.ymax<=m))),g.sort(((b,v)=>b.edge.x===v.edge.x?0:(b.edge.x-v.edge.x)/Math.abs(b.edge.x-v.edge.x))),(h!==1||y%l==0)&&g.length>1)for(let b=0;b<g.length;b+=2){const v=b+1;if(v>=g.length)break;const x=g[b].edge,w=g[v].edge;f.push([[Math.round(x.x),m],[Math.round(w.x),m]])}m+=h,g.forEach((b=>{b.edge.x=b.edge.x+h*b.edge.islope})),y++}return f})(a,s,r);if(i){for(const c of a)lp(c,o,-i);(function(c,l,h){const d=[];c.forEach((f=>d.push(...f))),lp(d,l,h)})(u,o,-i)}return u}function zc(t,e){var n;const r=e.hachureAngle+90;let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let s=1;return e.roughness>=1&&(((n=e.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),HB(t,i,r,s||1)}class Sy{constructor(e){this.helper=e}fillPolygons(e,n){return this._fillPolygons(e,n)}_fillPolygons(e,n){const r=zc(e,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(e,n){const r=[];for(const i of e)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function Yd(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}class WB extends Sy{fillPolygons(e,n){let r=n.hachureGap;r<0&&(r=4*n.strokeWidth),r=Math.max(r,.1);const i=zc(e,Object.assign({},n,{hachureGap:r})),s=Math.PI/180*n.hachureAngle,a=[],o=.5*r*Math.cos(s),u=.5*r*Math.sin(s);for(const[c,l]of i)Yd([c,l])&&a.push([[c[0]-o,c[1]+u],[...l]],[[c[0]+o,c[1]-u],[...l]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class zB extends Sy{fillPolygons(e,n){const r=this._fillPolygons(e,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(e,i);return r.ops=r.ops.concat(s.ops),r}}class YB{constructor(e){this.helper=e}fillPolygons(e,n){const r=zc(e,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(r,n)}dotsOnLines(e,n){const r=[];let i=n.hachureGap;i<0&&(i=4*n.strokeWidth),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const a=i/4;for(const o of e){const u=Yd(o),c=u/i,l=Math.ceil(c)-1,h=u-l*i,d=(o[0][0]+o[1][0])/2-i/4,f=Math.min(o[0][1],o[1][1]);for(let p=0;p<l;p++){const g=f+h+p*i,m=d-a+2*Math.random()*a,y=g-a+2*Math.random()*a,b=this.helper.ellipse(m,y,s,s,n);r.push(...b.ops)}}return{type:"fillSketch",ops:r}}}class XB{constructor(e){this.helper=e}fillPolygons(e,n){const r=zc(e,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(e,n){const r=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,s=[];return e.forEach((a=>{const o=Yd(a),u=Math.floor(o/(r+i)),c=(o+i-u*(r+i))/2;let l=a[0],h=a[1];l[0]>h[0]&&(l=a[1],h=a[0]);const d=Math.atan((h[1]-l[1])/(h[0]-l[0]));for(let f=0;f<u;f++){const p=f*(r+i),g=p+r,m=[l[0]+p*Math.cos(d)+c*Math.cos(d),l[1]+p*Math.sin(d)+c*Math.sin(d)],y=[l[0]+g*Math.cos(d)+c*Math.cos(d),l[1]+g*Math.sin(d)+c*Math.sin(d)];s.push(...this.helper.doubleLineOps(m[0],m[1],y[0],y[1],n))}})),s}}class VB{constructor(e){this.helper=e}fillPolygons(e,n){const r=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset,s=zc(e,n=Object.assign({},n,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(e,n,r){const i=[];return e.forEach((s=>{const a=Yd(s),o=Math.round(a/(2*n));let u=s[0],c=s[1];u[0]>c[0]&&(u=s[1],c=s[0]);const l=Math.atan((c[1]-u[1])/(c[0]-u[0]));for(let h=0;h<o;h++){const d=2*h*n,f=2*(h+1)*n,p=Math.sqrt(2*Math.pow(n,2)),g=[u[0]+d*Math.cos(l),u[1]+d*Math.sin(l)],m=[u[0]+f*Math.cos(l),u[1]+f*Math.sin(l)],y=[g[0]+p*Math.cos(l+Math.PI/4),g[1]+p*Math.sin(l+Math.PI/4)];i.push(...this.helper.doubleLineOps(g[0],g[1],y[0],y[1],r),...this.helper.doubleLineOps(y[0],y[1],m[0],m[1],r))}})),i}}const zn={};class qB{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const jB=0,hp=1,Gx=2,Tl={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function fp(t,e){return t.type===e}function Ry(t){const e=[],n=(function(a){const o=new Array;for(;a!=="";)if(a.match(/^([ \t\r\n,]+)/))a=a.substr(RegExp.$1.length);else if(a.match(/^([aAcChHlLmMqQsStTvVzZ])/))o[o.length]={type:jB,text:RegExp.$1},a=a.substr(RegExp.$1.length);else{if(!a.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];o[o.length]={type:hp,text:`${parseFloat(RegExp.$1)}`},a=a.substr(RegExp.$1.length)}return o[o.length]={type:Gx,text:""},o})(t);let r="BOD",i=0,s=n[i];for(;!fp(s,Gx);){let a=0;const o=[];if(r==="BOD"){if(s.text!=="M"&&s.text!=="m")return Ry("M0,0"+t);i++,a=Tl[s.text],r=s.text}else fp(s,hp)?a=Tl[r]:(i++,a=Tl[s.text],r=s.text);if(!(i+a<n.length))throw new Error("Path data ended short");for(let u=i;u<i+a;u++){const c=n[u];if(!fp(c,hp))throw new Error("Param not a number: "+r+","+c.text);o[o.length]=+c.text}if(typeof Tl[r]!="number")throw new Error("Bad segment: "+r);{const u={key:r,data:o};e.push(u),i+=a,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}}return e}function ZC(t){let e=0,n=0,r=0,i=0;const s=[];for(const{key:a,data:o}of t)switch(a){case"M":s.push({key:"M",data:[...o]}),[e,n]=o,[r,i]=o;break;case"m":e+=o[0],n+=o[1],s.push({key:"M",data:[e,n]}),r=e,i=n;break;case"L":s.push({key:"L",data:[...o]}),[e,n]=o;break;case"l":e+=o[0],n+=o[1],s.push({key:"L",data:[e,n]});break;case"C":s.push({key:"C",data:[...o]}),e=o[4],n=o[5];break;case"c":{const u=o.map(((c,l)=>l%2?c+n:c+e));s.push({key:"C",data:u}),e=u[4],n=u[5];break}case"Q":s.push({key:"Q",data:[...o]}),e=o[2],n=o[3];break;case"q":{const u=o.map(((c,l)=>l%2?c+n:c+e));s.push({key:"Q",data:u}),e=u[2],n=u[3];break}case"A":s.push({key:"A",data:[...o]}),e=o[5],n=o[6];break;case"a":e+=o[5],n+=o[6],s.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],e,n]});break;case"H":s.push({key:"H",data:[...o]}),e=o[0];break;case"h":e+=o[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...o]}),n=o[0];break;case"v":n+=o[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...o]}),e=o[2],n=o[3];break;case"s":{const u=o.map(((c,l)=>l%2?c+n:c+e));s.push({key:"S",data:u}),e=u[2],n=u[3];break}case"T":s.push({key:"T",data:[...o]}),e=o[0],n=o[1];break;case"t":e+=o[0],n+=o[1],s.push({key:"T",data:[e,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=r,n=i}return s}function JC(t){const e=[];let n="",r=0,i=0,s=0,a=0,o=0,u=0;for(const{key:c,data:l}of t){switch(c){case"M":e.push({key:"M",data:[...l]}),[r,i]=l,[s,a]=l;break;case"C":e.push({key:"C",data:[...l]}),r=l[4],i=l[5],o=l[2],u=l[3];break;case"L":e.push({key:"L",data:[...l]}),[r,i]=l;break;case"H":r=l[0],e.push({key:"L",data:[r,i]});break;case"V":i=l[0],e.push({key:"L",data:[r,i]});break;case"S":{let h=0,d=0;n==="C"||n==="S"?(h=r+(r-o),d=i+(i-u)):(h=r,d=i),e.push({key:"C",data:[h,d,...l]}),o=l[0],u=l[1],r=l[2],i=l[3];break}case"T":{const[h,d]=l;let f=0,p=0;n==="Q"||n==="T"?(f=r+(r-o),p=i+(i-u)):(f=r,p=i);const g=r+2*(f-r)/3,m=i+2*(p-i)/3,y=h+2*(f-h)/3,b=d+2*(p-d)/3;e.push({key:"C",data:[g,m,y,b,h,d]}),o=f,u=p,r=h,i=d;break}case"Q":{const[h,d,f,p]=l,g=r+2*(h-r)/3,m=i+2*(d-i)/3,y=f+2*(h-f)/3,b=p+2*(d-p)/3;e.push({key:"C",data:[g,m,y,b,f,p]}),o=h,u=d,r=f,i=p;break}case"A":{const h=Math.abs(l[0]),d=Math.abs(l[1]),f=l[2],p=l[3],g=l[4],m=l[5],y=l[6];h===0||d===0?(e.push({key:"C",data:[r,i,m,y,m,y]}),r=m,i=y):(r!==m||i!==y)&&(QC(r,i,m,y,h,d,f,p,g).forEach((function(b){e.push({key:"C",data:b})})),r=m,i=y);break}case"Z":e.push({key:"Z",data:[]}),r=s,i=a}n=c}return e}function Ko(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function QC(t,e,n,r,i,s,a,o,u,c){const l=(h=a,Math.PI*h/180);var h;let d=[],f=0,p=0,g=0,m=0;if(c)[f,p,g,m]=c;else{[t,e]=Ko(t,e,-l),[n,r]=Ko(n,r,-l);const M=(t-n)/2,E=(e-r)/2;let _=M*M/(i*i)+E*E/(s*s);_>1&&(_=Math.sqrt(_),i*=_,s*=_);const C=i*i,T=s*s,F=C*T-C*E*E-T*M*M,I=C*E*E+T*M*M,P=(o===u?-1:1)*Math.sqrt(Math.abs(F/I));g=P*i*E/s+(t+n)/2,m=P*-s*M/i+(e+r)/2,f=Math.asin(parseFloat(((e-m)/s).toFixed(9))),p=Math.asin(parseFloat(((r-m)/s).toFixed(9))),t<g&&(f=Math.PI-f),n<g&&(p=Math.PI-p),f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),u&&f>p&&(f-=2*Math.PI),!u&&p>f&&(p-=2*Math.PI)}let y=p-f;if(Math.abs(y)>120*Math.PI/180){const M=p,E=n,_=r;p=u&&p>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,d=QC(n=g+i*Math.cos(p),r=m+s*Math.sin(p),E,_,i,s,a,0,u,[p,M,g,m])}y=p-f;const b=Math.cos(f),v=Math.sin(f),x=Math.cos(p),w=Math.sin(p),k=Math.tan(y/4),D=4/3*i*k,A=4/3*s*k,R=[t,e],N=[t+D*v,e-A*b],L=[n+D*w,r-A*x],S=[n,r];if(N[0]=2*R[0]-N[0],N[1]=2*R[1]-N[1],c)return[N,L,S].concat(d);{d=[N,L,S].concat(d);const M=[];for(let E=0;E<d.length;E+=3){const _=Ko(d[E][0],d[E][1],l),C=Ko(d[E+1][0],d[E+1][1],l),T=Ko(d[E+2][0],d[E+2][1],l);M.push([_[0],_[1],C[0],C[1],T[0],T[1]])}return M}}const KB={randOffset:function(t,e){return Le(t,e)},randOffsetWithRange:function(t,e,n){return Df(t,e,n)},ellipse:function(t,e,n,r,i){const s=tT(n,r,i);return Kg(t,e,i,s).opset},doubleLineOps:function(t,e,n,r,i){return ms(t,e,n,r,i,!0)}};function eT(t,e,n,r,i){return{type:"path",ops:ms(t,e,n,r,i)}}function fh(t,e,n){const r=(t||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...ms(t[s][0],t[s][1],t[s+1][0],t[s+1][1],n));return e&&i.push(...ms(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:i}}return r===2?eT(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function ZB(t,e,n,r,i){return(function(s,a){return fh(s,!0,a)})([[t,e],[t+n,e],[t+n,e+r],[t,e+r]],i)}function Hx(t,e){if(t.length){const n=typeof t[0][0]=="number"?[t]:t,r=kl(n[0],1*(1+.2*e.roughness),e),i=e.disableMultiStroke?[]:kl(n[0],1.5*(1+.22*e.roughness),Yx(e));for(let s=1;s<n.length;s++){const a=n[s];if(a.length){const o=kl(a,1*(1+.2*e.roughness),e),u=e.disableMultiStroke?[]:kl(a,1.5*(1+.22*e.roughness),Yx(e));for(const c of o)c.op!=="move"&&r.push(c);for(const c of u)c.op!=="move"&&i.push(c)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function tT(t,e,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=2*Math.PI/i;let a=Math.abs(t/2),o=Math.abs(e/2);const u=1-n.curveFitting;return a+=Le(a*u,n),o+=Le(o*u,n),{increment:s,rx:a,ry:o}}function Kg(t,e,n,r){const[i,s]=Xx(r.increment,t,e,r.rx,r.ry,1,r.increment*Df(.1,Df(.4,1,n),n),n);let a=wf(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[o]=Xx(r.increment,t,e,r.rx,r.ry,1.5,0,n),u=wf(o,null,n);a=a.concat(u)}return{estimatedPoints:s,opset:{type:"path",ops:a}}}function Wx(t,e,n,r,i,s,a,o,u){const c=t,l=e;let h=Math.abs(n/2),d=Math.abs(r/2);h+=Le(.01*h,u),d+=Le(.01*d,u);let f=i,p=s;for(;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);const g=2*Math.PI/u.curveStepCount,m=Math.min(g/2,(p-f)/2),y=Vx(m,c,l,h,d,f,p,1,u);if(!u.disableMultiStroke){const b=Vx(m,c,l,h,d,f,p,1.5,u);y.push(...b)}return a&&(o?y.push(...ms(c,l,c+h*Math.cos(f),l+d*Math.sin(f),u),...ms(c,l,c+h*Math.cos(p),l+d*Math.sin(p),u)):y.push({op:"lineTo",data:[c,l]},{op:"lineTo",data:[c+h*Math.cos(f),l+d*Math.sin(f)]})),{type:"path",ops:y}}function zx(t,e){const n=JC(ZC(Ry(t))),r=[];let i=[0,0],s=[0,0];for(const{key:a,data:o}of n)switch(a){case"M":s=[o[0],o[1]],i=[o[0],o[1]];break;case"L":r.push(...ms(s[0],s[1],o[0],o[1],e)),s=[o[0],o[1]];break;case"C":{const[u,c,l,h,d,f]=o;r.push(...JB(u,c,l,h,d,f,s,e)),s=[d,f];break}case"Z":r.push(...ms(s[0],s[1],i[0],i[1],e)),s=[i[0],i[1]]}return{type:"path",ops:r}}function dp(t,e){const n=[];for(const r of t)if(r.length){const i=e.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+Le(i,e),r[0][1]+Le(i,e)]});for(let a=1;a<s;a++)n.push({op:"lineTo",data:[r[a][0]+Le(i,e),r[a][1]+Le(i,e)]})}}return{type:"fillPath",ops:n}}function Ta(t,e){return(function(n,r){let i=n.fillStyle||"hachure";if(!zn[i])switch(i){case"zigzag":zn[i]||(zn[i]=new WB(r));break;case"cross-hatch":zn[i]||(zn[i]=new zB(r));break;case"dots":zn[i]||(zn[i]=new YB(r));break;case"dashed":zn[i]||(zn[i]=new XB(r));break;case"zigzag-line":zn[i]||(zn[i]=new VB(r));break;default:i="hachure",zn[i]||(zn[i]=new Sy(r))}return zn[i]})(e,KB).fillPolygons(t,e)}function Yx(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function nT(t){return t.randomizer||(t.randomizer=new qB(t.seed||0)),t.randomizer.next()}function Df(t,e,n,r=1){return n.roughness*r*(nT(n)*(e-t)+t)}function Le(t,e,n=1){return Df(-t,t,e,n)}function ms(t,e,n,r,i,s=!1){const a=s?i.disableMultiStrokeFill:i.disableMultiStroke,o=Zg(t,e,n,r,i,!0,!1);if(a)return o;const u=Zg(t,e,n,r,i,!0,!0);return o.concat(u)}function Zg(t,e,n,r,i,s,a){const o=Math.pow(t-n,2)+Math.pow(e-r,2),u=Math.sqrt(o);let c=1;c=u<200?1:u>500?.4:-.0016668*u+1.233334;let l=i.maxRandomnessOffset||0;l*l*100>o&&(l=u/10);const h=l/2,d=.2+.2*nT(i);let f=i.bowing*i.maxRandomnessOffset*(r-e)/200,p=i.bowing*i.maxRandomnessOffset*(t-n)/200;f=Le(f,i,c),p=Le(p,i,c);const g=[],m=()=>Le(h,i,c),y=()=>Le(l,i,c),b=i.preserveVertices;return a?g.push({op:"move",data:[t+(b?0:m()),e+(b?0:m())]}):g.push({op:"move",data:[t+(b?0:Le(l,i,c)),e+(b?0:Le(l,i,c))]}),a?g.push({op:"bcurveTo",data:[f+t+(n-t)*d+m(),p+e+(r-e)*d+m(),f+t+2*(n-t)*d+m(),p+e+2*(r-e)*d+m(),n+(b?0:m()),r+(b?0:m())]}):g.push({op:"bcurveTo",data:[f+t+(n-t)*d+y(),p+e+(r-e)*d+y(),f+t+2*(n-t)*d+y(),p+e+2*(r-e)*d+y(),n+(b?0:y()),r+(b?0:y())]}),g}function kl(t,e,n){if(!t.length)return[];const r=[];r.push([t[0][0]+Le(e,n),t[0][1]+Le(e,n)]),r.push([t[0][0]+Le(e,n),t[0][1]+Le(e,n)]);for(let i=1;i<t.length;i++)r.push([t[i][0]+Le(e,n),t[i][1]+Le(e,n)]),i===t.length-1&&r.push([t[i][0]+Le(e,n),t[i][1]+Le(e,n)]);return wf(r,null,n)}function wf(t,e,n){const r=t.length,i=[];if(r>3){const s=[],a=1-n.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let o=1;o+2<r;o++){const u=t[o];s[0]=[u[0],u[1]],s[1]=[u[0]+(a*t[o+1][0]-a*t[o-1][0])/6,u[1]+(a*t[o+1][1]-a*t[o-1][1])/6],s[2]=[t[o+1][0]+(a*t[o][0]-a*t[o+2][0])/6,t[o+1][1]+(a*t[o][1]-a*t[o+2][1])/6],s[3]=[t[o+1][0],t[o+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):r===2&&i.push(...Zg(t[0][0],t[0][1],t[1][0],t[1][1],n,!0,!0));return i}function Xx(t,e,n,r,i,s,a,o){const u=[],c=[];if(o.roughness===0){t/=4,c.push([e+r*Math.cos(-t),n+i*Math.sin(-t)]);for(let l=0;l<=2*Math.PI;l+=t){const h=[e+r*Math.cos(l),n+i*Math.sin(l)];u.push(h),c.push(h)}c.push([e+r*Math.cos(0),n+i*Math.sin(0)]),c.push([e+r*Math.cos(t),n+i*Math.sin(t)])}else{const l=Le(.5,o)-Math.PI/2;c.push([Le(s,o)+e+.9*r*Math.cos(l-t),Le(s,o)+n+.9*i*Math.sin(l-t)]);const h=2*Math.PI+l-.01;for(let d=l;d<h;d+=t){const f=[Le(s,o)+e+r*Math.cos(d),Le(s,o)+n+i*Math.sin(d)];u.push(f),c.push(f)}c.push([Le(s,o)+e+r*Math.cos(l+2*Math.PI+.5*a),Le(s,o)+n+i*Math.sin(l+2*Math.PI+.5*a)]),c.push([Le(s,o)+e+.98*r*Math.cos(l+a),Le(s,o)+n+.98*i*Math.sin(l+a)]),c.push([Le(s,o)+e+.9*r*Math.cos(l+.5*a),Le(s,o)+n+.9*i*Math.sin(l+.5*a)])}return[c,u]}function Vx(t,e,n,r,i,s,a,o,u){const c=s+Le(.1,u),l=[];l.push([Le(o,u)+e+.9*r*Math.cos(c-t),Le(o,u)+n+.9*i*Math.sin(c-t)]);for(let h=c;h<=a;h+=t)l.push([Le(o,u)+e+r*Math.cos(h),Le(o,u)+n+i*Math.sin(h)]);return l.push([e+r*Math.cos(a),n+i*Math.sin(a)]),l.push([e+r*Math.cos(a),n+i*Math.sin(a)]),wf(l,null,u)}function JB(t,e,n,r,i,s,a,o){const u=[],c=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3];let l=[0,0];const h=o.disableMultiStroke?1:2,d=o.preserveVertices;for(let f=0;f<h;f++)f===0?u.push({op:"move",data:[a[0],a[1]]}):u.push({op:"move",data:[a[0]+(d?0:Le(c[0],o)),a[1]+(d?0:Le(c[0],o))]}),l=d?[i,s]:[i+Le(c[f],o),s+Le(c[f],o)],u.push({op:"bcurveTo",data:[t+Le(c[f],o),e+Le(c[f],o),n+Le(c[f],o),r+Le(c[f],o),l[0],l[1]]});return u}function Zo(t){return[...t]}function qx(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(Zo(t[0]),Zo(t[1]),Zo(t[2]),Zo(t[2]));else{const i=[];i.push(t[0],t[0]);for(let o=1;o<t.length;o++)i.push(t[o]),o===t.length-1&&i.push(t[o]);const s=[],a=1-e;r.push(Zo(i[0]));for(let o=1;o+2<i.length;o++){const u=i[o];s[0]=[u[0],u[1]],s[1]=[u[0]+(a*i[o+1][0]-a*i[o-1][0])/6,u[1]+(a*i[o+1][1]-a*i[o-1][1])/6],s[2]=[i[o+1][0]+(a*i[o][0]-a*i[o+2][0])/6,i[o+1][1]+(a*i[o][1]-a*i[o+2][1])/6],s[3]=[i[o+1][0],i[o+1][1]],r.push(s[1],s[2],s[3])}}return r}function dh(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function QB(t,e,n){const r=dh(e,n);if(r===0)return dh(t,e);let i=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return i=Math.max(0,Math.min(1,i)),dh(t,Ms(e,n,i))}function Ms(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function Jg(t,e,n,r){const i=r||[];if((function(o,u){const c=o[u+0],l=o[u+1],h=o[u+2],d=o[u+3];let f=3*l[0]-2*c[0]-d[0];f*=f;let p=3*l[1]-2*c[1]-d[1];p*=p;let g=3*h[0]-2*d[0]-c[0];g*=g;let m=3*h[1]-2*d[1]-c[1];return m*=m,f<g&&(f=g),p<m&&(p=m),f+p})(t,e)<n){const o=t[e+0];i.length?(s=i[i.length-1],a=o,Math.sqrt(dh(s,a))>1&&i.push(o)):i.push(o),i.push(t[e+3])}else{const u=t[e+0],c=t[e+1],l=t[e+2],h=t[e+3],d=Ms(u,c,.5),f=Ms(c,l,.5),p=Ms(l,h,.5),g=Ms(d,f,.5),m=Ms(f,p,.5),y=Ms(g,m,.5);Jg([u,d,g,y],0,n,i),Jg([y,m,p,h],0,n,i)}var s,a;return i}function eU(t,e){return _f(t,0,t.length,e)}function _f(t,e,n,r,i){const s=i||[],a=t[e],o=t[n-1];let u=0,c=1;for(let l=e+1;l<n-1;++l){const h=QB(t[l],a,o);h>u&&(u=h,c=l)}return Math.sqrt(u)>r?(_f(t,e,c+1,r,s),_f(t,c,n,r,s)):(s.length||s.push(a),s.push(o)),s}function pp(t,e=.15,n){const r=[],i=(t.length-1)/3;for(let s=0;s<i;s++)Jg(t,3*s,e,r);return n&&n>0?_f(r,0,r.length,n):r}const er="none";class Af{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,n,r){return{shape:e,sets:n||[],options:r||this.defaultOptions}}line(e,n,r,i,s){const a=this._o(s);return this._d("line",[eT(e,n,r,i,a)],a)}rectangle(e,n,r,i,s){const a=this._o(s),o=[],u=ZB(e,n,r,i,a);if(a.fill){const c=[[e,n],[e+r,n],[e+r,n+i],[e,n+i]];a.fillStyle==="solid"?o.push(dp([c],a)):o.push(Ta([c],a))}return a.stroke!==er&&o.push(u),this._d("rectangle",o,a)}ellipse(e,n,r,i,s){const a=this._o(s),o=[],u=tT(r,i,a),c=Kg(e,n,a,u);if(a.fill)if(a.fillStyle==="solid"){const l=Kg(e,n,a,u).opset;l.type="fillPath",o.push(l)}else o.push(Ta([c.estimatedPoints],a));return a.stroke!==er&&o.push(c.opset),this._d("ellipse",o,a)}circle(e,n,r,i){const s=this.ellipse(e,n,r,r,i);return s.shape="circle",s}linearPath(e,n){const r=this._o(n);return this._d("linearPath",[fh(e,!1,r)],r)}arc(e,n,r,i,s,a,o=!1,u){const c=this._o(u),l=[],h=Wx(e,n,r,i,s,a,o,!0,c);if(o&&c.fill)if(c.fillStyle==="solid"){const d=Object.assign({},c);d.disableMultiStroke=!0;const f=Wx(e,n,r,i,s,a,!0,!1,d);f.type="fillPath",l.push(f)}else l.push((function(d,f,p,g,m,y,b){const v=d,x=f;let w=Math.abs(p/2),k=Math.abs(g/2);w+=Le(.01*w,b),k+=Le(.01*k,b);let D=m,A=y;for(;D<0;)D+=2*Math.PI,A+=2*Math.PI;A-D>2*Math.PI&&(D=0,A=2*Math.PI);const R=(A-D)/b.curveStepCount,N=[];for(let L=D;L<=A;L+=R)N.push([v+w*Math.cos(L),x+k*Math.sin(L)]);return N.push([v+w*Math.cos(A),x+k*Math.sin(A)]),N.push([v,x]),Ta([N],b)})(e,n,r,i,s,a,c));return c.stroke!==er&&l.push(h),this._d("arc",l,c)}curve(e,n){const r=this._o(n),i=[],s=Hx(e,r);if(r.fill&&r.fill!==er)if(r.fillStyle==="solid"){const a=Hx(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(a.ops)})}else{const a=[],o=e;if(o.length){const u=typeof o[0][0]=="number"?[o]:o;for(const c of u)c.length<3?a.push(...c):c.length===3?a.push(...pp(qx([c[0],c[0],c[1],c[2]]),10,(1+r.roughness)/2)):a.push(...pp(qx(c),10,(1+r.roughness)/2))}a.length&&i.push(Ta([a],r))}return r.stroke!==er&&i.push(s),this._d("curve",i,r)}polygon(e,n){const r=this._o(n),i=[],s=fh(e,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(dp([e],r)):i.push(Ta([e],r))),r.stroke!==er&&i.push(s),this._d("polygon",i,r)}path(e,n){const r=this._o(n),i=[];if(!e)return this._d("path",i,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==er,a=r.stroke!==er,o=!!(r.simplification&&r.simplification<1),u=(function(l,h,d){const f=JC(ZC(Ry(l))),p=[];let g=[],m=[0,0],y=[];const b=()=>{y.length>=4&&g.push(...pp(y,h)),y=[]},v=()=>{b(),g.length&&(p.push(g),g=[])};for(const{key:w,data:k}of f)switch(w){case"M":v(),m=[k[0],k[1]],g.push(m);break;case"L":b(),g.push([k[0],k[1]]);break;case"C":if(!y.length){const D=g.length?g[g.length-1]:m;y.push([D[0],D[1]])}y.push([k[0],k[1]]),y.push([k[2],k[3]]),y.push([k[4],k[5]]);break;case"Z":b(),g.push([m[0],m[1]])}if(v(),!d)return p;const x=[];for(const w of p){const k=eU(w,d);k.length&&x.push(k)}return x})(e,1,o?4-4*(r.simplification||1):(1+r.roughness)/2),c=zx(e,r);if(s)if(r.fillStyle==="solid")if(u.length===1){const l=zx(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(l.ops)})}else i.push(dp(u,r));else i.push(Ta(u,r));return a&&(o?u.forEach((l=>{i.push(fh(l,!1,r))})):i.push(c)),this._d("path",i,r)}opsToPath(e,n){let r="";for(const i of e.ops){const s=typeof n=="number"&&n>=0?i.data.map((a=>+a.toFixed(n))):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `}}return r.trim()}toPaths(e){const n=e.sets||[],r=e.options||this.defaultOptions,i=[];for(const s of n){let a=null;switch(s.type){case"path":a={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:er};break;case"fillPath":a={d:this.opsToPath(s),stroke:er,strokeWidth:0,fill:r.fill||er};break;case"fillSketch":a=this.fillSketch(s,r)}a&&i.push(a)}return i}fillSketch(e,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(e),stroke:n.fill||er,strokeWidth:r,fill:er}}_mergedShape(e){return e.filter(((n,r)=>r===0||n.op!=="move"))}}class tU{constructor(e,n){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Af(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const a of n)switch(a.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,a,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const o=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,a,s,o),i.restore();break}case"fillSketch":this.fillSketch(i,a,r)}}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=i,this._drawToContext(e,n,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,n,r,i="nonzero"){e.beginPath();for(const s of n.ops){const a=typeof r=="number"&&r>=0?s.data.map((o=>+o.toFixed(r))):s.data;switch(s.op){case"move":e.moveTo(a[0],a[1]);break;case"bcurveTo":e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"lineTo":e.lineTo(a[0],a[1])}}n.type==="fillPath"?e.fill(i):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,n,r,i,s){const a=this.gen.line(e,n,r,i,s);return this.draw(a),a}rectangle(e,n,r,i,s){const a=this.gen.rectangle(e,n,r,i,s);return this.draw(a),a}ellipse(e,n,r,i,s){const a=this.gen.ellipse(e,n,r,i,s);return this.draw(a),a}circle(e,n,r,i){const s=this.gen.circle(e,n,r,i);return this.draw(s),s}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r),r}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r),r}arc(e,n,r,i,s,a,o=!1,u){const c=this.gen.arc(e,n,r,i,s,a,o,u);return this.draw(c),c}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r),r}path(e,n){const r=this.gen.path(e,n);return this.draw(r),r}}const Fl="http://www.w3.org/2000/svg";class nU{constructor(e,n){this.svg=e,this.gen=new Af(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(Fl,"g"),a=e.options.fixedDecimalPlaceDigits;for(const o of n){let u=null;switch(o.type){case"path":u=i.createElementNS(Fl,"path"),u.setAttribute("d",this.opsToPath(o,a)),u.setAttribute("stroke",r.stroke),u.setAttribute("stroke-width",r.strokeWidth+""),u.setAttribute("fill","none"),r.strokeLineDash&&u.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&u.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":u=i.createElementNS(Fl,"path"),u.setAttribute("d",this.opsToPath(o,a)),u.setAttribute("stroke","none"),u.setAttribute("stroke-width","0"),u.setAttribute("fill",r.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||u.setAttribute("fill-rule","evenodd");break;case"fillSketch":u=this.fillSketch(i,o,r)}u&&s.appendChild(u)}return s}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=e.createElementNS(Fl,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,n){return this.gen.opsToPath(e,n)}line(e,n,r,i,s){const a=this.gen.line(e,n,r,i,s);return this.draw(a)}rectangle(e,n,r,i,s){const a=this.gen.rectangle(e,n,r,i,s);return this.draw(a)}ellipse(e,n,r,i,s){const a=this.gen.ellipse(e,n,r,i,s);return this.draw(a)}circle(e,n,r,i){const s=this.gen.circle(e,n,r,i);return this.draw(s)}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r)}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r)}arc(e,n,r,i,s,a,o=!1,u){const c=this.gen.arc(e,n,r,i,s,a,o,u);return this.draw(c)}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r)}path(e,n){const r=this.gen.path(e,n);return this.draw(r)}}var vZ={canvas:(t,e)=>new tU(t,e),svg:(t,e)=>new nU(t,e),generator:t=>new Af(t),newSeed:()=>Af.newSeed()},rT="comm",iT="rule",sT="decl",rU="@import",iU="@namespace",sU="@keyframes",aU="@layer",aT=Math.abs,Ny=String.fromCharCode;function oT(t){return t.trim()}function ph(t,e,n){return t.replace(e,n)}function oU(t,e,n){return t.indexOf(e,n)}function Ya(t,e){return t.charCodeAt(e)|0}function uo(t,e,n){return t.slice(e,n)}function oi(t){return t.length}function uU(t){return t.length}function Sl(t,e){return e.push(t),t}var Xd=1,co=1,uT=0,wr=0,Pt=0,Ao="";function Ly(t,e,n,r,i,s,a,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Xd,column:co,length:a,return:"",siblings:o}}function cU(){return Pt}function lU(){return Pt=wr>0?Ya(Ao,--wr):0,co--,Pt===10&&(co=1,Xd--),Pt}function Ur(){return Pt=wr<uT?Ya(Ao,wr++):0,co++,Pt===10&&(co=1,Xd++),Pt}function os(){return Ya(Ao,wr)}function gh(){return wr}function Vd(t,e){return uo(Ao,t,e)}function bc(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function hU(t){return Xd=co=1,uT=oi(Ao=t),wr=0,[]}function fU(t){return Ao="",t}function gp(t){return oT(Vd(wr-1,Qg(t===91?t+2:t===40?t+1:t)))}function dU(t){for(;(Pt=os())&&Pt<33;)Ur();return bc(t)>2||bc(Pt)>3?"":" "}function pU(t,e){for(;--e&&Ur()&&!(Pt<48||Pt>102||Pt>57&&Pt<65||Pt>70&&Pt<97););return Vd(t,gh()+(e<6&&os()==32&&Ur()==32))}function Qg(t){for(;Ur();)switch(Pt){case t:return wr;case 34:case 39:t!==34&&t!==39&&Qg(Pt);break;case 40:t===41&&Qg(t);break;case 92:Ur();break}return wr}function gU(t,e){for(;Ur()&&t+Pt!==57;)if(t+Pt===84&&os()===47)break;return"/*"+Vd(e,wr-1)+"*"+Ny(t===47?t:Ur())}function mU(t){for(;!bc(os());)Ur();return Vd(t,wr)}function bZ(t){return fU(mh("",null,null,null,[""],t=hU(t),0,[0],t))}function mh(t,e,n,r,i,s,a,o,u){for(var c=0,l=0,h=a,d=0,f=0,p=0,g=1,m=1,y=1,b=0,v="",x=i,w=s,k=r,D=v;m;)switch(p=b,b=Ur()){case 40:if(p!=108&&Ya(D,h-1)==58){oU(D+=ph(gp(b),"&","&\f"),"&\f",aT(c?o[c-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:D+=gp(b);break;case 9:case 10:case 13:case 32:D+=dU(p);break;case 92:D+=pU(gh()-1,7);continue;case 47:switch(os()){case 42:case 47:Sl(yU(gU(Ur(),gh()),e,n,u),u),(bc(p||1)==5||bc(os()||1)==5)&&oi(D)&&uo(D,-1,void 0)!==" "&&(D+=" ");break;default:D+="/"}break;case 123*g:o[c++]=oi(D)*y;case 125*g:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+l:y==-1&&(D=ph(D,/\f/g,"")),f>0&&(oi(D)-h||g===0&&p===47)&&Sl(f>32?Kx(D+";",r,n,h-1,u):Kx(ph(D," ","")+";",r,n,h-2,u),u);break;case 59:D+=";";default:if(Sl(k=jx(D,e,n,c,l,i,o,v,x=[],w=[],h,s),s),b===123)if(l===0)mh(D,e,k,k,x,s,h,o,w);else{switch(d){case 99:if(Ya(D,3)===110)break;case 108:if(Ya(D,2)===97)break;default:l=0;case 100:case 109:case 115:}l?mh(t,k,k,r&&Sl(jx(t,k,k,0,0,i,o,v,i,x=[],h,w),w),i,w,h,o,r?x:w):mh(D,k,k,k,[""],w,0,o,w)}}c=l=f=0,g=y=1,v=D="",h=a;break;case 58:h=1+oi(D),f=p;default:if(g<1){if(b==123)--g;else if(b==125&&g++==0&&lU()==125)continue}switch(D+=Ny(b),b*g){case 38:y=l>0?1:(D+="\f",-1);break;case 44:o[c++]=(oi(D)-1)*y,y=1;break;case 64:os()===45&&(D+=gp(Ur())),d=os(),l=h=oi(v=D+=mU(gh())),b++;break;case 45:p===45&&oi(D)==2&&(g=0)}}return s}function jx(t,e,n,r,i,s,a,o,u,c,l,h){for(var d=i-1,f=i===0?s:[""],p=uU(f),g=0,m=0,y=0;g<r;++g)for(var b=0,v=uo(t,d+1,d=aT(m=a[g])),x=t;b<p;++b)(x=oT(m>0?f[b]+" "+v:ph(v,/&\f/g,f[b])))&&(u[y++]=x);return Ly(t,e,n,i===0?iT:o,u,c,l,h)}function yU(t,e,n,r){return Ly(t,e,n,rT,Ny(cU()),uo(t,2,-2),0,r)}function Kx(t,e,n,r,i){return Ly(t,e,n,sT,uo(t,0,r),uo(t,r+1,-1),r,i)}function Zx(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function xZ(t,e,n,r){switch(t.type){case aU:if(t.children.length)break;case rU:case iU:case sT:return t.return=t.return||t.value;case rT:return"";case sU:return t.return=t.value+"{"+Zx(t.children,r)+"}";case iT:if(!oi(t.value=t.props.join(",")))return""}return oi(n=Zx(t.children,r))?t.return=t.value+"{"+n+"}":""}const cT=["top","right","bottom","left"],Jx=["start","end"],Qx=cT.reduce((t,e)=>t.concat(e,e+"-"+Jx[0],e+"-"+Jx[1]),[]),bi=Math.min,Mn=Math.max,Cf=Math.round,vi=t=>({x:t,y:t}),vU={left:"right",right:"left",bottom:"top",top:"bottom"},bU={start:"end",end:"start"};function em(t,e,n){return Mn(t,bi(e,n))}function Ki(t,e){return typeof t=="function"?t(e):t}function _r(t){return t.split("-")[0]}function Gr(t){return t.split("-")[1]}function lT(t){return t==="x"?"y":"x"}function My(t){return t==="y"?"height":"width"}const xU=new Set(["top","bottom"]);function di(t){return xU.has(_r(t))?"y":"x"}function Iy(t){return lT(di(t))}function hT(t,e,n){n===void 0&&(n=!1);const r=Gr(t),i=Iy(t),s=My(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=kf(a)),[a,kf(a)]}function EU(t){const e=kf(t);return[Tf(t),e,Tf(e)]}function Tf(t){return t.replace(/start|end/g,e=>bU[e])}const eE=["left","right"],tE=["right","left"],DU=["top","bottom"],wU=["bottom","top"];function _U(t,e,n){switch(t){case"top":case"bottom":return n?e?tE:eE:e?eE:tE;case"left":case"right":return e?DU:wU;default:return[]}}function AU(t,e,n,r){const i=Gr(t);let s=_U(_r(t),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(Tf)))),s}function kf(t){return t.replace(/left|right|bottom|top/g,e=>vU[e])}function CU(t){return{top:0,right:0,bottom:0,left:0,...t}}function Oy(t){return typeof t!="number"?CU(t):{top:t,right:t,bottom:t,left:t}}function lo(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function nE(t,e,n){let{reference:r,floating:i}=t;const s=di(e),a=Iy(e),o=My(a),u=_r(e),c=s==="y",l=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,d=r[o]/2-i[o]/2;let f;switch(u){case"top":f={x:l,y:r.y-i.height};break;case"bottom":f={x:l,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-i.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Gr(e)){case"start":f[a]-=d*(n&&c?-1:1);break;case"end":f[a]+=d*(n&&c?-1:1);break}return f}const TU=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:l,y:h}=nE(c,r,u),d=r,f={},p=0;for(let g=0;g<o.length;g++){const{name:m,fn:y}=o[g],{x:b,y:v,data:x,reset:w}=await y({x:l,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:c,platform:a,elements:{reference:t,floating:e}});l=b??l,h=v??h,f={...f,[m]:{...f[m],...x}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(c=w.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):w.rects),{x:l,y:h}=nE(c,d,u)),g=-1)}return{x:l,y:h,placement:d,strategy:i,middlewareData:f}};async function ho(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:u}=t,{boundary:c="clippingAncestors",rootBoundary:l="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=Ki(e,t),p=Oy(f),m=o[d?h==="floating"?"reference":"floating":h],y=lo(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:l,strategy:u})),b=h==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),x=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},w=lo(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:v,strategy:u}):b);return{top:(y.top-w.top+p.top)/x.y,bottom:(w.bottom-y.bottom+p.bottom)/x.y,left:(y.left-w.left+p.left)/x.x,right:(w.right-y.right+p.right)/x.x}}const kU=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:u}=e,{element:c,padding:l=0}=Ki(t,e)||{};if(c==null)return{};const h=Oy(l),d={x:n,y:r},f=Iy(i),p=My(f),g=await a.getDimensions(c),m=f==="y",y=m?"top":"left",b=m?"bottom":"right",v=m?"clientHeight":"clientWidth",x=s.reference[p]+s.reference[f]-d[f]-s.floating[p],w=d[f]-s.reference[f],k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let D=k?k[v]:0;(!D||!await(a.isElement==null?void 0:a.isElement(k)))&&(D=o.floating[v]||s.floating[p]);const A=x/2-w/2,R=D/2-g[p]/2-1,N=bi(h[y],R),L=bi(h[b],R),S=N,M=D-g[p]-L,E=D/2-g[p]/2+A,_=em(S,E,M),C=!u.arrow&&Gr(i)!=null&&E!==_&&s.reference[p]/2-(E<S?N:L)-g[p]/2<0,T=C?E<S?E-S:E-M:0;return{[f]:d[f]+T,data:{[f]:_,centerOffset:E-_-T,...C&&{alignmentOffset:T}},reset:C}}});function FU(t,e,n){return(t?[...n.filter(i=>Gr(i)===t),...n.filter(i=>Gr(i)!==t)]:n.filter(i=>_r(i)===i)).filter(i=>t?Gr(i)===t||(e?Tf(i)!==i:!1):!0)}const SU=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:s,middlewareData:a,placement:o,platform:u,elements:c}=e,{crossAxis:l=!1,alignment:h,allowedPlacements:d=Qx,autoAlignment:f=!0,...p}=Ki(t,e),g=h!==void 0||d===Qx?FU(h||null,f,d):d,m=await ho(e,p),y=((n=a.autoPlacement)==null?void 0:n.index)||0,b=g[y];if(b==null)return{};const v=hT(b,s,await(u.isRTL==null?void 0:u.isRTL(c.floating)));if(o!==b)return{reset:{placement:g[0]}};const x=[m[_r(b)],m[v[0]],m[v[1]]],w=[...((r=a.autoPlacement)==null?void 0:r.overflows)||[],{placement:b,overflows:x}],k=g[y+1];if(k)return{data:{index:y+1,overflows:w},reset:{placement:k}};const D=w.map(N=>{const L=Gr(N.placement);return[N.placement,L&&l?N.overflows.slice(0,2).reduce((S,M)=>S+M,0):N.overflows[0],N.overflows]}).sort((N,L)=>N[1]-L[1]),R=((i=D.filter(N=>N[2].slice(0,Gr(N[0])?2:3).every(L=>L<=0))[0])==null?void 0:i[0])||D[0][0];return R!==o?{data:{index:y+1,overflows:w},reset:{placement:R}}:{}}}},RU=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:u,elements:c}=e,{mainAxis:l=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=Ki(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=_r(i),b=di(o),v=_r(o)===o,x=await(u.isRTL==null?void 0:u.isRTL(c.floating)),w=d||(v||!g?[kf(o)]:EU(o)),k=p!=="none";!d&&k&&w.push(...AU(o,g,p,x));const D=[o,...w],A=await ho(e,m),R=[];let N=((r=s.flip)==null?void 0:r.overflows)||[];if(l&&R.push(A[y]),h){const E=hT(i,a,x);R.push(A[E[0]],A[E[1]])}if(N=[...N,{placement:i,overflows:R}],!R.every(E=>E<=0)){var L,S;const E=(((L=s.flip)==null?void 0:L.index)||0)+1,_=D[E];if(_&&(!(h==="alignment"?b!==di(_):!1)||N.every(F=>di(F.placement)===b?F.overflows[0]>0:!0)))return{data:{index:E,overflows:N},reset:{placement:_}};let C=(S=N.filter(T=>T.overflows[0]<=0).sort((T,F)=>T.overflows[1]-F.overflows[1])[0])==null?void 0:S.placement;if(!C)switch(f){case"bestFit":{var M;const T=(M=N.filter(F=>{if(k){const I=di(F.placement);return I===b||I==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(I=>I>0).reduce((I,P)=>I+P,0)]).sort((F,I)=>F[1]-I[1])[0])==null?void 0:M[0];T&&(C=T);break}case"initialPlacement":C=o;break}if(i!==C)return{reset:{placement:C}}}return{}}}};function rE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function iE(t){return cT.some(e=>t[e]>=0)}const NU=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Ki(t,e);switch(r){case"referenceHidden":{const s=await ho(e,{...i,elementContext:"reference"}),a=rE(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:iE(a)}}}case"escaped":{const s=await ho(e,{...i,altBoundary:!0}),a=rE(s,n.floating);return{data:{escapedOffsets:a,escaped:iE(a)}}}default:return{}}}}};function fT(t){const e=bi(...t.map(s=>s.left)),n=bi(...t.map(s=>s.top)),r=Mn(...t.map(s=>s.right)),i=Mn(...t.map(s=>s.bottom));return{x:e,y:n,width:r-e,height:i-n}}function LU(t){const e=t.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<e.length;i++){const s=e[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>lo(fT(i)))}const MU=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:i,platform:s,strategy:a}=e,{padding:o=2,x:u,y:c}=Ki(t,e),l=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),h=LU(l),d=lo(fT(l)),f=Oy(o);function p(){if(h.length===2&&h[0].left>h[1].right&&u!=null&&c!=null)return h.find(m=>u>m.left-f.left&&u<m.right+f.right&&c>m.top-f.top&&c<m.bottom+f.bottom)||d;if(h.length>=2){if(di(n)==="y"){const N=h[0],L=h[h.length-1],S=_r(n)==="top",M=N.top,E=L.bottom,_=S?N.left:L.left,C=S?N.right:L.right,T=C-_,F=E-M;return{top:M,bottom:E,left:_,right:C,width:T,height:F,x:_,y:M}}const m=_r(n)==="left",y=Mn(...h.map(N=>N.right)),b=bi(...h.map(N=>N.left)),v=h.filter(N=>m?N.left===b:N.right===y),x=v[0].top,w=v[v.length-1].bottom,k=b,D=y,A=D-k,R=w-x;return{top:x,bottom:w,left:k,right:D,width:A,height:R,x:k,y:x}}return d}const g=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:a});return i.reference.x!==g.reference.x||i.reference.y!==g.reference.y||i.reference.width!==g.reference.width||i.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}},IU=new Set(["left","top"]);async function OU(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=_r(n),o=Gr(n),u=di(n)==="y",c=IU.has(a)?-1:1,l=s&&u?-1:1,h=Ki(e,t);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof p=="number"&&(f=o==="end"?p*-1:p),u?{x:f*l,y:d*c}:{x:d*c,y:f*l}}const PU=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=e,u=await OU(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:a}}}}},$U=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:m=>{let{x:y,y:b}=m;return{x:y,y:b}}},...u}=Ki(t,e),c={x:n,y:r},l=await ho(e,u),h=di(_r(i)),d=lT(h);let f=c[d],p=c[h];if(s){const m=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=f+l[m],v=f-l[y];f=em(b,f,v)}if(a){const m=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=p+l[m],v=p-l[y];p=em(b,p,v)}const g=o.fn({...e,[d]:f,[h]:p});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[d]:s,[h]:a}}}}}},BU=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:a,elements:o}=e,{apply:u=()=>{},...c}=Ki(t,e),l=await ho(e,c),h=_r(i),d=Gr(i),f=di(i)==="y",{width:p,height:g}=s.floating;let m,y;h==="top"||h==="bottom"?(m=h,y=d===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(y=h,m=d==="end"?"top":"bottom");const b=g-l.top-l.bottom,v=p-l.left-l.right,x=bi(g-l[m],b),w=bi(p-l[y],v),k=!e.middlewareData.shift;let D=x,A=w;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=v),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(D=b),k&&!d){const N=Mn(l.left,0),L=Mn(l.right,0),S=Mn(l.top,0),M=Mn(l.bottom,0);f?A=p-2*(N!==0||L!==0?N+L:Mn(l.left,l.right)):D=g-2*(S!==0||M!==0?S+M:Mn(l.top,l.bottom))}await u({...e,availableWidth:A,availableHeight:D});const R=await a.getDimensions(o.floating);return p!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function qd(){return typeof window<"u"}function Co(t){return dT(t)?(t.nodeName||"").toLowerCase():"#document"}function or(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Zi(t){var e;return(e=(dT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function dT(t){return qd()?t instanceof Node||t instanceof or(t).Node:!1}function Yr(t){return qd()?t instanceof Element||t instanceof or(t).Element:!1}function xi(t){return qd()?t instanceof HTMLElement||t instanceof or(t).HTMLElement:!1}function sE(t){return!qd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof or(t).ShadowRoot}const UU=new Set(["inline","contents"]);function Yc(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Xr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!UU.has(i)}const GU=new Set(["table","td","th"]);function HU(t){return GU.has(Co(t))}const WU=[":popover-open",":modal"];function jd(t){return WU.some(e=>{try{return t.matches(e)}catch{return!1}})}const zU=["transform","translate","scale","rotate","perspective"],YU=["transform","translate","scale","rotate","perspective","filter"],XU=["paint","layout","strict","content"];function Py(t){const e=$y(),n=Yr(t)?Xr(t):t;return zU.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||YU.some(r=>(n.willChange||"").includes(r))||XU.some(r=>(n.contain||"").includes(r))}function VU(t){let e=ys(t);for(;xi(e)&&!fo(e);){if(Py(e))return e;if(jd(e))return null;e=ys(e)}return null}function $y(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const qU=new Set(["html","body","#document"]);function fo(t){return qU.has(Co(t))}function Xr(t){return or(t).getComputedStyle(t)}function Kd(t){return Yr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ys(t){if(Co(t)==="html")return t;const e=t.assignedSlot||t.parentNode||sE(t)&&t.host||Zi(t);return sE(e)?e.host:e}function pT(t){const e=ys(t);return fo(e)?t.ownerDocument?t.ownerDocument.body:t.body:xi(e)&&Yc(e)?e:pT(e)}function gT(t,e,n){var r;e===void 0&&(e=[]);const i=pT(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),a=or(i);return s?(tm(a),e.concat(a,a.visualViewport||[],Yc(i)?i:[],[])):e.concat(i,gT(i,[]))}function tm(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function mT(t){const e=Xr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=xi(t),s=i?t.offsetWidth:n,a=i?t.offsetHeight:r,o=Cf(n)!==s||Cf(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function yT(t){return Yr(t)?t:t.contextElement}function Xa(t){const e=yT(t);if(!xi(e))return vi(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=mT(e);let a=(s?Cf(n.width):n.width)/r,o=(s?Cf(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const jU=vi(0);function vT(t){const e=or(t);return!$y()||!e.visualViewport?jU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function KU(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==or(t)?!1:e}function xc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=yT(t);let a=vi(1);e&&(r?Yr(r)&&(a=Xa(r)):a=Xa(t));const o=KU(s,n,r)?vT(s):vi(0);let u=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,l=i.width/a.x,h=i.height/a.y;if(s){const d=or(s),f=r&&Yr(r)?or(r):r;let p=d,g=tm(p);for(;g&&r&&f!==p;){const m=Xa(g),y=g.getBoundingClientRect(),b=Xr(g),v=y.left+(g.clientLeft+parseFloat(b.paddingLeft))*m.x,x=y.top+(g.clientTop+parseFloat(b.paddingTop))*m.y;u*=m.x,c*=m.y,l*=m.x,h*=m.y,u+=v,c+=x,p=or(g),g=tm(p)}}return lo({width:l,height:h,x:u,y:c})}function Zd(t,e){const n=Kd(t).scrollLeft;return e?e.left+n:xc(Zi(t)).left+n}function bT(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Zd(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function ZU(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",a=Zi(r),o=e?jd(e.floating):!1;if(r===a||o&&s)return n;let u={scrollLeft:0,scrollTop:0},c=vi(1);const l=vi(0),h=xi(r);if((h||!h&&!s)&&((Co(r)!=="body"||Yc(a))&&(u=Kd(r)),xi(r))){const f=xc(r);c=Xa(r),l.x=f.x+r.clientLeft,l.y=f.y+r.clientTop}const d=a&&!h&&!s?bT(a,u):vi(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+l.x+d.x,y:n.y*c.y-u.scrollTop*c.y+l.y+d.y}}function JU(t){return Array.from(t.getClientRects())}function QU(t){const e=Zi(t),n=Kd(t),r=t.ownerDocument.body,i=Mn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Mn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Zd(t);const o=-n.scrollTop;return Xr(r).direction==="rtl"&&(a+=Mn(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}const aE=25;function eG(t,e){const n=or(t),r=Zi(t),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,u=0;if(i){s=i.width,a=i.height;const l=$y();(!l||l&&e==="fixed")&&(o=i.offsetLeft,u=i.offsetTop)}const c=Zd(r);if(c<=0){const l=r.ownerDocument,h=l.body,d=getComputedStyle(h),f=l.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,p=Math.abs(r.clientWidth-h.clientWidth-f);p<=aE&&(s-=p)}else c<=aE&&(s+=c);return{width:s,height:a,x:o,y:u}}const tG=new Set(["absolute","fixed"]);function nG(t,e){const n=xc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=xi(t)?Xa(t):vi(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,u=i*s.x,c=r*s.y;return{width:a,height:o,x:u,y:c}}function oE(t,e,n){let r;if(e==="viewport")r=eG(t,n);else if(e==="document")r=QU(Zi(t));else if(Yr(e))r=nG(e,n);else{const i=vT(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return lo(r)}function xT(t,e){const n=ys(t);return n===e||!Yr(n)||fo(n)?!1:Xr(n).position==="fixed"||xT(n,e)}function rG(t,e){const n=e.get(t);if(n)return n;let r=gT(t,[]).filter(o=>Yr(o)&&Co(o)!=="body"),i=null;const s=Xr(t).position==="fixed";let a=s?ys(t):t;for(;Yr(a)&&!fo(a);){const o=Xr(a),u=Py(a);!u&&o.position==="fixed"&&(i=null),(s?!u&&!i:!u&&o.position==="static"&&!!i&&tG.has(i.position)||Yc(a)&&!u&&xT(t,a))?r=r.filter(l=>l!==a):i=o,a=ys(a)}return e.set(t,r),r}function iG(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?jd(e)?[]:rG(e,this._c):[].concat(n),r],o=a[0],u=a.reduce((c,l)=>{const h=oE(e,l,i);return c.top=Mn(h.top,c.top),c.right=bi(h.right,c.right),c.bottom=bi(h.bottom,c.bottom),c.left=Mn(h.left,c.left),c},oE(e,o,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function sG(t){const{width:e,height:n}=mT(t);return{width:e,height:n}}function aG(t,e,n){const r=xi(e),i=Zi(e),s=n==="fixed",a=xc(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const u=vi(0);function c(){u.x=Zd(i)}if(r||!r&&!s)if((Co(e)!=="body"||Yc(i))&&(o=Kd(e)),r){const f=xc(e,!0,s,e);u.x=f.x+e.clientLeft,u.y=f.y+e.clientTop}else i&&c();s&&!r&&i&&c();const l=i&&!r&&!s?bT(i,o):vi(0),h=a.left+o.scrollLeft-u.x-l.x,d=a.top+o.scrollTop-u.y-l.y;return{x:h,y:d,width:a.width,height:a.height}}function mp(t){return Xr(t).position==="static"}function uE(t,e){if(!xi(t)||Xr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Zi(t)===n&&(n=n.ownerDocument.body),n}function ET(t,e){const n=or(t);if(jd(t))return n;if(!xi(t)){let i=ys(t);for(;i&&!fo(i);){if(Yr(i)&&!mp(i))return i;i=ys(i)}return n}let r=uE(t,e);for(;r&&HU(r)&&mp(r);)r=uE(r,e);return r&&fo(r)&&mp(r)&&!Py(r)?n:r||VU(t)||n}const oG=async function(t){const e=this.getOffsetParent||ET,n=this.getDimensions,r=await n(t.floating);return{reference:aG(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function uG(t){return Xr(t).direction==="rtl"}const cG={convertOffsetParentRelativeRectToViewportRelativeRect:ZU,getDocumentElement:Zi,getClippingRect:iG,getOffsetParent:ET,getElementRects:oG,getClientRects:JU,getDimensions:sG,getScale:Xa,isElement:Yr,isRTL:uG},EZ=PU,DZ=SU,wZ=$U,_Z=RU,AZ=BU,CZ=NU,TZ=kU,kZ=MU,FZ=(t,e,n)=>{const r=new Map,i={platform:cG,...n},s={...i.platform,_c:r};return TU(t,e,{...i,platform:s})};function lG(t){return t||(t={}),{delay:t.delay===void 0?200:t.delay,initialDelay:t.initialDelay===void 0?0:t.initialDelay,minDelay:t.minDelay===void 0?0:t.minDelay,maxDelay:t.maxDelay===void 0?0:t.maxDelay,factor:t.factor===void 0?0:t.factor,maxAttempts:t.maxAttempts===void 0?3:t.maxAttempts,timeout:t.timeout===void 0?0:t.timeout,jitter:t.jitter===!0,initialJitter:t.initialJitter===!0,handleError:t.handleError===void 0?null:t.handleError,handleTimeout:t.handleTimeout===void 0?null:t.handleTimeout,beforeAttempt:t.beforeAttempt===void 0?null:t.beforeAttempt,calculateDelay:t.calculateDelay===void 0?null:t.calculateDelay}}async function yp(t){return new Promise(e=>setTimeout(e,t))}function hG(t,e){let n=e.delay;if(n===0)return 0;if(e.factor&&(n*=Math.pow(e.factor,t.attemptNum-1),e.maxDelay!==0&&(n=Math.min(n,e.maxDelay))),e.jitter){const r=Math.ceil(e.minDelay),i=Math.floor(n);n=Math.floor(Math.random()*(i-r+1))+r}return Math.round(n)}async function SZ(t,e){const n=lG(e);for(const o of["delay","initialDelay","minDelay","maxDelay","maxAttempts","timeout"]){const u=n[o];if(!Number.isInteger(u)||u<0)throw new Error(`Value for ${o} must be an integer greater than or equal to 0`)}if(n.factor.constructor!==Number||n.factor<0)throw new Error("Value for factor must be a number greater than or equal to 0");if(n.delay<n.minDelay)throw new Error(`delay cannot be less than minDelay (delay: ${n.delay}, minDelay: ${n.minDelay}`);const r={attemptNum:0,attemptsRemaining:n.maxAttempts?n.maxAttempts:-1,aborted:!1,abort(){r.aborted=!0}},i=n.calculateDelay||hG;async function s(){if(n.beforeAttempt&&n.beforeAttempt(r,n),r.aborted){const u=new Error("Attempt aborted");throw u.code="ATTEMPT_ABORTED",u}const o=async u=>{if(n.handleError&&await n.handleError(u,r,n),r.aborted||r.attemptsRemaining===0)throw u;r.attemptNum++;const c=i(r,n);return c&&await yp(c),s()};return r.attemptsRemaining>0&&r.attemptsRemaining--,n.timeout?new Promise((u,c)=>{const l=setTimeout(()=>{if(n.handleTimeout)try{u(n.handleTimeout(r,n))}catch(h){c(h)}else{const h=new Error(`Retry timeout (attemptNum: ${r.attemptNum}, timeout: ${n.timeout})`);h.code="ATTEMPT_TIMEOUT",c(h)}},n.timeout);t(r,n).then(h=>{clearTimeout(l),u(h)}).catch(h=>{clearTimeout(l),o(h).then(u).catch(c)})}):t(r,n).catch(o)}const a=n.calculateDelay?n.calculateDelay(r,n):n.initialDelay;if(a&&await yp(a),r.attemptNum<1&&n.initialJitter){const o=i(r,n);o&&await yp(o)}return s()}var fG="\0",Ss="\0",cE="";class Ci{constructor(e={}){this._isDirected=Object.prototype.hasOwnProperty.call(e,"directed")?e.directed:!0,this._isMultigraph=Object.prototype.hasOwnProperty.call(e,"multigraph")?e.multigraph:!1,this._isCompound=Object.prototype.hasOwnProperty.call(e,"compound")?e.compound:!1,this._label=void 0,this._defaultNodeLabelFn=tu(void 0),this._defaultEdgeLabelFn=tu(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Ss]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return mv(e)||(e=tu(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return va(this._nodes)}sources(){var e=this;return ci(this.nodes(),function(n){return Xp(e._in[n])})}sinks(){var e=this;return ci(this.nodes(),function(n){return Xp(e._out[n])})}setNodes(e,n){var r=arguments,i=this;return j(e,function(s){r.length>1?i.setNode(s,n):i.setNode(s)}),this}setNode(e,n){return Object.prototype.hasOwnProperty.call(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=n),this):(this._nodes[e]=arguments.length>1?n:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=Ss,this._children[e]={},this._children[Ss][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.prototype.hasOwnProperty.call(this._nodes,e)}removeNode(e){if(Object.prototype.hasOwnProperty.call(this._nodes,e)){var n=r=>this.removeEdge(this._edgeObjs[r]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],j(this.children(e),r=>{this.setParent(r)}),delete this._children[e]),j(va(this._in[e]),n),delete this._in[e],delete this._preds[e],j(va(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(St(n))n=Ss;else{n+="";for(var r=n;!St(r);r=this.parent(r))if(r===e)throw new Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=n,this._children[n][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var n=this._parent[e];if(n!==Ss)return n}}children(e){if(St(e)&&(e=Ss),this._isCompound){var n=this._children[e];if(n)return va(n)}else{if(e===Ss)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var n=this._preds[e];if(n)return va(n)}successors(e){var n=this._sucs[e];if(n)return va(n)}neighbors(e){var n=this.predecessors(e);if(n)return _3(n,this.successors(e))}isLeaf(e){var n;return this.isDirected()?n=this.successors(e):n=this.neighbors(e),n.length===0}filterNodes(e){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;j(this._nodes,function(a,o){e(o)&&n.setNode(o,a)}),j(this._edgeObjs,function(a){n.hasNode(a.v)&&n.hasNode(a.w)&&n.setEdge(a,r.edge(a))});var i={};function s(a){var o=r.parent(a);return o===void 0||n.hasNode(o)?(i[a]=o,o):o in i?i[o]:s(o)}return this._isCompound&&j(n.nodes(),function(a){n.setParent(a,s(a))}),n}setDefaultEdgeLabel(e){return mv(e)||(e=tu(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return Gi(this._edgeObjs)}setPath(e,n){var r=this,i=arguments;return Vs(e,function(s,a){return i.length>1?r.setEdge(s,a,n):r.setEdge(s,a),a}),this}setEdge(){var e,n,r,i,s=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(e=a.v,n=a.w,r=a.name,arguments.length===2&&(i=arguments[1],s=!0)):(e=a,n=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],s=!0)),e=""+e,n=""+n,St(r)||(r=""+r);var o=pu(this._isDirected,e,n,r);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,o))return s&&(this._edgeLabels[o]=i),this;if(!St(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(n),this._edgeLabels[o]=s?i:this._defaultEdgeLabelFn(e,n,r);var u=dG(this._isDirected,e,n,r);return e=u.v,n=u.w,Object.freeze(u),this._edgeObjs[o]=u,lE(this._preds[n],e),lE(this._sucs[e],n),this._in[n][o]=u,this._out[e][o]=u,this._edgeCount++,this}edge(e,n,r){var i=arguments.length===1?vp(this._isDirected,arguments[0]):pu(this._isDirected,e,n,r);return this._edgeLabels[i]}hasEdge(e,n,r){var i=arguments.length===1?vp(this._isDirected,arguments[0]):pu(this._isDirected,e,n,r);return Object.prototype.hasOwnProperty.call(this._edgeLabels,i)}removeEdge(e,n,r){var i=arguments.length===1?vp(this._isDirected,arguments[0]):pu(this._isDirected,e,n,r),s=this._edgeObjs[i];return s&&(e=s.v,n=s.w,delete this._edgeLabels[i],delete this._edgeObjs[i],hE(this._preds[n],e),hE(this._sucs[e],n),delete this._in[n][i],delete this._out[e][i],this._edgeCount--),this}inEdges(e,n){var r=this._in[e];if(r){var i=Gi(r);return n?ci(i,function(s){return s.v===n}):i}}outEdges(e,n){var r=this._out[e];if(r){var i=Gi(r);return n?ci(i,function(s){return s.w===n}):i}}nodeEdges(e,n){var r=this.inEdges(e,n);if(r)return r.concat(this.outEdges(e,n))}}Ci.prototype._nodeCount=0;Ci.prototype._edgeCount=0;function lE(t,e){t[e]?t[e]++:t[e]=1}function hE(t,e){--t[e]||delete t[e]}function pu(t,e,n,r){var i=""+e,s=""+n;if(!t&&i>s){var a=i;i=s,s=a}return i+cE+s+cE+(St(r)?fG:r)}function dG(t,e,n,r){var i=""+e,s=""+n;if(!t&&i>s){var a=i;i=s,s=a}var o={v:i,w:s};return r&&(o.name=r),o}function vp(t,e){return pu(t,e.v,e.w,e.name)}class pG{constructor(){var e={};e._next=e._prev=e,this._sentinel=e}dequeue(){var e=this._sentinel,n=e._prev;if(n!==e)return fE(n),n}enqueue(e){var n=this._sentinel;e._prev&&e._next&&fE(e),e._next=n._next,n._next._prev=e,n._next=e,e._prev=n}toString(){for(var e=[],n=this._sentinel,r=n._prev;r!==n;)e.push(JSON.stringify(r,gG)),r=r._prev;return"["+e.join(", ")+"]"}}function fE(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function gG(t,e){if(t!=="_next"&&t!=="_prev")return e}var mG=tu(1);function yG(t,e){if(t.nodeCount()<=1)return[];var n=bG(t,e||mG),r=vG(n.graph,n.buckets,n.zeroIdx);return vo(lt(r,function(i){return t.outEdges(i.v,i.w)}))}function vG(t,e,n){for(var r=[],i=e[e.length-1],s=e[0],a;t.nodeCount();){for(;a=s.dequeue();)bp(t,e,n,a);for(;a=i.dequeue();)bp(t,e,n,a);if(t.nodeCount()){for(var o=e.length-2;o>0;--o)if(a=e[o].dequeue(),a){r=r.concat(bp(t,e,n,a,!0));break}}}return r}function bp(t,e,n,r,i){var s=i?[]:void 0;return j(t.inEdges(r.v),function(a){var o=t.edge(a),u=t.node(a.v);i&&s.push({v:a.v,w:a.w}),u.out-=o,nm(e,n,u)}),j(t.outEdges(r.v),function(a){var o=t.edge(a),u=a.w,c=t.node(u);c.in-=o,nm(e,n,c)}),t.removeNode(r.v),s}function bG(t,e){var n=new Ci,r=0,i=0;j(t.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),j(t.edges(),function(o){var u=n.edge(o.v,o.w)||0,c=e(o),l=u+c;n.setEdge(o.v,o.w,l),i=Math.max(i,n.node(o.v).out+=c),r=Math.max(r,n.node(o.w).in+=c)});var s=ja(i+r+3).map(function(){return new pG}),a=r+1;return j(n.nodes(),function(o){nm(s,a,n.node(o))}),{graph:n,buckets:s,zeroIdx:a}}function nm(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}function xG(t){var e=t.graph().acyclicer==="greedy"?yG(t,n(t)):EG(t);j(e,function(r){var i=t.edge(r);t.removeEdge(r),i.forwardName=r.name,i.reversed=!0,t.setEdge(r.w,r.v,i,Hm("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function EG(t){var e=[],n={},r={};function i(s){Object.prototype.hasOwnProperty.call(r,s)||(r[s]=!0,n[s]=!0,j(t.outEdges(s),function(a){Object.prototype.hasOwnProperty.call(n,a.w)?e.push(a):i(a.w)}),delete n[s])}return j(t.nodes(),i),e}function DG(t){j(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}function To(t,e,n,r){var i;do i=Hm(r);while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function wG(t){var e=new Ci().setGraph(t.graph());return j(t.nodes(),function(n){e.setNode(n,t.node(n))}),j(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function DT(t){var e=new Ci({multigraph:t.isMultigraph()}).setGraph(t.graph());return j(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),j(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e}function dE(t,e){var n=t.x,r=t.y,i=e.x-n,s=e.y-r,a=t.width/2,o=t.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var u,c;return Math.abs(s)*a>Math.abs(i)*o?(s<0&&(o=-o),u=o*i/s,c=o):(i<0&&(a=-a),u=a,c=a*s/i),{x:n+u,y:r+c}}function Jd(t){var e=lt(ja(wT(t)+1),function(){return[]});return j(t.nodes(),function(n){var r=t.node(n),i=r.rank;St(i)||(e[i][r.order]=n)}),e}function _G(t){var e=Ka(lt(t.nodes(),function(n){return t.node(n).rank}));j(t.nodes(),function(n){var r=t.node(n);Fw(r,"rank")&&(r.rank-=e)})}function AG(t){var e=Ka(lt(t.nodes(),function(s){return t.node(s).rank})),n=[];j(t.nodes(),function(s){var a=t.node(s).rank-e;n[a]||(n[a]=[]),n[a].push(s)});var r=0,i=t.graph().nodeRankFactor;j(n,function(s,a){St(s)&&a%i!==0?--r:r&&j(s,function(o){t.node(o).rank+=r})})}function pE(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),To(t,"border",i,e)}function wT(t){return qs(lt(t.nodes(),function(e){var n=t.node(e).rank;if(!St(n))return n}))}function CG(t,e){var n={lhs:[],rhs:[]};return j(t,function(r){e(r)?n.lhs.push(r):n.rhs.push(r)}),n}function TG(t,e){return e()}function kG(t){function e(n){var r=t.children(n),i=t.node(n);if(r.length&&j(r,e),Object.prototype.hasOwnProperty.call(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,a=i.maxRank+1;s<a;++s)gE(t,"borderLeft","_bl",n,i,s),gE(t,"borderRight","_br",n,i,s)}}j(t.children(),e)}function gE(t,e,n,r,i,s){var a={width:0,height:0,rank:s,borderType:e},o=i[e][s-1],u=To(t,"border",a,n);i[e][s]=u,t.setParent(u,r),o&&t.setEdge(o,u,{weight:1})}function FG(t){var e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&_T(t)}function SG(t){var e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&RG(t),(e==="lr"||e==="rl")&&(NG(t),_T(t))}function _T(t){j(t.nodes(),function(e){mE(t.node(e))}),j(t.edges(),function(e){mE(t.edge(e))})}function mE(t){var e=t.width;t.width=t.height,t.height=e}function RG(t){j(t.nodes(),function(e){xp(t.node(e))}),j(t.edges(),function(e){var n=t.edge(e);j(n.points,xp),Object.prototype.hasOwnProperty.call(n,"y")&&xp(n)})}function xp(t){t.y=-t.y}function NG(t){j(t.nodes(),function(e){Ep(t.node(e))}),j(t.edges(),function(e){var n=t.edge(e);j(n.points,Ep),Object.prototype.hasOwnProperty.call(n,"x")&&Ep(n)})}function Ep(t){var e=t.x;t.x=t.y,t.y=e}function LG(t){t.graph().dummyChains=[],j(t.edges(),function(e){MG(t,e)})}function MG(t,e){var n=e.v,r=t.node(n).rank,i=e.w,s=t.node(i).rank,a=e.name,o=t.edge(e),u=o.labelRank;if(s!==r+1){t.removeEdge(e);var c=void 0,l,h;for(h=0,++r;r<s;++h,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:e,rank:r},l=To(t,"edge",c,"_d"),r===u&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),t.setEdge(n,l,{weight:o.weight},a),h===0&&t.graph().dummyChains.push(l),n=l;t.setEdge(n,i,{weight:o.weight},a)}}function IG(t){j(t.graph().dummyChains,function(e){var n=t.node(e),r=n.edgeLabel,i;for(t.setEdge(n.edgeObj,r);n.dummy;)i=t.successors(e)[0],t.removeNode(e),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),e=i,n=t.node(e)})}function By(t){var e={};function n(r){var i=t.node(r);if(Object.prototype.hasOwnProperty.call(e,r))return i.rank;e[r]=!0;var s=Ka(lt(t.outEdges(r),function(a){return n(a.w)-t.edge(a).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s}j(t.sources(),n)}function Ec(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}function AT(t){var e=new Ci({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var i,s;OG(e,t)<r;)i=PG(e,t),s=e.hasNode(i.v)?Ec(t,i):-Ec(t,i),$G(e,t,s);return e}function OG(t,e){function n(r){j(e.nodeEdges(r),function(i){var s=i.v,a=r===s?i.w:s;!t.hasNode(a)&&!Ec(e,i)&&(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}return j(t.nodes(),n),t.nodeCount()}function PG(t,e){return Wm(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return Ec(e,n)})}function $G(t,e,n){j(t.nodes(),function(r){e.node(r).rank+=n})}function BG(){}BG.prototype=new Error;function CT(t,e,n){A3(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],s={};return j(e,function(a){if(!t.hasNode(a))throw new Error("Graph does not have node: "+a);TT(t,a,n==="post",s,r,i)}),i}function TT(t,e,n,r,i,s){Object.prototype.hasOwnProperty.call(r,e)||(r[e]=!0,n||s.push(e),j(i(e),function(a){TT(t,a,n,r,i,s)}),n&&s.push(e))}function UG(t,e){return CT(t,e,"post")}function GG(t,e){return CT(t,e,"pre")}ga.initLowLimValues=Gy;ga.initCutValues=Uy;ga.calcCutValue=kT;ga.leaveEdge=ST;ga.enterEdge=RT;ga.exchangeEdges=NT;function ga(t){t=wG(t),By(t);var e=AT(t);Gy(e),Uy(e,t);for(var n,r;n=ST(e);)r=RT(e,t,n),NT(e,t,n,r)}function Uy(t,e){var n=UG(t,t.nodes());n=n.slice(0,n.length-1),j(n,function(r){HG(t,e,r)})}function HG(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=kT(t,e,n)}function kT(t,e,n){var r=t.node(n),i=r.parent,s=!0,a=e.edge(n,i),o=0;return a||(s=!1,a=e.edge(i,n)),o=a.weight,j(e.nodeEdges(n),function(u){var c=u.v===n,l=c?u.w:u.v;if(l!==i){var h=c===s,d=e.edge(u).weight;if(o+=h?d:-d,zG(t,n,l)){var f=t.edge(n,l).cutvalue;o+=h?-f:f}}}),o}function Gy(t,e){arguments.length<2&&(e=t.nodes()[0]),FT(t,{},1,e)}function FT(t,e,n,r,i){var s=n,a=t.node(r);return e[r]=!0,j(t.neighbors(r),function(o){Object.prototype.hasOwnProperty.call(e,o)||(n=FT(t,e,n,o,r))}),a.low=s,a.lim=n++,i?a.parent=i:delete a.parent,n}function ST(t){return zm(t.edges(),function(e){return t.edge(e).cutvalue<0})}function RT(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var s=t.node(r),a=t.node(i),o=s,u=!1;s.lim>a.lim&&(o=a,u=!0);var c=ci(e.edges(),function(l){return u===yE(t,t.node(l.v),o)&&u!==yE(t,t.node(l.w),o)});return Wm(c,function(l){return Ec(e,l)})}function NT(t,e,n,r){var i=n.v,s=n.w;t.removeEdge(i,s),t.setEdge(r.v,r.w,{}),Gy(t),Uy(t,e),WG(t,e)}function WG(t,e){var n=zm(t.nodes(),function(i){return!e.node(i).parent}),r=GG(t,n);r=r.slice(1),j(r,function(i){var s=t.node(i).parent,a=e.edge(i,s),o=!1;a||(a=e.edge(s,i),o=!0),e.node(i).rank=e.node(s).rank+(o?a.minlen:-a.minlen)})}function zG(t,e,n){return t.hasEdge(e,n)}function yE(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}function YG(t){switch(t.graph().ranker){case"network-simplex":vE(t);break;case"tight-tree":VG(t);break;case"longest-path":XG(t);break;default:vE(t)}}var XG=By;function VG(t){By(t),AT(t)}function vE(t){ga(t)}function qG(t){var e=To(t,"root",{},"_root"),n=jG(t),r=qs(Gi(n))-1,i=2*r+1;t.graph().nestingRoot=e,j(t.edges(),function(a){t.edge(a).minlen*=i});var s=KG(t)+1;j(t.children(),function(a){LT(t,e,i,s,r,n,a)}),t.graph().nodeRankFactor=i}function LT(t,e,n,r,i,s,a){var o=t.children(a);if(!o.length){a!==e&&t.setEdge(e,a,{weight:0,minlen:n});return}var u=pE(t,"_bt"),c=pE(t,"_bb"),l=t.node(a);t.setParent(u,a),l.borderTop=u,t.setParent(c,a),l.borderBottom=c,j(o,function(h){LT(t,e,n,r,i,s,h);var d=t.node(h),f=d.borderTop?d.borderTop:h,p=d.borderBottom?d.borderBottom:h,g=d.borderTop?r:2*r,m=f!==p?1:i-s[a]+1;t.setEdge(u,f,{weight:g,minlen:m,nestingEdge:!0}),t.setEdge(p,c,{weight:g,minlen:m,nestingEdge:!0})}),t.parent(a)||t.setEdge(e,u,{weight:0,minlen:i+s[a]})}function jG(t){var e={};function n(r,i){var s=t.children(r);s&&s.length&&j(s,function(a){n(a,i+1)}),e[r]=i}return j(t.children(),function(r){n(r,1)}),e}function KG(t){return Vs(t.edges(),function(e,n){return e+t.edge(n).weight},0)}function ZG(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,j(t.edges(),function(n){var r=t.edge(n);r.nestingEdge&&t.removeEdge(n)})}function JG(t,e,n){var r={},i;j(n,function(s){for(var a=t.parent(s),o,u;a;){if(o=t.parent(a),o?(u=r[o],r[o]=a):(u=i,i=a),u&&u!==a){e.setEdge(u,a);return}a=o}})}function QG(t,e,n){var r=eH(t),i=new Ci({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return t.node(s)});return j(t.nodes(),function(s){var a=t.node(s),o=t.parent(s);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(s),i.setParent(s,o||r),j(t[n](s),function(u){var c=u.v===s?u.w:u.v,l=i.edge(c,s),h=St(l)?0:l.weight;i.setEdge(c,s,{weight:t.edge(u).weight+h})}),Object.prototype.hasOwnProperty.call(a,"minRank")&&i.setNode(s,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),i}function eH(t){for(var e;t.hasNode(e=Hm("_root")););return e}function tH(t,e){for(var n=0,r=1;r<e.length;++r)n+=nH(t,e[r-1],e[r]);return n}function nH(t,e,n){for(var r=C3(n,lt(n,function(c,l){return l})),i=vo(lt(e,function(c){return Ac(lt(t.outEdges(c),function(l){return{pos:r[l.w],weight:t.edge(l).weight}}),"pos")})),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var o=lt(new Array(a),function(){return 0}),u=0;return j(i.forEach(function(c){var l=c.pos+s;o[l]+=c.weight;for(var h=0;l>0;)l%2&&(h+=o[l+1]),l=l-1>>1,o[l]+=c.weight;u+=c.weight*h})),u}function rH(t){var e={},n=ci(t.nodes(),function(o){return!t.children(o).length}),r=qs(lt(n,function(o){return t.node(o).rank})),i=lt(ja(r+1),function(){return[]});function s(o){if(!Fw(e,o)){e[o]=!0;var u=t.node(o);i[u.rank].push(o),j(t.successors(o),s)}}var a=Ac(n,function(o){return t.node(o).rank});return j(a,s),i}function iH(t,e){return lt(e,function(n){var r=t.inEdges(n);if(r.length){var i=Vs(r,function(s,a){var o=t.edge(a),u=t.node(a.v);return{sum:s.sum+o.weight*u.order,weight:s.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}function sH(t,e){var n={};j(t,function(i,s){var a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};St(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),j(e.edges(),function(i){var s=n[i.v],a=n[i.w];!St(s)&&!St(a)&&(a.indegree++,s.out.push(n[i.w]))});var r=ci(n,function(i){return!i.indegree});return aH(r)}function aH(t){var e=[];function n(s){return function(a){a.merged||(St(a.barycenter)||St(s.barycenter)||a.barycenter>=s.barycenter)&&oH(s,a)}}function r(s){return function(a){a.in.push(s),--a.indegree===0&&t.push(a)}}for(;t.length;){var i=t.pop();e.push(i),j(i.in.reverse(),n(i)),j(i.out,r(i))}return lt(ci(e,function(s){return!s.merged}),function(s){return Fh(s,["vs","i","barycenter","weight"])})}function oH(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}function uH(t,e){var n=CG(t,function(l){return Object.prototype.hasOwnProperty.call(l,"barycenter")}),r=n.lhs,i=Ac(n.rhs,function(l){return-l.i}),s=[],a=0,o=0,u=0;r.sort(cH(!!e)),u=bE(s,i,u),j(r,function(l){u+=l.vs.length,s.push(l.vs),a+=l.barycenter*l.weight,o+=l.weight,u=bE(s,i,u)});var c={vs:vo(s)};return o&&(c.barycenter=a/o,c.weight=o),c}function bE(t,e,n){for(var r;e.length&&(r=Sh(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function cH(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}function MT(t,e,n,r){var i=t.children(e),s=t.node(e),a=s?s.borderLeft:void 0,o=s?s.borderRight:void 0,u={};a&&(i=ci(i,function(p){return p!==a&&p!==o}));var c=iH(t,i);j(c,function(p){if(t.children(p.v).length){var g=MT(t,p.v,n,r);u[p.v]=g,Object.prototype.hasOwnProperty.call(g,"barycenter")&&hH(p,g)}});var l=sH(c,n);lH(l,u);var h=uH(l,r);if(a&&(h.vs=vo([a,h.vs,o]),t.predecessors(a).length)){var d=t.node(t.predecessors(a)[0]),f=t.node(t.predecessors(o)[0]);Object.prototype.hasOwnProperty.call(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+d.order+f.order)/(h.weight+2),h.weight+=2}return h}function lH(t,e){j(t,function(n){n.vs=vo(n.vs.map(function(r){return e[r]?e[r].vs:r}))})}function hH(t,e){St(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}function fH(t){var e=wT(t),n=xE(t,ja(1,e+1),"inEdges"),r=xE(t,ja(e-1,-1,-1),"outEdges"),i=rH(t);EE(t,i);for(var s=Number.POSITIVE_INFINITY,a,o=0,u=0;u<4;++o,++u){dH(o%2?n:r,o%4>=2),i=Jd(t);var c=tH(t,i);c<s&&(u=0,a=T3(i),s=c)}EE(t,a)}function xE(t,e,n){return lt(e,function(r){return QG(t,r,n)})}function dH(t,e){var n=new Ci;j(t,function(r){var i=r.graph().root,s=MT(r,i,n,e);j(s.vs,function(a,o){r.node(a).order=o}),JG(r,n,s.vs)})}function EE(t,e){j(e,function(n){j(n,function(r,i){t.node(r).order=i})})}function pH(t){var e=mH(t);j(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,s=gH(t,e,i.v,i.w),a=s.path,o=s.lca,u=0,c=a[u],l=!0;n!==i.w;){if(r=t.node(n),l){for(;(c=a[u])!==o&&t.node(c).maxRank<r.rank;)u++;c===o&&(l=!1)}if(!l){for(;u<a.length-1&&t.node(c=a[u+1]).minRank<=r.rank;)u++;c=a[u]}t.setParent(n,c),n=t.successors(n)[0]}})}function gH(t,e,n,r){var i=[],s=[],a=Math.min(e[n].low,e[r].low),o=Math.max(e[n].lim,e[r].lim),u,c;u=n;do u=t.parent(u),i.push(u);while(u&&(e[u].low>a||o>e[u].lim));for(c=u,u=r;(u=t.parent(u))!==c;)s.push(u);return{path:i.concat(s.reverse()),lca:c}}function mH(t){var e={},n=0;function r(i){var s=n;j(t.children(i),r),e[i]={low:s,lim:n++}}return j(t.children(),r),e}function yH(t,e){var n={};function r(i,s){var a=0,o=0,u=i.length,c=Sh(s);return j(s,function(l,h){var d=bH(t,l),f=d?t.node(d).order:u;(d||l===c)&&(j(s.slice(o,h+1),function(p){j(t.predecessors(p),function(g){var m=t.node(g),y=m.order;(y<a||f<y)&&!(m.dummy&&t.node(p).dummy)&&IT(n,g,p)})}),o=h+1,a=f)}),s}return Vs(e,r),n}function vH(t,e){var n={};function r(s,a,o,u,c){var l;j(ja(a,o),function(h){l=s[h],t.node(l).dummy&&j(t.predecessors(l),function(d){var f=t.node(d);f.dummy&&(f.order<u||f.order>c)&&IT(n,d,l)})})}function i(s,a){var o=-1,u,c=0;return j(a,function(l,h){if(t.node(l).dummy==="border"){var d=t.predecessors(l);d.length&&(u=t.node(d[0]).order,r(a,c,h,o,u),c=h,o=u)}r(a,c,a.length,u,s.length)}),a}return Vs(e,i),n}function bH(t,e){if(t.node(e).dummy)return zm(t.predecessors(e),function(n){return t.node(n).dummy})}function IT(t,e,n){if(e>n){var r=e;e=n,n=r}Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,value:{},writable:!0});var i=t[e];Object.defineProperty(i,n,{enumerable:!0,configurable:!0,value:!0,writable:!0})}function xH(t,e,n){if(e>n){var r=e;e=n,n=r}return!!t[e]&&Object.prototype.hasOwnProperty.call(t[e],n)}function EH(t,e,n,r){var i={},s={},a={};return j(e,function(o){j(o,function(u,c){i[u]=u,s[u]=u,a[u]=c})}),j(e,function(o){var u=-1;j(o,function(c){var l=r(c);if(l.length){l=Ac(l,function(g){return a[g]});for(var h=(l.length-1)/2,d=Math.floor(h),f=Math.ceil(h);d<=f;++d){var p=l[d];s[c]===c&&u<a[p]&&!xH(n,c,p)&&(s[p]=c,s[c]=i[c]=i[p],u=a[p])}}})}),{root:i,align:s}}function DH(t,e,n,r,i){var s={},a=wH(t,e,n,i),o=i?"borderLeft":"borderRight";function u(h,d){for(var f=a.nodes(),p=f.pop(),g={};p;)g[p]?h(p):(g[p]=!0,f.push(p),f=f.concat(d(p))),p=f.pop()}function c(h){s[h]=a.inEdges(h).reduce(function(d,f){return Math.max(d,s[f.v]+a.edge(f))},0)}function l(h){var d=a.outEdges(h).reduce(function(p,g){return Math.min(p,s[g.w]-a.edge(g))},Number.POSITIVE_INFINITY),f=t.node(h);d!==Number.POSITIVE_INFINITY&&f.borderType!==o&&(s[h]=Math.max(s[h],d))}return u(c,a.predecessors.bind(a)),u(l,a.successors.bind(a)),j(r,function(h){s[h]=s[n[h]]}),s}function wH(t,e,n,r){var i=new Ci,s=t.graph(),a=kH(s.nodesep,s.edgesep,r);return j(e,function(o){var u;j(o,function(c){var l=n[c];if(i.setNode(l),u){var h=n[u],d=i.edge(h,l);i.setEdge(h,l,Math.max(a(t,c,u),d||0))}u=c})}),i}function _H(t,e){return Wm(Gi(e),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return k3(n,function(s,a){var o=FH(t,a)/2;r=Math.max(s+o,r),i=Math.min(s-o,i)}),r-i})}function AH(t,e){var n=Gi(e),r=Ka(n),i=qs(n);j(["u","d"],function(s){j(["l","r"],function(a){var o=s+a,u=t[o],c;if(u!==e){var l=Gi(u);c=a==="l"?r-Ka(l):i-qs(l),c&&(t[o]=ed(u,function(h){return h+c}))}})})}function CH(t,e){return ed(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=Ac(lt(t,r));return(i[1]+i[2])/2})}function TH(t){var e=Jd(t),n=Vp(yH(t,e),vH(t,e)),r={},i;j(["u","d"],function(a){i=a==="u"?e:Gi(e).reverse(),j(["l","r"],function(o){o==="r"&&(i=lt(i,function(h){return Gi(h).reverse()}));var u=(a==="u"?t.predecessors:t.successors).bind(t),c=EH(t,i,n,u),l=DH(t,i,c.root,c.align,o==="r");o==="r"&&(l=ed(l,function(h){return-h})),r[a+o]=l})});var s=_H(t,r);return AH(r,s),CH(r,t.graph().align)}function kH(t,e,n){return function(r,i,s){var a=r.node(i),o=r.node(s),u=0,c;if(u+=a.width/2,Object.prototype.hasOwnProperty.call(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":c=-a.width/2;break;case"r":c=a.width/2;break}if(c&&(u+=n?c:-c),c=0,u+=(a.dummy?e:t)/2,u+=(o.dummy?e:t)/2,u+=o.width/2,Object.prototype.hasOwnProperty.call(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":c=o.width/2;break;case"r":c=-o.width/2;break}return c&&(u+=n?c:-c),c=0,u}}function FH(t,e){return t.node(e).width}function SH(t){t=DT(t),RH(t),F3(TH(t),function(e,n){t.node(n).x=e})}function RH(t){var e=Jd(t),n=t.graph().ranksep,r=0;j(e,function(i){var s=qs(lt(i,function(a){return t.node(a).height}));j(i,function(a){t.node(a).y=r+s/2}),r+=s+n})}function RZ(t,e){var n=TG;n("layout",()=>{var r=n("  buildLayoutGraph",()=>HH(t));n("  runLayout",()=>NH(r,n)),n("  updateInputGraph",()=>LH(t,r))})}function NH(t,e){e("    makeSpaceForEdgeLabels",()=>WH(t)),e("    removeSelfEdges",()=>JH(t)),e("    acyclic",()=>xG(t)),e("    nestingGraph.run",()=>qG(t)),e("    rank",()=>YG(DT(t))),e("    injectEdgeLabelProxies",()=>zH(t)),e("    removeEmptyRanks",()=>AG(t)),e("    nestingGraph.cleanup",()=>ZG(t)),e("    normalizeRanks",()=>_G(t)),e("    assignRankMinMax",()=>YH(t)),e("    removeEdgeLabelProxies",()=>XH(t)),e("    normalize.run",()=>LG(t)),e("    parentDummyChains",()=>pH(t)),e("    addBorderSegments",()=>kG(t)),e("    order",()=>fH(t)),e("    insertSelfEdges",()=>QH(t)),e("    adjustCoordinateSystem",()=>FG(t)),e("    position",()=>SH(t)),e("    positionSelfEdges",()=>eW(t)),e("    removeBorderNodes",()=>ZH(t)),e("    normalize.undo",()=>IG(t)),e("    fixupEdgeLabelCoords",()=>jH(t)),e("    undoCoordinateSystem",()=>SG(t)),e("    translateGraph",()=>VH(t)),e("    assignNodeIntersects",()=>qH(t)),e("    reversePoints",()=>KH(t)),e("    acyclic.undo",()=>DG(t))}function LH(t,e){j(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),j(t.edges(),function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,Object.prototype.hasOwnProperty.call(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}var MH=["nodesep","edgesep","ranksep","marginx","marginy"],IH={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},OH=["acyclicer","ranker","rankdir","align"],PH=["width","height"],$H={width:0,height:0},BH=["minlen","weight","width","height","labeloffset"],UH={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},GH=["labelpos"];function HH(t){var e=new Ci({multigraph:!0,compound:!0}),n=wp(t.graph());return e.setGraph(Vp({},IH,Dp(n,MH),Fh(n,OH))),j(t.nodes(),function(r){var i=wp(t.node(r));e.setNode(r,S3(Dp(i,PH),$H)),e.setParent(r,t.parent(r))}),j(t.edges(),function(r){var i=wp(t.edge(r));e.setEdge(r,Vp({},UH,Dp(i,BH),Fh(i,GH)))}),e}function WH(t){var e=t.graph();e.ranksep/=2,j(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function zH(t){j(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),s={rank:(i.rank-r.rank)/2+r.rank,e};To(t,"edge-proxy",s,"_ep")}})}function YH(t){var e=0;j(t.nodes(),function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=qs(e,r.maxRank))}),t.graph().maxRank=e}function XH(t){j(t.nodes(),function(e){var n=t.node(e);n.dummy==="edge-proxy"&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function VH(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,s=t.graph(),a=s.marginx||0,o=s.marginy||0;function u(c){var l=c.x,h=c.y,d=c.width,f=c.height;e=Math.min(e,l-d/2),n=Math.max(n,l+d/2),r=Math.min(r,h-f/2),i=Math.max(i,h+f/2)}j(t.nodes(),function(c){u(t.node(c))}),j(t.edges(),function(c){var l=t.edge(c);Object.prototype.hasOwnProperty.call(l,"x")&&u(l)}),e-=a,r-=o,j(t.nodes(),function(c){var l=t.node(c);l.x-=e,l.y-=r}),j(t.edges(),function(c){var l=t.edge(c);j(l.points,function(h){h.x-=e,h.y-=r}),Object.prototype.hasOwnProperty.call(l,"x")&&(l.x-=e),Object.prototype.hasOwnProperty.call(l,"y")&&(l.y-=r)}),s.width=n-e+a,s.height=i-r+o}function qH(t){j(t.edges(),function(e){var n=t.edge(e),r=t.node(e.v),i=t.node(e.w),s,a;n.points?(s=n.points[0],a=n.points[n.points.length-1]):(n.points=[],s=i,a=r),n.points.unshift(dE(r,s)),n.points.push(dE(i,a))})}function jH(t){j(t.edges(),function(e){var n=t.edge(e);if(Object.prototype.hasOwnProperty.call(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function KH(t){j(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}function ZH(t){j(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),s=t.node(Sh(n.borderLeft)),a=t.node(Sh(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(i.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}}),j(t.nodes(),function(e){t.node(e).dummy==="border"&&t.removeNode(e)})}function JH(t){j(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function QH(t){var e=Jd(t);j(e,function(n){var r=0;j(n,function(i,s){var a=t.node(i);a.order=s+r,j(a.selfEdges,function(o){To(t,"selfedge",{width:o.label.width,height:o.label.height,rank:a.rank,order:s+ ++r,e:o.e,label:o.label},"_se")}),delete a.selfEdges})})}function eW(t){j(t.nodes(),function(e){var n=t.node(e);if(n.dummy==="selfedge"){var r=t.node(n.e.v),i=r.x+r.width/2,s=r.y,a=n.x-i,o=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:s-o},{x:i+5*a/6,y:s-o},{x:i+a,y:s},{x:i+5*a/6,y:s+o},{x:i+2*a/3,y:s+o}],n.label.x=n.x,n.label.y=n.y}})}function Dp(t,e){return ed(Fh(t,e),Number)}function wp(t){var e={};return j(t,function(n,r){e[r.toLowerCase()]=n}),e}function NZ(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:tW(t),edges:nW(t)};return St(t.graph())||(e.value=R3(t.graph())),e}function tW(t){return lt(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return St(n)||(i.value=n),St(r)||(i.parent=r),i})}function nW(t){return lt(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return St(e.name)||(r.name=e.name),St(n)||(r.value=n),r})}var yh={exports:{}},vh={exports:{}},rW=vh.exports,DE;function iW(){return DE||(DE=1,(function(t,e){(function(r,i){t.exports=i()})(rW,function(){return(function(n){var r={};function i(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return n[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.i=function(s){return s},i.d=function(s,a,o){i.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:o})},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=26)})([(function(n,r,i){function s(){}s.QUALITY=1,s.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,s.DEFAULT_INCREMENTAL=!1,s.DEFAULT_ANIMATION_ON_LAYOUT=!0,s.DEFAULT_ANIMATION_DURING_LAYOUT=!1,s.DEFAULT_ANIMATION_PERIOD=50,s.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,s.DEFAULT_GRAPH_MARGIN=15,s.NODE_DIMENSIONS_INCLUDE_LABELS=!1,s.SIMPLE_NODE_SIZE=40,s.SIMPLE_NODE_HALF_SIZE=s.SIMPLE_NODE_SIZE/2,s.EMPTY_COMPOUND_NODE_SIZE=40,s.MIN_EDGE_LENGTH=1,s.WORLD_BOUNDARY=1e6,s.INITIAL_WORLD_BOUNDARY=s.WORLD_BOUNDARY/1e3,s.WORLD_CENTER_X=1200,s.WORLD_CENTER_Y=900,n.exports=s}),(function(n,r,i){var s=i(2),a=i(8),o=i(9);function u(l,h,d){s.call(this,d),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=d,this.bendpoints=[],this.source=l,this.target=h}u.prototype=Object.create(s.prototype);for(var c in s)u[c]=s[c];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(l){if(this.source===l)return this.target;if(this.target===l)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(l,h){for(var d=this.getOtherEnd(l),f=h.getGraphManager().getRoot();;){if(d.getOwner()==h)return d;if(d.getOwner()==f)break;d=d.getOwner().getParent()}return null},u.prototype.updateLength=function(){var l=new Array(4);this.isOverlapingSourceAndTarget=a.getIntersection(this.target.getRect(),this.source.getRect(),l),this.isOverlapingSourceAndTarget||(this.lengthX=l[0]-l[2],this.lengthY=l[1]-l[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},n.exports=u}),(function(n,r,i){function s(a){this.vGraphObject=a}n.exports=s}),(function(n,r,i){var s=i(2),a=i(10),o=i(13),u=i(0),c=i(16),l=i(4);function h(f,p,g,m){g==null&&m==null&&(m=p),s.call(this,m),f.graphManager!=null&&(f=f.graphManager),this.estimatedSize=a.MIN_VALUE,this.inclusionTreeDepth=a.MAX_VALUE,this.vGraphObject=m,this.edges=[],this.graphManager=f,g!=null&&p!=null?this.rect=new o(p.x,p.y,g.width,g.height):this.rect=new o}h.prototype=Object.create(s.prototype);for(var d in s)h[d]=s[d];h.prototype.getEdges=function(){return this.edges},h.prototype.getChild=function(){return this.child},h.prototype.getOwner=function(){return this.owner},h.prototype.getWidth=function(){return this.rect.width},h.prototype.setWidth=function(f){this.rect.width=f},h.prototype.getHeight=function(){return this.rect.height},h.prototype.setHeight=function(f){this.rect.height=f},h.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},h.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},h.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},h.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},h.prototype.getRect=function(){return this.rect},h.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},h.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},h.prototype.setRect=function(f,p){this.rect.x=f.x,this.rect.y=f.y,this.rect.width=p.width,this.rect.height=p.height},h.prototype.setCenter=function(f,p){this.rect.x=f-this.rect.width/2,this.rect.y=p-this.rect.height/2},h.prototype.setLocation=function(f,p){this.rect.x=f,this.rect.y=p},h.prototype.moveBy=function(f,p){this.rect.x+=f,this.rect.y+=p},h.prototype.getEdgeListToNode=function(f){var p=[],g=this;return g.edges.forEach(function(m){if(m.target==f){if(m.source!=g)throw"Incorrect edge source!";p.push(m)}}),p},h.prototype.getEdgesBetween=function(f){var p=[],g=this;return g.edges.forEach(function(m){if(!(m.source==g||m.target==g))throw"Incorrect edge source and/or target";(m.target==f||m.source==f)&&p.push(m)}),p},h.prototype.getNeighborsList=function(){var f=new Set,p=this;return p.edges.forEach(function(g){if(g.source==p)f.add(g.target);else{if(g.target!=p)throw"Incorrect incidency!";f.add(g.source)}}),f},h.prototype.withChildren=function(){var f=new Set,p,g;if(f.add(this),this.child!=null)for(var m=this.child.getNodes(),y=0;y<m.length;y++)p=m[y],g=p.withChildren(),g.forEach(function(b){f.add(b)});return f},h.prototype.getNoOfChildren=function(){var f=0,p;if(this.child==null)f=1;else for(var g=this.child.getNodes(),m=0;m<g.length;m++)p=g[m],f+=p.getNoOfChildren();return f==0&&(f=1),f},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},h.prototype.scatter=function(){var f,p,g=-u.INITIAL_WORLD_BOUNDARY,m=u.INITIAL_WORLD_BOUNDARY;f=u.WORLD_CENTER_X+c.nextDouble()*(m-g)+g;var y=-u.INITIAL_WORLD_BOUNDARY,b=u.INITIAL_WORLD_BOUNDARY;p=u.WORLD_CENTER_Y+c.nextDouble()*(b-y)+y,this.rect.x=f,this.rect.y=p},h.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var f=this.getChild();if(f.updateBounds(!0),this.rect.x=f.getLeft(),this.rect.y=f.getTop(),this.setWidth(f.getRight()-f.getLeft()),this.setHeight(f.getBottom()-f.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var p=f.getRight()-f.getLeft(),g=f.getBottom()-f.getTop();this.labelWidth>p&&(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)),this.labelHeight>g&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-g)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-g),this.setHeight(this.labelHeight))}}},h.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==a.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},h.prototype.transform=function(f){var p=this.rect.x;p>u.WORLD_BOUNDARY?p=u.WORLD_BOUNDARY:p<-u.WORLD_BOUNDARY&&(p=-u.WORLD_BOUNDARY);var g=this.rect.y;g>u.WORLD_BOUNDARY?g=u.WORLD_BOUNDARY:g<-u.WORLD_BOUNDARY&&(g=-u.WORLD_BOUNDARY);var m=new l(p,g),y=f.inverseTransformPoint(m);this.setLocation(y.x,y.y)},h.prototype.getLeft=function(){return this.rect.x},h.prototype.getRight=function(){return this.rect.x+this.rect.width},h.prototype.getTop=function(){return this.rect.y},h.prototype.getBottom=function(){return this.rect.y+this.rect.height},h.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},n.exports=h}),(function(n,r,i){function s(a,o){a==null&&o==null?(this.x=0,this.y=0):(this.x=a,this.y=o)}s.prototype.getX=function(){return this.x},s.prototype.getY=function(){return this.y},s.prototype.setX=function(a){this.x=a},s.prototype.setY=function(a){this.y=a},s.prototype.getDifference=function(a){return new DimensionD(this.x-a.x,this.y-a.y)},s.prototype.getCopy=function(){return new s(this.x,this.y)},s.prototype.translate=function(a){return this.x+=a.width,this.y+=a.height,this},n.exports=s}),(function(n,r,i){var s=i(2),a=i(10),o=i(0),u=i(6),c=i(3),l=i(1),h=i(13),d=i(12),f=i(11);function p(m,y,b){s.call(this,b),this.estimatedSize=a.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=m,y!=null&&y instanceof u?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}p.prototype=Object.create(s.prototype);for(var g in s)p[g]=s[g];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(m,y,b){if(y==null&&b==null){var v=m;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(v)>-1)throw"Node already in graph!";return v.owner=this,this.getNodes().push(v),v}else{var x=m;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(b)>-1))throw"Source or target not in graph!";if(!(y.owner==b.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner!=b.owner?null:(x.source=y,x.target=b,x.isInterGraph=!1,this.getEdges().push(x),y.edges.push(x),b!=y&&b.edges.push(x),x)}},p.prototype.remove=function(m){var y=m;if(m instanceof c){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var b=y.edges.slice(),v,x=b.length,w=0;w<x;w++)v=b[w],v.isInterGraph?this.graphManager.remove(v):v.source.owner.remove(v);var k=this.nodes.indexOf(y);if(k==-1)throw"Node not in owner node list!";this.nodes.splice(k,1)}else if(m instanceof l){var v=m;if(v==null)throw"Edge is null!";if(!(v.source!=null&&v.target!=null))throw"Source and/or target is null!";if(!(v.source.owner!=null&&v.target.owner!=null&&v.source.owner==this&&v.target.owner==this))throw"Source and/or target owner is invalid!";var D=v.source.edges.indexOf(v),A=v.target.edges.indexOf(v);if(!(D>-1&&A>-1))throw"Source and/or target doesn't know this edge!";v.source.edges.splice(D,1),v.target!=v.source&&v.target.edges.splice(A,1);var k=v.source.owner.getEdges().indexOf(v);if(k==-1)throw"Not in owner's edge list!";v.source.owner.getEdges().splice(k,1)}},p.prototype.updateLeftTop=function(){for(var m=a.MAX_VALUE,y=a.MAX_VALUE,b,v,x,w=this.getNodes(),k=w.length,D=0;D<k;D++){var A=w[D];b=A.getTop(),v=A.getLeft(),m>b&&(m=b),y>v&&(y=v)}return m==a.MAX_VALUE?null:(w[0].getParent().paddingLeft!=null?x=w[0].getParent().paddingLeft:x=this.margin,this.left=y-x,this.top=m-x,new d(this.left,this.top))},p.prototype.updateBounds=function(m){for(var y=a.MAX_VALUE,b=-a.MAX_VALUE,v=a.MAX_VALUE,x=-a.MAX_VALUE,w,k,D,A,R,N=this.nodes,L=N.length,S=0;S<L;S++){var M=N[S];m&&M.child!=null&&M.updateBounds(),w=M.getLeft(),k=M.getRight(),D=M.getTop(),A=M.getBottom(),y>w&&(y=w),b<k&&(b=k),v>D&&(v=D),x<A&&(x=A)}var E=new h(y,v,b-y,x-v);y==a.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),N[0].getParent().paddingLeft!=null?R=N[0].getParent().paddingLeft:R=this.margin,this.left=E.x-R,this.right=E.x+E.width+R,this.top=E.y-R,this.bottom=E.y+E.height+R},p.calculateBounds=function(m){for(var y=a.MAX_VALUE,b=-a.MAX_VALUE,v=a.MAX_VALUE,x=-a.MAX_VALUE,w,k,D,A,R=m.length,N=0;N<R;N++){var L=m[N];w=L.getLeft(),k=L.getRight(),D=L.getTop(),A=L.getBottom(),y>w&&(y=w),b<k&&(b=k),v>D&&(v=D),x<A&&(x=A)}var S=new h(y,v,b-y,x-v);return S},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var m=0,y=this.nodes,b=y.length,v=0;v<b;v++){var x=y[v];m+=x.calcEstimatedSize()}return m==0?this.estimatedSize=o.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=m/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var m=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new f,b=new Set,v=this.nodes[0],x,w,k=v.withChildren();for(k.forEach(function(S){y.push(S),b.add(S)});y.length!==0;){v=y.shift(),x=v.getEdges();for(var D=x.length,A=0;A<D;A++){var R=x[A];if(w=R.getOtherEndInGraph(v,this),w!=null&&!b.has(w)){var N=w.withChildren();N.forEach(function(S){y.push(S),b.add(S)})}}}if(this.isConnected=!1,b.size>=this.nodes.length){var L=0;b.forEach(function(S){S.owner==m&&L++}),L==this.nodes.length&&(this.isConnected=!0)}},n.exports=p}),(function(n,r,i){var s,a=i(1);function o(u){s=i(5),this.layout=u,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var u=this.layout.newGraph(),c=this.layout.newNode(null),l=this.add(u,c);return this.setRootGraph(l),this.rootGraph},o.prototype.add=function(u,c,l,h,d){if(l==null&&h==null&&d==null){if(u==null)throw"Graph is null!";if(c==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(c.child!=null)throw"Already has a child!";return u.parent=c,c.child=u,u}else{d=l,h=c,l=u;var f=h.getOwner(),p=d.getOwner();if(!(f!=null&&f.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(p!=null&&p.getGraphManager()==this))throw"Target not in this graph mgr!";if(f==p)return l.isInterGraph=!1,f.add(l,h,d);if(l.isInterGraph=!0,l.source=h,l.target=d,this.edges.indexOf(l)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(l),!(l.source!=null&&l.target!=null))throw"Edge source and/or target is null!";if(!(l.source.edges.indexOf(l)==-1&&l.target.edges.indexOf(l)==-1))throw"Edge already in source and/or target incidency list!";return l.source.edges.push(l),l.target.edges.push(l),l}},o.prototype.remove=function(u){if(u instanceof s){var c=u;if(c.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(c==this.rootGraph||c.parent!=null&&c.parent.graphManager==this))throw"Invalid parent node!";var l=[];l=l.concat(c.getEdges());for(var h,d=l.length,f=0;f<d;f++)h=l[f],c.remove(h);var p=[];p=p.concat(c.getNodes());var g;d=p.length;for(var f=0;f<d;f++)g=p[f],c.remove(g);c==this.rootGraph&&this.setRootGraph(null);var m=this.graphs.indexOf(c);this.graphs.splice(m,1),c.parent=null}else if(u instanceof a){if(h=u,h==null)throw"Edge is null!";if(!h.isInterGraph)throw"Not an inter-graph edge!";if(!(h.source!=null&&h.target!=null))throw"Source and/or target is null!";if(!(h.source.edges.indexOf(h)!=-1&&h.target.edges.indexOf(h)!=-1))throw"Source and/or target doesn't know this edge!";var m=h.source.edges.indexOf(h);if(h.source.edges.splice(m,1),m=h.target.edges.indexOf(h),h.target.edges.splice(m,1),!(h.source.owner!=null&&h.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(h.source.owner.getGraphManager().edges.indexOf(h)==-1)throw"Not in owner graph manager's edge list!";var m=h.source.owner.getGraphManager().edges.indexOf(h);h.source.owner.getGraphManager().edges.splice(m,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],c=this.getGraphs(),l=c.length,h=0;h<l;h++)u=u.concat(c[h].getNodes());this.allNodes=u}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],c=this.getGraphs();c.length;for(var l=0;l<c.length;l++)u=u.concat(c[l].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(u,c){if(!(u!=null&&c!=null))throw"assert failed";if(u==c)return!0;var l=u.getOwner(),h;do{if(h=l.getParent(),h==null)break;if(h==c)return!0;if(l=h.getOwner(),l==null)break}while(!0);l=c.getOwner();do{if(h=l.getParent(),h==null)break;if(h==u)return!0;if(l=h.getOwner(),l==null)break}while(!0);return!1},o.prototype.calcLowestCommonAncestors=function(){for(var u,c,l,h,d,f=this.getAllEdges(),p=f.length,g=0;g<p;g++){if(u=f[g],c=u.source,l=u.target,u.lca=null,u.sourceInLca=c,u.targetInLca=l,c==l){u.lca=c.getOwner();continue}for(h=c.getOwner();u.lca==null;){for(u.targetInLca=l,d=l.getOwner();u.lca==null;){if(d==h){u.lca=d;break}if(d==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=d.getParent(),d=u.targetInLca.getOwner()}if(h==this.rootGraph)break;u.lca==null&&(u.sourceInLca=h.getParent(),h=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},o.prototype.calcLowestCommonAncestor=function(u,c){if(u==c)return u.getOwner();var l=u.getOwner();do{if(l==null)break;var h=c.getOwner();do{if(h==null)break;if(h==l)return h;h=h.getParent().getOwner()}while(!0);l=l.getParent().getOwner()}while(!0);return l},o.prototype.calcInclusionTreeDepths=function(u,c){u==null&&c==null&&(u=this.rootGraph,c=1);for(var l,h=u.getNodes(),d=h.length,f=0;f<d;f++)l=h[f],l.inclusionTreeDepth=c,l.child!=null&&this.calcInclusionTreeDepths(l.child,c+1)},o.prototype.includesInvalidEdge=function(){for(var u,c=this.edges.length,l=0;l<c;l++)if(u=this.edges[l],this.isOneAncestorOfOther(u.source,u.target))return!0;return!1},n.exports=o}),(function(n,r,i){var s=i(0);function a(){}for(var o in s)a[o]=s[o];a.MAX_ITERATIONS=2500,a.DEFAULT_EDGE_LENGTH=50,a.DEFAULT_SPRING_STRENGTH=.45,a.DEFAULT_REPULSION_STRENGTH=4500,a.DEFAULT_GRAVITY_STRENGTH=.4,a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,a.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,a.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,a.COOLING_ADAPTATION_FACTOR=.33,a.ADAPTATION_LOWER_NODE_LIMIT=1e3,a.ADAPTATION_UPPER_NODE_LIMIT=5e3,a.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,a.MAX_NODE_DISPLACEMENT=a.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,a.MIN_REPULSION_DIST=a.DEFAULT_EDGE_LENGTH/10,a.CONVERGENCE_CHECK_PERIOD=100,a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,a.MIN_EDGE_LENGTH=1,a.GRID_CALCULATION_CHECK_PERIOD=10,n.exports=a}),(function(n,r,i){var s=i(12);function a(){}a.calcSeparationAmount=function(o,u,c,l){if(!o.intersects(u))throw"assert failed";var h=new Array(2);this.decideDirectionsForOverlappingNodes(o,u,h),c[0]=Math.min(o.getRight(),u.getRight())-Math.max(o.x,u.x),c[1]=Math.min(o.getBottom(),u.getBottom())-Math.max(o.y,u.y),o.getX()<=u.getX()&&o.getRight()>=u.getRight()?c[0]+=Math.min(u.getX()-o.getX(),o.getRight()-u.getRight()):u.getX()<=o.getX()&&u.getRight()>=o.getRight()&&(c[0]+=Math.min(o.getX()-u.getX(),u.getRight()-o.getRight())),o.getY()<=u.getY()&&o.getBottom()>=u.getBottom()?c[1]+=Math.min(u.getY()-o.getY(),o.getBottom()-u.getBottom()):u.getY()<=o.getY()&&u.getBottom()>=o.getBottom()&&(c[1]+=Math.min(o.getY()-u.getY(),u.getBottom()-o.getBottom()));var d=Math.abs((u.getCenterY()-o.getCenterY())/(u.getCenterX()-o.getCenterX()));u.getCenterY()===o.getCenterY()&&u.getCenterX()===o.getCenterX()&&(d=1);var f=d*c[0],p=c[1]/d;c[0]<p?p=c[0]:f=c[1],c[0]=-1*h[0]*(p/2+l),c[1]=-1*h[1]*(f/2+l)},a.decideDirectionsForOverlappingNodes=function(o,u,c){o.getCenterX()<u.getCenterX()?c[0]=-1:c[0]=1,o.getCenterY()<u.getCenterY()?c[1]=-1:c[1]=1},a.getIntersection2=function(o,u,c){var l=o.getCenterX(),h=o.getCenterY(),d=u.getCenterX(),f=u.getCenterY();if(o.intersects(u))return c[0]=l,c[1]=h,c[2]=d,c[3]=f,!0;var p=o.getX(),g=o.getY(),m=o.getRight(),y=o.getX(),b=o.getBottom(),v=o.getRight(),x=o.getWidthHalf(),w=o.getHeightHalf(),k=u.getX(),D=u.getY(),A=u.getRight(),R=u.getX(),N=u.getBottom(),L=u.getRight(),S=u.getWidthHalf(),M=u.getHeightHalf(),E=!1,_=!1;if(l===d){if(h>f)return c[0]=l,c[1]=g,c[2]=d,c[3]=N,!1;if(h<f)return c[0]=l,c[1]=b,c[2]=d,c[3]=D,!1}else if(h===f){if(l>d)return c[0]=p,c[1]=h,c[2]=A,c[3]=f,!1;if(l<d)return c[0]=m,c[1]=h,c[2]=k,c[3]=f,!1}else{var C=o.height/o.width,T=u.height/u.width,F=(f-h)/(d-l),I=void 0,P=void 0,U=void 0,q=void 0,Y=void 0,te=void 0;if(-C===F?l>d?(c[0]=y,c[1]=b,E=!0):(c[0]=m,c[1]=g,E=!0):C===F&&(l>d?(c[0]=p,c[1]=g,E=!0):(c[0]=v,c[1]=b,E=!0)),-T===F?d>l?(c[2]=R,c[3]=N,_=!0):(c[2]=A,c[3]=D,_=!0):T===F&&(d>l?(c[2]=k,c[3]=D,_=!0):(c[2]=L,c[3]=N,_=!0)),E&&_)return!1;if(l>d?h>f?(I=this.getCardinalDirection(C,F,4),P=this.getCardinalDirection(T,F,2)):(I=this.getCardinalDirection(-C,F,3),P=this.getCardinalDirection(-T,F,1)):h>f?(I=this.getCardinalDirection(-C,F,1),P=this.getCardinalDirection(-T,F,3)):(I=this.getCardinalDirection(C,F,2),P=this.getCardinalDirection(T,F,4)),!E)switch(I){case 1:q=g,U=l+-w/F,c[0]=U,c[1]=q;break;case 2:U=v,q=h+x*F,c[0]=U,c[1]=q;break;case 3:q=b,U=l+w/F,c[0]=U,c[1]=q;break;case 4:U=y,q=h+-x*F,c[0]=U,c[1]=q;break}if(!_)switch(P){case 1:te=D,Y=d+-M/F,c[2]=Y,c[3]=te;break;case 2:Y=L,te=f+S*F,c[2]=Y,c[3]=te;break;case 3:te=N,Y=d+M/F,c[2]=Y,c[3]=te;break;case 4:Y=R,te=f+-S*F,c[2]=Y,c[3]=te;break}}return!1},a.getCardinalDirection=function(o,u,c){return o>u?c:1+c%4},a.getIntersection=function(o,u,c,l){if(l==null)return this.getIntersection2(o,u,c);var h=o.x,d=o.y,f=u.x,p=u.y,g=c.x,m=c.y,y=l.x,b=l.y,v=void 0,x=void 0,w=void 0,k=void 0,D=void 0,A=void 0,R=void 0,N=void 0,L=void 0;return w=p-d,D=h-f,R=f*d-h*p,k=b-m,A=g-y,N=y*m-g*b,L=w*A-k*D,L===0?null:(v=(D*N-A*R)/L,x=(k*R-w*N)/L,new s(v,x))},a.angleOfVector=function(o,u,c,l){var h=void 0;return o!==c?(h=Math.atan((l-u)/(c-o)),c<o?h+=Math.PI:l<u&&(h+=this.TWO_PI)):l<u?h=this.ONE_AND_HALF_PI:h=this.HALF_PI,h},a.doIntersect=function(o,u,c,l){var h=o.x,d=o.y,f=u.x,p=u.y,g=c.x,m=c.y,y=l.x,b=l.y,v=(f-h)*(b-m)-(y-g)*(p-d);if(v===0)return!1;var x=((b-m)*(y-h)+(g-y)*(b-d))/v,w=((d-p)*(y-h)+(f-h)*(b-d))/v;return 0<x&&x<1&&0<w&&w<1},a.HALF_PI=.5*Math.PI,a.ONE_AND_HALF_PI=1.5*Math.PI,a.TWO_PI=2*Math.PI,a.THREE_PI=3*Math.PI,n.exports=a}),(function(n,r,i){function s(){}s.sign=function(a){return a>0?1:a<0?-1:0},s.floor=function(a){return a<0?Math.ceil(a):Math.floor(a)},s.ceil=function(a){return a<0?Math.floor(a):Math.ceil(a)},n.exports=s}),(function(n,r,i){function s(){}s.MAX_VALUE=2147483647,s.MIN_VALUE=-2147483648,n.exports=s}),(function(n,r,i){var s=(function(){function h(d,f){for(var p=0;p<f.length;p++){var g=f[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}return function(d,f,p){return f&&h(d.prototype,f),p&&h(d,p),d}})();function a(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(d){return{value:d,next:null,prev:null}},u=function(d,f,p,g){return d!==null?d.next=f:g.head=f,p!==null?p.prev=f:g.tail=f,f.prev=d,f.next=p,g.length++,f},c=function(d,f){var p=d.prev,g=d.next;return p!==null?p.next=g:f.head=g,g!==null?g.prev=p:f.tail=p,d.prev=d.next=null,f.length--,d},l=(function(){function h(d){var f=this;a(this,h),this.length=0,this.head=null,this.tail=null,d!=null&&d.forEach(function(p){return f.push(p)})}return s(h,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(f,p){return u(p.prev,o(f),p,this)}},{key:"insertAfter",value:function(f,p){return u(p,o(f),p.next,this)}},{key:"insertNodeBefore",value:function(f,p){return u(p.prev,f,p,this)}},{key:"insertNodeAfter",value:function(f,p){return u(p,f,p.next,this)}},{key:"push",value:function(f){return u(this.tail,o(f),null,this)}},{key:"unshift",value:function(f){return u(null,o(f),this.head,this)}},{key:"remove",value:function(f){return c(f,this)}},{key:"pop",value:function(){return c(this.tail,this).value}},{key:"popNode",value:function(){return c(this.tail,this)}},{key:"shift",value:function(){return c(this.head,this).value}},{key:"shiftNode",value:function(){return c(this.head,this)}},{key:"get_object_at",value:function(f){if(f<=this.length()){for(var p=1,g=this.head;p<f;)g=g.next,p++;return g.value}}},{key:"set_object_at",value:function(f,p){if(f<=this.length()){for(var g=1,m=this.head;g<f;)m=m.next,g++;m.value=p}}}]),h})();n.exports=l}),(function(n,r,i){function s(a,o,u){this.x=null,this.y=null,a==null&&o==null&&u==null?(this.x=0,this.y=0):typeof a=="number"&&typeof o=="number"&&u==null?(this.x=a,this.y=o):a.constructor.name=="Point"&&o==null&&u==null&&(u=a,this.x=u.x,this.y=u.y)}s.prototype.getX=function(){return this.x},s.prototype.getY=function(){return this.y},s.prototype.getLocation=function(){return new s(this.x,this.y)},s.prototype.setLocation=function(a,o,u){a.constructor.name=="Point"&&o==null&&u==null?(u=a,this.setLocation(u.x,u.y)):typeof a=="number"&&typeof o=="number"&&u==null&&(parseInt(a)==a&&parseInt(o)==o?this.move(a,o):(this.x=Math.floor(a+.5),this.y=Math.floor(o+.5)))},s.prototype.move=function(a,o){this.x=a,this.y=o},s.prototype.translate=function(a,o){this.x+=a,this.y+=o},s.prototype.equals=function(a){if(a.constructor.name=="Point"){var o=a;return this.x==o.x&&this.y==o.y}return this==a},s.prototype.toString=function(){return new s().constructor.name+"[x="+this.x+",y="+this.y+"]"},n.exports=s}),(function(n,r,i){function s(a,o,u,c){this.x=0,this.y=0,this.width=0,this.height=0,a!=null&&o!=null&&u!=null&&c!=null&&(this.x=a,this.y=o,this.width=u,this.height=c)}s.prototype.getX=function(){return this.x},s.prototype.setX=function(a){this.x=a},s.prototype.getY=function(){return this.y},s.prototype.setY=function(a){this.y=a},s.prototype.getWidth=function(){return this.width},s.prototype.setWidth=function(a){this.width=a},s.prototype.getHeight=function(){return this.height},s.prototype.setHeight=function(a){this.height=a},s.prototype.getRight=function(){return this.x+this.width},s.prototype.getBottom=function(){return this.y+this.height},s.prototype.intersects=function(a){return!(this.getRight()<a.x||this.getBottom()<a.y||a.getRight()<this.x||a.getBottom()<this.y)},s.prototype.getCenterX=function(){return this.x+this.width/2},s.prototype.getMinX=function(){return this.getX()},s.prototype.getMaxX=function(){return this.getX()+this.width},s.prototype.getCenterY=function(){return this.y+this.height/2},s.prototype.getMinY=function(){return this.getY()},s.prototype.getMaxY=function(){return this.getY()+this.height},s.prototype.getWidthHalf=function(){return this.width/2},s.prototype.getHeightHalf=function(){return this.height/2},n.exports=s}),(function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function a(){}a.lastID=0,a.createID=function(o){return a.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=a.getString(),a.lastID++),o.uniqueID)},a.getString=function(o){return o==null&&(o=a.lastID),"Object#"+o},a.isPrimitive=function(o){var u=typeof o>"u"?"undefined":s(o);return o==null||u!="object"&&u!="function"},n.exports=a}),(function(n,r,i){function s(g){if(Array.isArray(g)){for(var m=0,y=Array(g.length);m<g.length;m++)y[m]=g[m];return y}else return Array.from(g)}var a=i(0),o=i(6),u=i(3),c=i(1),l=i(5),h=i(4),d=i(17),f=i(27);function p(g){f.call(this),this.layoutQuality=a.QUALITY,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=a.DEFAULT_INCREMENTAL,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,g!=null&&(this.isRemoteUse=g)}p.RANDOM_SEED=1,p.prototype=Object.create(f.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var g=new o(this);return this.graphManager=g,g},p.prototype.newGraph=function(g){return new l(null,this.graphManager,g)},p.prototype.newNode=function(g){return new u(this.graphManager,g)},p.prototype.newEdge=function(g){return new c(null,null,g)},p.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var g;return this.checkLayoutSuccess()?g=!1:g=this.layout(),a.ANIMATE==="during"?!1:(g&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,g)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var g=this.graphManager.getAllEdges(),m=0;m<g.length;m++)g[m];for(var y=this.graphManager.getRoot().getNodes(),m=0;m<y.length;m++)y[m];this.update(this.graphManager.getRoot())}},p.prototype.update=function(g){if(g==null)this.update2();else if(g instanceof u){var m=g;if(m.getChild()!=null)for(var y=m.getChild().getNodes(),b=0;b<y.length;b++)update(y[b]);if(m.vGraphObject!=null){var v=m.vGraphObject;v.update(m)}}else if(g instanceof c){var x=g;if(x.vGraphObject!=null){var w=x.vGraphObject;w.update(x)}}else if(g instanceof l){var k=g;if(k.vGraphObject!=null){var D=k.vGraphObject;D.update(k)}}},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=a.QUALITY,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=a.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(g){if(g==null)this.transform(new h(0,0));else{var m=new d,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){m.setWorldOrgX(g.x),m.setWorldOrgY(g.y),m.setDeviceOrgX(y.x),m.setDeviceOrgY(y.y);for(var b=this.getAllNodes(),v,x=0;x<b.length;x++)v=b[x],v.transform(m)}}},p.prototype.positionNodesRandomly=function(g){if(g==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var m,y,b=g.getNodes(),v=0;v<b.length;v++)m=b[v],y=m.getChild(),y==null||y.getNodes().length==0?m.scatter():(this.positionNodesRandomly(y),m.updateBounds())},p.prototype.getFlatForest=function(){for(var g=[],m=!0,y=this.graphManager.getRoot().getNodes(),b=!0,v=0;v<y.length;v++)y[v].getChild()!=null&&(b=!1);if(!b)return g;var x=new Set,w=[],k=new Map,D=[];for(D=D.concat(y);D.length>0&&m;){for(w.push(D[0]);w.length>0&&m;){var A=w[0];w.splice(0,1),x.add(A);for(var R=A.getEdges(),v=0;v<R.length;v++){var N=R[v].getOtherEnd(A);if(k.get(A)!=N)if(!x.has(N))w.push(N),k.set(N,A);else{m=!1;break}}}if(!m)g=[];else{var L=[].concat(s(x));g.push(L);for(var v=0;v<L.length;v++){var S=L[v],M=D.indexOf(S);M>-1&&D.splice(M,1)}x=new Set,k=new Map}}return g},p.prototype.createDummyNodesForBendpoints=function(g){for(var m=[],y=g.source,b=this.graphManager.calcLowestCommonAncestor(g.source,g.target),v=0;v<g.bendpoints.length;v++){var x=this.newNode(null);x.setRect(new Point(0,0),new Dimension(1,1)),b.add(x);var w=this.newEdge(null);this.graphManager.add(w,y,x),m.add(x),y=x}var w=this.newEdge(null);return this.graphManager.add(w,y,g.target),this.edgeToDummyNodes.set(g,m),g.isInterGraph()?this.graphManager.remove(g):b.remove(g),m},p.prototype.createBendpointsFromDummyNodes=function(){var g=[];g=g.concat(this.graphManager.getAllEdges()),g=[].concat(s(this.edgeToDummyNodes.keys())).concat(g);for(var m=0;m<g.length;m++){var y=g[m];if(y.bendpoints.length>0){for(var b=this.edgeToDummyNodes.get(y),v=0;v<b.length;v++){var x=b[v],w=new h(x.getCenterX(),x.getCenterY()),k=y.bendpoints.get(v);k.x=w.x,k.y=w.y,x.getOwner().remove(x)}this.graphManager.add(y,y.source,y.target)}}},p.transform=function(g,m,y,b){if(y!=null&&b!=null){var v=m;if(g<=50){var x=m/y;v-=(m-x)/50*(50-g)}else{var w=m*b;v+=(w-m)/50*(g-50)}return v}else{var k,D;return g<=50?(k=9*m/500,D=m/10):(k=9*m/50,D=-8*m),k*g+D}},p.findCenterOfTree=function(g){var m=[];m=m.concat(g);var y=[],b=new Map,v=!1,x=null;(m.length==1||m.length==2)&&(v=!0,x=m[0]);for(var w=0;w<m.length;w++){var k=m[w],D=k.getNeighborsList().size;b.set(k,k.getNeighborsList().size),D==1&&y.push(k)}var A=[];for(A=A.concat(y);!v;){var R=[];R=R.concat(A),A=[];for(var w=0;w<m.length;w++){var k=m[w],N=m.indexOf(k);N>=0&&m.splice(N,1);var L=k.getNeighborsList();L.forEach(function(E){if(y.indexOf(E)<0){var _=b.get(E),C=_-1;C==1&&A.push(E),b.set(E,C)}})}y=y.concat(A),(m.length==1||m.length==2)&&(v=!0,x=m[0])}return x},p.prototype.setGraphManager=function(g){this.graphManager=g},n.exports=p}),(function(n,r,i){function s(){}s.seed=1,s.x=0,s.nextDouble=function(){return s.x=Math.sin(s.seed++)*1e4,s.x-Math.floor(s.x)},n.exports=s}),(function(n,r,i){var s=i(4);function a(o,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}a.prototype.getWorldOrgX=function(){return this.lworldOrgX},a.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},a.prototype.getWorldOrgY=function(){return this.lworldOrgY},a.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},a.prototype.getWorldExtX=function(){return this.lworldExtX},a.prototype.setWorldExtX=function(o){this.lworldExtX=o},a.prototype.getWorldExtY=function(){return this.lworldExtY},a.prototype.setWorldExtY=function(o){this.lworldExtY=o},a.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},a.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},a.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},a.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},a.prototype.getDeviceExtX=function(){return this.ldeviceExtX},a.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},a.prototype.getDeviceExtY=function(){return this.ldeviceExtY},a.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},a.prototype.transformX=function(o){var u=0,c=this.lworldExtX;return c!=0&&(u=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/c),u},a.prototype.transformY=function(o){var u=0,c=this.lworldExtY;return c!=0&&(u=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/c),u},a.prototype.inverseTransformX=function(o){var u=0,c=this.ldeviceExtX;return c!=0&&(u=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/c),u},a.prototype.inverseTransformY=function(o){var u=0,c=this.ldeviceExtY;return c!=0&&(u=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/c),u},a.prototype.inverseTransformPoint=function(o){var u=new s(this.inverseTransformX(o.x),this.inverseTransformY(o.y));return u},n.exports=a}),(function(n,r,i){function s(f){if(Array.isArray(f)){for(var p=0,g=Array(f.length);p<f.length;p++)g[p]=f[p];return g}else return Array.from(f)}var a=i(15),o=i(7),u=i(0),c=i(8),l=i(9);function h(){a.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.springConstant=o.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=o.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}h.prototype=Object.create(a.prototype);for(var d in a)h[d]=a[d];h.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},h.prototype.calcIdealEdgeLengths=function(){for(var f,p,g,m,y,b,v=this.getGraphManager().getAllEdges(),x=0;x<v.length;x++)f=v[x],f.idealLength=this.idealEdgeLength,f.isInterGraph&&(g=f.getSource(),m=f.getTarget(),y=f.getSourceInLca().getEstimatedSize(),b=f.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(f.idealLength+=y+b-2*u.SIMPLE_NODE_SIZE),p=f.getLca().getInclusionTreeDepth(),f.idealLength+=o.DEFAULT_EDGE_LENGTH*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(g.getInclusionTreeDepth()+m.getInclusionTreeDepth()-2*p))},h.prototype.initSpringEmbedder=function(){var f=this.getAllNodes().length;this.incremental?(f>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(f-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(f>o.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(o.COOLING_ADAPTATION_FACTOR,1-(f-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},h.prototype.calcSpringForces=function(){for(var f=this.getAllEdges(),p,g=0;g<f.length;g++)p=f[g],this.calcSpringForce(p,p.idealLength)},h.prototype.calcRepulsionForces=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g,m,y,b,v=this.getAllNodes(),x;if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&f&&this.updateGrid(),x=new Set,g=0;g<v.length;g++)y=v[g],this.calculateRepulsionForceOfANode(y,x,f,p),x.add(y);else for(g=0;g<v.length;g++)for(y=v[g],m=g+1;m<v.length;m++)b=v[m],y.getOwner()==b.getOwner()&&this.calcRepulsionForce(y,b)},h.prototype.calcGravitationalForces=function(){for(var f,p=this.getAllNodesToApplyGravitation(),g=0;g<p.length;g++)f=p[g],this.calcGravitationalForce(f)},h.prototype.moveNodes=function(){for(var f=this.getAllNodes(),p,g=0;g<f.length;g++)p=f[g],p.move()},h.prototype.calcSpringForce=function(f,p){var g=f.getSource(),m=f.getTarget(),y,b,v,x;if(this.uniformLeafNodeSizes&&g.getChild()==null&&m.getChild()==null)f.updateLengthSimple();else if(f.updateLength(),f.isOverlapingSourceAndTarget)return;y=f.getLength(),y!=0&&(b=this.springConstant*(y-p),v=b*(f.lengthX/y),x=b*(f.lengthY/y),g.springForceX+=v,g.springForceY+=x,m.springForceX-=v,m.springForceY-=x)},h.prototype.calcRepulsionForce=function(f,p){var g=f.getRect(),m=p.getRect(),y=new Array(2),b=new Array(4),v,x,w,k,D,A,R;if(g.intersects(m)){c.calcSeparationAmount(g,m,y,o.DEFAULT_EDGE_LENGTH/2),A=2*y[0],R=2*y[1];var N=f.noOfChildren*p.noOfChildren/(f.noOfChildren+p.noOfChildren);f.repulsionForceX-=N*A,f.repulsionForceY-=N*R,p.repulsionForceX+=N*A,p.repulsionForceY+=N*R}else this.uniformLeafNodeSizes&&f.getChild()==null&&p.getChild()==null?(v=m.getCenterX()-g.getCenterX(),x=m.getCenterY()-g.getCenterY()):(c.getIntersection(g,m,b),v=b[2]-b[0],x=b[3]-b[1]),Math.abs(v)<o.MIN_REPULSION_DIST&&(v=l.sign(v)*o.MIN_REPULSION_DIST),Math.abs(x)<o.MIN_REPULSION_DIST&&(x=l.sign(x)*o.MIN_REPULSION_DIST),w=v*v+x*x,k=Math.sqrt(w),D=this.repulsionConstant*f.noOfChildren*p.noOfChildren/w,A=D*v/k,R=D*x/k,f.repulsionForceX-=A,f.repulsionForceY-=R,p.repulsionForceX+=A,p.repulsionForceY+=R},h.prototype.calcGravitationalForce=function(f){var p,g,m,y,b,v,x,w;p=f.getOwner(),g=(p.getRight()+p.getLeft())/2,m=(p.getTop()+p.getBottom())/2,y=f.getCenterX()-g,b=f.getCenterY()-m,v=Math.abs(y)+f.getWidth()/2,x=Math.abs(b)+f.getHeight()/2,f.getOwner()==this.graphManager.getRoot()?(w=p.getEstimatedSize()*this.gravityRangeFactor,(v>w||x>w)&&(f.gravitationForceX=-this.gravityConstant*y,f.gravitationForceY=-this.gravityConstant*b)):(w=p.getEstimatedSize()*this.compoundGravityRangeFactor,(v>w||x>w)&&(f.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,f.gravitationForceY=-this.gravityConstant*b*this.compoundGravityConstant))},h.prototype.isConverged=function(){var f,p=!1;return this.totalIterations>this.maxIterations/3&&(p=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),f=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,f||p},h.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},h.prototype.calcNoOfChildrenForAllNodes=function(){for(var f,p=this.graphManager.getAllNodes(),g=0;g<p.length;g++)f=p[g],f.noOfChildren=f.getNoOfChildren()},h.prototype.calcGrid=function(f){var p=0,g=0;p=parseInt(Math.ceil((f.getRight()-f.getLeft())/this.repulsionRange)),g=parseInt(Math.ceil((f.getBottom()-f.getTop())/this.repulsionRange));for(var m=new Array(p),y=0;y<p;y++)m[y]=new Array(g);for(var y=0;y<p;y++)for(var b=0;b<g;b++)m[y][b]=new Array;return m},h.prototype.addNodeToGrid=function(f,p,g){var m=0,y=0,b=0,v=0;m=parseInt(Math.floor((f.getRect().x-p)/this.repulsionRange)),y=parseInt(Math.floor((f.getRect().width+f.getRect().x-p)/this.repulsionRange)),b=parseInt(Math.floor((f.getRect().y-g)/this.repulsionRange)),v=parseInt(Math.floor((f.getRect().height+f.getRect().y-g)/this.repulsionRange));for(var x=m;x<=y;x++)for(var w=b;w<=v;w++)this.grid[x][w].push(f),f.setGridCoordinates(m,y,b,v)},h.prototype.updateGrid=function(){var f,p,g=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),f=0;f<g.length;f++)p=g[f],this.addNodeToGrid(p,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},h.prototype.calculateRepulsionForceOfANode=function(f,p,g,m){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&g||m){var y=new Set;f.surrounding=new Array;for(var b,v=this.grid,x=f.startX-1;x<f.finishX+2;x++)for(var w=f.startY-1;w<f.finishY+2;w++)if(!(x<0||w<0||x>=v.length||w>=v[0].length)){for(var k=0;k<v[x][w].length;k++)if(b=v[x][w][k],!(f.getOwner()!=b.getOwner()||f==b)&&!p.has(b)&&!y.has(b)){var D=Math.abs(f.getCenterX()-b.getCenterX())-(f.getWidth()/2+b.getWidth()/2),A=Math.abs(f.getCenterY()-b.getCenterY())-(f.getHeight()/2+b.getHeight()/2);D<=this.repulsionRange&&A<=this.repulsionRange&&y.add(b)}}f.surrounding=[].concat(s(y))}for(x=0;x<f.surrounding.length;x++)this.calcRepulsionForce(f,f.surrounding[x])},h.prototype.calcRepulsionRange=function(){return 0},n.exports=h}),(function(n,r,i){var s=i(1),a=i(7);function o(c,l,h){s.call(this,c,l,h),this.idealLength=a.DEFAULT_EDGE_LENGTH}o.prototype=Object.create(s.prototype);for(var u in s)o[u]=s[u];n.exports=o}),(function(n,r,i){var s=i(3);function a(u,c,l,h){s.call(this,u,c,l,h),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}a.prototype=Object.create(s.prototype);for(var o in s)a[o]=s[o];a.prototype.setGridCoordinates=function(u,c,l,h){this.startX=u,this.finishX=c,this.startY=l,this.finishY=h},n.exports=a}),(function(n,r,i){function s(a,o){this.width=0,this.height=0,a!==null&&o!==null&&(this.height=o,this.width=a)}s.prototype.getWidth=function(){return this.width},s.prototype.setWidth=function(a){this.width=a},s.prototype.getHeight=function(){return this.height},s.prototype.setHeight=function(a){this.height=a},n.exports=s}),(function(n,r,i){var s=i(14);function a(){this.map={},this.keys=[]}a.prototype.put=function(o,u){var c=s.createID(o);this.contains(c)||(this.map[c]=u,this.keys.push(o))},a.prototype.contains=function(o){return s.createID(o),this.map[o]!=null},a.prototype.get=function(o){var u=s.createID(o);return this.map[u]},a.prototype.keySet=function(){return this.keys},n.exports=a}),(function(n,r,i){var s=i(14);function a(){this.set={}}a.prototype.add=function(o){var u=s.createID(o);this.contains(u)||(this.set[u]=o)},a.prototype.remove=function(o){delete this.set[s.createID(o)]},a.prototype.clear=function(){this.set={}},a.prototype.contains=function(o){return this.set[s.createID(o)]==o},a.prototype.isEmpty=function(){return this.size()===0},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAllTo=function(o){for(var u=Object.keys(this.set),c=u.length,l=0;l<c;l++)o.push(this.set[u[l]])},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAll=function(o){for(var u=o.length,c=0;c<u;c++){var l=o[c];this.add(l)}},n.exports=a}),(function(n,r,i){var s=(function(){function c(l,h){for(var d=0;d<h.length;d++){var f=h[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,h,d){return h&&c(l.prototype,h),d&&c(l,d),l}})();function a(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}var o=i(11),u=(function(){function c(l,h){a(this,c),(h!==null||h!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var d=void 0;l instanceof o?d=l.size():d=l.length,this._quicksort(l,0,d-1)}return s(c,[{key:"_quicksort",value:function(h,d,f){if(d<f){var p=this._partition(h,d,f);this._quicksort(h,d,p),this._quicksort(h,p+1,f)}}},{key:"_partition",value:function(h,d,f){for(var p=this._get(h,d),g=d,m=f;;){for(;this.compareFunction(p,this._get(h,m));)m--;for(;this.compareFunction(this._get(h,g),p);)g++;if(g<m)this._swap(h,g,m),g++,m--;else return m}}},{key:"_get",value:function(h,d){return h instanceof o?h.get_object_at(d):h[d]}},{key:"_set",value:function(h,d,f){h instanceof o?h.set_object_at(d,f):h[d]=f}},{key:"_swap",value:function(h,d,f){var p=this._get(h,d);this._set(h,d,this._get(h,f)),this._set(h,f,p)}},{key:"_defaultCompareFunction",value:function(h,d){return d>h}}]),c})();n.exports=u}),(function(n,r,i){var s=(function(){function u(c,l){for(var h=0;h<l.length;h++){var d=l[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,l,h){return l&&u(c.prototype,l),h&&u(c,h),c}})();function a(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}var o=(function(){function u(c,l){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;a(this,u),this.sequence1=c,this.sequence2=l,this.match_score=h,this.mismatch_penalty=d,this.gap_penalty=f,this.iMax=c.length+1,this.jMax=l.length+1,this.grid=new Array(this.iMax);for(var p=0;p<this.iMax;p++){this.grid[p]=new Array(this.jMax);for(var g=0;g<this.jMax;g++)this.grid[p][g]=0}this.tracebackGrid=new Array(this.iMax);for(var m=0;m<this.iMax;m++){this.tracebackGrid[m]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.tracebackGrid[m][y]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return s(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var l=1;l<this.jMax;l++)this.grid[0][l]=this.grid[0][l-1]+this.gap_penalty,this.tracebackGrid[0][l]=[!1,!1,!0];for(var h=1;h<this.iMax;h++)this.grid[h][0]=this.grid[h-1][0]+this.gap_penalty,this.tracebackGrid[h][0]=[!1,!0,!1];for(var d=1;d<this.iMax;d++)for(var f=1;f<this.jMax;f++){var p=void 0;this.sequence1[d-1]===this.sequence2[f-1]?p=this.grid[d-1][f-1]+this.match_score:p=this.grid[d-1][f-1]+this.mismatch_penalty;var g=this.grid[d-1][f]+this.gap_penalty,m=this.grid[d][f-1]+this.gap_penalty,y=[p,g,m],b=this.arrayAllMaxIndexes(y);this.grid[d][f]=y[b[0]],this.tracebackGrid[d][f]=[b.includes(0),b.includes(1),b.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var l=[];for(l.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});l[0];){var h=l[0],d=this.tracebackGrid[h.pos[0]][h.pos[1]];d[0]&&l.push({pos:[h.pos[0]-1,h.pos[1]-1],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),d[1]&&l.push({pos:[h.pos[0]-1,h.pos[1]],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:"-"+h.seq2}),d[2]&&l.push({pos:[h.pos[0],h.pos[1]-1],seq1:"-"+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),h.pos[0]===0&&h.pos[1]===0&&this.alignments.push({sequence1:h.seq1,sequence2:h.seq2}),l.shift()}return this.alignments}},{key:"getAllIndexes",value:function(l,h){for(var d=[],f=-1;(f=l.indexOf(h,f+1))!==-1;)d.push(f);return d}},{key:"arrayAllMaxIndexes",value:function(l){return this.getAllIndexes(l,Math.max.apply(null,l))}}]),u})();n.exports=o}),(function(n,r,i){var s=function(){};s.FDLayout=i(18),s.FDLayoutConstants=i(7),s.FDLayoutEdge=i(19),s.FDLayoutNode=i(20),s.DimensionD=i(21),s.HashMap=i(22),s.HashSet=i(23),s.IGeometry=i(8),s.IMath=i(9),s.Integer=i(10),s.Point=i(12),s.PointD=i(4),s.RandomSeed=i(16),s.RectangleD=i(13),s.Transform=i(17),s.UniqueIDGeneretor=i(14),s.Quicksort=i(24),s.LinkedList=i(11),s.LGraphObject=i(2),s.LGraph=i(5),s.LEdge=i(1),s.LGraphManager=i(6),s.LNode=i(3),s.Layout=i(15),s.LayoutConstants=i(0),s.NeedlemanWunsch=i(25),n.exports=s}),(function(n,r,i){function s(){this.listeners=[]}var a=s.prototype;a.addListener=function(o,u){this.listeners.push({event:o,callback:u})},a.removeListener=function(o,u){for(var c=this.listeners.length;c>=0;c--){var l=this.listeners[c];l.event===o&&l.callback===u&&this.listeners.splice(c,1)}},a.emit=function(o,u){for(var c=0;c<this.listeners.length;c++){var l=this.listeners[c];o===l.event&&l.callback(u)}},n.exports=s})])})})(vh)),vh.exports}var sW=yh.exports,wE;function LZ(){return wE||(wE=1,(function(t,e){(function(r,i){t.exports=i(iW())})(sW,function(n){return(function(r){var i={};function s(a){if(i[a])return i[a].exports;var o=i[a]={i:a,l:!1,exports:{}};return r[a].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=i,s.i=function(a){return a},s.d=function(a,o,u){s.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:u})},s.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(o,"a",o),o},s.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},s.p="",s(s.s=7)})([(function(r,i){r.exports=n}),(function(r,i,s){var a=s(0).FDLayoutConstants;function o(){}for(var u in a)o[u]=a[u];o.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,o.DEFAULT_RADIAL_SEPARATION=a.DEFAULT_EDGE_LENGTH,o.DEFAULT_COMPONENT_SEPERATION=60,o.TILE=!0,o.TILING_PADDING_VERTICAL=10,o.TILING_PADDING_HORIZONTAL=10,o.TREE_REDUCTION_ON_INCREMENTAL=!1,r.exports=o}),(function(r,i,s){var a=s(0).FDLayoutEdge;function o(c,l,h){a.call(this,c,l,h)}o.prototype=Object.create(a.prototype);for(var u in a)o[u]=a[u];r.exports=o}),(function(r,i,s){var a=s(0).LGraph;function o(c,l,h){a.call(this,c,l,h)}o.prototype=Object.create(a.prototype);for(var u in a)o[u]=a[u];r.exports=o}),(function(r,i,s){var a=s(0).LGraphManager;function o(c){a.call(this,c)}o.prototype=Object.create(a.prototype);for(var u in a)o[u]=a[u];r.exports=o}),(function(r,i,s){var a=s(0).FDLayoutNode,o=s(0).IMath;function u(l,h,d,f){a.call(this,l,h,d,f)}u.prototype=Object.create(a.prototype);for(var c in a)u[c]=a[c];u.prototype.move=function(){var l=this.graphManager.getLayout();this.displacementX=l.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=l.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>l.coolingFactor*l.maxNodeDisplacement&&(this.displacementX=l.coolingFactor*l.maxNodeDisplacement*o.sign(this.displacementX)),Math.abs(this.displacementY)>l.coolingFactor*l.maxNodeDisplacement&&(this.displacementY=l.coolingFactor*l.maxNodeDisplacement*o.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),l.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.propogateDisplacementToChildren=function(l,h){for(var d=this.getChild().getNodes(),f,p=0;p<d.length;p++)f=d[p],f.getChild()==null?(f.moveBy(l,h),f.displacementX+=l,f.displacementY+=h):f.propogateDisplacementToChildren(l,h)},u.prototype.setPred1=function(l){this.pred1=l},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(l){this.next=l},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(l){this.processed=l},u.prototype.isProcessed=function(){return processed},r.exports=u}),(function(r,i,s){var a=s(0).FDLayout,o=s(4),u=s(3),c=s(5),l=s(2),h=s(1),d=s(0).FDLayoutConstants,f=s(0).LayoutConstants,p=s(0).Point,g=s(0).PointD,m=s(0).Layout,y=s(0).Integer,b=s(0).IGeometry,v=s(0).LGraph,x=s(0).Transform;function w(){a.call(this),this.toBeTiled={}}w.prototype=Object.create(a.prototype);for(var k in a)w[k]=a[k];w.prototype.newGraphManager=function(){var D=new o(this);return this.graphManager=D,D},w.prototype.newGraph=function(D){return new u(null,this.graphManager,D)},w.prototype.newNode=function(D){return new c(this.graphManager,D)},w.prototype.newEdge=function(D){return new l(null,null,D)},w.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.isSubLayout||(h.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=h.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=h.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=d.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=d.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=d.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=d.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=d.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=d.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/d.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=d.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},w.prototype.layout=function(){var D=f.DEFAULT_CREATE_BENDS_AS_NEEDED;return D&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},w.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(h.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var A=new Set(this.getAllNodes()),R=this.nodesWithGravity.filter(function(S){return A.has(S)});this.graphManager.setAllNodesToApplyGravitation(R)}}else{var D=this.getFlatForest();if(D.length>0)this.positionNodesRadially(D);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var A=new Set(this.getAllNodes()),R=this.nodesWithGravity.filter(function(N){return A.has(N)});this.graphManager.setAllNodesToApplyGravitation(R),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},w.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%d.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var D=new Set(this.getAllNodes()),A=this.nodesWithGravity.filter(function(L){return D.has(L)});this.graphManager.setAllNodesToApplyGravitation(A),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var R=!this.isTreeGrowing&&!this.isGrowthFinished,N=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(R,N),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},w.prototype.getPositionsData=function(){for(var D=this.graphManager.getAllNodes(),A={},R=0;R<D.length;R++){var N=D[R].rect,L=D[R].id;A[L]={id:L,x:N.getCenterX(),y:N.getCenterY(),w:N.width,h:N.height}}return A},w.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var D=!1;if(d.ANIMATE==="during")this.emit("layoutstarted");else{for(;!D;)D=this.tick();this.graphManager.updateBounds()}},w.prototype.calculateNodesToApplyGravitationTo=function(){var D=[],A,R=this.graphManager.getGraphs(),N=R.length,L;for(L=0;L<N;L++)A=R[L],A.updateConnected(),A.isConnected||(D=D.concat(A.getNodes()));return D},w.prototype.createBendpoints=function(){var D=[];D=D.concat(this.graphManager.getAllEdges());var A=new Set,R;for(R=0;R<D.length;R++){var N=D[R];if(!A.has(N)){var L=N.getSource(),S=N.getTarget();if(L==S)N.getBendpoints().push(new g),N.getBendpoints().push(new g),this.createDummyNodesForBendpoints(N),A.add(N);else{var M=[];if(M=M.concat(L.getEdgeListToNode(S)),M=M.concat(S.getEdgeListToNode(L)),!A.has(M[0])){if(M.length>1){var E;for(E=0;E<M.length;E++){var _=M[E];_.getBendpoints().push(new g),this.createDummyNodesForBendpoints(_)}}M.forEach(function(C){A.add(C)})}}}if(A.size==D.length)break}},w.prototype.positionNodesRadially=function(D){for(var A=new p(0,0),R=Math.ceil(Math.sqrt(D.length)),N=0,L=0,S=0,M=new g(0,0),E=0;E<D.length;E++){E%R==0&&(S=0,L=N,E!=0&&(L+=h.DEFAULT_COMPONENT_SEPERATION),N=0);var _=D[E],C=m.findCenterOfTree(_);A.x=S,A.y=L,M=w.radialLayout(_,C,A),M.y>N&&(N=Math.floor(M.y)),S=Math.floor(M.x+h.DEFAULT_COMPONENT_SEPERATION)}this.transform(new g(f.WORLD_CENTER_X-M.x/2,f.WORLD_CENTER_Y-M.y/2))},w.radialLayout=function(D,A,R){var N=Math.max(this.maxDiagonalInTree(D),h.DEFAULT_RADIAL_SEPARATION);w.branchRadialLayout(A,null,0,359,0,N);var L=v.calculateBounds(D),S=new x;S.setDeviceOrgX(L.getMinX()),S.setDeviceOrgY(L.getMinY()),S.setWorldOrgX(R.x),S.setWorldOrgY(R.y);for(var M=0;M<D.length;M++){var E=D[M];E.transform(S)}var _=new g(L.getMaxX(),L.getMaxY());return S.inverseTransformPoint(_)},w.branchRadialLayout=function(D,A,R,N,L,S){var M=(N-R+1)/2;M<0&&(M+=180);var E=(M+R)%360,_=E*b.TWO_PI/360,C=L*Math.cos(_),T=L*Math.sin(_);D.setCenter(C,T);var F=[];F=F.concat(D.getEdges());var I=F.length;A!=null&&I--;for(var P=0,U=F.length,q,Y=D.getEdgesBetween(A);Y.length>1;){var te=Y[0];Y.splice(0,1);var V=F.indexOf(te);V>=0&&F.splice(V,1),U--,I--}A!=null?q=(F.indexOf(Y[0])+1)%U:q=0;for(var K=Math.abs(N-R)/I,ae=q;P!=I;ae=++ae%U){var se=F[ae].getOtherEnd(D);if(se!=A){var B=(R+P*K)%360,W=(B+K)%360;w.branchRadialLayout(se,D,B,W,L+S,S),P++}}},w.maxDiagonalInTree=function(D){for(var A=y.MIN_VALUE,R=0;R<D.length;R++){var N=D[R],L=N.getDiagonal();L>A&&(A=L)}return A},w.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},w.prototype.groupZeroDegreeMembers=function(){var D=this,A={};this.memberGroups={},this.idToDummyNode={};for(var R=[],N=this.graphManager.getAllNodes(),L=0;L<N.length;L++){var S=N[L],M=S.getParent();this.getNodeDegreeWithChildren(S)===0&&(M.id==null||!this.getToBeTiled(M))&&R.push(S)}for(var L=0;L<R.length;L++){var S=R[L],E=S.getParent().id;typeof A[E]>"u"&&(A[E]=[]),A[E]=A[E].concat(S)}Object.keys(A).forEach(function(_){if(A[_].length>1){var C="DummyCompound_"+_;D.memberGroups[C]=A[_];var T=A[_][0].getParent(),F=new c(D.graphManager);F.id=C,F.paddingLeft=T.paddingLeft||0,F.paddingRight=T.paddingRight||0,F.paddingBottom=T.paddingBottom||0,F.paddingTop=T.paddingTop||0,D.idToDummyNode[C]=F;var I=D.getGraphManager().add(D.newGraph(),F),P=T.getChild();P.add(F);for(var U=0;U<A[_].length;U++){var q=A[_][U];P.remove(q),I.add(q)}}})},w.prototype.clearCompounds=function(){var D={},A={};this.performDFSOnCompounds();for(var R=0;R<this.compoundOrder.length;R++)A[this.compoundOrder[R].id]=this.compoundOrder[R],D[this.compoundOrder[R].id]=[].concat(this.compoundOrder[R].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[R].getChild()),this.compoundOrder[R].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(D,A)},w.prototype.clearZeroDegreeMembers=function(){var D=this,A=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(R){var N=D.idToDummyNode[R];A[R]=D.tileNodes(D.memberGroups[R],N.paddingLeft+N.paddingRight),N.rect.width=A[R].width,N.rect.height=A[R].height})},w.prototype.repopulateCompounds=function(){for(var D=this.compoundOrder.length-1;D>=0;D--){var A=this.compoundOrder[D],R=A.id,N=A.paddingLeft,L=A.paddingTop;this.adjustLocations(this.tiledMemberPack[R],A.rect.x,A.rect.y,N,L)}},w.prototype.repopulateZeroDegreeMembers=function(){var D=this,A=this.tiledZeroDegreePack;Object.keys(A).forEach(function(R){var N=D.idToDummyNode[R],L=N.paddingLeft,S=N.paddingTop;D.adjustLocations(A[R],N.rect.x,N.rect.y,L,S)})},w.prototype.getToBeTiled=function(D){var A=D.id;if(this.toBeTiled[A]!=null)return this.toBeTiled[A];var R=D.getChild();if(R==null)return this.toBeTiled[A]=!1,!1;for(var N=R.getNodes(),L=0;L<N.length;L++){var S=N[L];if(this.getNodeDegree(S)>0)return this.toBeTiled[A]=!1,!1;if(S.getChild()==null){this.toBeTiled[S.id]=!1;continue}if(!this.getToBeTiled(S))return this.toBeTiled[A]=!1,!1}return this.toBeTiled[A]=!0,!0},w.prototype.getNodeDegree=function(D){D.id;for(var A=D.getEdges(),R=0,N=0;N<A.length;N++){var L=A[N];L.getSource().id!==L.getTarget().id&&(R=R+1)}return R},w.prototype.getNodeDegreeWithChildren=function(D){var A=this.getNodeDegree(D);if(D.getChild()==null)return A;for(var R=D.getChild().getNodes(),N=0;N<R.length;N++){var L=R[N];A+=this.getNodeDegreeWithChildren(L)}return A},w.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},w.prototype.fillCompexOrderByDFS=function(D){for(var A=0;A<D.length;A++){var R=D[A];R.getChild()!=null&&this.fillCompexOrderByDFS(R.getChild().getNodes()),this.getToBeTiled(R)&&this.compoundOrder.push(R)}},w.prototype.adjustLocations=function(D,A,R,N,L){A+=N,R+=L;for(var S=A,M=0;M<D.rows.length;M++){var E=D.rows[M];A=S;for(var _=0,C=0;C<E.length;C++){var T=E[C];T.rect.x=A,T.rect.y=R,A+=T.rect.width+D.horizontalPadding,T.rect.height>_&&(_=T.rect.height)}R+=_+D.verticalPadding}},w.prototype.tileCompoundMembers=function(D,A){var R=this;this.tiledMemberPack=[],Object.keys(D).forEach(function(N){var L=A[N];R.tiledMemberPack[N]=R.tileNodes(D[N],L.paddingLeft+L.paddingRight),L.rect.width=R.tiledMemberPack[N].width,L.rect.height=R.tiledMemberPack[N].height})},w.prototype.tileNodes=function(D,A){var R=h.TILING_PADDING_VERTICAL,N=h.TILING_PADDING_HORIZONTAL,L={rows:[],rowWidth:[],rowHeight:[],width:0,height:A,verticalPadding:R,horizontalPadding:N};D.sort(function(E,_){return E.rect.width*E.rect.height>_.rect.width*_.rect.height?-1:E.rect.width*E.rect.height<_.rect.width*_.rect.height?1:0});for(var S=0;S<D.length;S++){var M=D[S];L.rows.length==0?this.insertNodeToRow(L,M,0,A):this.canAddHorizontal(L,M.rect.width,M.rect.height)?this.insertNodeToRow(L,M,this.getShortestRowIndex(L),A):this.insertNodeToRow(L,M,L.rows.length,A),this.shiftToLastRow(L)}return L},w.prototype.insertNodeToRow=function(D,A,R,N){var L=N;if(R==D.rows.length){var S=[];D.rows.push(S),D.rowWidth.push(L),D.rowHeight.push(0)}var M=D.rowWidth[R]+A.rect.width;D.rows[R].length>0&&(M+=D.horizontalPadding),D.rowWidth[R]=M,D.width<M&&(D.width=M);var E=A.rect.height;R>0&&(E+=D.verticalPadding);var _=0;E>D.rowHeight[R]&&(_=D.rowHeight[R],D.rowHeight[R]=E,_=D.rowHeight[R]-_),D.height+=_,D.rows[R].push(A)},w.prototype.getShortestRowIndex=function(D){for(var A=-1,R=Number.MAX_VALUE,N=0;N<D.rows.length;N++)D.rowWidth[N]<R&&(A=N,R=D.rowWidth[N]);return A},w.prototype.getLongestRowIndex=function(D){for(var A=-1,R=Number.MIN_VALUE,N=0;N<D.rows.length;N++)D.rowWidth[N]>R&&(A=N,R=D.rowWidth[N]);return A},w.prototype.canAddHorizontal=function(D,A,R){var N=this.getShortestRowIndex(D);if(N<0)return!0;var L=D.rowWidth[N];if(L+D.horizontalPadding+A<=D.width)return!0;var S=0;D.rowHeight[N]<R&&N>0&&(S=R+D.verticalPadding-D.rowHeight[N]);var M;D.width-L>=A+D.horizontalPadding?M=(D.height+S)/(L+A+D.horizontalPadding):M=(D.height+S)/D.width,S=R+D.verticalPadding;var E;return D.width<A?E=(D.height+S)/A:E=(D.height+S)/D.width,E<1&&(E=1/E),M<1&&(M=1/M),M<E},w.prototype.shiftToLastRow=function(D){var A=this.getLongestRowIndex(D),R=D.rowWidth.length-1,N=D.rows[A],L=N[N.length-1],S=L.width+D.horizontalPadding;if(D.width-D.rowWidth[R]>S&&A!=R){N.splice(-1,1),D.rows[R].push(L),D.rowWidth[A]=D.rowWidth[A]-S,D.rowWidth[R]=D.rowWidth[R]+S,D.width=D.rowWidth[instance.getLongestRowIndex(D)];for(var M=Number.MIN_VALUE,E=0;E<N.length;E++)N[E].height>M&&(M=N[E].height);A>0&&(M+=D.verticalPadding);var _=D.rowHeight[A]+D.rowHeight[R];D.rowHeight[A]=M,D.rowHeight[R]<L.height+D.verticalPadding&&(D.rowHeight[R]=L.height+D.verticalPadding);var C=D.rowHeight[A]+D.rowHeight[R];D.height+=C-_,this.shiftToLastRow(D)}},w.prototype.tilingPreLayout=function(){h.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},w.prototype.tilingPostLayout=function(){h.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},w.prototype.reduceTrees=function(){for(var D=[],A=!0,R;A;){var N=this.graphManager.getAllNodes(),L=[];A=!1;for(var S=0;S<N.length;S++)R=N[S],R.getEdges().length==1&&!R.getEdges()[0].isInterGraph&&R.getChild()==null&&(L.push([R,R.getEdges()[0],R.getOwner()]),A=!0);if(A==!0){for(var M=[],E=0;E<L.length;E++)L[E][0].getEdges().length==1&&(M.push(L[E]),L[E][0].getOwner().remove(L[E][0]));D.push(M),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=D},w.prototype.growTree=function(D){for(var A=D.length,R=D[A-1],N,L=0;L<R.length;L++)N=R[L],this.findPlaceforPrunedNode(N),N[2].add(N[0]),N[2].add(N[1],N[1].source,N[1].target);D.splice(D.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},w.prototype.findPlaceforPrunedNode=function(D){var A,R,N=D[0];N==D[1].source?R=D[1].target:R=D[1].source;var L=R.startX,S=R.finishX,M=R.startY,E=R.finishY,_=0,C=0,T=0,F=0,I=[_,T,C,F];if(M>0)for(var P=L;P<=S;P++)I[0]+=this.grid[P][M-1].length+this.grid[P][M].length-1;if(S<this.grid.length-1)for(var P=M;P<=E;P++)I[1]+=this.grid[S+1][P].length+this.grid[S][P].length-1;if(E<this.grid[0].length-1)for(var P=L;P<=S;P++)I[2]+=this.grid[P][E+1].length+this.grid[P][E].length-1;if(L>0)for(var P=M;P<=E;P++)I[3]+=this.grid[L-1][P].length+this.grid[L][P].length-1;for(var U=y.MAX_VALUE,q,Y,te=0;te<I.length;te++)I[te]<U?(U=I[te],q=1,Y=te):I[te]==U&&q++;if(q==3&&U==0)I[0]==0&&I[1]==0&&I[2]==0?A=1:I[0]==0&&I[1]==0&&I[3]==0?A=0:I[0]==0&&I[2]==0&&I[3]==0?A=3:I[1]==0&&I[2]==0&&I[3]==0&&(A=2);else if(q==2&&U==0){var V=Math.floor(Math.random()*2);I[0]==0&&I[1]==0?V==0?A=0:A=1:I[0]==0&&I[2]==0?V==0?A=0:A=2:I[0]==0&&I[3]==0?V==0?A=0:A=3:I[1]==0&&I[2]==0?V==0?A=1:A=2:I[1]==0&&I[3]==0?V==0?A=1:A=3:V==0?A=2:A=3}else if(q==4&&U==0){var V=Math.floor(Math.random()*4);A=V}else A=Y;A==0?N.setCenter(R.getCenterX(),R.getCenterY()-R.getHeight()/2-d.DEFAULT_EDGE_LENGTH-N.getHeight()/2):A==1?N.setCenter(R.getCenterX()+R.getWidth()/2+d.DEFAULT_EDGE_LENGTH+N.getWidth()/2,R.getCenterY()):A==2?N.setCenter(R.getCenterX(),R.getCenterY()+R.getHeight()/2+d.DEFAULT_EDGE_LENGTH+N.getHeight()/2):N.setCenter(R.getCenterX()-R.getWidth()/2-d.DEFAULT_EDGE_LENGTH-N.getWidth()/2,R.getCenterY())},r.exports=w}),(function(r,i,s){var a={};a.layoutBase=s(0),a.CoSEConstants=s(1),a.CoSEEdge=s(2),a.CoSEGraph=s(3),a.CoSEGraphManager=s(4),a.CoSELayout=s(6),a.CoSENode=s(5),r.exports=a})])})})(yh)),yh.exports}function Cn(t){return typeof t=="object"&&t!==null&&typeof t.$type=="string"}function pi(t){return typeof t=="object"&&t!==null&&typeof t.$refText=="string"}function aW(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.type=="string"&&typeof t.path=="string"}function bh(t){return typeof t=="object"&&t!==null&&Cn(t.container)&&pi(t.reference)&&typeof t.message=="string"}class oW{constructor(){this.subtypes={},this.allSubtypes={}}isInstance(e,n){return Cn(e)&&this.isSubtype(e.$type,n)}isSubtype(e,n){if(e===n)return!0;let r=this.subtypes[e];r||(r=this.subtypes[e]={});const i=r[n];if(i!==void 0)return i;{const s=this.computeIsSubtype(e,n);return r[n]=s,s}}getAllSubTypes(e){const n=this.allSubtypes[e];if(n)return n;{const r=this.getAllTypes(),i=[];for(const s of r)this.isSubtype(s,e)&&i.push(s);return this.allSubtypes[e]=i,i}}}function Dc(t){return typeof t=="object"&&t!==null&&Array.isArray(t.content)}function OT(t){return typeof t=="object"&&t!==null&&typeof t.tokenType=="object"}function PT(t){return Dc(t)&&typeof t.fullText=="string"}class fn{constructor(e,n){this.startFn=e,this.nextFn=n}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){const e=this.iterator();let n=0,r=e.next();for(;!r.done;)n++,r=e.next();return n}toArray(){const e=[],n=this.iterator();let r;do r=n.next(),r.value!==void 0&&e.push(r.value);while(!r.done);return e}toSet(){return new Set(this)}toMap(e,n){const r=this.map(i=>[e?e(i):i,n?n(i):i]);return new Map(r)}toString(){return this.join()}concat(e){return new fn(()=>({first:this.startFn(),firstDone:!1,iterator:e[Symbol.iterator]()}),n=>{let r;if(!n.firstDone){do if(r=this.nextFn(n.first),!r.done)return r;while(!r.done);n.firstDone=!0}do if(r=n.iterator.next(),!r.done)return r;while(!r.done);return rr})}join(e=","){const n=this.iterator();let r="",i,s=!1;do i=n.next(),i.done||(s&&(r+=e),r+=uW(i.value)),s=!0;while(!i.done);return r}indexOf(e,n=0){const r=this.iterator();let i=0,s=r.next();for(;!s.done;){if(i>=n&&s.value===e)return i;s=r.next(),i++}return-1}every(e){const n=this.iterator();let r=n.next();for(;!r.done;){if(!e(r.value))return!1;r=n.next()}return!0}some(e){const n=this.iterator();let r=n.next();for(;!r.done;){if(e(r.value))return!0;r=n.next()}return!1}forEach(e){const n=this.iterator();let r=0,i=n.next();for(;!i.done;)e(i.value,r),i=n.next(),r++}map(e){return new fn(this.startFn,n=>{const{done:r,value:i}=this.nextFn(n);return r?rr:{done:!1,value:e(i)}})}filter(e){return new fn(this.startFn,n=>{let r;do if(r=this.nextFn(n),!r.done&&e(r.value))return r;while(!r.done);return rr})}nonNullable(){return this.filter(e=>e!=null)}reduce(e,n){const r=this.iterator();let i=n,s=r.next();for(;!s.done;)i===void 0?i=s.value:i=e(i,s.value),s=r.next();return i}reduceRight(e,n){return this.recursiveReduce(this.iterator(),e,n)}recursiveReduce(e,n,r){const i=e.next();if(i.done)return r;const s=this.recursiveReduce(e,n,r);return s===void 0?i.value:n(s,i.value)}find(e){const n=this.iterator();let r=n.next();for(;!r.done;){if(e(r.value))return r.value;r=n.next()}}findIndex(e){const n=this.iterator();let r=0,i=n.next();for(;!i.done;){if(e(i.value))return r;i=n.next(),r++}return-1}includes(e){const n=this.iterator();let r=n.next();for(;!r.done;){if(r.value===e)return!0;r=n.next()}return!1}flatMap(e){return new fn(()=>({this:this.startFn()}),n=>{do{if(n.iterator){const s=n.iterator.next();if(s.done)n.iterator=void 0;else return s}const{done:r,value:i}=this.nextFn(n.this);if(!r){const s=e(i);if(Ff(s))n.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}}while(n.iterator);return rr})}flat(e){if(e===void 0&&(e=1),e<=0)return this;const n=e>1?this.flat(e-1):this;return new fn(()=>({this:n.startFn()}),r=>{do{if(r.iterator){const a=r.iterator.next();if(a.done)r.iterator=void 0;else return a}const{done:i,value:s}=n.nextFn(r.this);if(!i)if(Ff(s))r.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}while(r.iterator);return rr})}head(){const n=this.iterator().next();if(!n.done)return n.value}tail(e=1){return new fn(()=>{const n=this.startFn();for(let r=0;r<e;r++)if(this.nextFn(n).done)return n;return n},this.nextFn)}limit(e){return new fn(()=>({size:0,state:this.startFn()}),n=>(n.size++,n.size>e?rr:this.nextFn(n.state)))}distinct(e){return new fn(()=>({set:new Set,internalState:this.startFn()}),n=>{let r;do if(r=this.nextFn(n.internalState),!r.done){const i=e?e(r.value):r.value;if(!n.set.has(i))return n.set.add(i),r}while(!r.done);return rr})}exclude(e,n){const r=new Set;for(const i of e){const s=n?n(i):i;r.add(s)}return this.filter(i=>{const s=n?n(i):i;return!r.has(s)})}}function uW(t){return typeof t=="string"?t:typeof t>"u"?"undefined":typeof t.toString=="function"?t.toString():Object.prototype.toString.call(t)}function Ff(t){return!!t&&typeof t[Symbol.iterator]=="function"}const cW=new fn(()=>{},()=>rr),rr=Object.freeze({done:!0,value:void 0});function pn(...t){if(t.length===1){const e=t[0];if(e instanceof fn)return e;if(Ff(e))return new fn(()=>e[Symbol.iterator](),n=>n.next());if(typeof e.length=="number")return new fn(()=>({index:0}),n=>n.index<e.length?{done:!1,value:e[n.index++]}:rr)}return t.length>1?new fn(()=>({collIndex:0,arrIndex:0}),e=>{do{if(e.iterator){const n=e.iterator.next();if(!n.done)return n;e.iterator=void 0}if(e.array){if(e.arrIndex<e.array.length)return{done:!1,value:e.array[e.arrIndex++]};e.array=void 0,e.arrIndex=0}if(e.collIndex<t.length){const n=t[e.collIndex++];Ff(n)?e.iterator=n[Symbol.iterator]():n&&typeof n.length=="number"&&(e.array=n)}}while(e.iterator||e.array||e.collIndex<t.length);return rr}):cW}class Hy extends fn{constructor(e,n,r){super(()=>({iterators:r!=null&&r.includeRoot?[[e][Symbol.iterator]()]:[n(e)[Symbol.iterator]()],pruned:!1}),i=>{for(i.pruned&&(i.iterators.pop(),i.pruned=!1);i.iterators.length>0;){const a=i.iterators[i.iterators.length-1].next();if(a.done)i.iterators.pop();else return i.iterators.push(n(a.value)[Symbol.iterator]()),a}return rr})}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}}var rm;(function(t){function e(s){return s.reduce((a,o)=>a+o,0)}t.sum=e;function n(s){return s.reduce((a,o)=>a*o,0)}t.product=n;function r(s){return s.reduce((a,o)=>Math.min(a,o))}t.min=r;function i(s){return s.reduce((a,o)=>Math.max(a,o))}t.max=i})(rm||(rm={}));function im(t){return new Hy(t,e=>Dc(e)?e.content:[],{includeRoot:!0})}function lW(t,e){for(;t.container;)if(t=t.container,t===e)return!0;return!1}function sm(t){return{start:{character:t.startColumn-1,line:t.startLine-1},end:{character:t.endColumn,line:t.endLine-1}}}function Sf(t){if(!t)return;const{offset:e,end:n,range:r}=t;return{range:r,offset:e,end:n,length:n-e}}var Mi;(function(t){t[t.Before=0]="Before",t[t.After=1]="After",t[t.OverlapFront=2]="OverlapFront",t[t.OverlapBack=3]="OverlapBack",t[t.Inside=4]="Inside",t[t.Outside=5]="Outside"})(Mi||(Mi={}));function hW(t,e){if(t.end.line<e.start.line||t.end.line===e.start.line&&t.end.character<=e.start.character)return Mi.Before;if(t.start.line>e.end.line||t.start.line===e.end.line&&t.start.character>=e.end.character)return Mi.After;const n=t.start.line>e.start.line||t.start.line===e.start.line&&t.start.character>=e.start.character,r=t.end.line<e.end.line||t.end.line===e.end.line&&t.end.character<=e.end.character;return n&&r?Mi.Inside:n?Mi.OverlapBack:r?Mi.OverlapFront:Mi.Outside}function fW(t,e){return hW(t,e)>Mi.After}const dW=/^[\w\p{L}]$/u;function pW(t,e){if(t){const n=gW(t,!0);if(n&&_E(n,e))return n;if(PT(t)){const r=t.content.findIndex(i=>!i.hidden);for(let i=r-1;i>=0;i--){const s=t.content[i];if(_E(s,e))return s}}}}function _E(t,e){return OT(t)&&e.includes(t.tokenType.name)}function gW(t,e=!0){for(;t.container;){const n=t.container;let r=n.content.indexOf(t);for(;r>0;){r--;const i=n.content[r];if(e||!i.hidden)return i}t=n}}class $T extends Error{constructor(e,n){super(e?`${n} at ${e.range.start.line}:${e.range.start.character}`:n)}}function Xc(t){throw new Error("Error! The input value was not handled.")}const Rl="AbstractRule",Nl="AbstractType",_p="Condition",AE="TypeDefinition",Ap="ValueLiteral",gu="AbstractElement";function mW(t){return it.isInstance(t,gu)}const Ll="ArrayLiteral",Ml="ArrayType",mu="BooleanLiteral";function yW(t){return it.isInstance(t,mu)}const yu="Conjunction";function vW(t){return it.isInstance(t,yu)}const vu="Disjunction";function bW(t){return it.isInstance(t,vu)}const Il="Grammar",Cp="GrammarImport",bu="InferredType";function BT(t){return it.isInstance(t,bu)}const xu="Interface";function UT(t){return it.isInstance(t,xu)}const Tp="NamedArgument",Eu="Negation";function xW(t){return it.isInstance(t,Eu)}const Ol="NumberLiteral",Pl="Parameter",Du="ParameterReference";function EW(t){return it.isInstance(t,Du)}const wu="ParserRule";function Ar(t){return it.isInstance(t,wu)}const $l="ReferenceType",xh="ReturnType";function DW(t){return it.isInstance(t,xh)}const _u="SimpleType";function wW(t){return it.isInstance(t,_u)}const Bl="StringLiteral",Ra="TerminalRule";function ma(t){return it.isInstance(t,Ra)}const Au="Type";function GT(t){return it.isInstance(t,Au)}const kp="TypeAttribute",Ul="UnionType",Cu="Action";function Qd(t){return it.isInstance(t,Cu)}const Tu="Alternatives";function HT(t){return it.isInstance(t,Tu)}const ku="Assignment";function ra(t){return it.isInstance(t,ku)}const Fu="CharacterRange";function _W(t){return it.isInstance(t,Fu)}const Su="CrossReference";function Wy(t){return it.isInstance(t,Su)}const Ru="EndOfFile";function AW(t){return it.isInstance(t,Ru)}const Nu="Group";function zy(t){return it.isInstance(t,Nu)}const Lu="Keyword";function ia(t){return it.isInstance(t,Lu)}const Mu="NegatedToken";function CW(t){return it.isInstance(t,Mu)}const Iu="RegexToken";function TW(t){return it.isInstance(t,Iu)}const Ou="RuleCall";function sa(t){return it.isInstance(t,Ou)}const Pu="TerminalAlternatives";function kW(t){return it.isInstance(t,Pu)}const $u="TerminalGroup";function FW(t){return it.isInstance(t,$u)}const Bu="TerminalRuleCall";function SW(t){return it.isInstance(t,Bu)}const Uu="UnorderedGroup";function WT(t){return it.isInstance(t,Uu)}const Gu="UntilToken";function RW(t){return it.isInstance(t,Gu)}const Hu="Wildcard";function NW(t){return it.isInstance(t,Hu)}class zT extends oW{getAllTypes(){return[gu,Rl,Nl,Cu,Tu,Ll,Ml,ku,mu,Fu,_p,yu,Su,vu,Ru,Il,Cp,Nu,bu,xu,Lu,Tp,Mu,Eu,Ol,Pl,Du,wu,$l,Iu,xh,Ou,_u,Bl,Pu,$u,Ra,Bu,Au,kp,AE,Ul,Uu,Gu,Ap,Hu]}computeIsSubtype(e,n){switch(e){case Cu:case Tu:case ku:case Fu:case Su:case Ru:case Nu:case Lu:case Mu:case Iu:case Ou:case Pu:case $u:case Bu:case Uu:case Gu:case Hu:return this.isSubtype(gu,n);case Ll:case Ol:case Bl:return this.isSubtype(Ap,n);case Ml:case $l:case _u:case Ul:return this.isSubtype(AE,n);case mu:return this.isSubtype(_p,n)||this.isSubtype(Ap,n);case yu:case vu:case Eu:case Du:return this.isSubtype(_p,n);case bu:case xu:case Au:return this.isSubtype(Nl,n);case wu:return this.isSubtype(Rl,n)||this.isSubtype(Nl,n);case Ra:return this.isSubtype(Rl,n);default:return!1}}getReferenceType(e){const n=`${e.container.$type}:${e.property}`;switch(n){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return Nl;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return Rl;case"Grammar:usedGrammars":return Il;case"NamedArgument:parameter":case"ParameterReference:parameter":return Pl;case"TerminalRuleCall:rule":return Ra;default:throw new Error(`${n} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case gu:return{name:gu,properties:[{name:"cardinality"},{name:"lookahead"}]};case Ll:return{name:Ll,properties:[{name:"elements",defaultValue:[]}]};case Ml:return{name:Ml,properties:[{name:"elementType"}]};case mu:return{name:mu,properties:[{name:"true",defaultValue:!1}]};case yu:return{name:yu,properties:[{name:"left"},{name:"right"}]};case vu:return{name:vu,properties:[{name:"left"},{name:"right"}]};case Il:return{name:Il,properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case Cp:return{name:Cp,properties:[{name:"path"}]};case bu:return{name:bu,properties:[{name:"name"}]};case xu:return{name:xu,properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case Tp:return{name:Tp,properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case Eu:return{name:Eu,properties:[{name:"value"}]};case Ol:return{name:Ol,properties:[{name:"value"}]};case Pl:return{name:Pl,properties:[{name:"name"}]};case Du:return{name:Du,properties:[{name:"parameter"}]};case wu:return{name:wu,properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case $l:return{name:$l,properties:[{name:"referenceType"}]};case xh:return{name:xh,properties:[{name:"name"}]};case _u:return{name:_u,properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case Bl:return{name:Bl,properties:[{name:"value"}]};case Ra:return{name:Ra,properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case Au:return{name:Au,properties:[{name:"name"},{name:"type"}]};case kp:return{name:kp,properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case Ul:return{name:Ul,properties:[{name:"types",defaultValue:[]}]};case Cu:return{name:Cu,properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case Tu:return{name:Tu,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case ku:return{name:ku,properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case Fu:return{name:Fu,properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case Su:return{name:Su,properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case Ru:return{name:Ru,properties:[{name:"cardinality"},{name:"lookahead"}]};case Nu:return{name:Nu,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case Lu:return{name:Lu,properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case Mu:return{name:Mu,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case Iu:return{name:Iu,properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case Ou:return{name:Ou,properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case Pu:return{name:Pu,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case $u:return{name:$u,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case Bu:return{name:Bu,properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case Uu:return{name:Uu,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case Gu:return{name:Gu,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case Hu:return{name:Hu,properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:e,properties:[]}}}}const it=new zT;function LW(t){for(const[e,n]of Object.entries(t))e.startsWith("$")||(Array.isArray(n)?n.forEach((r,i)=>{Cn(r)&&(r.$container=t,r.$containerProperty=e,r.$containerIndex=i)}):Cn(n)&&(n.$container=t,n.$containerProperty=e))}function e0(t,e){let n=t;for(;n;){if(e(n))return n;n=n.$container}}function vs(t){const n=am(t).$document;if(!n)throw new Error("AST node has no document.");return n}function am(t){for(;t.$container;)t=t.$container;return t}function Yy(t,e){if(!t)throw new Error("Node must be an AstNode.");const n=e==null?void 0:e.range;return new fn(()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0}),r=>{for(;r.keyIndex<r.keys.length;){const i=r.keys[r.keyIndex];if(!i.startsWith("$")){const s=t[i];if(Cn(s)){if(r.keyIndex++,CE(s,n))return{done:!1,value:s}}else if(Array.isArray(s)){for(;r.arrayIndex<s.length;){const a=r.arrayIndex++,o=s[a];if(Cn(o)&&CE(o,n))return{done:!1,value:o}}r.arrayIndex=0}}r.keyIndex++}return rr})}function Vc(t,e){if(!t)throw new Error("Root node must be an AstNode.");return new Hy(t,n=>Yy(n,e))}function Va(t,e){if(!t)throw new Error("Root node must be an AstNode.");return new Hy(t,n=>Yy(n,e),{includeRoot:!0})}function CE(t,e){var n;if(!e)return!0;const r=(n=t.$cstNode)===null||n===void 0?void 0:n.range;return r?fW(r,e):!1}function YT(t){return new fn(()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0}),e=>{for(;e.keyIndex<e.keys.length;){const n=e.keys[e.keyIndex];if(!n.startsWith("$")){const r=t[n];if(pi(r))return e.keyIndex++,{done:!1,value:{reference:r,container:t,property:n}};if(Array.isArray(r)){for(;e.arrayIndex<r.length;){const i=e.arrayIndex++,s=r[i];if(pi(s))return{done:!1,value:{reference:s,container:t,property:n,index:i}}}e.arrayIndex=0}}e.keyIndex++}return rr})}function MW(t,e){const n=t.getTypeMetaData(e.$type),r=e;for(const i of n.properties)i.defaultValue!==void 0&&r[i.name]===void 0&&(r[i.name]=XT(i.defaultValue))}function XT(t){return Array.isArray(t)?[...t.map(XT)]:t}function Oe(t){return t.charCodeAt(0)}function Fp(t,e){Array.isArray(t)?t.forEach(function(n){e.push(n)}):e.push(t)}function Jo(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}function ka(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function IW(){throw Error("Internal Error - Should never get here!")}function TE(t){return t.type==="Character"}const Rf=[];for(let t=Oe("0");t<=Oe("9");t++)Rf.push(t);const Nf=[Oe("_")].concat(Rf);for(let t=Oe("a");t<=Oe("z");t++)Nf.push(t);for(let t=Oe("A");t<=Oe("Z");t++)Nf.push(t);const kE=[Oe(" "),Oe("\f"),Oe(`
`),Oe("\r"),Oe("	"),Oe("\v"),Oe("	"),Oe(""),Oe(""),Oe(""),Oe(""),Oe(""),Oe(""),Oe(""),Oe(""),Oe(""),Oe(""),Oe(""),Oe(""),Oe(""),Oe("\u2028"),Oe("\u2029"),Oe(""),Oe(""),Oe(""),Oe("\uFEFF")],OW=/[0-9a-fA-F]/,Gl=/[0-9]/,PW=/[1-9]/;class VT{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const n=this.disjunction();this.consumeChar("/");const r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Jo(r,"global");break;case"i":Jo(r,"ignoreCase");break;case"m":Jo(r,"multiLine");break;case"u":Jo(r,"unicode");break;case"y":Jo(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:n,loc:this.loc(0)}}disjunction(){const e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){const e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break}ka(n);const r=this.disjunction();return this.consumeChar(")"),{type:n,value:r,loc:this.loc(e)}}return IW()}quantifier(e=!1){let n;const r=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:i,atMost:i};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),n={atLeast:i,atMost:s}):n={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;ka(n);break}if(!(e===!0&&n===void 0)&&ka(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(r),n}atom(){let e;const n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),ka(e))return e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[Oe(`
`),Oe("\r"),Oe("\u2028"),Oe("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=Rf;break;case"D":e=Rf,n=!0;break;case"s":e=kE;break;case"S":e=kE,n=!0;break;case"w":e=Nf;break;case"W":e=Nf,n=!0;break}if(ka(e))return{type:"Set",value:e,complement:n}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=Oe("\f");break;case"n":e=Oe(`
`);break;case"r":e=Oe("\r");break;case"t":e=Oe("	");break;case"v":e=Oe("\v");break}if(ka(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:Oe("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:Oe(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:Oe(e)}}}characterClass(){const e=[];let n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){const r=this.classAtom();if(r.type,TE(r)&&this.isRangeDash()){this.consumeChar("-");const i=this.classAtom();if(i.type,TE(i)){if(i.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:i.value})}else Fp(r.value,e),e.push(Oe("-")),Fp(i.value,e)}else Fp(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:Oe("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const n=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:e,value:n};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(PW.test(e)===!1)throw Error("Expecting a positive integer");for(;Gl.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Gl.test(e)===!1)throw Error("Expecting an integer");for(;Gl.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:Oe(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Gl.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let i=0;i<e;i++){const s=this.popChar();if(OW.test(s)===!1)throw Error("Expecting a HexDecimal digits");n+=s}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class t0{visitChildren(e){for(const n in e){const r=e[n];e.hasOwnProperty(n)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}const $W=/\r?\n/gm,BW=new VT;class UW extends t0{constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){const n=String.fromCharCode(e.value);if(!this.multiline&&n===`
`&&(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const r=n0(n);this.endRegexpStack.push(r),this.isStarting&&(this.startRegexp+=r)}}visitSet(e){if(!this.multiline){const n=this.regex.substring(e.loc.begin,e.loc.end),r=new RegExp(n);this.multiline=!!`
`.match(r)}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const n=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(n),this.isStarting&&(this.startRegexp+=n)}}visitChildren(e){e.type==="Group"&&e.quantifier||super.visitChildren(e)}}const Sp=new UW;function GW(t){try{return typeof t=="string"&&(t=new RegExp(t)),t=t.toString(),Sp.reset(t),Sp.visit(BW.pattern(t)),Sp.multiline}catch{return!1}}const HW=`\f
\r	\v \u2028\u2029\uFEFF`.split("");function om(t){const e=typeof t=="string"?new RegExp(t):t;return HW.some(n=>e.test(n))}function n0(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function WW(t){return Array.prototype.map.call(t,e=>/\w/.test(e)?`[${e.toLowerCase()}${e.toUpperCase()}]`:n0(e)).join("")}function zW(t,e){const n=YW(t),r=e.match(n);return!!r&&r[0].length>0}function YW(t){typeof t=="string"&&(t=new RegExp(t));const e=t,n=t.source;let r=0;function i(){let s="",a;function o(c){s+=n.substr(r,c),r+=c}function u(c){s+="(?:"+n.substr(r,c)+"|$)",r+=c}for(;r<n.length;)switch(n[r]){case"\\":switch(n[r+1]){case"c":u(3);break;case"x":u(4);break;case"u":e.unicode?n[r+2]==="{"?u(n.indexOf("}",r)-r+1):u(6):u(2);break;case"p":case"P":e.unicode?u(n.indexOf("}",r)-r+1):u(2);break;case"k":u(n.indexOf(">",r)-r+1);break;default:u(2);break}break;case"[":a=/\[(?:\\.|.)*?\]/g,a.lastIndex=r,a=a.exec(n)||[],u(a[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":o(1);break;case"{":a=/\{\d+,?\d*\}/g,a.lastIndex=r,a=a.exec(n),a?o(a[0].length):u(1);break;case"(":if(n[r+1]==="?")switch(n[r+2]){case":":s+="(?:",r+=3,s+=i()+"|$)";break;case"=":s+="(?=",r+=3,s+=i()+")";break;case"!":a=r,r+=3,i(),s+=n.substr(a,r-a);break;case"<":switch(n[r+3]){case"=":case"!":a=r,r+=4,i(),s+=n.substr(a,r-a);break;default:o(n.indexOf(">",r)-r+1),s+=i()+"|$)";break}break}else o(1),s+=i()+"|$)";break;case")":return++r,s;default:u(1);break}return s}return new RegExp(i(),t.flags)}function XW(t){return t.rules.find(e=>Ar(e)&&e.entry)}function VW(t){return t.rules.filter(e=>ma(e)&&e.hidden)}function qT(t,e){const n=new Set,r=XW(t);if(!r)return new Set(t.rules);const i=[r].concat(VW(t));for(const a of i)jT(a,n,e);const s=new Set;for(const a of t.rules)(n.has(a.name)||ma(a)&&a.hidden)&&s.add(a);return s}function jT(t,e,n){e.add(t.name),Vc(t).forEach(r=>{if(sa(r)||n){const i=r.rule.ref;i&&!e.has(i.name)&&jT(i,e,n)}})}function qW(t){if(t.terminal)return t.terminal;if(t.type.ref){const e=ZT(t.type.ref);return e==null?void 0:e.terminal}}function jW(t){return t.hidden&&!om(jy(t))}function KW(t,e){return!t||!e?[]:Xy(t,e,t.astNode,!0)}function KT(t,e,n){if(!t||!e)return;const r=Xy(t,e,t.astNode,!0);if(r.length!==0)return n!==void 0?n=Math.max(0,Math.min(n,r.length-1)):n=0,r[n]}function Xy(t,e,n,r){if(!r){const i=e0(t.grammarSource,ra);if(i&&i.feature===e)return[t]}return Dc(t)&&t.astNode===n?t.content.flatMap(i=>Xy(i,e,n,!1)):[]}function ZW(t,e,n){if(!t)return;const r=JW(t,e,t==null?void 0:t.astNode);if(r.length!==0)return n!==void 0?n=Math.max(0,Math.min(n,r.length-1)):n=0,r[n]}function JW(t,e,n){if(t.astNode!==n)return[];if(ia(t.grammarSource)&&t.grammarSource.value===e)return[t];const r=im(t).iterator();let i;const s=[];do if(i=r.next(),!i.done){const a=i.value;a.astNode===n?ia(a.grammarSource)&&a.grammarSource.value===e&&s.push(a):r.prune()}while(!i.done);return s}function QW(t){var e;const n=t.astNode;for(;n===((e=t.container)===null||e===void 0?void 0:e.astNode);){const r=e0(t.grammarSource,ra);if(r)return r;t=t.container}}function ZT(t){let e=t;return BT(e)&&(Qd(e.$container)?e=e.$container.$container:Ar(e.$container)?e=e.$container:Xc(e.$container)),JT(t,e,new Map)}function JT(t,e,n){var r;function i(s,a){let o;return e0(s,ra)||(o=JT(a,a,n)),n.set(t,o),o}if(n.has(t))return n.get(t);n.set(t,void 0);for(const s of Vc(e)){if(ra(s)&&s.feature.toLowerCase()==="name")return n.set(t,s),s;if(sa(s)&&Ar(s.rule.ref))return i(s,s.rule.ref);if(wW(s)&&(!((r=s.typeRef)===null||r===void 0)&&r.ref))return i(s,s.typeRef.ref)}}function QT(t){return ek(t,new Set)}function ek(t,e){if(e.has(t))return!0;e.add(t);for(const n of Vc(t))if(sa(n)){if(!n.rule.ref||Ar(n.rule.ref)&&!ek(n.rule.ref,e))return!1}else{if(ra(n))return!1;if(Qd(n))return!1}return!!t.definition}function Vy(t){if(t.inferredType)return t.inferredType.name;if(t.dataType)return t.dataType;if(t.returnType){const e=t.returnType.ref;if(e){if(Ar(e))return e.name;if(UT(e)||GT(e))return e.name}}}function qy(t){var e;if(Ar(t))return QT(t)?t.name:(e=Vy(t))!==null&&e!==void 0?e:t.name;if(UT(t)||GT(t)||DW(t))return t.name;if(Qd(t)){const n=ez(t);if(n)return n}else if(BT(t))return t.name;throw new Error("Cannot get name of Unknown Type")}function ez(t){var e;if(t.inferredType)return t.inferredType.name;if(!((e=t.type)===null||e===void 0)&&e.ref)return qy(t.type.ref)}function tz(t){var e,n,r;return ma(t)?(n=(e=t.type)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:"string":(r=Vy(t))!==null&&r!==void 0?r:t.name}function jy(t){const e={s:!1,i:!1,u:!1},n=ko(t.definition,e),r=Object.entries(e).filter(([,i])=>i).map(([i])=>i).join("");return new RegExp(n,r)}const Ky=/[\s\S]/.source;function ko(t,e){if(kW(t))return nz(t);if(FW(t))return rz(t);if(_W(t))return az(t);if(SW(t)){const n=t.rule.ref;if(!n)throw new Error("Missing rule reference.");return Hi(ko(n.definition),{cardinality:t.cardinality,lookahead:t.lookahead})}else{if(CW(t))return sz(t);if(RW(t))return iz(t);if(TW(t)){const n=t.regex.lastIndexOf("/"),r=t.regex.substring(1,n),i=t.regex.substring(n+1);return e&&(e.i=i.includes("i"),e.s=i.includes("s"),e.u=i.includes("u")),Hi(r,{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1})}else{if(NW(t))return Hi(Ky,{cardinality:t.cardinality,lookahead:t.lookahead});throw new Error(`Invalid terminal element: ${t==null?void 0:t.$type}`)}}}function nz(t){return Hi(t.elements.map(e=>ko(e)).join("|"),{cardinality:t.cardinality,lookahead:t.lookahead})}function rz(t){return Hi(t.elements.map(e=>ko(e)).join(""),{cardinality:t.cardinality,lookahead:t.lookahead})}function iz(t){return Hi(`${Ky}*?${ko(t.terminal)}`,{cardinality:t.cardinality,lookahead:t.lookahead})}function sz(t){return Hi(`(?!${ko(t.terminal)})${Ky}*?`,{cardinality:t.cardinality,lookahead:t.lookahead})}function az(t){return t.right?Hi(`[${Rp(t.left)}-${Rp(t.right)}]`,{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1}):Hi(Rp(t.left),{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1})}function Rp(t){return n0(t.value)}function Hi(t,e){var n;return(e.wrap!==!1||e.lookahead)&&(t=`(${(n=e.lookahead)!==null&&n!==void 0?n:""}${t})`),e.cardinality?`${t}${e.cardinality}`:t}function oz(t){const e=[],n=t.Grammar;for(const r of n.rules)ma(r)&&jW(r)&&GW(jy(r))&&e.push(r.name);return{multilineCommentRules:e,nameRegexp:dW}}function um(t){console&&console.error&&console.error(`Error: ${t}`)}function tk(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function nk(t){const e=new Date().getTime(),n=t();return{time:new Date().getTime()-e,value:n}}function rk(t){function e(){}e.prototype=t;const n=new e;function r(){return typeof n.bar}return r(),r(),t}function uz(t){return cz(t)?t.LABEL:t.name}function cz(t){return cr(t.LABEL)&&t.LABEL!==""}class Ti{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),Me(this.definition,n=>{n.accept(e)})}}class Bn extends Ti{constructor(e){super([]),this.idx=1,ur(this,Vr(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Fo extends Ti{constructor(e){super(e.definition),this.orgText="",ur(this,Vr(e,n=>n!==void 0))}}class qn extends Ti{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,ur(this,Vr(e,n=>n!==void 0))}}class gn extends Ti{constructor(e){super(e.definition),this.idx=1,ur(this,Vr(e,n=>n!==void 0))}}class dr extends Ti{constructor(e){super(e.definition),this.idx=1,ur(this,Vr(e,n=>n!==void 0))}}class pr extends Ti{constructor(e){super(e.definition),this.idx=1,ur(this,Vr(e,n=>n!==void 0))}}class At extends Ti{constructor(e){super(e.definition),this.idx=1,ur(this,Vr(e,n=>n!==void 0))}}class jn extends Ti{constructor(e){super(e.definition),this.idx=1,ur(this,Vr(e,n=>n!==void 0))}}class Kn extends Ti{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,ur(this,Vr(e,n=>n!==void 0))}}class pt{constructor(e){this.idx=1,ur(this,Vr(e,n=>n!==void 0))}accept(e){e.visit(this)}}function lz(t){return Ce(t,Eh)}function Eh(t){function e(n){return Ce(n,Eh)}if(t instanceof Bn){const n={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return cr(t.label)&&(n.label=t.label),n}else{if(t instanceof qn)return{type:"Alternative",definition:e(t.definition)};if(t instanceof gn)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof dr)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof pr)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Eh(new pt({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof jn)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Eh(new pt({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof At)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof Kn)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof pt){const n={type:"Terminal",name:t.terminalType.name,label:uz(t.terminalType),idx:t.idx};cr(t.label)&&(n.terminalLabel=t.label);const r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=Wi(r)?r.source:r),n}else{if(t instanceof Fo)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}class So{visit(e){const n=e;switch(n.constructor){case Bn:return this.visitNonTerminal(n);case qn:return this.visitAlternative(n);case gn:return this.visitOption(n);case dr:return this.visitRepetitionMandatory(n);case pr:return this.visitRepetitionMandatoryWithSeparator(n);case jn:return this.visitRepetitionWithSeparator(n);case At:return this.visitRepetition(n);case Kn:return this.visitAlternation(n);case pt:return this.visitTerminal(n);case Fo:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function hz(t){return t instanceof qn||t instanceof gn||t instanceof At||t instanceof dr||t instanceof pr||t instanceof jn||t instanceof pt||t instanceof Fo}function Lf(t,e=[]){return t instanceof gn||t instanceof At||t instanceof jn?!0:t instanceof Kn?Sw(t.definition,r=>Lf(r,e)):t instanceof Bn&&Gn(e,t)?!1:t instanceof Ti?(t instanceof Bn&&e.push(t),$r(t.definition,r=>Lf(r,e))):!1}function fz(t){return t instanceof Kn}function ui(t){if(t instanceof Bn)return"SUBRULE";if(t instanceof gn)return"OPTION";if(t instanceof Kn)return"OR";if(t instanceof dr)return"AT_LEAST_ONE";if(t instanceof pr)return"AT_LEAST_ONE_SEP";if(t instanceof jn)return"MANY_SEP";if(t instanceof At)return"MANY";if(t instanceof pt)return"CONSUME";throw Error("non exhaustive match")}class r0{walk(e,n=[]){Me(e.definition,(r,i)=>{const s=ln(e.definition,i+1);if(r instanceof Bn)this.walkProdRef(r,s,n);else if(r instanceof pt)this.walkTerminal(r,s,n);else if(r instanceof qn)this.walkFlat(r,s,n);else if(r instanceof gn)this.walkOption(r,s,n);else if(r instanceof dr)this.walkAtLeastOne(r,s,n);else if(r instanceof pr)this.walkAtLeastOneSep(r,s,n);else if(r instanceof jn)this.walkManySep(r,s,n);else if(r instanceof At)this.walkMany(r,s,n);else if(r instanceof Kn)this.walkOr(r,s,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,r){}walkProdRef(e,n,r){}walkFlat(e,n,r){const i=n.concat(r);this.walk(e,i)}walkOption(e,n,r){const i=n.concat(r);this.walk(e,i)}walkAtLeastOne(e,n,r){const i=[new gn({definition:e.definition})].concat(n,r);this.walk(e,i)}walkAtLeastOneSep(e,n,r){const i=FE(e,n,r);this.walk(e,i)}walkMany(e,n,r){const i=[new gn({definition:e.definition})].concat(n,r);this.walk(e,i)}walkManySep(e,n,r){const i=FE(e,n,r);this.walk(e,i)}walkOr(e,n,r){const i=n.concat(r);Me(e.definition,s=>{const a=new qn({definition:[s]});this.walk(a,i)})}}function FE(t,e,n){return[new gn({definition:[new pt({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}function qc(t){if(t instanceof Bn)return qc(t.referencedRule);if(t instanceof pt)return gz(t);if(hz(t))return dz(t);if(fz(t))return pz(t);throw Error("non exhaustive match")}function dz(t){let e=[];const n=t.definition;let r=0,i=n.length>r,s,a=!0;for(;i&&a;)s=n[r],a=Lf(s),e=e.concat(qc(s)),r=r+1,i=n.length>r;return Ym(e)}function pz(t){const e=Ce(t.definition,n=>qc(n));return Ym(Br(e))}function gz(t){return[t.terminalType]}const ik="_~IN~_";class mz extends r0{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,r){}walkProdRef(e,n,r){const i=vz(e.referencedRule,e.idx)+this.topProd.name,s=n.concat(r),a=new qn({definition:s}),o=qc(a);this.follows[i]=o}}function yz(t){const e={};return Me(t,n=>{const r=new mz(n).startWalking();ur(e,r)}),e}function vz(t,e){return t.name+e+ik}let Dh={};const bz=new VT;function i0(t){const e=t.toString();if(Dh.hasOwnProperty(e))return Dh[e];{const n=bz.pattern(e);return Dh[e]=n,n}}function xz(){Dh={}}const sk="Complement Sets are not supported for first char optimization",Mf=`Unable to use "first char" lexer optimizations:
`;function Ez(t,e=!1){try{const n=i0(t);return cm(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===sk)e&&tk(`${Mf}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),um(`${Mf}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function cm(t,e,n){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)cm(t.value[i],e,n);break;case"Alternative":const r=t.value;for(let i=0;i<r.length;i++){const s=r[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=s;switch(a.type){case"Character":Hl(a.value,e,n);break;case"Set":if(a.complement===!0)throw Error(sk);Me(a.value,u=>{if(typeof u=="number")Hl(u,e,n);else{const c=u;if(n===!0)for(let l=c.from;l<=c.to;l++)Hl(l,e,n);else{for(let l=c.from;l<=c.to&&l<zu;l++)Hl(l,e,n);if(c.to>=zu){const l=c.from>=zu?c.from:zu,h=c.to,d=bs(l),f=bs(h);for(let p=d;p<=f;p++)e[p]=p}}}});break;case"Group":cm(a.value,e,n);break;default:throw Error("Non Exhaustive Match")}const o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&lm(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return Zt(e)}function Hl(t,e,n){const r=bs(t);e[r]=r,n===!0&&Dz(t,e)}function Dz(t,e){const n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){const i=bs(r.charCodeAt(0));e[i]=i}else{const i=n.toLowerCase();if(i!==n){const s=bs(i.charCodeAt(0));e[s]=s}}}function SE(t,e){return Za(t.value,n=>{if(typeof n=="number")return Gn(e,n);{const r=n;return Za(e,i=>r.from<=i&&i<=r.to)!==void 0}})}function lm(t){const e=t.quantifier;return e&&e.atLeast===0?!0:t.value?xr(t.value)?$r(t.value,lm):lm(t.value):!1}class wz extends t0{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){Gn(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?SE(e,this.targetCharCodes)===void 0&&(this.found=!0):SE(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Zy(t,e){if(e instanceof RegExp){const n=i0(e),r=new wz(t);return r.visit(n),r.found}else return Za(e,n=>Gn(t,n.charCodeAt(0)))!==void 0}const aa="PATTERN",Wu="defaultMode",Wl="modes";let ak=typeof new RegExp("(?:)").sticky=="boolean";function _z(t,e){e=Xm(e,{useSticky:ak,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(b,v)=>v()});const n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{Vz()});let r;n("Reject Lexer.NA",()=>{r=td(t,b=>b[aa]===Xn.NA)});let i=!1,s;n("Transform Patterns",()=>{i=!1,s=Ce(r,b=>{const v=b[aa];if(Wi(v)){const x=v.source;return x.length===1&&x!=="^"&&x!=="$"&&x!=="."&&!v.ignoreCase?x:x.length===2&&x[0]==="\\"&&!Gn(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],x[1])?x[1]:e.useSticky?NE(v):RE(v)}else{if(ca(v))return i=!0,{exec:v};if(typeof v=="object")return i=!0,v;if(typeof v=="string"){if(v.length===1)return v;{const x=v.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),w=new RegExp(x);return e.useSticky?NE(w):RE(w)}}else throw Error("non exhaustive match")}})});let a,o,u,c,l;n("misc mapping",()=>{a=Ce(r,b=>b.tokenTypeIdx),o=Ce(r,b=>{const v=b.GROUP;if(v!==Xn.SKIPPED){if(cr(v))return v;if(zi(v))return!1;throw Error("non exhaustive match")}}),u=Ce(r,b=>{const v=b.LONGER_ALT;if(v)return xr(v)?Ce(v,w=>yv(r,w)):[yv(r,v)]}),c=Ce(r,b=>b.PUSH_MODE),l=Ce(r,b=>Fe(b,"POP_MODE"))});let h;n("Line Terminator Handling",()=>{const b=ck(e.lineTerminatorCharacters);h=Ce(r,v=>!1),e.positionTracking!=="onlyOffset"&&(h=Ce(r,v=>Fe(v,"LINE_BREAKS")?!!v.LINE_BREAKS:uk(v,b)===!1&&Zy(b,v.PATTERN)))});let d,f,p,g;n("Misc Mapping #2",()=>{d=Ce(r,ok),f=Ce(s,zz),p=lr(r,(b,v)=>{const x=v.GROUP;return cr(x)&&x!==Xn.SKIPPED&&(b[x]=[]),b},{}),g=Ce(s,(b,v)=>({pattern:s[v],longerAlt:u[v],canLineTerminator:h[v],isCustom:d[v],short:f[v],group:o[v],push:c[v],pop:l[v],tokenTypeIdx:a[v],tokenType:r[v]}))});let m=!0,y=[];return e.safeMode||n("First Char Optimization",()=>{y=lr(r,(b,v,x)=>{if(typeof v.PATTERN=="string"){const w=v.PATTERN.charCodeAt(0),k=bs(w);Np(b,k,g[x])}else if(xr(v.START_CHARS_HINT)){let w;Me(v.START_CHARS_HINT,k=>{const D=typeof k=="string"?k.charCodeAt(0):k,A=bs(D);w!==A&&(w=A,Np(b,A,g[x]))})}else if(Wi(v.PATTERN))if(v.PATTERN.unicode)m=!1,e.ensureOptimizations&&um(`${Mf}	Unable to analyze < ${v.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const w=Ez(v.PATTERN,e.ensureOptimizations);ft(w)&&(m=!1),Me(w,k=>{Np(b,k,g[x])})}else e.ensureOptimizations&&um(`${Mf}	TokenType: <${v.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),m=!1;return b},[])}),{emptyGroups:p,patternIdxToConfig:g,charCodeToPatternIdxToConfig:y,hasCustom:i,canBeOptimized:m}}function Az(t,e){let n=[];const r=Tz(t);n=n.concat(r.errors);const i=kz(r.valid),s=i.valid;return n=n.concat(i.errors),n=n.concat(Cz(s)),n=n.concat(Oz(s)),n=n.concat(Pz(s,e)),n=n.concat($z(s)),n}function Cz(t){let e=[];const n=Cr(t,r=>Wi(r[aa]));return e=e.concat(Sz(n)),e=e.concat(Lz(n)),e=e.concat(Mz(n)),e=e.concat(Iz(n)),e=e.concat(Rz(n)),e}function Tz(t){const e=Cr(t,i=>!Fe(i,aa)),n=Ce(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:Ct.MISSING_PATTERN,tokenTypes:[i]})),r=nd(t,e);return{errors:n,valid:r}}function kz(t){const e=Cr(t,i=>{const s=i[aa];return!Wi(s)&&!ca(s)&&!Fe(s,"exec")&&!cr(s)}),n=Ce(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Ct.INVALID_PATTERN,tokenTypes:[i]})),r=nd(t,e);return{errors:n,valid:r}}const Fz=/[^\\][$]/;function Sz(t){class e extends t0{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}const n=Cr(t,i=>{const s=i.PATTERN;try{const a=i0(s),o=new e;return o.visit(a),o.found}catch{return Fz.test(s.source)}});return Ce(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Ct.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Rz(t){const e=Cr(t,r=>r.PATTERN.test(""));return Ce(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:Ct.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}const Nz=/[^\\[][\^]|^\^/;function Lz(t){class e extends t0{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}const n=Cr(t,i=>{const s=i.PATTERN;try{const a=i0(s),o=new e;return o.visit(a),o.found}catch{return Nz.test(s.source)}});return Ce(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Ct.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Mz(t){const e=Cr(t,r=>{const i=r[aa];return i instanceof RegExp&&(i.multiline||i.global)});return Ce(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Ct.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function Iz(t){const e=[];let n=Ce(t,s=>lr(t,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!Gn(e,o)&&o.PATTERN!==Xn.NA&&(e.push(o),a.push(o)),a),[]));n=Cc(n);const r=Cr(n,s=>s.length>1);return Ce(r,s=>{const a=Ce(s,u=>u.name);return{message:`The same RegExp pattern ->${Hr(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:Ct.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function Oz(t){const e=Cr(t,r=>{if(!Fe(r,"GROUP"))return!1;const i=r.GROUP;return i!==Xn.SKIPPED&&i!==Xn.NA&&!cr(i)});return Ce(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Ct.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function Pz(t,e){const n=Cr(t,i=>i.PUSH_MODE!==void 0&&!Gn(e,i.PUSH_MODE));return Ce(n,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:Ct.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function $z(t){const e=[],n=lr(t,(r,i,s)=>{const a=i.PATTERN;return a===Xn.NA||(cr(a)?r.push({str:a,idx:s,tokenType:i}):Wi(a)&&Uz(a)&&r.push({str:a.source,idx:s,tokenType:i})),r},[]);return Me(t,(r,i)=>{Me(n,({str:s,idx:a,tokenType:o})=>{if(i<a&&Bz(s,r.PATTERN)){const u=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:u,type:Ct.UNREACHABLE_PATTERN,tokenTypes:[r,o]})}})}),e}function Bz(t,e){if(Wi(e)){const n=e.exec(t);return n!==null&&n.index===0}else{if(ca(e))return e(t,0,[],{});if(Fe(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function Uz(t){return Za([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>t.source.indexOf(n)!==-1)===void 0}function RE(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function NE(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function Gz(t,e,n){const r=[];return Fe(t,Wu)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Wu+`> property in its definition
`,type:Ct.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Fe(t,Wl)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Wl+`> property in its definition
`,type:Ct.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Fe(t,Wl)&&Fe(t,Wu)&&!Fe(t.modes,t.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${Wu}: <${t.defaultMode}>which does not exist
`,type:Ct.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Fe(t,Wl)&&Me(t.modes,(i,s)=>{Me(i,(a,o)=>{if(zi(a))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:Ct.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(Fe(a,"LONGER_ALT")){const u=xr(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];Me(u,c=>{!zi(c)&&!Gn(i,c)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${c.name}> on token <${a.name}> outside of mode <${s}>
`,type:Ct.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}function Hz(t,e,n){const r=[];let i=!1;const s=Cc(Br(Zt(t.modes))),a=td(s,u=>u[aa]===Xn.NA),o=ck(n);return e&&Me(a,u=>{const c=uk(u,o);if(c!==!1){const h={message:Xz(u,c),type:c.issue,tokenType:u};r.push(h)}else Fe(u,"LINE_BREAKS")?u.LINE_BREAKS===!0&&(i=!0):Zy(o,u.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:Ct.NO_LINE_BREAKS_FLAGS}),r}function Wz(t){const e={},n=nc(t);return Me(n,r=>{const i=t[r];if(xr(i))e[r]=[];else throw Error("non exhaustive match")}),e}function ok(t){const e=t.PATTERN;if(Wi(e))return!1;if(ca(e))return!0;if(Fe(e,"exec"))return!0;if(cr(e))return!1;throw Error("non exhaustive match")}function zz(t){return cr(t)&&t.length===1?t.charCodeAt(0):!1}const Yz={test:function(t){const e=t.length;for(let n=this.lastIndex;n<e;n++){const r=t.charCodeAt(n);if(r===10)return this.lastIndex=n+1,!0;if(r===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function uk(t,e){if(Fe(t,"LINE_BREAKS"))return!1;if(Wi(t.PATTERN)){try{Zy(e,t.PATTERN)}catch(n){return{issue:Ct.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(cr(t.PATTERN))return!1;if(ok(t))return{issue:Ct.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Xz(t,e){if(e.issue===Ct.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===Ct.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function ck(t){return Ce(t,n=>cr(n)?n.charCodeAt(0):n)}function Np(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}const zu=256;let wh=[];function bs(t){return t<zu?t:wh[t]}function Vz(){if(ft(wh)){wh=new Array(65536);for(let t=0;t<65536;t++)wh[t]=t>255?255+~~(t/255):t}}function jc(t,e){const n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function If(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let LE=1;const lk={};function Kc(t){const e=qz(t);jz(e),Zz(e),Kz(e),Me(e,n=>{n.isParent=n.categoryMatches.length>0})}function qz(t){let e=mn(t),n=t,r=!0;for(;r;){n=Cc(Br(Ce(n,s=>s.CATEGORIES)));const i=nd(n,e);e=e.concat(i),ft(i)?r=!1:n=i}return e}function jz(t){Me(t,e=>{fk(e)||(lk[LE]=e,e.tokenTypeIdx=LE++),ME(e)&&!xr(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),ME(e)||(e.CATEGORIES=[]),Jz(e)||(e.categoryMatches=[]),Qz(e)||(e.categoryMatchesMap={})})}function Kz(t){Me(t,e=>{e.categoryMatches=[],Me(e.categoryMatchesMap,(n,r)=>{e.categoryMatches.push(lk[r].tokenTypeIdx)})})}function Zz(t){Me(t,e=>{hk([],e)})}function hk(t,e){Me(t,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),Me(e.CATEGORIES,n=>{const r=t.concat(e);Gn(r,n)||hk(r,n)})}function fk(t){return Fe(t,"tokenTypeIdx")}function ME(t){return Fe(t,"CATEGORIES")}function Jz(t){return Fe(t,"categoryMatches")}function Qz(t){return Fe(t,"categoryMatchesMap")}function eY(t){return Fe(t,"tokenTypeIdx")}const hm={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,n,r,i){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}};var Ct;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(Ct||(Ct={}));const Yu={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:hm,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Yu);class Xn{constructor(e,n=Yu){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${i}>`);const{time:o,value:u}=nk(s),c=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&c(`${a}<-- <${i}> time: ${o}ms`),this.traceInitIndent--,u}else return s()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=ur({},Yu,n);const r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Yu.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Yz;else if(this.config.lineTerminatorCharacters===Yu.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),xr(e)?i={modes:{defaultMode:mn(e)},defaultMode:Wu}:(s=!1,i=mn(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Gz(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Hz(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},Me(i.modes,(o,u)=>{i.modes[u]=td(o,c=>zi(c))});const a=nc(i.modes);if(Me(i.modes,(o,u)=>{this.TRACE_INIT(`Mode: <${u}> processing`,()=>{if(this.modes.push(u),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Az(o,a))}),ft(this.lexerDefinitionErrors)){Kc(o);let c;this.TRACE_INIT("analyzeTokenTypes",()=>{c=_z(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[u]=c.patternIdxToConfig,this.charCodeToPatternIdxToConfig[u]=c.charCodeToPatternIdxToConfig,this.emptyGroups=ur({},this.emptyGroups,c.emptyGroups),this.hasCustom=c.hasCustom||this.hasCustom,this.canModeBeOptimized[u]=c.canBeOptimized}})}),this.defaultMode=i.defaultMode,!ft(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const u=Ce(this.lexerDefinitionErrors,c=>c.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+u)}Me(this.lexerDefinitionWarning,o=>{tk(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(ak?(this.chopInput=vv,this.match=this.matchWithTest):(this.updateLastIndex=qt,this.match=this.matchWithExec),s&&(this.handleModes=qt),this.trackStartLines===!1&&(this.computeNewColumn=vv),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=qt),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=lr(this.canModeBeOptimized,(u,c,l)=>(c===!1&&u.push(l),u),[]);if(n.ensureOptimizations&&!ft(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{xz()}),this.TRACE_INIT("toFastProperties",()=>{rk(this)})})}tokenize(e,n=this.defaultMode){if(!ft(this.lexerDefinitionErrors)){const i=Ce(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let r,i,s,a,o,u,c,l,h,d,f,p,g,m,y;const b=e,v=b.length;let x=0,w=0;const k=this.hasCustom?0:Math.floor(e.length/10),D=new Array(k),A=[];let R=this.trackStartLines?1:void 0,N=this.trackStartLines?1:void 0;const L=Wz(this.emptyGroups),S=this.trackStartLines,M=this.config.lineTerminatorsPattern;let E=0,_=[],C=[];const T=[],F=[];Object.freeze(F);let I;function P(){return _}function U(K){const ae=bs(K),se=C[ae];return se===void 0?F:se}const q=K=>{if(T.length===1&&K.tokenType.PUSH_MODE===void 0){const ae=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(K);A.push({offset:K.startOffset,line:K.startLine,column:K.startColumn,length:K.image.length,message:ae})}else{T.pop();const ae=Ja(T);_=this.patternIdxToConfig[ae],C=this.charCodeToPatternIdxToConfig[ae],E=_.length;const se=this.canModeBeOptimized[ae]&&this.config.safeMode===!1;C&&se?I=U:I=P}};function Y(K){T.push(K),C=this.charCodeToPatternIdxToConfig[K],_=this.patternIdxToConfig[K],E=_.length,E=_.length;const ae=this.canModeBeOptimized[K]&&this.config.safeMode===!1;C&&ae?I=U:I=P}Y.call(this,n);let te;const V=this.config.recoveryEnabled;for(;x<v;){u=null;const K=b.charCodeAt(x),ae=I(K),se=ae.length;for(r=0;r<se;r++){te=ae[r];const B=te.pattern;c=null;const W=te.short;if(W!==!1?K===W&&(u=B):te.isCustom===!0?(y=B.exec(b,x,D,L),y!==null?(u=y[0],y.payload!==void 0&&(c=y.payload)):u=null):(this.updateLastIndex(B,x),u=this.match(B,e,x)),u!==null){if(o=te.longerAlt,o!==void 0){const Q=o.length;for(s=0;s<Q;s++){const H=_[o[s]],pe=H.pattern;if(l=null,H.isCustom===!0?(y=pe.exec(b,x,D,L),y!==null?(a=y[0],y.payload!==void 0&&(l=y.payload)):a=null):(this.updateLastIndex(pe,x),a=this.match(pe,e,x)),a&&a.length>u.length){u=a,c=l,te=H;break}}}break}}if(u!==null){if(h=u.length,d=te.group,d!==void 0&&(f=te.tokenTypeIdx,p=this.createTokenInstance(u,x,f,te.tokenType,R,N,h),this.handlePayload(p,c),d===!1?w=this.addToken(D,w,p):L[d].push(p)),e=this.chopInput(e,h),x=x+h,N=this.computeNewColumn(N,h),S===!0&&te.canLineTerminator===!0){let B=0,W,Q;M.lastIndex=0;do W=M.test(u),W===!0&&(Q=M.lastIndex-1,B++);while(W===!0);B!==0&&(R=R+B,N=h-Q,this.updateTokenEndLineColumnLocation(p,d,Q,B,R,N,h))}this.handleModes(te,q,Y,p)}else{const B=x,W=R,Q=N;let H=V===!1;for(;H===!1&&x<v;)for(e=this.chopInput(e,1),x++,i=0;i<E;i++){const pe=_[i],J=pe.pattern,Be=pe.short;if(Be!==!1?b.charCodeAt(x)===Be&&(H=!0):pe.isCustom===!0?H=J.exec(b,x,D,L)!==null:(this.updateLastIndex(J,x),H=J.exec(e)!==null),H===!0)break}if(g=x-B,N=this.computeNewColumn(N,g),m=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(b,B,g,W,Q),A.push({offset:B,line:W,column:Q,length:g,message:m}),V===!1)break}}return this.hasCustom||(D.length=w),{tokens:D,groups:L,errors:A}}handleModes(e,n,r,i){if(e.pop===!0){const s=e.push;n(i),s!==void 0&&r.call(this,s)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,r,i,s,a,o){let u,c;n!==void 0&&(u=r===o-1,c=u?-1:0,i===1&&u===!0||(e.endLine=s+c,e.endColumn=a-1+-c))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,r,i){return{image:e,startOffset:n,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,n,r,i,s,a){return{image:e,startOffset:n,startLine:s,startColumn:a,tokenTypeIdx:r,tokenType:i}}createFullToken(e,n,r,i,s,a,o){return{image:e,startOffset:n,endOffset:n+o-1,startLine:s,endLine:s,startColumn:a,endColumn:a+o-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,n,r){return e.push(r),n}addTokenUsingMemberAccess(e,n,r){return e[n]=r,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,r){return e.test(n)===!0?n.substring(r,e.lastIndex):null}matchWithExec(e,n){const r=e.exec(n);return r!==null?r[0]:null}}Xn.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";Xn.NA=/NOT_APPLICABLE/;function qa(t){return dk(t)?t.LABEL:t.name}function dk(t){return cr(t.LABEL)&&t.LABEL!==""}const tY="parent",IE="categories",OE="label",PE="group",$E="push_mode",BE="pop_mode",UE="longer_alt",GE="line_breaks",HE="start_chars_hint";function pk(t){return nY(t)}function nY(t){const e=t.pattern,n={};if(n.name=t.name,zi(e)||(n.PATTERN=e),Fe(t,tY))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return Fe(t,IE)&&(n.CATEGORIES=t[IE]),Kc([n]),Fe(t,OE)&&(n.LABEL=t[OE]),Fe(t,PE)&&(n.GROUP=t[PE]),Fe(t,BE)&&(n.POP_MODE=t[BE]),Fe(t,$E)&&(n.PUSH_MODE=t[$E]),Fe(t,UE)&&(n.LONGER_ALT=t[UE]),Fe(t,GE)&&(n.LINE_BREAKS=t[GE]),Fe(t,HE)&&(n.START_CHARS_HINT=t[HE]),n}const xs=pk({name:"EOF",pattern:Xn.NA});Kc([xs]);function Jy(t,e,n,r,i,s,a,o){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function gk(t,e){return jc(t,e)}const Oa={buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:r}){return`Expecting ${dk(t)?`--> ${qa(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:i}){const s="Expecting: ",o=`
but found: '`+Hr(e).image+"'";if(r)return s+r+o;{const u=lr(t,(d,f)=>d.concat(f),[]),c=Ce(u,d=>`[${Ce(d,f=>qa(f)).join(", ")}]`),h=`one of these possible Token sequences:
${Ce(c,(d,f)=>`  ${f+1}. ${d}`).join(`
`)}`;return s+h+o}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){const i="Expecting: ",a=`
but found: '`+Hr(e).image+"'";if(n)return i+n+a;{const u=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${Ce(t,c=>`[${Ce(c,l=>qa(l)).join(",")}]`).join(" ,")}>`;return i+u+a}}};Object.freeze(Oa);const rY={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},Ws={buildDuplicateFoundError(t,e){function n(l){return l instanceof pt?l.terminalType.name:l instanceof Bn?l.nonTerminalName:""}const r=t.name,i=Hr(e),s=i.idx,a=ui(i),o=n(i),u=s>0;let c=`->${a}${u?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return c=c.replace(/[ \t]+/g," "),c=c.replace(/\s\s+/g,`
`),c},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){const e=Ce(t.prefixPath,i=>qa(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=Ce(t.prefixPath,i=>qa(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;let r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(t){let e=ui(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){const e=t.topLevelRule.name,n=Ce(t.leftRecursionPath,s=>s.name),r=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof Fo?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function iY(t,e){const n=new sY(t,e);return n.resolveRefs(),n.errors}class sY extends So{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){Me(Zt(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{const r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:Un.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class aY extends r0{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=mn(this.path.ruleStack).reverse(),this.occurrenceStack=mn(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const i=n.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){ft(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class oY extends aY{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const i=n.concat(r),s=new qn({definition:i});this.possibleTokTypes=qc(s),this.found=!0}}}class s0 extends r0{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class uY extends s0{walkMany(e,n,r){if(e.idx===this.occurrence){const i=Hr(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof pt&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,n,r)}}class WE extends s0{walkManySep(e,n,r){if(e.idx===this.occurrence){const i=Hr(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof pt&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,n,r)}}class cY extends s0{walkAtLeastOne(e,n,r){if(e.idx===this.occurrence){const i=Hr(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof pt&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,n,r)}}class zE extends s0{walkAtLeastOneSep(e,n,r){if(e.idx===this.occurrence){const i=Hr(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof pt&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,n,r)}}function fm(t,e,n=[]){n=mn(n);let r=[],i=0;function s(o){return o.concat(ln(t,i+1))}function a(o){const u=fm(s(o),e,n);return r.concat(u)}for(;n.length<e&&i<t.length;){const o=t[i];if(o instanceof qn)return a(o.definition);if(o instanceof Bn)return a(o.definition);if(o instanceof gn)r=a(o.definition);else if(o instanceof dr){const u=o.definition.concat([new At({definition:o.definition})]);return a(u)}else if(o instanceof pr){const u=[new qn({definition:o.definition}),new At({definition:[new pt({terminalType:o.separator})].concat(o.definition)})];return a(u)}else if(o instanceof jn){const u=o.definition.concat([new At({definition:[new pt({terminalType:o.separator})].concat(o.definition)})]);r=a(u)}else if(o instanceof At){const u=o.definition.concat([new At({definition:o.definition})]);r=a(u)}else{if(o instanceof Kn)return Me(o.definition,u=>{ft(u.definition)===!1&&(r=a(u.definition))}),r;if(o instanceof pt)n.push(o.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:n,suffixDef:ln(t,i)}),r}function mk(t,e,n,r){const i="EXIT_NONE_TERMINAL",s=[i],a="EXIT_ALTERNATIVE";let o=!1;const u=e.length,c=u-r-1,l=[],h=[];for(h.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!ft(h);){const d=h.pop();if(d===a){o&&Ja(h).idx<=c&&h.pop();continue}const f=d.def,p=d.idx,g=d.ruleStack,m=d.occurrenceStack;if(ft(f))continue;const y=f[0];if(y===i){const b={idx:p,def:ln(f),ruleStack:rc(g),occurrenceStack:rc(m)};h.push(b)}else if(y instanceof pt)if(p<u-1){const b=p+1,v=e[b];if(n(v,y.terminalType)){const x={idx:b,def:ln(f),ruleStack:g,occurrenceStack:m};h.push(x)}}else if(p===u-1)l.push({nextTokenType:y.terminalType,nextTokenOccurrence:y.idx,ruleStack:g,occurrenceStack:m}),o=!0;else throw Error("non exhaustive match");else if(y instanceof Bn){const b=mn(g);b.push(y.nonTerminalName);const v=mn(m);v.push(y.idx);const x={idx:p,def:y.definition.concat(s,ln(f)),ruleStack:b,occurrenceStack:v};h.push(x)}else if(y instanceof gn){const b={idx:p,def:ln(f),ruleStack:g,occurrenceStack:m};h.push(b),h.push(a);const v={idx:p,def:y.definition.concat(ln(f)),ruleStack:g,occurrenceStack:m};h.push(v)}else if(y instanceof dr){const b=new At({definition:y.definition,idx:y.idx}),v=y.definition.concat([b],ln(f)),x={idx:p,def:v,ruleStack:g,occurrenceStack:m};h.push(x)}else if(y instanceof pr){const b=new pt({terminalType:y.separator}),v=new At({definition:[b].concat(y.definition),idx:y.idx}),x=y.definition.concat([v],ln(f)),w={idx:p,def:x,ruleStack:g,occurrenceStack:m};h.push(w)}else if(y instanceof jn){const b={idx:p,def:ln(f),ruleStack:g,occurrenceStack:m};h.push(b),h.push(a);const v=new pt({terminalType:y.separator}),x=new At({definition:[v].concat(y.definition),idx:y.idx}),w=y.definition.concat([x],ln(f)),k={idx:p,def:w,ruleStack:g,occurrenceStack:m};h.push(k)}else if(y instanceof At){const b={idx:p,def:ln(f),ruleStack:g,occurrenceStack:m};h.push(b),h.push(a);const v=new At({definition:y.definition,idx:y.idx}),x=y.definition.concat([v],ln(f)),w={idx:p,def:x,ruleStack:g,occurrenceStack:m};h.push(w)}else if(y instanceof Kn)for(let b=y.definition.length-1;b>=0;b--){const v=y.definition[b],x={idx:p,def:v.definition.concat(ln(f)),ruleStack:g,occurrenceStack:m};h.push(x),h.push(a)}else if(y instanceof qn)h.push({idx:p,def:y.definition.concat(ln(f)),ruleStack:g,occurrenceStack:m});else if(y instanceof Fo)h.push(lY(y,p,g,m));else throw Error("non exhaustive match")}return l}function lY(t,e,n,r){const i=mn(n);i.push(t.name);const s=mn(r);return s.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:s}}var bt;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(bt||(bt={}));function Qy(t){if(t instanceof gn||t==="Option")return bt.OPTION;if(t instanceof At||t==="Repetition")return bt.REPETITION;if(t instanceof dr||t==="RepetitionMandatory")return bt.REPETITION_MANDATORY;if(t instanceof pr||t==="RepetitionMandatoryWithSeparator")return bt.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof jn||t==="RepetitionWithSeparator")return bt.REPETITION_WITH_SEPARATOR;if(t instanceof Kn||t==="Alternation")return bt.ALTERNATION;throw Error("non exhaustive match")}function YE(t){const{occurrence:e,rule:n,prodType:r,maxLookahead:i}=t,s=Qy(r);return s===bt.ALTERNATION?a0(e,n,i):o0(e,n,s,i)}function hY(t,e,n,r,i,s){const a=a0(t,e,n),o=bk(a)?If:jc;return s(a,r,o,i)}function fY(t,e,n,r,i,s){const a=o0(t,e,i,n),o=bk(a)?If:jc;return s(a[0],o,r)}function dY(t,e,n,r){const i=t.length,s=$r(t,a=>$r(a,o=>o.length===1));if(e)return function(a){const o=Ce(a,u=>u.GATE);for(let u=0;u<i;u++){const c=t[u],l=c.length,h=o[u];if(!(h!==void 0&&h.call(this)===!1))e:for(let d=0;d<l;d++){const f=c[d],p=f.length;for(let g=0;g<p;g++){const m=this.LA(g+1);if(n(m,f[g])===!1)continue e}return u}}};if(s&&!r){const a=Ce(t,u=>Br(u)),o=lr(a,(u,c,l)=>(Me(c,h=>{Fe(u,h.tokenTypeIdx)||(u[h.tokenTypeIdx]=l),Me(h.categoryMatches,d=>{Fe(u,d)||(u[d]=l)})}),u),{});return function(){const u=this.LA(1);return o[u.tokenTypeIdx]}}else return function(){for(let a=0;a<i;a++){const o=t[a],u=o.length;e:for(let c=0;c<u;c++){const l=o[c],h=l.length;for(let d=0;d<h;d++){const f=this.LA(d+1);if(n(f,l[d])===!1)continue e}return a}}}}function pY(t,e,n){const r=$r(t,s=>s.length===1),i=t.length;if(r&&!n){const s=Br(t);if(s.length===1&&ft(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const a=lr(s,(o,u,c)=>(o[u.tokenTypeIdx]=!0,Me(u.categoryMatches,l=>{o[l]=!0}),o),[]);return function(){const o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<i;s++){const a=t[s],o=a.length;for(let u=0;u<o;u++){const c=this.LA(u+1);if(e(c,a[u])===!1)continue e}return!0}return!1}}class gY extends r0{constructor(e,n,r){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=r.concat(i),!0):!1}walkOption(e,n,r){this.checkIsTarget(e,bt.OPTION,n,r)||super.walkOption(e,n,r)}walkAtLeastOne(e,n,r){this.checkIsTarget(e,bt.REPETITION_MANDATORY,n,r)||super.walkOption(e,n,r)}walkAtLeastOneSep(e,n,r){this.checkIsTarget(e,bt.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}walkMany(e,n,r){this.checkIsTarget(e,bt.REPETITION,n,r)||super.walkOption(e,n,r)}walkManySep(e,n,r){this.checkIsTarget(e,bt.REPETITION_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}}class yk extends So{constructor(e,n,r){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=r,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,bt.OPTION)}visitRepetition(e){this.checkIsTarget(e,bt.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,bt.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,bt.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,bt.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,bt.ALTERNATION)}}function XE(t){const e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function Lp(t){let e=[""];for(let n=0;n<t.length;n++){const r=t[n],i=[];for(let s=0;s<e.length;s++){const a=e[s];i.push(a+"_"+r.tokenTypeIdx);for(let o=0;o<r.categoryMatches.length;o++){const u="_"+r.categoryMatches[o];i.push(a+u)}}e=i}return e}function mY(t,e,n){for(let r=0;r<t.length;r++){if(r===n)continue;const i=t[r];for(let s=0;s<e.length;s++){const a=e[s];if(i[a]===!0)return!1}}return!0}function vk(t,e){const n=Ce(t,a=>fm([a],1)),r=XE(n.length),i=Ce(n,a=>{const o={};return Me(a,u=>{const c=Lp(u.partialPath);Me(c,l=>{o[l]=!0})}),o});let s=n;for(let a=1;a<=e;a++){const o=s;s=XE(o.length);for(let u=0;u<o.length;u++){const c=o[u];for(let l=0;l<c.length;l++){const h=c[l].partialPath,d=c[l].suffixDef,f=Lp(h);if(mY(i,f,u)||ft(d)||h.length===e){const g=r[u];if(dm(g,h)===!1){g.push(h);for(let m=0;m<f.length;m++){const y=f[m];i[u][y]=!0}}}else{const g=fm(d,a+1,h);s[u]=s[u].concat(g),Me(g,m=>{const y=Lp(m.partialPath);Me(y,b=>{i[u][b]=!0})})}}}}return r}function a0(t,e,n,r){const i=new yk(t,bt.ALTERNATION,r);return e.accept(i),vk(i.result,n)}function o0(t,e,n,r){const i=new yk(t,n);e.accept(i);const s=i.result,o=new gY(e,t,n).startWalking(),u=new qn({definition:s}),c=new qn({definition:o});return vk([u,c],r)}function dm(t,e){e:for(let n=0;n<t.length;n++){const r=t[n];if(r.length===e.length){for(let i=0;i<r.length;i++){const s=e[i],a=r[i];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function yY(t,e){return t.length<e.length&&$r(t,(n,r)=>{const i=e[r];return n===i||i.categoryMatchesMap[n.tokenTypeIdx]})}function bk(t){return $r(t,e=>$r(e,n=>$r(n,r=>ft(r.categoryMatches))))}function vY(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return Ce(e,n=>Object.assign({type:Un.CUSTOM_LOOKAHEAD_VALIDATION},n))}function bY(t,e,n,r){const i=Er(t,u=>xY(u,n)),s=NY(t,e,n),a=Er(t,u=>kY(u,n)),o=Er(t,u=>wY(u,t,r,n));return i.concat(s,a,o)}function xY(t,e){const n=new DY;t.accept(n);const r=n.allProductions,i=N3(r,EY),s=Vr(i,o=>o.length>1);return Ce(Zt(s),o=>{const u=Hr(o),c=e.buildDuplicateFoundError(t,o),l=ui(u),h={message:c,type:Un.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:l,occurrence:u.idx},d=xk(u);return d&&(h.parameter=d),h})}function EY(t){return`${ui(t)}_#_${t.idx}_#_${xk(t)}`}function xk(t){return t instanceof pt?t.terminalType.name:t instanceof Bn?t.nonTerminalName:""}class DY extends So{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function wY(t,e,n,r){const i=[];if(lr(e,(a,o)=>o.name===t.name?a+1:a,0)>1){const a=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:a,type:Un.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function _Y(t,e,n){const r=[];let i;return Gn(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:Un.INVALID_RULE_OVERRIDE,ruleName:t})),r}function Ek(t,e,n,r=[]){const i=[],s=_h(e.definition);if(ft(s))return[];{const a=t.name;Gn(s,t)&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:Un.LEFT_RECURSION,ruleName:a});const u=nd(s,r.concat([t])),c=Er(u,l=>{const h=mn(r);return h.push(l),Ek(t,l,n,h)});return i.concat(c)}}function _h(t){let e=[];if(ft(t))return e;const n=Hr(t);if(n instanceof Bn)e.push(n.referencedRule);else if(n instanceof qn||n instanceof gn||n instanceof dr||n instanceof pr||n instanceof jn||n instanceof At)e=e.concat(_h(n.definition));else if(n instanceof Kn)e=Br(Ce(n.definition,s=>_h(s.definition)));else if(!(n instanceof pt))throw Error("non exhaustive match");const r=Lf(n),i=t.length>1;if(r&&i){const s=ln(t);return e.concat(_h(s))}else return e}class ev extends So{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function AY(t,e){const n=new ev;t.accept(n);const r=n.alternations;return Er(r,s=>{const a=rc(s.definition);return Er(a,(o,u)=>{const c=mk([o],[],jc,1);return ft(c)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:s,emptyChoiceIdx:u}),type:Un.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:s.idx,alternative:u+1}]:[]})})}function CY(t,e,n){const r=new ev;t.accept(r);let i=r.alternations;return i=td(i,a=>a.ignoreAmbiguities===!0),Er(i,a=>{const o=a.idx,u=a.maxLookahead||e,c=a0(o,t,u,a),l=SY(c,a,t,n),h=RY(c,a,t,n);return l.concat(h)})}class TY extends So{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function kY(t,e){const n=new ev;t.accept(n);const r=n.alternations;return Er(r,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:s}),type:Un.TOO_MANY_ALTS,ruleName:t.name,occurrence:s.idx}]:[])}function FY(t,e,n){const r=[];return Me(t,i=>{const s=new TY;i.accept(s);const a=s.allProductions;Me(a,o=>{const u=Qy(o),c=o.maxLookahead||e,l=o.idx,d=o0(l,i,u,c)[0];if(ft(Br(d))){const f=n.buildEmptyRepetitionError({topLevelRule:i,repetition:o});r.push({message:f,type:Un.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}function SY(t,e,n,r){const i=[],s=lr(t,(o,u,c)=>(e.definition[c].ignoreAmbiguities===!0||Me(u,l=>{const h=[c];Me(t,(d,f)=>{c!==f&&dm(d,l)&&e.definition[f].ignoreAmbiguities!==!0&&h.push(f)}),h.length>1&&!dm(i,l)&&(i.push(l),o.push({alts:h,path:l}))}),o),[]);return Ce(s,o=>{const u=Ce(o.alts,l=>l+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:u,prefixPath:o.path}),type:Un.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:o.alts}})}function RY(t,e,n,r){const i=lr(t,(a,o,u)=>{const c=Ce(o,l=>({idx:u,path:l}));return a.concat(c)},[]);return Cc(Er(i,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const u=a.idx,c=a.path,l=Cr(i,d=>e.definition[d.idx].ignoreAmbiguities!==!0&&d.idx<u&&yY(d.path,c));return Ce(l,d=>{const f=[d.idx+1,u+1],p=e.idx===0?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:f,prefixPath:d.path}),type:Un.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:p,alternatives:f}})}))}function NY(t,e,n){const r=[],i=Ce(e,s=>s.name);return Me(t,s=>{const a=s.name;if(Gn(i,a)){const o=n.buildNamespaceConflictError(s);r.push({message:o,type:Un.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),r}function LY(t){const e=Xm(t,{errMsgProvider:rY}),n={};return Me(t.rules,r=>{n[r.name]=r}),iY(n,e.errMsgProvider)}function MY(t){return t=Xm(t,{errMsgProvider:Ws}),bY(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}const Dk="MismatchedTokenException",wk="NoViableAltException",_k="EarlyExitException",Ak="NotAllInputParsedException",Ck=[Dk,wk,_k,Ak];Object.freeze(Ck);function Of(t){return Gn(Ck,t.name)}class u0 extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class Tk extends u0{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=Dk}}class IY extends u0{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=wk}}class OY extends u0{constructor(e,n){super(e,n),this.name=Ak}}class PY extends u0{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=_k}}const Mp={},kk="InRuleRecoveryException";class $Y extends Error{constructor(e){super(e),this.name=kk}}class BY{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=Fe(e,"recoveryEnabled")?e.recoveryEnabled:qi.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=UY)}getTokenToInsert(e){const n=Jy(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,r,i){const s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[];let u=!1;const c=this.LA(1);let l=this.LA(1);const h=()=>{const d=this.LA(0),f=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:c,previous:d,ruleName:this.getCurrRuleFullName()}),p=new Tk(f,c,this.LA(0));p.resyncedTokens=rc(o),this.SAVE_ERROR(p)};for(;!u;)if(this.tokenMatcher(l,i)){h();return}else if(r.call(this)){h(),e.apply(this,n);return}else this.tokenMatcher(l,s)?u=!0:(l=this.SKIP_TOKEN(),this.addToResyncTokens(l,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,n,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){const r=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new $Y("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||ft(n))return!1;const r=this.LA(1);return Za(n,s=>this.tokenMatcher(r,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const n=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(n);return Gn(r,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let n=this.LA(1),r=2;for(;;){const i=Za(e,s=>gk(n,s));if(i!==void 0)return i;n=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Mp;const e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return Ce(e,(r,i)=>i===0?Mp:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){const e=Ce(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return Br(e)}getFollowSetFromFollowKey(e){if(e===Mp)return[xs];const n=e.ruleName+e.idxInCallingRule+ik+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,xs)||n.push(e),n}reSyncTo(e){const n=[];let r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,n);return rc(n)}attemptInRepetitionRecovery(e,n,r,i,s,a,o){}getCurrentGrammarPath(e,n){const r=this.getHumanReadableRuleStack(),i=mn(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return Ce(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function UY(t,e,n,r,i,s,a){const o=this.getKeyForAutomaticLookahead(r,i);let u=this.firstAfterRepMap[o];if(u===void 0){const d=this.getCurrRuleFullName(),f=this.getGAstProductions()[d];u=new s(f,i).startWalking(),this.firstAfterRepMap[o]=u}let c=u.token,l=u.occurrence;const h=u.isEndOfRule;this.RULE_STACK.length===1&&h&&c===void 0&&(c=xs,l=1),!(c===void 0||l===void 0)&&this.shouldInRepetitionRecoveryBeTried(c,l,a)&&this.tryInRepetitionRecovery(t,e,n,c)}const GY=4,As=8,Fk=1<<As,Sk=2<<As,pm=3<<As,gm=4<<As,mm=5<<As,Ah=6<<As;function Ip(t,e,n){return n|e|t}class tv{constructor(e){var n;this.maxLookahead=(n=e==null?void 0:e.maxLookahead)!==null&&n!==void 0?n:qi.maxLookahead}validate(e){const n=this.validateNoLeftRecursion(e.rules);if(ft(n)){const r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...r,...i,...s]}return n}validateNoLeftRecursion(e){return Er(e,n=>Ek(n,n,Ws))}validateEmptyOrAlternatives(e){return Er(e,n=>AY(n,Ws))}validateAmbiguousAlternationAlternatives(e,n){return Er(e,r=>CY(r,n,Ws))}validateSomeNonEmptyLookaheadPath(e,n){return FY(e,n,Ws)}buildLookaheadForAlternation(e){return hY(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,dY)}buildLookaheadForOptional(e){return fY(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Qy(e.prodType),pY)}}class HY{initLooksAhead(e){this.dynamicTokensEnabled=Fe(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:qi.dynamicTokensEnabled,this.maxLookahead=Fe(e,"maxLookahead")?e.maxLookahead:qi.maxLookahead,this.lookaheadStrategy=Fe(e,"lookaheadStrategy")?e.lookaheadStrategy:new tv({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){Me(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{const{alternation:r,repetition:i,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:u}=zY(n);Me(r,c=>{const l=c.idx===0?"":c.idx;this.TRACE_INIT(`${ui(c)}${l}`,()=>{const h=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:c.idx,rule:n,maxLookahead:c.maxLookahead||this.maxLookahead,hasPredicates:c.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),d=Ip(this.fullRuleNameToShort[n.name],Fk,c.idx);this.setLaFuncCache(d,h)})}),Me(i,c=>{this.computeLookaheadFunc(n,c.idx,pm,"Repetition",c.maxLookahead,ui(c))}),Me(s,c=>{this.computeLookaheadFunc(n,c.idx,Sk,"Option",c.maxLookahead,ui(c))}),Me(a,c=>{this.computeLookaheadFunc(n,c.idx,gm,"RepetitionMandatory",c.maxLookahead,ui(c))}),Me(o,c=>{this.computeLookaheadFunc(n,c.idx,Ah,"RepetitionMandatoryWithSeparator",c.maxLookahead,ui(c))}),Me(u,c=>{this.computeLookaheadFunc(n,c.idx,mm,"RepetitionWithSeparator",c.maxLookahead,ui(c))})})})}computeLookaheadFunc(e,n,r,i,s,a){this.TRACE_INIT(`${a}${n===0?"":n}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),u=Ip(this.fullRuleNameToShort[e.name],r,n);this.setLaFuncCache(u,o)})}getKeyForAutomaticLookahead(e,n){const r=this.getLastExplicitRuleShortName();return Ip(r,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}}class WY extends So{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const zl=new WY;function zY(t){zl.reset(),t.accept(zl);const e=zl.dslMethods;return zl.reset(),e}function VE(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function qE(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function YY(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}function XY(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}const VY="name";function Rk(t,e){Object.defineProperty(t,VY,{enumerable:!1,configurable:!0,writable:!1,value:e})}function qY(t,e){const n=nc(t),r=n.length;for(let i=0;i<r;i++){const s=n[i],a=t[s],o=a.length;for(let u=0;u<o;u++){const c=a[u];c.tokenTypeIdx===void 0&&this[c.name](c.children,e)}}}function jY(t,e){const n=function(){};Rk(n,t+"BaseSemantics");const r={visit:function(i,s){if(xr(i)&&(i=i[0]),!zi(i))return this[i.name](i.children,s)},validateVisitor:function(){const i=ZY(this,e);if(!ft(i)){const s=Ce(i,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=r,n.prototype.constructor=n,n._RULE_NAMES=e,n}function KY(t,e,n){const r=function(){};Rk(r,t+"BaseSemanticsWithDefaults");const i=Object.create(n.prototype);return Me(e,s=>{i[s]=qY}),r.prototype=i,r.prototype.constructor=r,r}var ym;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(ym||(ym={}));function ZY(t,e){return JY(t,e)}function JY(t,e){const n=Cr(e,i=>ca(t[i])===!1),r=Ce(n,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:ym.MISSING_METHOD,methodName:i}));return Cc(r)}class QY{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=Fe(e,"nodeLocationTracking")?e.nodeLocationTracking:qi.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=qt,this.cstFinallyStateUpdate=qt,this.cstPostTerminal=qt,this.cstPostNonTerminal=qt,this.cstPostRule=qt;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=qE,this.setNodeLocationFromNode=qE,this.cstPostRule=qt,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=qt,this.setNodeLocationFromNode=qt,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=VE,this.setNodeLocationFromNode=VE,this.cstPostRule=qt,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=qt,this.setNodeLocationFromNode=qt,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=qt,this.setNodeLocationFromNode=qt,this.cstPostRule=qt,this.setInitialNodeLocation=qt;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){const n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN}cstPostTerminal(e,n){const r=this.CST_STACK[this.CST_STACK.length-1];YY(r,n,e),this.setNodeLocationFromToken(r.location,n)}cstPostNonTerminal(e,n){const r=this.CST_STACK[this.CST_STACK.length-1];XY(r,n,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(zi(this.baseCstVisitorConstructor)){const e=jY(this.className,nc(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(zi(this.baseCstVisitorWithDefaultsConstructor)){const e=KY(this.className,nc(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class eX{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):$f}LA(e){const n=this.currIdx+e;return n<0||this.tokVectorLength<=n?$f:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class tX{ACTION(e){return e.call(this)}consume(e,n,r){return this.consumeInternal(n,e,r)}subrule(e,n,r){return this.subruleInternal(n,e,r)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,r=Bf){if(Gn(this.definedRulesNames,e)){const a={message:Ws.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:Un.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const i=this.defineRule(e,n,r);return this[e]=i,i}OVERRIDE_RULE(e,n,r=Bf){const i=_Y(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const s=this.defineRule(e,n,r);return this[e]=s,s}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{return e.apply(this,n),!0}catch(i){if(Of(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return lz(Zt(this.gastProductionsCache))}}class nX{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=If,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Fe(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(xr(e)){if(ft(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(xr(e))this.tokensMap=lr(e,(s,a)=>(s[a.name]=a,s),{});else if(Fe(e,"modes")&&$r(Br(Zt(e.modes)),eY)){const s=Br(Zt(e.modes)),a=Ym(s);this.tokensMap=lr(a,(o,u)=>(o[u.name]=u,o),{})}else if(L3(e))this.tokensMap=mn(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=xs;const r=Fe(e,"modes")?Br(Zt(e.modes)):Zt(e),i=$r(r,s=>ft(s.categoryMatches));this.tokenMatcher=i?If:jc,Kc(Zt(this.tokensMap))}defineRule(e,n,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=Fe(r,"resyncEnabled")?r.resyncEnabled:Bf.resyncEnabled,s=Fe(r,"recoveryValueFunc")?r.recoveryValueFunc:Bf.recoveryValueFunc,a=this.ruleShortNameIdx<<GY+As;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...l){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,l);const h=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(h),h}catch(h){return this.invokeRuleCatch(h,i,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...l){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,l)}catch(h){return this.invokeRuleCatch(h,i,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,r){const i=this.RULE_STACK.length===1,s=n&&!this.isBackTracking()&&this.recoveryEnabled;if(Of(e)){const a=e;if(s){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){const u=this.CST_STACK[this.CST_STACK.length-1];return u.recoveredNode=!0,u}else return r(e);else{if(this.outputCst){const u=this.CST_STACK[this.CST_STACK.length-1];u.recoveredNode=!0,a.partialCstResult=u}throw a}}else{if(i)return this.moveToTerminatedState(),r(e);throw a}}else throw e}optionInternal(e,n){const r=this.getKeyForAutomaticLookahead(Sk,n);return this.optionInternalLogic(e,n,r)}optionInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof e!="function"){s=e.DEF;const a=e.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=e;if(i.call(this)===!0)return s.call(this)}atLeastOneInternal(e,n){const r=this.getKeyForAutomaticLookahead(gm,e);return this.atLeastOneInternalLogic(e,n,r)}atLeastOneInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof n!="function"){s=n.DEF;const a=n.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=n;if(i.call(this)===!0){let a=this.doSingleRepetition(s);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,bt.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],i,gm,e,cY)}atLeastOneSepFirstInternal(e,n){const r=this.getKeyForAutomaticLookahead(Ah,e);this.atLeastOneSepFirstInternalLogic(e,n,r)}atLeastOneSepFirstInternalLogic(e,n,r){const i=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,zE],o,Ah,e,zE)}else throw this.raiseEarlyExitException(e,bt.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){const r=this.getKeyForAutomaticLookahead(pm,e);return this.manyInternalLogic(e,n,r)}manyInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof n!="function"){s=n.DEF;const o=n.GATE;if(o!==void 0){const u=i;i=()=>o.call(this)&&u.call(this)}}else s=n;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],i,pm,e,uY,a)}manySepFirstInternal(e,n){const r=this.getKeyForAutomaticLookahead(mm,e);this.manySepFirstInternalLogic(e,n,r)}manySepFirstInternalLogic(e,n,r){const i=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,WE],o,mm,e,WE)}}repetitionSepSecondInternal(e,n,r,i,s){for(;r();)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,r,i,s],r,Ah,e,s)}doSingleRepetition(e){const n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){const r=this.getKeyForAutomaticLookahead(Fk,n),i=xr(e)?e:e.DEF,a=this.getLaFuncFromCache(r).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new OY(n,e))}}subruleInternal(e,n,r){let i;try{const s=r!==void 0?r.ARGS:void 0;return this.subruleIdx=n,i=e.apply(this,s),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(s){throw this.subruleInternalError(s,r,e.ruleName)}}subruleInternalError(e,n,r){throw Of(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,n,r){let i;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),i=s):this.consumeInternalError(e,s,r)}catch(s){i=this.consumeInternalRecovery(e,n,s)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i}consumeInternalError(e,n,r){let i;const s=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Tk(i,n,s))}consumeInternalRecovery(e,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,i)}catch(s){throw s.name===kk?r:s}}else throw r}saveRecogState(){const e=this.errors,n=mn(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),xs)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class rX{initErrorHandler(e){this._errors=[],this.errorMessageProvider=Fe(e,"errorMessageProvider")?e.errorMessageProvider:qi.errorMessageProvider}SAVE_ERROR(e){if(Of(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:mn(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return mn(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,r){const i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],o=o0(e,s,n,this.maxLookahead)[0],u=[];for(let l=1;l<=this.maxLookahead;l++)u.push(this.LA(l));const c=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:u,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new PY(c,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){const r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],s=a0(e,i,this.maxLookahead),a=[];for(let c=1;c<=this.maxLookahead;c++)a.push(this.LA(c));const o=this.LA(0),u=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new IY(u,this.LA(1),o))}}class iX{initContentAssist(){}computeContentAssist(e,n){const r=this.gastProductionsCache[e];if(zi(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return mk([r],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const n=Hr(e.ruleStack),i=this.getGAstProductions()[n];return new oY(i,e).startWalking()}}const c0={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(c0);const jE=!0,KE=Math.pow(2,As)-1,Nk=pk({name:"RECORDING_PHASE_TOKEN",pattern:Xn.NA});Kc([Nk]);const Lk=Jy(Nk,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Lk);const sX={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class aX{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const n=e>0?e:"";this[`CONSUME${n}`]=function(r,i){return this.consumeInternalRecord(r,e,i)},this[`SUBRULE${n}`]=function(r,i){return this.subruleInternalRecord(r,e,i)},this[`OPTION${n}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${n}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${n}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${n}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${n}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${n}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,n,r){return this.consumeInternalRecord(n,e,r)},this.subrule=function(e,n,r){return this.subruleInternalRecord(n,e,r)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let n=0;n<10;n++){const r=n>0?n:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return $f}topLevelRuleRecord(e,n){try{const r=new Fo({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw r}throw r}}optionInternalRecord(e,n){return Qo.call(this,gn,e,n)}atLeastOneInternalRecord(e,n){Qo.call(this,dr,n,e)}atLeastOneSepFirstInternalRecord(e,n){Qo.call(this,pr,n,e,jE)}manyInternalRecord(e,n){Qo.call(this,At,n,e)}manySepFirstInternalRecord(e,n){Qo.call(this,jn,n,e,jE)}orInternalRecord(e,n){return oX.call(this,e,n)}subruleInternalRecord(e,n,r){if(Pf(n),!e||Fe(e,"ruleName")===!1){const o=new Error(`<SUBRULE${ZE(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=Ja(this.recordingProdStack),s=e.ruleName,a=new Bn({idx:n,nonTerminalName:s,label:r==null?void 0:r.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?sX:c0}consumeInternalRecord(e,n,r){if(Pf(n),!fk(e)){const a=new Error(`<CONSUME${ZE(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const i=Ja(this.recordingProdStack),s=new pt({idx:n,terminalType:e,label:r==null?void 0:r.LABEL});return i.definition.push(s),Lk}}function Qo(t,e,n,r=!1){Pf(n);const i=Ja(this.recordingProdStack),s=ca(e)?e:e.DEF,a=new t({definition:[],idx:n});return r&&(a.separator=e.SEP),Fe(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),i.definition.push(a),this.recordingProdStack.pop(),c0}function oX(t,e){Pf(e);const n=Ja(this.recordingProdStack),r=xr(t)===!1,i=r===!1?t:t.DEF,s=new Kn({definition:[],idx:e,ignoreAmbiguities:r&&t.IGNORE_AMBIGUITIES===!0});Fe(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);const a=Sw(i,o=>ca(o.GATE));return s.hasPredicates=a,n.definition.push(s),Me(i,o=>{const u=new qn({definition:[]});s.definition.push(u),Fe(o,"IGNORE_AMBIGUITIES")?u.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:Fe(o,"GATE")&&(u.ignoreAmbiguities=!0),this.recordingProdStack.push(u),o.ALT.call(this),this.recordingProdStack.pop()}),c0}function ZE(t){return t===0?"":`${t}`}function Pf(t){if(t<0||t>KE){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${KE+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class uX{initPerformanceTracer(e){if(Fe(e,"traceInitPerf")){const n=e.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=qi.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;const r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);const{time:i,value:s}=nk(n),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,s}else return n()}}function cX(t,e){e.forEach(n=>{const r=n.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if(i==="constructor")return;const s=Object.getOwnPropertyDescriptor(r,i);s&&(s.get||s.set)?Object.defineProperty(t.prototype,i,s):t.prototype[i]=n.prototype[i]})})}const $f=Jy(xs,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze($f);const qi=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Oa,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Bf=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var Un;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(Un||(Un={}));function JE(t=void 0){return function(){return t}}class Zc{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const n=this.className;this.TRACE_INIT("toFastProps",()=>{rk(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),Me(this.definedRulesNames,i=>{const a=this[i].originalGrammarAction;let o;this.TRACE_INIT(`${i} Rule`,()=>{o=this.topLevelRuleRecord(i,a)}),this.gastProductionsCache[i]=o})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=LY({rules:Zt(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if(ft(r)&&this.skipValidations===!1){const i=MY({rules:Zt(this.gastProductionsCache),tokenTypes:Zt(this.tokensMap),errMsgProvider:Ws,grammarName:n}),s=vY({lookaheadStrategy:this.lookaheadStrategy,rules:Zt(this.gastProductionsCache),tokenTypes:Zt(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(i,s)}}),ft(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=yz(Zt(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,s;(s=(i=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(i,{rules:Zt(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(Zt(this.gastProductionsCache))})),!Zc.DEFER_DEFINITION_ERRORS_HANDLING&&!ft(this.definitionErrors))throw e=Ce(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;const r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(e,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),Fe(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=Fe(n,"skipValidations")?n.skipValidations:qi.skipValidations}}Zc.DEFER_DEFINITION_ERRORS_HANDLING=!1;cX(Zc,[BY,HY,QY,eX,nX,tX,rX,iX,aX,uX]);class lX extends Zc{constructor(e,n=qi){const r=mn(n);r.outputCst=!1,super(e,r)}}function po(t,e,n){return`${t.name}_${e}_${n}`}const Es=1,hX=2,Mk=4,Ik=5,Jc=7,fX=8,dX=9,pX=10,gX=11,Ok=12;class nv{constructor(e){this.target=e}isEpsilon(){return!1}}class rv extends nv{constructor(e,n){super(e),this.tokenType=n}}class Pk extends nv{constructor(e){super(e)}isEpsilon(){return!0}}class iv extends nv{constructor(e,n,r){super(e),this.rule=n,this.followState=r}isEpsilon(){return!0}}function mX(t){const e={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};yX(e,t);const n=t.length;for(let r=0;r<n;r++){const i=t[r],s=ya(e,i,i);s!==void 0&&kX(e,i,s)}return e}function yX(t,e){const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=Qt(t,i,void 0,{type:hX}),a=Qt(t,i,void 0,{type:Jc});s.stop=a,t.ruleToStartState.set(i,s),t.ruleToStopState.set(i,a)}}function $k(t,e,n){return n instanceof pt?sv(t,e,n.terminalType,n):n instanceof Bn?TX(t,e,n):n instanceof Kn?DX(t,e,n):n instanceof gn?wX(t,e,n):n instanceof At?vX(t,e,n):n instanceof jn?bX(t,e,n):n instanceof dr?xX(t,e,n):n instanceof pr?EX(t,e,n):ya(t,e,n)}function vX(t,e,n){const r=Qt(t,e,n,{type:Ik});Cs(t,r);const i=Ro(t,e,r,n,ya(t,e,n));return Uk(t,e,n,i)}function bX(t,e,n){const r=Qt(t,e,n,{type:Ik});Cs(t,r);const i=Ro(t,e,r,n,ya(t,e,n)),s=sv(t,e,n.separator,n);return Uk(t,e,n,i,s)}function xX(t,e,n){const r=Qt(t,e,n,{type:Mk});Cs(t,r);const i=Ro(t,e,r,n,ya(t,e,n));return Bk(t,e,n,i)}function EX(t,e,n){const r=Qt(t,e,n,{type:Mk});Cs(t,r);const i=Ro(t,e,r,n,ya(t,e,n)),s=sv(t,e,n.separator,n);return Bk(t,e,n,i,s)}function DX(t,e,n){const r=Qt(t,e,n,{type:Es});Cs(t,r);const i=lt(n.definition,a=>$k(t,e,a));return Ro(t,e,r,n,...i)}function wX(t,e,n){const r=Qt(t,e,n,{type:Es});Cs(t,r);const i=Ro(t,e,r,n,ya(t,e,n));return _X(t,e,n,i)}function ya(t,e,n){const r=ci(lt(n.definition,i=>$k(t,e,i)),i=>i!==void 0);return r.length===1?r[0]:r.length===0?void 0:CX(t,r)}function Bk(t,e,n,r,i){const s=r.left,a=r.right,o=Qt(t,e,n,{type:gX});Cs(t,o);const u=Qt(t,e,n,{type:Ok});return s.loopback=o,u.loopback=o,t.decisionMap[po(e,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",n.idx)]=o,Ot(a,o),i===void 0?(Ot(o,s),Ot(o,u)):(Ot(o,u),Ot(o,i.left),Ot(i.right,s)),{left:s,right:u}}function Uk(t,e,n,r,i){const s=r.left,a=r.right,o=Qt(t,e,n,{type:pX});Cs(t,o);const u=Qt(t,e,n,{type:Ok}),c=Qt(t,e,n,{type:dX});return o.loopback=c,u.loopback=c,Ot(o,s),Ot(o,u),Ot(a,c),i!==void 0?(Ot(c,u),Ot(c,i.left),Ot(i.right,s)):Ot(c,o),t.decisionMap[po(e,i?"RepetitionWithSeparator":"Repetition",n.idx)]=o,{left:o,right:u}}function _X(t,e,n,r){const i=r.left,s=r.right;return Ot(i,s),t.decisionMap[po(e,"Option",n.idx)]=i,r}function Cs(t,e){return t.decisionStates.push(e),e.decision=t.decisionStates.length-1,e.decision}function Ro(t,e,n,r,...i){const s=Qt(t,e,r,{type:fX,start:n});n.end=s;for(const o of i)o!==void 0?(Ot(n,o.left),Ot(o.right,s)):Ot(n,s);const a={left:n,right:s};return t.decisionMap[po(e,AX(r),r.idx)]=n,a}function AX(t){if(t instanceof Kn)return"Alternation";if(t instanceof gn)return"Option";if(t instanceof At)return"Repetition";if(t instanceof jn)return"RepetitionWithSeparator";if(t instanceof dr)return"RepetitionMandatory";if(t instanceof pr)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function CX(t,e){const n=e.length;for(let s=0;s<n-1;s++){const a=e[s];let o;a.left.transitions.length===1&&(o=a.left.transitions[0]);const u=o instanceof iv,c=o,l=e[s+1].left;a.left.type===Es&&a.right.type===Es&&o!==void 0&&(u&&c.followState===a.right||o.target===a.right)?(u?c.followState=l:o.target=l,FX(t,a.right)):Ot(a.right,l)}const r=e[0],i=e[n-1];return{left:r.left,right:i.right}}function sv(t,e,n,r){const i=Qt(t,e,r,{type:Es}),s=Qt(t,e,r,{type:Es});return av(i,new rv(s,n)),{left:i,right:s}}function TX(t,e,n){const r=n.referencedRule,i=t.ruleToStartState.get(r),s=Qt(t,e,n,{type:Es}),a=Qt(t,e,n,{type:Es}),o=new iv(i,r,a);return av(s,o),{left:s,right:a}}function kX(t,e,n){const r=t.ruleToStartState.get(e);Ot(r,n.left);const i=t.ruleToStopState.get(e);return Ot(n.right,i),{left:r,right:i}}function Ot(t,e){const n=new Pk(e);av(t,n)}function Qt(t,e,n,r){const i=Object.assign({atn:t,production:n,epsilonOnlyTransitions:!1,rule:e,transitions:[],nextTokenWithinRule:[],stateNumber:t.states.length},r);return t.states.push(i),i}function av(t,e){t.transitions.length===0&&(t.epsilonOnlyTransitions=e.isEpsilon()),t.transitions.push(e)}function FX(t,e){t.states.splice(t.states.indexOf(e),1)}const Uf={};class vm{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const n=Gk(e);n in this.map||(this.map[n]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return lt(this.configs,e=>e.alt)}get key(){let e="";for(const n in this.map)e+=n+":";return e}}function Gk(t,e=!0){return`${e?`a${t.alt}`:""}s${t.state.stateNumber}:${t.stack.map(n=>n.stateNumber.toString()).join("_")}`}function SX(t,e){const n={};return r=>{const i=r.toString();let s=n[i];return s!==void 0||(s={atnStartState:t,decision:e,states:{}},n[i]=s),s}}class Hk{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,n){this.predicates[e]=n}toString(){let e="";const n=this.predicates.length;for(let r=0;r<n;r++)e+=this.predicates[r]===!0?"1":"0";return e}}const QE=new Hk;class RX extends tv{constructor(e){var n;super(),this.logging=(n=e==null?void 0:e.logging)!==null&&n!==void 0?n:(r=>console.log(r))}initialize(e){this.atn=mX(e.rules),this.dfas=NX(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){const{prodOccurrence:n,rule:r,hasPredicates:i,dynamicTokensEnabled:s}=e,a=this.dfas,o=this.logging,u=po(r,"Alternation",n),l=this.atn.decisionMap[u].decision,h=lt(YE({maxLookahead:1,occurrence:n,prodType:"Alternation",rule:r}),d=>lt(d,f=>f[0]));if(eD(h,!1)&&!s){const d=Vs(h,(f,p,g)=>(j(p,m=>{m&&(f[m.tokenTypeIdx]=g,j(m.categoryMatches,y=>{f[y]=g}))}),f),{});return i?function(f){var p;const g=this.LA(1),m=d[g.tokenTypeIdx];if(f!==void 0&&m!==void 0){const y=(p=f[m])===null||p===void 0?void 0:p.GATE;if(y!==void 0&&y.call(this)===!1)return}return m}:function(){const f=this.LA(1);return d[f.tokenTypeIdx]}}else return i?function(d){const f=new Hk,p=d===void 0?0:d.length;for(let m=0;m<p;m++){const y=d==null?void 0:d[m].GATE;f.set(m,y===void 0||y.call(this))}const g=Op.call(this,a,l,f,o);return typeof g=="number"?g:void 0}:function(){const d=Op.call(this,a,l,QE,o);return typeof d=="number"?d:void 0}}buildLookaheadForOptional(e){const{prodOccurrence:n,rule:r,prodType:i,dynamicTokensEnabled:s}=e,a=this.dfas,o=this.logging,u=po(r,i,n),l=this.atn.decisionMap[u].decision,h=lt(YE({maxLookahead:1,occurrence:n,prodType:i,rule:r}),d=>lt(d,f=>f[0]));if(eD(h)&&h[0][0]&&!s){const d=h[0],f=vo(d);if(f.length===1&&Xp(f[0].categoryMatches)){const g=f[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===g}}else{const p=Vs(f,(g,m)=>(m!==void 0&&(g[m.tokenTypeIdx]=!0,j(m.categoryMatches,y=>{g[y]=!0})),g),{});return function(){const g=this.LA(1);return p[g.tokenTypeIdx]===!0}}}return function(){const d=Op.call(this,a,l,QE,o);return typeof d=="object"?!1:d===0}}}function eD(t,e=!0){const n=new Set;for(const r of t){const i=new Set;for(const s of r){if(s===void 0){if(e)break;return!1}const a=[s.tokenTypeIdx].concat(s.categoryMatches);for(const o of a)if(n.has(o)){if(!i.has(o))return!1}else n.add(o),i.add(o)}}return!0}function NX(t){const e=t.decisionStates.length,n=Array(e);for(let r=0;r<e;r++)n[r]=SX(t.decisionStates[r],r);return n}function Op(t,e,n,r){const i=t[e](n);let s=i.start;if(s===void 0){const o=WX(i.atnStartState);s=zk(i,Wk(o)),i.start=s}return LX.apply(this,[i,s,n,r])}function LX(t,e,n,r){let i=e,s=1;const a=[];let o=this.LA(s++);for(;;){let u=BX(i,o);if(u===void 0&&(u=MX.apply(this,[t,i,o,s,n,r])),u===Uf)return $X(a,i,o);if(u.isAcceptState===!0)return u.prediction;i=u,a.push(o),o=this.LA(s++)}}function MX(t,e,n,r,i,s){const a=UX(e.configs,n,i);if(a.size===0)return tD(t,e,n,Uf),Uf;let o=Wk(a);const u=HX(a,i);if(u!==void 0)o.isAcceptState=!0,o.prediction=u,o.configs.uniqueAlt=u;else if(VX(a)){const c=Ka(a.alts);o.isAcceptState=!0,o.prediction=c,o.configs.uniqueAlt=c,IX.apply(this,[t,r,a.alts,s])}return o=tD(t,e,n,o),o}function IX(t,e,n,r){const i=[];for(let c=1;c<=e;c++)i.push(this.LA(c).tokenType);const s=t.atnStartState,a=s.rule,o=s.production,u=OX({topLevelRule:a,ambiguityIndices:n,production:o,prefixPath:i});r(u)}function OX(t){const e=lt(t.prefixPath,i=>qa(i)).join(", "),n=t.production.idx===0?"":t.production.idx;let r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(", ")}> in <${PX(t.production)}${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r}function PX(t){if(t instanceof Bn)return"SUBRULE";if(t instanceof gn)return"OPTION";if(t instanceof Kn)return"OR";if(t instanceof dr)return"AT_LEAST_ONE";if(t instanceof pr)return"AT_LEAST_ONE_SEP";if(t instanceof jn)return"MANY_SEP";if(t instanceof At)return"MANY";if(t instanceof pt)return"CONSUME";throw Error("non exhaustive match")}function $X(t,e,n){const r=M3(e.configs.elements,s=>s.state.transitions),i=I3(r.filter(s=>s instanceof rv).map(s=>s.tokenType),s=>s.tokenTypeIdx);return{actualToken:n,possibleTokenTypes:i,tokenPath:t}}function BX(t,e){return t.edges[e.tokenTypeIdx]}function UX(t,e,n){const r=new vm,i=[];for(const a of t.elements){if(n.is(a.alt)===!1)continue;if(a.state.type===Jc){i.push(a);continue}const o=a.state.transitions.length;for(let u=0;u<o;u++){const c=a.state.transitions[u],l=GX(c,e);l!==void 0&&r.add({state:l,alt:a.alt,stack:a.stack})}}let s;if(i.length===0&&r.size===1&&(s=r),s===void 0){s=new vm;for(const a of r.elements)Gf(a,s)}if(i.length>0&&!YX(s))for(const a of i)s.add(a);return s}function GX(t,e){if(t instanceof rv&&gk(e,t.tokenType))return t.target}function HX(t,e){let n;for(const r of t.elements)if(e.is(r.alt)===!0){if(n===void 0)n=r.alt;else if(n!==r.alt)return}return n}function Wk(t){return{configs:t,edges:{},isAcceptState:!1,prediction:-1}}function tD(t,e,n,r){return r=zk(t,r),e.edges[n.tokenTypeIdx]=r,r}function zk(t,e){if(e===Uf)return e;const n=e.configs.key,r=t.states[n];return r!==void 0?r:(e.configs.finalize(),t.states[n]=e,e)}function WX(t){const e=new vm,n=t.transitions.length;for(let r=0;r<n;r++){const s={state:t.transitions[r].target,alt:r,stack:[]};Gf(s,e)}return e}function Gf(t,e){const n=t.state;if(n.type===Jc){if(t.stack.length>0){const i=[...t.stack],a={state:i.pop(),alt:t.alt,stack:i};Gf(a,e)}else e.add(t);return}n.epsilonOnlyTransitions||e.add(t);const r=n.transitions.length;for(let i=0;i<r;i++){const s=n.transitions[i],a=zX(t,s);a!==void 0&&Gf(a,e)}}function zX(t,e){if(e instanceof Pk)return{state:e.target,alt:t.alt,stack:t.stack};if(e instanceof iv){const n=[...t.stack,e.followState];return{state:e.target,alt:t.alt,stack:n}}}function YX(t){for(const e of t.elements)if(e.state.type===Jc)return!0;return!1}function XX(t){for(const e of t.elements)if(e.state.type!==Jc)return!1;return!0}function VX(t){if(XX(t))return!0;const e=qX(t.elements);return jX(e)&&!KX(e)}function qX(t){const e=new Map;for(const n of t){const r=Gk(n,!1);let i=e.get(r);i===void 0&&(i={},e.set(r,i)),i[n.alt]=!0}return e}function jX(t){for(const e of Array.from(t.values()))if(Object.keys(e).length>1)return!0;return!1}function KX(t){for(const e of Array.from(t.values()))if(Object.keys(e).length===1)return!0;return!1}var nD;(function(t){function e(n){return typeof n=="string"}t.is=e})(nD||(nD={}));var bm;(function(t){function e(n){return typeof n=="string"}t.is=e})(bm||(bm={}));var rD;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(rD||(rD={}));var Hf;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(Hf||(Hf={}));var nt;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=Hf.MAX_VALUE),i===Number.MAX_VALUE&&(i=Hf.MAX_VALUE),{line:r,character:i}}t.create=e;function n(r){let i=r;return G.objectLiteral(i)&&G.uinteger(i.line)&&G.uinteger(i.character)}t.is=n})(nt||(nt={}));var je;(function(t){function e(r,i,s,a){if(G.uinteger(r)&&G.uinteger(i)&&G.uinteger(s)&&G.uinteger(a))return{start:nt.create(r,i),end:nt.create(s,a)};if(nt.is(r)&&nt.is(i))return{start:r,end:i};throw new Error(`Range#create called with invalid arguments[${r}, ${i}, ${s}, ${a}]`)}t.create=e;function n(r){let i=r;return G.objectLiteral(i)&&nt.is(i.start)&&nt.is(i.end)}t.is=n})(je||(je={}));var Wf;(function(t){function e(r,i){return{uri:r,range:i}}t.create=e;function n(r){let i=r;return G.objectLiteral(i)&&je.is(i.range)&&(G.string(i.uri)||G.undefined(i.uri))}t.is=n})(Wf||(Wf={}));var iD;(function(t){function e(r,i,s,a){return{targetUri:r,targetRange:i,targetSelectionRange:s,originSelectionRange:a}}t.create=e;function n(r){let i=r;return G.objectLiteral(i)&&je.is(i.targetRange)&&G.string(i.targetUri)&&je.is(i.targetSelectionRange)&&(je.is(i.originSelectionRange)||G.undefined(i.originSelectionRange))}t.is=n})(iD||(iD={}));var xm;(function(t){function e(r,i,s,a){return{red:r,green:i,blue:s,alpha:a}}t.create=e;function n(r){const i=r;return G.objectLiteral(i)&&G.numberRange(i.red,0,1)&&G.numberRange(i.green,0,1)&&G.numberRange(i.blue,0,1)&&G.numberRange(i.alpha,0,1)}t.is=n})(xm||(xm={}));var sD;(function(t){function e(r,i){return{range:r,color:i}}t.create=e;function n(r){const i=r;return G.objectLiteral(i)&&je.is(i.range)&&xm.is(i.color)}t.is=n})(sD||(sD={}));var aD;(function(t){function e(r,i,s){return{label:r,textEdit:i,additionalTextEdits:s}}t.create=e;function n(r){const i=r;return G.objectLiteral(i)&&G.string(i.label)&&(G.undefined(i.textEdit)||mo.is(i))&&(G.undefined(i.additionalTextEdits)||G.typedArray(i.additionalTextEdits,mo.is))}t.is=n})(aD||(aD={}));var oD;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(oD||(oD={}));var uD;(function(t){function e(r,i,s,a,o,u){const c={startLine:r,endLine:i};return G.defined(s)&&(c.startCharacter=s),G.defined(a)&&(c.endCharacter=a),G.defined(o)&&(c.kind=o),G.defined(u)&&(c.collapsedText=u),c}t.create=e;function n(r){const i=r;return G.objectLiteral(i)&&G.uinteger(i.startLine)&&G.uinteger(i.startLine)&&(G.undefined(i.startCharacter)||G.uinteger(i.startCharacter))&&(G.undefined(i.endCharacter)||G.uinteger(i.endCharacter))&&(G.undefined(i.kind)||G.string(i.kind))}t.is=n})(uD||(uD={}));var Em;(function(t){function e(r,i){return{location:r,message:i}}t.create=e;function n(r){let i=r;return G.defined(i)&&Wf.is(i.location)&&G.string(i.message)}t.is=n})(Em||(Em={}));var cD;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(cD||(cD={}));var lD;(function(t){t.Unnecessary=1,t.Deprecated=2})(lD||(lD={}));var hD;(function(t){function e(n){const r=n;return G.objectLiteral(r)&&G.string(r.href)}t.is=e})(hD||(hD={}));var zf;(function(t){function e(r,i,s,a,o,u){let c={range:r,message:i};return G.defined(s)&&(c.severity=s),G.defined(a)&&(c.code=a),G.defined(o)&&(c.source=o),G.defined(u)&&(c.relatedInformation=u),c}t.create=e;function n(r){var i;let s=r;return G.defined(s)&&je.is(s.range)&&G.string(s.message)&&(G.number(s.severity)||G.undefined(s.severity))&&(G.integer(s.code)||G.string(s.code)||G.undefined(s.code))&&(G.undefined(s.codeDescription)||G.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(G.string(s.source)||G.undefined(s.source))&&(G.undefined(s.relatedInformation)||G.typedArray(s.relatedInformation,Em.is))}t.is=n})(zf||(zf={}));var go;(function(t){function e(r,i,...s){let a={title:r,command:i};return G.defined(s)&&s.length>0&&(a.arguments=s),a}t.create=e;function n(r){let i=r;return G.defined(i)&&G.string(i.title)&&G.string(i.command)}t.is=n})(go||(go={}));var mo;(function(t){function e(s,a){return{range:s,newText:a}}t.replace=e;function n(s,a){return{range:{start:s,end:s},newText:a}}t.insert=n;function r(s){return{range:s,newText:""}}t.del=r;function i(s){const a=s;return G.objectLiteral(a)&&G.string(a.newText)&&je.is(a.range)}t.is=i})(mo||(mo={}));var Dm;(function(t){function e(r,i,s){const a={label:r};return i!==void 0&&(a.needsConfirmation=i),s!==void 0&&(a.description=s),a}t.create=e;function n(r){const i=r;return G.objectLiteral(i)&&G.string(i.label)&&(G.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(G.string(i.description)||i.description===void 0)}t.is=n})(Dm||(Dm={}));var yo;(function(t){function e(n){const r=n;return G.string(r)}t.is=e})(yo||(yo={}));var fD;(function(t){function e(s,a,o){return{range:s,newText:a,annotationId:o}}t.replace=e;function n(s,a,o){return{range:{start:s,end:s},newText:a,annotationId:o}}t.insert=n;function r(s,a){return{range:s,newText:"",annotationId:a}}t.del=r;function i(s){const a=s;return mo.is(a)&&(Dm.is(a.annotationId)||yo.is(a.annotationId))}t.is=i})(fD||(fD={}));var wm;(function(t){function e(r,i){return{textDocument:r,edits:i}}t.create=e;function n(r){let i=r;return G.defined(i)&&km.is(i.textDocument)&&Array.isArray(i.edits)}t.is=n})(wm||(wm={}));var _m;(function(t){function e(r,i,s){let a={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),s!==void 0&&(a.annotationId=s),a}t.create=e;function n(r){let i=r;return i&&i.kind==="create"&&G.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||G.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||G.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||yo.is(i.annotationId))}t.is=n})(_m||(_m={}));var Am;(function(t){function e(r,i,s,a){let o={kind:"rename",oldUri:r,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(o.options=s),a!==void 0&&(o.annotationId=a),o}t.create=e;function n(r){let i=r;return i&&i.kind==="rename"&&G.string(i.oldUri)&&G.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||G.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||G.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||yo.is(i.annotationId))}t.is=n})(Am||(Am={}));var Cm;(function(t){function e(r,i,s){let a={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),s!==void 0&&(a.annotationId=s),a}t.create=e;function n(r){let i=r;return i&&i.kind==="delete"&&G.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||G.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||G.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||yo.is(i.annotationId))}t.is=n})(Cm||(Cm={}));var Tm;(function(t){function e(n){let r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(i=>G.string(i.kind)?_m.is(i)||Am.is(i)||Cm.is(i):wm.is(i)))}t.is=e})(Tm||(Tm={}));var dD;(function(t){function e(r){return{uri:r}}t.create=e;function n(r){let i=r;return G.defined(i)&&G.string(i.uri)}t.is=n})(dD||(dD={}));var pD;(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){let i=r;return G.defined(i)&&G.string(i.uri)&&G.integer(i.version)}t.is=n})(pD||(pD={}));var km;(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){let i=r;return G.defined(i)&&G.string(i.uri)&&(i.version===null||G.integer(i.version))}t.is=n})(km||(km={}));var gD;(function(t){function e(r,i,s,a){return{uri:r,languageId:i,version:s,text:a}}t.create=e;function n(r){let i=r;return G.defined(i)&&G.string(i.uri)&&G.string(i.languageId)&&G.integer(i.version)&&G.string(i.text)}t.is=n})(gD||(gD={}));var Fm;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){const r=n;return r===t.PlainText||r===t.Markdown}t.is=e})(Fm||(Fm={}));var wc;(function(t){function e(n){const r=n;return G.objectLiteral(n)&&Fm.is(r.kind)&&G.string(r.value)}t.is=e})(wc||(wc={}));var mD;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(mD||(mD={}));var yD;(function(t){t.PlainText=1,t.Snippet=2})(yD||(yD={}));var vD;(function(t){t.Deprecated=1})(vD||(vD={}));var bD;(function(t){function e(r,i,s){return{newText:r,insert:i,replace:s}}t.create=e;function n(r){const i=r;return i&&G.string(i.newText)&&je.is(i.insert)&&je.is(i.replace)}t.is=n})(bD||(bD={}));var xD;(function(t){t.asIs=1,t.adjustIndentation=2})(xD||(xD={}));var ED;(function(t){function e(n){const r=n;return r&&(G.string(r.detail)||r.detail===void 0)&&(G.string(r.description)||r.description===void 0)}t.is=e})(ED||(ED={}));var DD;(function(t){function e(n){return{label:n}}t.create=e})(DD||(DD={}));var wD;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}t.create=e})(wD||(wD={}));var Yf;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function n(r){const i=r;return G.string(i)||G.objectLiteral(i)&&G.string(i.language)&&G.string(i.value)}t.is=n})(Yf||(Yf={}));var _D;(function(t){function e(n){let r=n;return!!r&&G.objectLiteral(r)&&(wc.is(r.contents)||Yf.is(r.contents)||G.typedArray(r.contents,Yf.is))&&(n.range===void 0||je.is(n.range))}t.is=e})(_D||(_D={}));var AD;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}t.create=e})(AD||(AD={}));var CD;(function(t){function e(n,r,...i){let s={label:n};return G.defined(r)&&(s.documentation=r),G.defined(i)?s.parameters=i:s.parameters=[],s}t.create=e})(CD||(CD={}));var TD;(function(t){t.Text=1,t.Read=2,t.Write=3})(TD||(TD={}));var kD;(function(t){function e(n,r){let i={range:n};return G.number(r)&&(i.kind=r),i}t.create=e})(kD||(kD={}));var FD;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(FD||(FD={}));var SD;(function(t){t.Deprecated=1})(SD||(SD={}));var RD;(function(t){function e(n,r,i,s,a){let o={name:n,kind:r,location:{uri:s,range:i}};return a&&(o.containerName=a),o}t.create=e})(RD||(RD={}));var ND;(function(t){function e(n,r,i,s){return s!==void 0?{name:n,kind:r,location:{uri:i,range:s}}:{name:n,kind:r,location:{uri:i}}}t.create=e})(ND||(ND={}));var LD;(function(t){function e(r,i,s,a,o,u){let c={name:r,detail:i,kind:s,range:a,selectionRange:o};return u!==void 0&&(c.children=u),c}t.create=e;function n(r){let i=r;return i&&G.string(i.name)&&G.number(i.kind)&&je.is(i.range)&&je.is(i.selectionRange)&&(i.detail===void 0||G.string(i.detail))&&(i.deprecated===void 0||G.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=n})(LD||(LD={}));var MD;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(MD||(MD={}));var Xf;(function(t){t.Invoked=1,t.Automatic=2})(Xf||(Xf={}));var ID;(function(t){function e(r,i,s){let a={diagnostics:r};return i!=null&&(a.only=i),s!=null&&(a.triggerKind=s),a}t.create=e;function n(r){let i=r;return G.defined(i)&&G.typedArray(i.diagnostics,zf.is)&&(i.only===void 0||G.typedArray(i.only,G.string))&&(i.triggerKind===void 0||i.triggerKind===Xf.Invoked||i.triggerKind===Xf.Automatic)}t.is=n})(ID||(ID={}));var OD;(function(t){function e(r,i,s){let a={title:r},o=!0;return typeof i=="string"?(o=!1,a.kind=i):go.is(i)?a.command=i:a.edit=i,o&&s!==void 0&&(a.kind=s),a}t.create=e;function n(r){let i=r;return i&&G.string(i.title)&&(i.diagnostics===void 0||G.typedArray(i.diagnostics,zf.is))&&(i.kind===void 0||G.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||go.is(i.command))&&(i.isPreferred===void 0||G.boolean(i.isPreferred))&&(i.edit===void 0||Tm.is(i.edit))}t.is=n})(OD||(OD={}));var PD;(function(t){function e(r,i){let s={range:r};return G.defined(i)&&(s.data=i),s}t.create=e;function n(r){let i=r;return G.defined(i)&&je.is(i.range)&&(G.undefined(i.command)||go.is(i.command))}t.is=n})(PD||(PD={}));var $D;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}t.create=e;function n(r){let i=r;return G.defined(i)&&G.uinteger(i.tabSize)&&G.boolean(i.insertSpaces)}t.is=n})($D||($D={}));var BD;(function(t){function e(r,i,s){return{range:r,target:i,data:s}}t.create=e;function n(r){let i=r;return G.defined(i)&&je.is(i.range)&&(G.undefined(i.target)||G.string(i.target))}t.is=n})(BD||(BD={}));var UD;(function(t){function e(r,i){return{range:r,parent:i}}t.create=e;function n(r){let i=r;return G.objectLiteral(i)&&je.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=n})(UD||(UD={}));var GD;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(GD||(GD={}));var HD;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(HD||(HD={}));var WD;(function(t){function e(n){const r=n;return G.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})(WD||(WD={}));var zD;(function(t){function e(r,i){return{range:r,text:i}}t.create=e;function n(r){const i=r;return i!=null&&je.is(i.range)&&G.string(i.text)}t.is=n})(zD||(zD={}));var YD;(function(t){function e(r,i,s){return{range:r,variableName:i,caseSensitiveLookup:s}}t.create=e;function n(r){const i=r;return i!=null&&je.is(i.range)&&G.boolean(i.caseSensitiveLookup)&&(G.string(i.variableName)||i.variableName===void 0)}t.is=n})(YD||(YD={}));var XD;(function(t){function e(r,i){return{range:r,expression:i}}t.create=e;function n(r){const i=r;return i!=null&&je.is(i.range)&&(G.string(i.expression)||i.expression===void 0)}t.is=n})(XD||(XD={}));var VD;(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}t.create=e;function n(r){const i=r;return G.defined(i)&&je.is(r.stoppedLocation)}t.is=n})(VD||(VD={}));var Sm;(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}t.is=e})(Sm||(Sm={}));var Rm;(function(t){function e(r){return{value:r}}t.create=e;function n(r){const i=r;return G.objectLiteral(i)&&(i.tooltip===void 0||G.string(i.tooltip)||wc.is(i.tooltip))&&(i.location===void 0||Wf.is(i.location))&&(i.command===void 0||go.is(i.command))}t.is=n})(Rm||(Rm={}));var qD;(function(t){function e(r,i,s){const a={position:r,label:i};return s!==void 0&&(a.kind=s),a}t.create=e;function n(r){const i=r;return G.objectLiteral(i)&&nt.is(i.position)&&(G.string(i.label)||G.typedArray(i.label,Rm.is))&&(i.kind===void 0||Sm.is(i.kind))&&i.textEdits===void 0||G.typedArray(i.textEdits,mo.is)&&(i.tooltip===void 0||G.string(i.tooltip)||wc.is(i.tooltip))&&(i.paddingLeft===void 0||G.boolean(i.paddingLeft))&&(i.paddingRight===void 0||G.boolean(i.paddingRight))}t.is=n})(qD||(qD={}));var jD;(function(t){function e(n){return{kind:"snippet",value:n}}t.createSnippet=e})(jD||(jD={}));var KD;(function(t){function e(n,r,i,s){return{insertText:n,filterText:r,range:i,command:s}}t.create=e})(KD||(KD={}));var ZD;(function(t){function e(n){return{items:n}}t.create=e})(ZD||(ZD={}));var JD;(function(t){t.Invoked=0,t.Automatic=1})(JD||(JD={}));var QD;(function(t){function e(n,r){return{range:n,text:r}}t.create=e})(QD||(QD={}));var ew;(function(t){function e(n,r){return{triggerKind:n,selectedCompletionInfo:r}}t.create=e})(ew||(ew={}));var tw;(function(t){function e(n){const r=n;return G.objectLiteral(r)&&bm.is(r.uri)&&G.string(r.name)}t.is=e})(tw||(tw={}));var nw;(function(t){function e(s,a,o,u){return new ZX(s,a,o,u)}t.create=e;function n(s){let a=s;return!!(G.defined(a)&&G.string(a.uri)&&(G.undefined(a.languageId)||G.string(a.languageId))&&G.uinteger(a.lineCount)&&G.func(a.getText)&&G.func(a.positionAt)&&G.func(a.offsetAt))}t.is=n;function r(s,a){let o=s.getText(),u=i(a,(l,h)=>{let d=l.range.start.line-h.range.start.line;return d===0?l.range.start.character-h.range.start.character:d}),c=o.length;for(let l=u.length-1;l>=0;l--){let h=u[l],d=s.offsetAt(h.range.start),f=s.offsetAt(h.range.end);if(f<=c)o=o.substring(0,d)+h.newText+o.substring(f,o.length);else throw new Error("Overlapping edit");c=d}return o}t.applyEdits=r;function i(s,a){if(s.length<=1)return s;const o=s.length/2|0,u=s.slice(0,o),c=s.slice(o);i(u,a),i(c,a);let l=0,h=0,d=0;for(;l<u.length&&h<c.length;)a(u[l],c[h])<=0?s[d++]=u[l++]:s[d++]=c[h++];for(;l<u.length;)s[d++]=u[l++];for(;h<c.length;)s[d++]=c[h++];return s}})(nw||(nw={}));let ZX=class{constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],n=this._content,r=!0;for(let i=0;i<n.length;i++){r&&(e.push(i),r=!1);let s=n.charAt(i);r=s==="\r"||s===`
`,s==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return nt.create(0,e);for(;r<i;){let a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}let s=r-1;return nt.create(s,e-n[s])}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}};var G;(function(t){const e=Object.prototype.toString;function n(f){return typeof f<"u"}t.defined=n;function r(f){return typeof f>"u"}t.undefined=r;function i(f){return f===!0||f===!1}t.boolean=i;function s(f){return e.call(f)==="[object String]"}t.string=s;function a(f){return e.call(f)==="[object Number]"}t.number=a;function o(f,p,g){return e.call(f)==="[object Number]"&&p<=f&&f<=g}t.numberRange=o;function u(f){return e.call(f)==="[object Number]"&&-2147483648<=f&&f<=2147483647}t.integer=u;function c(f){return e.call(f)==="[object Number]"&&0<=f&&f<=2147483647}t.uinteger=c;function l(f){return e.call(f)==="[object Function]"}t.func=l;function h(f){return f!==null&&typeof f=="object"}t.objectLiteral=h;function d(f,p){return Array.isArray(f)&&f.every(p)}t.typedArray=d})(G||(G={}));class JX{constructor(){this.nodeStack=[]}get current(){var e;return(e=this.nodeStack[this.nodeStack.length-1])!==null&&e!==void 0?e:this.rootNode}buildRootNode(e){return this.rootNode=new Xk(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){const n=new ov;return n.grammarSource=e,n.root=this.rootNode,this.current.content.push(n),this.nodeStack.push(n),n}buildLeafNode(e,n){const r=new Nm(e.startOffset,e.image.length,sm(e),e.tokenType,!n);return r.grammarSource=n,r.root=this.rootNode,this.current.content.push(r),r}removeNode(e){const n=e.container;if(n){const r=n.content.indexOf(e);r>=0&&n.content.splice(r,1)}}addHiddenNodes(e){const n=[];for(const s of e){const a=new Nm(s.startOffset,s.image.length,sm(s),s.tokenType,!0);a.root=this.rootNode,n.push(a)}let r=this.current,i=!1;if(r.content.length>0){r.content.push(...n);return}for(;r.container;){const s=r.container.content.indexOf(r);if(s>0){r.container.content.splice(s,0,...n),i=!0;break}r=r.container}i||this.rootNode.content.unshift(...n)}construct(e){const n=this.current;typeof e.$type=="string"&&(this.current.astNode=e),e.$cstNode=n;const r=this.nodeStack.pop();(r==null?void 0:r.content.length)===0&&this.removeNode(r)}}class Yk{get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,n;const r=typeof((e=this._astNode)===null||e===void 0?void 0:e.$type)=="string"?this._astNode:(n=this.container)===null||n===void 0?void 0:n.astNode;if(!r)throw new Error("This node has no associated AST element");return r}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}}class Nm extends Yk{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,n,r,i,s=!1){super(),this._hidden=s,this._offset=e,this._tokenType=i,this._length=n,this._range=r}}class ov extends Yk{constructor(){super(...arguments),this.content=new uv(this)}get children(){return this.content}get offset(){var e,n;return(n=(e=this.firstNonHiddenNode)===null||e===void 0?void 0:e.offset)!==null&&n!==void 0?n:0}get length(){return this.end-this.offset}get end(){var e,n;return(n=(e=this.lastNonHiddenNode)===null||e===void 0?void 0:e.end)!==null&&n!==void 0?n:0}get range(){const e=this.firstNonHiddenNode,n=this.lastNonHiddenNode;if(e&&n){if(this._rangeCache===void 0){const{range:r}=e,{range:i}=n;this._rangeCache={start:r.start,end:i.end.line<r.start.line?r.start:i.end}}return this._rangeCache}else return{start:nt.create(0,0),end:nt.create(0,0)}}get firstNonHiddenNode(){for(const e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){const n=this.content[e];if(!n.hidden)return n}return this.content[this.content.length-1]}}class uv extends Array{constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,uv.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,n,...r){return this.addParents(r),super.splice(e,n,...r)}addParents(e){for(const n of e)n.container=this.parent}}class Xk extends ov{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e??""}}const Lm=Symbol("Datatype");function Pp(t){return t.$type===Lm}const rw="",Vk=t=>t.endsWith(rw)?t:t+rw;class qk{constructor(e){this._unorderedGroups=new Map,this.allRules=new Map,this.lexer=e.parser.Lexer;const n=this.lexer.definition,r=e.LanguageMetaData.mode==="production";this.wrapper=new rV(n,Object.assign(Object.assign({},e.parser.ParserConfig),{skipValidations:r,errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,n){this.wrapper.wrapOr(e,n)}optional(e,n){this.wrapper.wrapOption(e,n)}many(e,n){this.wrapper.wrapMany(e,n)}atLeastOne(e,n){this.wrapper.wrapAtLeastOne(e,n)}getRule(e){return this.allRules.get(e)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}}class QX extends qk{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new JX,this.stack=[],this.assignmentMap=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,n){const r=this.computeRuleType(e),i=this.wrapper.DEFINE_RULE(Vk(e.name),this.startImplementation(r,n).bind(this));return this.allRules.set(e.name,i),e.entry&&(this.mainRule=i),i}computeRuleType(e){if(!e.fragment){if(QT(e))return Lm;{const n=Vy(e);return n??e.name}}}parse(e,n={}){this.nodeBuilder.buildRootNode(e);const r=this.lexerResult=this.lexer.tokenize(e);this.wrapper.input=r.tokens;const i=n.rule?this.allRules.get(n.rule):this.mainRule;if(!i)throw new Error(n.rule?`No rule found with name '${n.rule}'`:"No main rule available.");const s=i.call(this.wrapper,{});return this.nodeBuilder.addHiddenNodes(r.hidden),this.unorderedGroups.clear(),this.lexerResult=void 0,{value:s,lexerErrors:r.errors,lexerReport:r.report,parserErrors:this.wrapper.errors}}startImplementation(e,n){return r=>{const i=!this.isRecording()&&e!==void 0;if(i){const a={$type:e};this.stack.push(a),e===Lm&&(a.value="")}let s;try{s=n(r)}catch{s=void 0}return s===void 0&&i&&(s=this.construct()),s}}extractHiddenTokens(e){const n=this.lexerResult.hidden;if(!n.length)return[];const r=e.startOffset;for(let i=0;i<n.length;i++)if(n[i].startOffset>r)return n.splice(0,i);return n.splice(0,n.length)}consume(e,n,r){const i=this.wrapper.wrapConsume(e,n);if(!this.isRecording()&&this.isValidToken(i)){const s=this.extractHiddenTokens(i);this.nodeBuilder.addHiddenNodes(s);const a=this.nodeBuilder.buildLeafNode(i,r),{assignment:o,isCrossRef:u}=this.getAssignment(r),c=this.current;if(o){const l=ia(r)?i.image:this.converter.convert(i.image,a);this.assign(o.operator,o.feature,l,a,u)}else if(Pp(c)){let l=i.image;ia(r)||(l=this.converter.convert(l,a).toString()),c.value+=l}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&typeof e.endOffset=="number"&&!isNaN(e.endOffset)}subrule(e,n,r,i,s){let a;!this.isRecording()&&!r&&(a=this.nodeBuilder.buildCompositeNode(i));const o=this.wrapper.wrapSubrule(e,n,s);!this.isRecording()&&a&&a.length>0&&this.performSubruleAssignment(o,i,a)}performSubruleAssignment(e,n,r){const{assignment:i,isCrossRef:s}=this.getAssignment(n);if(i)this.assign(i.operator,i.feature,e,r,s);else if(!i){const a=this.current;if(Pp(a))a.value+=e.toString();else if(typeof e=="object"&&e){const u=this.assignWithoutOverride(e,a);this.stack.pop(),this.stack.push(u)}}}action(e,n){if(!this.isRecording()){let r=this.current;if(n.feature&&n.operator){r=this.construct(),this.nodeBuilder.removeNode(r.$cstNode),this.nodeBuilder.buildCompositeNode(n).content.push(r.$cstNode);const s={$type:e};this.stack.push(s),this.assign(n.operator,n.feature,r,r.$cstNode,!1)}else r.$type=e}}construct(){if(this.isRecording())return;const e=this.current;return LW(e),this.nodeBuilder.construct(e),this.stack.pop(),Pp(e)?this.converter.convert(e.value,e.$cstNode):(MW(this.astReflection,e),e)}getAssignment(e){if(!this.assignmentMap.has(e)){const n=e0(e,ra);this.assignmentMap.set(e,{assignment:n,isCrossRef:n?Wy(n.terminal):!1})}return this.assignmentMap.get(e)}assign(e,n,r,i,s){const a=this.current;let o;switch(s&&typeof r=="string"?o=this.linker.buildReference(a,n,i,r):o=r,e){case"=":{a[n]=o;break}case"?=":{a[n]=!0;break}case"+=":Array.isArray(a[n])||(a[n]=[]),a[n].push(o)}}assignWithoutOverride(e,n){for(const[i,s]of Object.entries(n)){const a=e[i];a===void 0?e[i]=s:Array.isArray(a)&&Array.isArray(s)&&(s.push(...a),e[i]=s)}const r=e.$cstNode;return r&&(r.astNode=void 0,e.$cstNode=void 0),e}get definitionErrors(){return this.wrapper.definitionErrors}}class eV{buildMismatchTokenMessage(e){return Oa.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return Oa.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return Oa.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return Oa.buildEarlyExitMessage(e)}}class jk extends eV{buildMismatchTokenMessage({expected:e,actual:n}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${n.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}}class tV extends qk{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();const n=this.lexer.tokenize(e,{mode:"partial"});return this.tokens=n.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,n){const r=this.wrapper.DEFINE_RULE(Vk(e.name),this.startImplementation(n).bind(this));return this.allRules.set(e.name,r),e.entry&&(this.mainRule=r),r}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return n=>{const r=this.keepStackSize();try{e(n)}finally{this.resetStackSize(r)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,n,r){this.wrapper.wrapConsume(e,n),this.isRecording()||(this.lastElementStack=[...this.elementStack,r],this.nextTokenIndex=this.currIdx+1)}subrule(e,n,r,i,s){this.before(i),this.wrapper.wrapSubrule(e,n,s),this.after(i)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){const n=this.elementStack.lastIndexOf(e);n>=0&&this.elementStack.splice(n)}}get currIdx(){return this.wrapper.currIdx}}const nV={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new jk};class rV extends lX{constructor(e,n){const r=n&&"maxLookahead"in n;super(e,Object.assign(Object.assign(Object.assign({},nV),{lookaheadStrategy:r?new tv({maxLookahead:n.maxLookahead}):new RX({logging:n.skipValidations?()=>{}:void 0})}),n))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,n){return this.RULE(e,n)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,n){return this.consume(e,n)}wrapSubrule(e,n,r){return this.subrule(e,n,{ARGS:[r]})}wrapOr(e,n){this.or(e,n)}wrapOption(e,n){this.option(e,n)}wrapMany(e,n){this.many(e,n)}wrapAtLeastOne(e,n){this.atLeastOne(e,n)}}function Kk(t,e,n){return iV({parser:e,tokens:n,ruleNames:new Map},t),e}function iV(t,e){const n=qT(e,!1),r=pn(e.rules).filter(Ar).filter(i=>n.has(i));for(const i of r){const s=Object.assign(Object.assign({},t),{consume:1,optional:1,subrule:1,many:1,or:1});t.parser.rule(i,oa(s,i.definition))}}function oa(t,e,n=!1){let r;if(ia(e))r=hV(t,e);else if(Qd(e))r=sV(t,e);else if(ra(e))r=oa(t,e.terminal);else if(Wy(e))r=Zk(t,e);else if(sa(e))r=aV(t,e);else if(HT(e))r=uV(t,e);else if(WT(e))r=cV(t,e);else if(zy(e))r=lV(t,e);else if(AW(e)){const i=t.consume++;r=()=>t.parser.consume(i,xs,e)}else throw new $T(e.$cstNode,`Unexpected element type: ${e.$type}`);return Jk(t,n?void 0:Vf(e),r,e.cardinality)}function sV(t,e){const n=qy(e);return()=>t.parser.action(n,e)}function aV(t,e){const n=e.rule.ref;if(Ar(n)){const r=t.subrule++,i=n.fragment,s=e.arguments.length>0?oV(n,e.arguments):()=>({});return a=>t.parser.subrule(r,Qk(t,n),i,e,s(a))}else if(ma(n)){const r=t.consume++,i=Mm(t,n.name);return()=>t.parser.consume(r,i,e)}else if(n)Xc();else throw new $T(e.$cstNode,`Undefined rule: ${e.rule.$refText}`)}function oV(t,e){const n=e.map(r=>Ii(r.value));return r=>{const i={};for(let s=0;s<n.length;s++){const a=t.parameters[s],o=n[s];i[a.name]=o(r)}return i}}function Ii(t){if(bW(t)){const e=Ii(t.left),n=Ii(t.right);return r=>e(r)||n(r)}else if(vW(t)){const e=Ii(t.left),n=Ii(t.right);return r=>e(r)&&n(r)}else if(xW(t)){const e=Ii(t.value);return n=>!e(n)}else if(EW(t)){const e=t.parameter.ref.name;return n=>n!==void 0&&n[e]===!0}else if(yW(t)){const e=!!t.true;return()=>e}Xc()}function uV(t,e){if(e.elements.length===1)return oa(t,e.elements[0]);{const n=[];for(const i of e.elements){const s={ALT:oa(t,i,!0)},a=Vf(i);a&&(s.GATE=Ii(a)),n.push(s)}const r=t.or++;return i=>t.parser.alternatives(r,n.map(s=>{const a={ALT:()=>s.ALT(i)},o=s.GATE;return o&&(a.GATE=()=>o(i)),a}))}}function cV(t,e){if(e.elements.length===1)return oa(t,e.elements[0]);const n=[];for(const o of e.elements){const u={ALT:oa(t,o,!0)},c=Vf(o);c&&(u.GATE=Ii(c)),n.push(u)}const r=t.or++,i=(o,u)=>{const c=u.getRuleStack().join("-");return`uGroup_${o}_${c}`},s=o=>t.parser.alternatives(r,n.map((u,c)=>{const l={ALT:()=>!0},h=t.parser;l.ALT=()=>{if(u.ALT(o),!h.isRecording()){const f=i(r,h);h.unorderedGroups.get(f)||h.unorderedGroups.set(f,[]);const p=h.unorderedGroups.get(f);typeof(p==null?void 0:p[c])>"u"&&(p[c]=!0)}};const d=u.GATE;return d?l.GATE=()=>d(o):l.GATE=()=>{const f=h.unorderedGroups.get(i(r,h));return!(f!=null&&f[c])},l})),a=Jk(t,Vf(e),s,"*");return o=>{a(o),t.parser.isRecording()||t.parser.unorderedGroups.delete(i(r,t.parser))}}function lV(t,e){const n=e.elements.map(r=>oa(t,r));return r=>n.forEach(i=>i(r))}function Vf(t){if(zy(t))return t.guardCondition}function Zk(t,e,n=e.terminal){if(n)if(sa(n)&&Ar(n.rule.ref)){const r=n.rule.ref,i=t.subrule++;return s=>t.parser.subrule(i,Qk(t,r),!1,e,s)}else if(sa(n)&&ma(n.rule.ref)){const r=t.consume++,i=Mm(t,n.rule.ref.name);return()=>t.parser.consume(r,i,e)}else if(ia(n)){const r=t.consume++,i=Mm(t,n.value);return()=>t.parser.consume(r,i,e)}else throw new Error("Could not build cross reference parser");else{if(!e.type.ref)throw new Error("Could not resolve reference to type: "+e.type.$refText);const r=ZT(e.type.ref),i=r==null?void 0:r.terminal;if(!i)throw new Error("Could not find name assignment for type: "+qy(e.type.ref));return Zk(t,e,i)}}function hV(t,e){const n=t.consume++,r=t.tokens[e.value];if(!r)throw new Error("Could not find token for keyword: "+e.value);return()=>t.parser.consume(n,r,e)}function Jk(t,e,n,r){const i=e&&Ii(e);if(!r)if(i){const s=t.or++;return a=>t.parser.alternatives(s,[{ALT:()=>n(a),GATE:()=>i(a)},{ALT:JE(),GATE:()=>!i(a)}])}else return n;if(r==="*"){const s=t.many++;return a=>t.parser.many(s,{DEF:()=>n(a),GATE:i?()=>i(a):void 0})}else if(r==="+"){const s=t.many++;if(i){const a=t.or++;return o=>t.parser.alternatives(a,[{ALT:()=>t.parser.atLeastOne(s,{DEF:()=>n(o)}),GATE:()=>i(o)},{ALT:JE(),GATE:()=>!i(o)}])}else return a=>t.parser.atLeastOne(s,{DEF:()=>n(a)})}else if(r==="?"){const s=t.optional++;return a=>t.parser.optional(s,{DEF:()=>n(a),GATE:i?()=>i(a):void 0})}else Xc()}function Qk(t,e){const n=fV(t,e),r=t.parser.getRule(n);if(!r)throw new Error(`Rule "${n}" not found."`);return r}function fV(t,e){if(Ar(e))return e.name;if(t.ruleNames.has(e))return t.ruleNames.get(e);{let n=e,r=n.$container,i=e.$type;for(;!Ar(r);)(zy(r)||HT(r)||WT(r))&&(i=r.elements.indexOf(n).toString()+":"+i),n=r,r=r.$container;return i=r.name+":"+i,t.ruleNames.set(e,i),i}}function Mm(t,e){const n=t.tokens[e];if(!n)throw new Error(`Token "${e}" not found."`);return n}function dV(t){const e=t.Grammar,n=t.parser.Lexer,r=new tV(t);return Kk(e,r,n.definition),r.finalize(),r}function pV(t){const e=gV(t);return e.finalize(),e}function gV(t){const e=t.Grammar,n=t.parser.Lexer,r=new QX(t);return Kk(e,r,n.definition)}class mV{constructor(){this.diagnostics=[]}buildTokens(e,n){const r=pn(qT(e,!1)),i=this.buildTerminalTokens(r),s=this.buildKeywordTokens(r,i,n);return i.forEach(a=>{const o=a.PATTERN;typeof o=="object"&&o&&"test"in o&&om(o)?s.unshift(a):s.push(a)}),s}flushLexingReport(e){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){const e=[...this.diagnostics];return this.diagnostics=[],e}buildTerminalTokens(e){return e.filter(ma).filter(n=>!n.fragment).map(n=>this.buildTerminalToken(n)).toArray()}buildTerminalToken(e){const n=jy(e),r=this.requiresCustomPattern(n)?this.regexPatternFunction(n):n,i={name:e.name,PATTERN:r};return typeof r=="function"&&(i.LINE_BREAKS=!0),e.hidden&&(i.GROUP=om(n)?Xn.SKIPPED:"hidden"),i}requiresCustomPattern(e){return e.flags.includes("u")||e.flags.includes("s")?!0:!!(e.source.includes("?<=")||e.source.includes("?<!"))}regexPatternFunction(e){const n=new RegExp(e,e.flags+"y");return(r,i)=>(n.lastIndex=i,n.exec(r))}buildKeywordTokens(e,n,r){return e.filter(Ar).flatMap(i=>Vc(i).filter(ia)).distinct(i=>i.value).toArray().sort((i,s)=>s.value.length-i.value.length).map(i=>this.buildKeywordToken(i,n,!!(r!=null&&r.caseInsensitive)))}buildKeywordToken(e,n,r){const i=this.buildKeywordPattern(e,r),s={name:e.value,PATTERN:i,LONGER_ALT:this.findLongerAlt(e,n)};return typeof i=="function"&&(s.LINE_BREAKS=!0),s}buildKeywordPattern(e,n){return n?new RegExp(WW(e.value)):e.value}findLongerAlt(e,n){return n.reduce((r,i)=>{const s=i==null?void 0:i.PATTERN;return s!=null&&s.source&&zW("^"+s.source+"$",e.value)&&r.push(i),r},[])}}class yV{convert(e,n){let r=n.grammarSource;if(Wy(r)&&(r=qW(r)),sa(r)){const i=r.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,e,n)}return e}runConverter(e,n,r){var i;switch(e.name.toUpperCase()){case"INT":return Li.convertInt(n);case"STRING":return Li.convertString(n);case"ID":return Li.convertID(n)}switch((i=tz(e))===null||i===void 0?void 0:i.toLowerCase()){case"number":return Li.convertNumber(n);case"boolean":return Li.convertBoolean(n);case"bigint":return Li.convertBigint(n);case"date":return Li.convertDate(n);default:return n}}}var Li;(function(t){function e(c){let l="";for(let h=1;h<c.length-1;h++){const d=c.charAt(h);if(d==="\\"){const f=c.charAt(++h);l+=n(f)}else l+=d}return l}t.convertString=e;function n(c){switch(c){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"0":return"\0";default:return c}}function r(c){return c.charAt(0)==="^"?c.substring(1):c}t.convertID=r;function i(c){return parseInt(c)}t.convertInt=i;function s(c){return BigInt(c)}t.convertBigint=s;function a(c){return new Date(c)}t.convertDate=a;function o(c){return Number(c)}t.convertNumber=o;function u(c){return c.toLowerCase()==="true"}t.convertBoolean=u})(Li||(Li={}));var Rs={},Yl={},iw;function e3(){if(iw)return Yl;iw=1,Object.defineProperty(Yl,"__esModule",{value:!0});let t;function e(){if(t===void 0)throw new Error("No runtime abstraction layer installed");return t}return(function(n){function r(i){if(i===void 0)throw new Error("No runtime abstraction layer provided");t=i}n.install=r})(e||(e={})),Yl.default=e,Yl}var on={},sw;function vV(){if(sw)return on;sw=1,Object.defineProperty(on,"__esModule",{value:!0}),on.stringArray=on.array=on.func=on.error=on.number=on.string=on.boolean=void 0;function t(o){return o===!0||o===!1}on.boolean=t;function e(o){return typeof o=="string"||o instanceof String}on.string=e;function n(o){return typeof o=="number"||o instanceof Number}on.number=n;function r(o){return o instanceof Error}on.error=r;function i(o){return typeof o=="function"}on.func=i;function s(o){return Array.isArray(o)}on.array=s;function a(o){return s(o)&&o.every(u=>e(u))}return on.stringArray=a,on}var Ns={},aw;function t3(){if(aw)return Ns;aw=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.Emitter=Ns.Event=void 0;const t=e3();var e;(function(i){const s={dispose(){}};i.None=function(){return s}})(e||(Ns.Event=e={}));class n{add(s,a=null,o){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(s),this._contexts.push(a),Array.isArray(o)&&o.push({dispose:()=>this.remove(s,a)})}remove(s,a=null){if(!this._callbacks)return;let o=!1;for(let u=0,c=this._callbacks.length;u<c;u++)if(this._callbacks[u]===s)if(this._contexts[u]===a){this._callbacks.splice(u,1),this._contexts.splice(u,1);return}else o=!0;if(o)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...s){if(!this._callbacks)return[];const a=[],o=this._callbacks.slice(0),u=this._contexts.slice(0);for(let c=0,l=o.length;c<l;c++)try{a.push(o[c].apply(u[c],s))}catch(h){(0,t.default)().console.error(h)}return a}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(s){this._options=s}get event(){return this._event||(this._event=(s,a,o)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(s,a);const u={dispose:()=>{this._callbacks&&(this._callbacks.remove(s,a),u.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(o)&&o.push(u),u}),this._event}fire(s){this._callbacks&&this._callbacks.invoke.call(this._callbacks,s)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}return Ns.Emitter=r,r._noop=function(){},Ns}var ow;function bV(){if(ow)return Rs;ow=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.CancellationTokenSource=Rs.CancellationToken=void 0;const t=e3(),e=vV(),n=t3();var r;(function(o){o.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n.Event.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n.Event.None});function u(c){const l=c;return l&&(l===o.None||l===o.Cancelled||e.boolean(l.isCancellationRequested)&&!!l.onCancellationRequested)}o.is=u})(r||(Rs.CancellationToken=r={}));const i=Object.freeze(function(o,u){const c=(0,t.default)().timer.setTimeout(o.bind(u),0);return{dispose(){c.dispose()}}});class s{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?i:(this._emitter||(this._emitter=new n.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class a{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=r.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=r.None}}return Rs.CancellationTokenSource=a,Rs}var xt=bV();function xV(){return new Promise(t=>{typeof setImmediate>"u"?setTimeout(t,0):setImmediate(t)})}let Ch=0,EV=10;function DV(){return Ch=performance.now(),new xt.CancellationTokenSource}const qf=Symbol("OperationCancelled");function l0(t){return t===qf}async function ir(t){if(t===xt.CancellationToken.None)return;const e=performance.now();if(e-Ch>=EV&&(Ch=e,await xV(),Ch=performance.now()),t.isCancellationRequested)throw qf}class cv{constructor(){this.promise=new Promise((e,n)=>{this.resolve=r=>(e(r),this),this.reject=r=>(n(r),this)})}}class _c{constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){const n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){for(const r of e)if(_c.isIncremental(r)){const i=r3(r.range),s=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,s)+r.text+this._content.substring(a,this._content.length);const o=Math.max(i.start.line,0),u=Math.max(i.end.line,0);let c=this._lineOffsets;const l=uw(r.text,!1,s);if(u-o===l.length)for(let d=0,f=l.length;d<f;d++)c[d+o+1]=l[d];else l.length<1e4?c.splice(o+1,u-o,...l):this._lineOffsets=c=c.slice(0,o+1).concat(l,c.slice(u+1));const h=r.text.length-(a-s);if(h!==0)for(let d=o+1+l.length,f=c.length;d<f;d++)c[d]=c[d]+h}else if(_c.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=uw(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){const a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}const s=r-1;return e=this.ensureBeforeEOL(e,n[s]),{line:s,character:e-n[s]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const r=n[e.line];if(e.character<=0)return r;const i=e.line+1<n.length?n[e.line+1]:this._content.length,s=Math.min(r+e.character,i);return this.ensureBeforeEOL(s,r)}ensureBeforeEOL(e,n){for(;e>n&&n3(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){const n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(e){const n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}}var Im;(function(t){function e(i,s,a,o){return new _c(i,s,a,o)}t.create=e;function n(i,s,a){if(i instanceof _c)return i.update(s,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=n;function r(i,s){const a=i.getText(),o=Om(s.map(wV),(l,h)=>{const d=l.range.start.line-h.range.start.line;return d===0?l.range.start.character-h.range.start.character:d});let u=0;const c=[];for(const l of o){const h=i.offsetAt(l.range.start);if(h<u)throw new Error("Overlapping edit");h>u&&c.push(a.substring(u,h)),l.newText.length&&c.push(l.newText),u=i.offsetAt(l.range.end)}return c.push(a.substr(u)),c.join("")}t.applyEdits=r})(Im||(Im={}));function Om(t,e){if(t.length<=1)return t;const n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);Om(r,e),Om(i,e);let s=0,a=0,o=0;for(;s<r.length&&a<i.length;)e(r[s],i[a])<=0?t[o++]=r[s++]:t[o++]=i[a++];for(;s<r.length;)t[o++]=r[s++];for(;a<i.length;)t[o++]=i[a++];return t}function uw(t,e,n=0){const r=e?[n]:[];for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);n3(s)&&(s===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function n3(t){return t===13||t===10}function r3(t){const e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}function wV(t){const e=r3(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var i3;(()=>{var t={470:i=>{function s(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function a(u,c){for(var l,h="",d=0,f=-1,p=0,g=0;g<=u.length;++g){if(g<u.length)l=u.charCodeAt(g);else{if(l===47)break;l=47}if(l===47){if(!(f===g-1||p===1))if(f!==g-1&&p===2){if(h.length<2||d!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var m=h.lastIndexOf("/");if(m!==h.length-1){m===-1?(h="",d=0):d=(h=h.slice(0,m)).length-1-h.lastIndexOf("/"),f=g,p=0;continue}}else if(h.length===2||h.length===1){h="",d=0,f=g,p=0;continue}}c&&(h.length>0?h+="/..":h="..",d=2)}else h.length>0?h+="/"+u.slice(f+1,g):h=u.slice(f+1,g),d=g-f-1;f=g,p=0}else l===46&&p!==-1?++p:p=-1}return h}var o={resolve:function(){for(var u,c="",l=!1,h=arguments.length-1;h>=-1&&!l;h--){var d;h>=0?d=arguments[h]:(u===void 0&&(u=process.cwd()),d=u),s(d),d.length!==0&&(c=d+"/"+c,l=d.charCodeAt(0)===47)}return c=a(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(u){if(s(u),u.length===0)return".";var c=u.charCodeAt(0)===47,l=u.charCodeAt(u.length-1)===47;return(u=a(u,!c)).length!==0||c||(u="."),u.length>0&&l&&(u+="/"),c?"/"+u:u},isAbsolute:function(u){return s(u),u.length>0&&u.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var u,c=0;c<arguments.length;++c){var l=arguments[c];s(l),l.length>0&&(u===void 0?u=l:u+="/"+l)}return u===void 0?".":o.normalize(u)},relative:function(u,c){if(s(u),s(c),u===c||(u=o.resolve(u))===(c=o.resolve(c)))return"";for(var l=1;l<u.length&&u.charCodeAt(l)===47;++l);for(var h=u.length,d=h-l,f=1;f<c.length&&c.charCodeAt(f)===47;++f);for(var p=c.length-f,g=d<p?d:p,m=-1,y=0;y<=g;++y){if(y===g){if(p>g){if(c.charCodeAt(f+y)===47)return c.slice(f+y+1);if(y===0)return c.slice(f+y)}else d>g&&(u.charCodeAt(l+y)===47?m=y:y===0&&(m=0));break}var b=u.charCodeAt(l+y);if(b!==c.charCodeAt(f+y))break;b===47&&(m=y)}var v="";for(y=l+m+1;y<=h;++y)y!==h&&u.charCodeAt(y)!==47||(v.length===0?v+="..":v+="/..");return v.length>0?v+c.slice(f+m):(f+=m,c.charCodeAt(f)===47&&++f,c.slice(f))},_makeLong:function(u){return u},dirname:function(u){if(s(u),u.length===0)return".";for(var c=u.charCodeAt(0),l=c===47,h=-1,d=!0,f=u.length-1;f>=1;--f)if((c=u.charCodeAt(f))===47){if(!d){h=f;break}}else d=!1;return h===-1?l?"/":".":l&&h===1?"//":u.slice(0,h)},basename:function(u,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');s(u);var l,h=0,d=-1,f=!0;if(c!==void 0&&c.length>0&&c.length<=u.length){if(c.length===u.length&&c===u)return"";var p=c.length-1,g=-1;for(l=u.length-1;l>=0;--l){var m=u.charCodeAt(l);if(m===47){if(!f){h=l+1;break}}else g===-1&&(f=!1,g=l+1),p>=0&&(m===c.charCodeAt(p)?--p==-1&&(d=l):(p=-1,d=g))}return h===d?d=g:d===-1&&(d=u.length),u.slice(h,d)}for(l=u.length-1;l>=0;--l)if(u.charCodeAt(l)===47){if(!f){h=l+1;break}}else d===-1&&(f=!1,d=l+1);return d===-1?"":u.slice(h,d)},extname:function(u){s(u);for(var c=-1,l=0,h=-1,d=!0,f=0,p=u.length-1;p>=0;--p){var g=u.charCodeAt(p);if(g!==47)h===-1&&(d=!1,h=p+1),g===46?c===-1?c=p:f!==1&&(f=1):c!==-1&&(f=-1);else if(!d){l=p+1;break}}return c===-1||h===-1||f===0||f===1&&c===h-1&&c===l+1?"":u.slice(c,h)},format:function(u){if(u===null||typeof u!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return(function(c,l){var h=l.dir||l.root,d=l.base||(l.name||"")+(l.ext||"");return h?h===l.root?h+d:h+"/"+d:d})(0,u)},parse:function(u){s(u);var c={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return c;var l,h=u.charCodeAt(0),d=h===47;d?(c.root="/",l=1):l=0;for(var f=-1,p=0,g=-1,m=!0,y=u.length-1,b=0;y>=l;--y)if((h=u.charCodeAt(y))!==47)g===-1&&(m=!1,g=y+1),h===46?f===-1?f=y:b!==1&&(b=1):f!==-1&&(b=-1);else if(!m){p=y+1;break}return f===-1||g===-1||b===0||b===1&&f===g-1&&f===p+1?g!==-1&&(c.base=c.name=p===0&&d?u.slice(1,g):u.slice(p,g)):(p===0&&d?(c.name=u.slice(1,f),c.base=u.slice(1,g)):(c.name=u.slice(p,f),c.base=u.slice(p,g)),c.ext=u.slice(f,g)),p>0?c.dir=u.slice(0,p-1):d&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,i.exports=o}},e={};function n(i){var s=e[i];if(s!==void 0)return s.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}n.d=(i,s)=>{for(var a in s)n.o(s,a)&&!n.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:s[a]})},n.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),n.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{let i;n.r(r),n.d(r,{URI:()=>d,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);const s=/^\w[\w\d+.-]*$/,a=/^\//,o=/^\/\//;function u(L,S){if(!L.scheme&&S)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${L.authority}", path: "${L.path}", query: "${L.query}", fragment: "${L.fragment}"}`);if(L.scheme&&!s.test(L.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(L.path){if(L.authority){if(!a.test(L.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(o.test(L.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}const c="",l="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class d{constructor(S,M,E,_,C,T=!1){be(this,"scheme");be(this,"authority");be(this,"path");be(this,"query");be(this,"fragment");typeof S=="object"?(this.scheme=S.scheme||c,this.authority=S.authority||c,this.path=S.path||c,this.query=S.query||c,this.fragment=S.fragment||c):(this.scheme=(function(F,I){return F||I?F:"file"})(S,T),this.authority=M||c,this.path=(function(F,I){switch(F){case"https":case"http":case"file":I?I[0]!==l&&(I=l+I):I=l}return I})(this.scheme,E||c),this.query=_||c,this.fragment=C||c,u(this,T))}static isUri(S){return S instanceof d||!!S&&typeof S.authority=="string"&&typeof S.fragment=="string"&&typeof S.path=="string"&&typeof S.query=="string"&&typeof S.scheme=="string"&&typeof S.fsPath=="string"&&typeof S.with=="function"&&typeof S.toString=="function"}get fsPath(){return b(this)}with(S){if(!S)return this;let{scheme:M,authority:E,path:_,query:C,fragment:T}=S;return M===void 0?M=this.scheme:M===null&&(M=c),E===void 0?E=this.authority:E===null&&(E=c),_===void 0?_=this.path:_===null&&(_=c),C===void 0?C=this.query:C===null&&(C=c),T===void 0?T=this.fragment:T===null&&(T=c),M===this.scheme&&E===this.authority&&_===this.path&&C===this.query&&T===this.fragment?this:new p(M,E,_,C,T)}static parse(S,M=!1){const E=h.exec(S);return E?new p(E[2]||c,k(E[4]||c),k(E[5]||c),k(E[7]||c),k(E[9]||c),M):new p(c,c,c,c,c)}static file(S){let M=c;if(i&&(S=S.replace(/\\/g,l)),S[0]===l&&S[1]===l){const E=S.indexOf(l,2);E===-1?(M=S.substring(2),S=l):(M=S.substring(2,E),S=S.substring(E)||l)}return new p("file",M,S,c,c)}static from(S){const M=new p(S.scheme,S.authority,S.path,S.query,S.fragment);return u(M,!0),M}toString(S=!1){return v(this,S)}toJSON(){return this}static revive(S){if(S){if(S instanceof d)return S;{const M=new p(S);return M._formatted=S.external,M._fsPath=S._sep===f?S.fsPath:null,M}}return S}}const f=i?1:void 0;class p extends d{constructor(){super(...arguments);be(this,"_formatted",null);be(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=b(this)),this._fsPath}toString(M=!1){return M?v(this,!0):(this._formatted||(this._formatted=v(this,!1)),this._formatted)}toJSON(){const M={$mid:1};return this._fsPath&&(M.fsPath=this._fsPath,M._sep=f),this._formatted&&(M.external=this._formatted),this.path&&(M.path=this.path),this.scheme&&(M.scheme=this.scheme),this.authority&&(M.authority=this.authority),this.query&&(M.query=this.query),this.fragment&&(M.fragment=this.fragment),M}}const g={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function m(L,S,M){let E,_=-1;for(let C=0;C<L.length;C++){const T=L.charCodeAt(C);if(T>=97&&T<=122||T>=65&&T<=90||T>=48&&T<=57||T===45||T===46||T===95||T===126||S&&T===47||M&&T===91||M&&T===93||M&&T===58)_!==-1&&(E+=encodeURIComponent(L.substring(_,C)),_=-1),E!==void 0&&(E+=L.charAt(C));else{E===void 0&&(E=L.substr(0,C));const F=g[T];F!==void 0?(_!==-1&&(E+=encodeURIComponent(L.substring(_,C)),_=-1),E+=F):_===-1&&(_=C)}}return _!==-1&&(E+=encodeURIComponent(L.substring(_))),E!==void 0?E:L}function y(L){let S;for(let M=0;M<L.length;M++){const E=L.charCodeAt(M);E===35||E===63?(S===void 0&&(S=L.substr(0,M)),S+=g[E]):S!==void 0&&(S+=L[M])}return S!==void 0?S:L}function b(L,S){let M;return M=L.authority&&L.path.length>1&&L.scheme==="file"?`//${L.authority}${L.path}`:L.path.charCodeAt(0)===47&&(L.path.charCodeAt(1)>=65&&L.path.charCodeAt(1)<=90||L.path.charCodeAt(1)>=97&&L.path.charCodeAt(1)<=122)&&L.path.charCodeAt(2)===58?L.path[1].toLowerCase()+L.path.substr(2):L.path,i&&(M=M.replace(/\//g,"\\")),M}function v(L,S){const M=S?y:m;let E="",{scheme:_,authority:C,path:T,query:F,fragment:I}=L;if(_&&(E+=_,E+=":"),(C||_==="file")&&(E+=l,E+=l),C){let P=C.indexOf("@");if(P!==-1){const U=C.substr(0,P);C=C.substr(P+1),P=U.lastIndexOf(":"),P===-1?E+=M(U,!1,!1):(E+=M(U.substr(0,P),!1,!1),E+=":",E+=M(U.substr(P+1),!1,!0)),E+="@"}C=C.toLowerCase(),P=C.lastIndexOf(":"),P===-1?E+=M(C,!1,!0):(E+=M(C.substr(0,P),!1,!0),E+=C.substr(P))}if(T){if(T.length>=3&&T.charCodeAt(0)===47&&T.charCodeAt(2)===58){const P=T.charCodeAt(1);P>=65&&P<=90&&(T=`/${String.fromCharCode(P+32)}:${T.substr(3)}`)}else if(T.length>=2&&T.charCodeAt(1)===58){const P=T.charCodeAt(0);P>=65&&P<=90&&(T=`${String.fromCharCode(P+32)}:${T.substr(2)}`)}E+=M(T,!0,!1)}return F&&(E+="?",E+=M(F,!1,!1)),I&&(E+="#",E+=S?I:m(I,!1,!1)),E}function x(L){try{return decodeURIComponent(L)}catch{return L.length>3?L.substr(0,3)+x(L.substr(3)):L}}const w=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function k(L){return L.match(w)?L.replace(w,(S=>x(S))):L}var D=n(470);const A=D.posix||D,R="/";var N;(function(L){L.joinPath=function(S,...M){return S.with({path:A.join(S.path,...M)})},L.resolvePath=function(S,...M){let E=S.path,_=!1;E[0]!==R&&(E=R+E,_=!0);let C=A.resolve(E,...M);return _&&C[0]===R&&!S.authority&&(C=C.substring(1)),S.with({path:C})},L.dirname=function(S){if(S.path.length===0||S.path===R)return S;let M=A.dirname(S.path);return M.length===1&&M.charCodeAt(0)===46&&(M=""),S.with({path:M})},L.basename=function(S){return A.basename(S.path)},L.extname=function(S){return A.extname(S.path)}})(N||(N={}))})(),i3=r})();const{URI:ua,Utils:eu}=i3;var Ds;(function(t){t.basename=eu.basename,t.dirname=eu.dirname,t.extname=eu.extname,t.joinPath=eu.joinPath,t.resolvePath=eu.resolvePath;function e(i,s){return(i==null?void 0:i.toString())===(s==null?void 0:s.toString())}t.equals=e;function n(i,s){const a=typeof i=="string"?i:i.path,o=typeof s=="string"?s:s.path,u=a.split("/").filter(f=>f.length>0),c=o.split("/").filter(f=>f.length>0);let l=0;for(;l<u.length&&u[l]===c[l];l++);const h="../".repeat(u.length-l),d=c.slice(l).join("/");return h+d}t.relative=n;function r(i){return ua.parse(i.toString()).toString()}t.normalize=r})(Ds||(Ds={}));var mt;(function(t){t[t.Changed=0]="Changed",t[t.Parsed=1]="Parsed",t[t.IndexedContent=2]="IndexedContent",t[t.ComputedScopes=3]="ComputedScopes",t[t.Linked=4]="Linked",t[t.IndexedReferences=5]="IndexedReferences",t[t.Validated=6]="Validated"})(mt||(mt={}));class _V{constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,n=xt.CancellationToken.None){const r=await this.fileSystemProvider.readFile(e);return this.createAsync(e,r,n)}fromTextDocument(e,n,r){return n=n??ua.parse(e.uri),xt.CancellationToken.is(r)?this.createAsync(n,e,r):this.create(n,e,r)}fromString(e,n,r){return xt.CancellationToken.is(r)?this.createAsync(n,e,r):this.create(n,e,r)}fromModel(e,n){return this.create(n,{$model:e})}create(e,n,r){if(typeof n=="string"){const i=this.parse(e,n,r);return this.createLangiumDocument(i,e,void 0,n)}else if("$model"in n){const i={value:n.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(i,e)}else{const i=this.parse(e,n.getText(),r);return this.createLangiumDocument(i,e,n)}}async createAsync(e,n,r){if(typeof n=="string"){const i=await this.parseAsync(e,n,r);return this.createLangiumDocument(i,e,void 0,n)}else{const i=await this.parseAsync(e,n.getText(),r);return this.createLangiumDocument(i,e,n)}}createLangiumDocument(e,n,r,i){let s;if(r)s={parseResult:e,uri:n,state:mt.Parsed,references:[],textDocument:r};else{const a=this.createTextDocumentGetter(n,i);s={parseResult:e,uri:n,state:mt.Parsed,references:[],get textDocument(){return a()}}}return e.value.$document=s,s}async update(e,n){var r,i;const s=(r=e.parseResult.value.$cstNode)===null||r===void 0?void 0:r.root.fullText,a=(i=this.textDocuments)===null||i===void 0?void 0:i.get(e.uri.toString()),o=a?a.getText():await this.fileSystemProvider.readFile(e.uri);if(a)Object.defineProperty(e,"textDocument",{value:a});else{const u=this.createTextDocumentGetter(e.uri,o);Object.defineProperty(e,"textDocument",{get:u})}return s!==o&&(e.parseResult=await this.parseAsync(e.uri,o,n),e.parseResult.value.$document=e),e.state=mt.Parsed,e}parse(e,n,r){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(n,r)}parseAsync(e,n,r){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(n,r)}createTextDocumentGetter(e,n){const r=this.serviceRegistry;let i;return()=>i??(i=Im.create(e.toString(),r.getServices(e).LanguageMetaData.languageId,0,n??""))}}class AV{constructor(e){this.documentMap=new Map,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.serviceRegistry=e.ServiceRegistry}get all(){return pn(this.documentMap.values())}addDocument(e){const n=e.uri.toString();if(this.documentMap.has(n))throw new Error(`A document with the URI '${n}' is already present.`);this.documentMap.set(n,e)}getDocument(e){const n=e.toString();return this.documentMap.get(n)}async getOrCreateDocument(e,n){let r=this.getDocument(e);return r||(r=await this.langiumDocumentFactory.fromUri(e,n),this.addDocument(r),r)}createDocument(e,n,r){if(r)return this.langiumDocumentFactory.fromString(n,e,r).then(i=>(this.addDocument(i),i));{const i=this.langiumDocumentFactory.fromString(n,e);return this.addDocument(i),i}}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(e){const n=e.toString(),r=this.documentMap.get(n);return r&&(this.serviceRegistry.getServices(e).references.Linker.unlink(r),r.state=mt.Changed,r.precomputedScopes=void 0,r.diagnostics=void 0),r}deleteDocument(e){const n=e.toString(),r=this.documentMap.get(n);return r&&(r.state=mt.Changed,this.documentMap.delete(n)),r}}const $p=Symbol("ref_resolving");class CV{constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator}async link(e,n=xt.CancellationToken.None){for(const r of Va(e.parseResult.value))await ir(n),YT(r).forEach(i=>this.doLink(i,e))}doLink(e,n){var r;const i=e.reference;if(i._ref===void 0){i._ref=$p;try{const s=this.getCandidate(e);if(bh(s))i._ref=s;else if(i._nodeDescription=s,this.langiumDocuments().hasDocument(s.documentUri)){const a=this.loadAstNode(s);i._ref=a??this.createLinkingError(e,s)}else i._ref=void 0}catch(s){console.error(`An error occurred while resolving reference to '${i.$refText}':`,s);const a=(r=s.message)!==null&&r!==void 0?r:String(s);i._ref=Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${i.$refText}': ${a}`})}n.references.push(i)}}unlink(e){for(const n of e.references)delete n._ref,delete n._nodeDescription;e.references=[]}getCandidate(e){const r=this.scopeProvider.getScope(e).getElement(e.reference.$refText);return r??this.createLinkingError(e)}buildReference(e,n,r,i){const s=this,a={$refNode:r,$refText:i,get ref(){var o;if(Cn(this._ref))return this._ref;if(aW(this._nodeDescription)){const u=s.loadAstNode(this._nodeDescription);this._ref=u??s.createLinkingError({reference:a,container:e,property:n},this._nodeDescription)}else if(this._ref===void 0){this._ref=$p;const u=am(e).$document,c=s.getLinkedNode({reference:a,container:e,property:n});if(c.error&&u&&u.state<mt.ComputedScopes)return this._ref=void 0;this._ref=(o=c.node)!==null&&o!==void 0?o:c.error,this._nodeDescription=c.descr,u==null||u.references.push(this)}else if(this._ref===$p)throw new Error(`Cyclic reference resolution detected: ${s.astNodeLocator.getAstNodePath(e)}/${n} (symbol '${i}')`);return Cn(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return bh(this._ref)?this._ref:void 0}};return a}getLinkedNode(e){var n;try{const r=this.getCandidate(e);if(bh(r))return{error:r};const i=this.loadAstNode(r);return i?{node:i,descr:r}:{descr:r,error:this.createLinkingError(e,r)}}catch(r){console.error(`An error occurred while resolving reference to '${e.reference.$refText}':`,r);const i=(n=r.message)!==null&&n!==void 0?n:String(r);return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${i}`})}}}loadAstNode(e){if(e.node)return e.node;const n=this.langiumDocuments().getDocument(e.documentUri);if(n)return this.astNodeLocator.getAstNode(n.parseResult.value,e.path)}createLinkingError(e,n){const r=am(e.container).$document;r&&r.state<mt.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${r.uri}).`);const i=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${i} named '${e.reference.$refText}'.`,targetDescription:n})}}function TV(t){return typeof t.name=="string"}class kV{getName(e){if(TV(e))return e.name}getNameNode(e){return KT(e.$cstNode,"name")}}class FV{constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(e){if(e){const n=QW(e),r=e.astNode;if(n&&r){const i=r[n.feature];if(pi(i))return i.ref;if(Array.isArray(i)){for(const s of i)if(pi(s)&&s.$refNode&&s.$refNode.offset<=e.offset&&s.$refNode.end>=e.end)return s.ref}}if(r){const i=this.nameProvider.getNameNode(r);if(i&&(i===e||lW(e,i)))return r}}}findDeclarationNode(e){const n=this.findDeclaration(e);if(n!=null&&n.$cstNode){const r=this.nameProvider.getNameNode(n);return r??n.$cstNode}}findReferences(e,n){const r=[];if(n.includeDeclaration){const s=this.getReferenceToSelf(e);s&&r.push(s)}let i=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return n.documentUri&&(i=i.filter(s=>Ds.equals(s.sourceUri,n.documentUri))),r.push(...i),pn(r)}getReferenceToSelf(e){const n=this.nameProvider.getNameNode(e);if(n){const r=vs(e),i=this.nodeLocator.getAstNodePath(e);return{sourceUri:r.uri,sourcePath:i,targetUri:r.uri,targetPath:i,segment:Sf(n),local:!0}}}}class jf{constructor(e){if(this.map=new Map,e)for(const[n,r]of e)this.add(n,r)}get size(){return rm.sum(pn(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(e,n){if(n===void 0)return this.map.delete(e);{const r=this.map.get(e);if(r){const i=r.indexOf(n);if(i>=0)return r.length===1?this.map.delete(e):r.splice(i,1),!0}return!1}}get(e){var n;return(n=this.map.get(e))!==null&&n!==void 0?n:[]}has(e,n){if(n===void 0)return this.map.has(e);{const r=this.map.get(e);return r?r.indexOf(n)>=0:!1}}add(e,n){return this.map.has(e)?this.map.get(e).push(n):this.map.set(e,[n]),this}addAll(e,n){return this.map.has(e)?this.map.get(e).push(...n):this.map.set(e,Array.from(n)),this}forEach(e){this.map.forEach((n,r)=>n.forEach(i=>e(i,r,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return pn(this.map.entries()).flatMap(([e,n])=>n.map(r=>[e,r]))}keys(){return pn(this.map.keys())}values(){return pn(this.map.values()).flat()}entriesGroupedByKey(){return pn(this.map.entries())}}class cw{get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(const[n,r]of e)this.set(n,r)}clear(){this.map.clear(),this.inverse.clear()}set(e,n){return this.map.set(e,n),this.inverse.set(n,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){const n=this.map.get(e);return n!==void 0?(this.map.delete(e),this.inverse.delete(n),!0):!1}}class SV{constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}async computeExports(e,n=xt.CancellationToken.None){return this.computeExportsForNode(e.parseResult.value,e,void 0,n)}async computeExportsForNode(e,n,r=Yy,i=xt.CancellationToken.None){const s=[];this.exportNode(e,s,n);for(const a of r(e))await ir(i),this.exportNode(a,s,n);return s}exportNode(e,n,r){const i=this.nameProvider.getName(e);i&&n.push(this.descriptions.createDescription(e,i,r))}async computeLocalScopes(e,n=xt.CancellationToken.None){const r=e.parseResult.value,i=new jf;for(const s of Vc(r))await ir(n),this.processNode(s,e,i);return i}processNode(e,n,r){const i=e.$container;if(i){const s=this.nameProvider.getName(e);s&&r.add(i,this.descriptions.createDescription(e,s,n))}}}class lw{constructor(e,n,r){var i;this.elements=e,this.outerScope=n,this.caseInsensitive=(i=r==null?void 0:r.caseInsensitive)!==null&&i!==void 0?i:!1}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){const n=this.caseInsensitive?this.elements.find(r=>r.name.toLowerCase()===e.toLowerCase()):this.elements.find(r=>r.name===e);if(n)return n;if(this.outerScope)return this.outerScope.getElement(e)}}class RV{constructor(e,n,r){var i;this.elements=new Map,this.caseInsensitive=(i=r==null?void 0:r.caseInsensitive)!==null&&i!==void 0?i:!1;for(const s of e){const a=this.caseInsensitive?s.name.toLowerCase():s.name;this.elements.set(a,s)}this.outerScope=n}getElement(e){const n=this.caseInsensitive?e.toLowerCase():e,r=this.elements.get(n);if(r)return r;if(this.outerScope)return this.outerScope.getElement(e)}getAllElements(){let e=pn(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}}class s3{constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}}class NV extends s3{constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,n){this.throwIfDisposed(),this.cache.set(e,n)}get(e,n){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(n){const r=n();return this.cache.set(e,r),r}else return}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}}class LV extends s3{constructor(e){super(),this.cache=new Map,this.converter=e??(n=>n)}has(e,n){return this.throwIfDisposed(),this.cacheForContext(e).has(n)}set(e,n,r){this.throwIfDisposed(),this.cacheForContext(e).set(n,r)}get(e,n,r){this.throwIfDisposed();const i=this.cacheForContext(e);if(i.has(n))return i.get(n);if(r){const s=r();return i.set(n,s),s}else return}delete(e,n){return this.throwIfDisposed(),this.cacheForContext(e).delete(n)}clear(e){if(this.throwIfDisposed(),e){const n=this.converter(e);this.cache.delete(n)}else this.cache.clear()}cacheForContext(e){const n=this.converter(e);let r=this.cache.get(n);return r||(r=new Map,this.cache.set(n,r)),r}}class MV extends NV{constructor(e,n){super(),n?(this.toDispose.push(e.workspace.DocumentBuilder.onBuildPhase(n,()=>{this.clear()})),this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((r,i)=>{i.length>0&&this.clear()}))):this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}class IV{constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new MV(e.shared)}getScope(e){const n=[],r=this.reflection.getReferenceType(e),i=vs(e.container).precomputedScopes;if(i){let a=e.container;do{const o=i.get(a);o.length>0&&n.push(pn(o).filter(u=>this.reflection.isSubtype(u.type,r))),a=a.$container}while(a)}let s=this.getGlobalScope(r,e);for(let a=n.length-1;a>=0;a--)s=this.createScope(n[a],s);return s}createScope(e,n,r){return new lw(pn(e),n,r)}createScopeForNodes(e,n,r){const i=pn(e).map(s=>{const a=this.nameProvider.getName(s);if(a)return this.descriptions.createDescription(s,a)}).nonNullable();return new lw(i,n,r)}getGlobalScope(e,n){return this.globalScopeCache.get(e,()=>new RV(this.indexManager.allElements(e)))}}function OV(t){return typeof t.$comment=="string"}function hw(t){return typeof t=="object"&&!!t&&("$ref"in t||"$error"in t)}class PV{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,n){const r=n??{},i=n==null?void 0:n.replacer,s=(o,u)=>this.replacer(o,u,r),a=i?(o,u)=>i(o,u,s):s;try{return this.currentDocument=vs(e),JSON.stringify(e,a,n==null?void 0:n.space)}finally{this.currentDocument=void 0}}deserialize(e,n){const r=n??{},i=JSON.parse(e);return this.linkNode(i,i,r),i}replacer(e,n,{refText:r,sourceText:i,textRegions:s,comments:a,uriConverter:o}){var u,c,l,h;if(!this.ignoreProperties.has(e))if(pi(n)){const d=n.ref,f=r?n.$refText:void 0;if(d){const p=vs(d);let g="";this.currentDocument&&this.currentDocument!==p&&(o?g=o(p.uri,n):g=p.uri.toString());const m=this.astNodeLocator.getAstNodePath(d);return{$ref:`${g}#${m}`,$refText:f}}else return{$error:(c=(u=n.error)===null||u===void 0?void 0:u.message)!==null&&c!==void 0?c:"Could not resolve reference",$refText:f}}else if(Cn(n)){let d;if(s&&(d=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},n)),(!e||n.$document)&&(d!=null&&d.$textRegion)&&(d.$textRegion.documentURI=(l=this.currentDocument)===null||l===void 0?void 0:l.uri.toString())),i&&!e&&(d??(d=Object.assign({},n)),d.$sourceText=(h=n.$cstNode)===null||h===void 0?void 0:h.text),a){d??(d=Object.assign({},n));const f=this.commentProvider.getComment(n);f&&(d.$comment=f.replace(/\r/g,""))}return d??n}else return n}addAstNodeRegionWithAssignmentsTo(e){const n=r=>({offset:r.offset,end:r.end,length:r.length,range:r.range});if(e.$cstNode){const r=e.$textRegion=n(e.$cstNode),i=r.assignments={};return Object.keys(e).filter(s=>!s.startsWith("$")).forEach(s=>{const a=KW(e.$cstNode,s).map(n);a.length!==0&&(i[s]=a)}),e}}linkNode(e,n,r,i,s,a){for(const[u,c]of Object.entries(e))if(Array.isArray(c))for(let l=0;l<c.length;l++){const h=c[l];hw(h)?c[l]=this.reviveReference(e,u,n,h,r):Cn(h)&&this.linkNode(h,n,r,e,u,l)}else hw(c)?e[u]=this.reviveReference(e,u,n,c,r):Cn(c)&&this.linkNode(c,n,r,e,u);const o=e;o.$container=i,o.$containerProperty=s,o.$containerIndex=a}reviveReference(e,n,r,i,s){let a=i.$refText,o=i.$error;if(i.$ref){const u=this.getRefNode(r,i.$ref,s.uriConverter);if(Cn(u))return a||(a=this.nameProvider.getName(u)),{$refText:a??"",ref:u};o=u}if(o){const u={$refText:a??""};return u.error={container:e,property:n,message:o,reference:u},u}else return}getRefNode(e,n,r){try{const i=n.indexOf("#");if(i===0){const u=this.astNodeLocator.getAstNode(e,n.substring(1));return u||"Could not resolve path: "+n}if(i<0){const u=r?r(n):ua.parse(n),c=this.langiumDocuments.getDocument(u);return c?c.parseResult.value:"Could not find document for URI: "+n}const s=r?r(n.substring(0,i)):ua.parse(n.substring(0,i)),a=this.langiumDocuments.getDocument(s);if(!a)return"Could not find document for URI: "+n;if(i===n.length-1)return a.parseResult.value;const o=this.astNodeLocator.getAstNode(a.parseResult.value,n.substring(i+1));return o||"Could not resolve URI: "+n}catch(i){return String(i)}}}class $V{get map(){return this.fileExtensionMap}constructor(e){this.languageIdMap=new Map,this.fileExtensionMap=new Map,this.textDocuments=e==null?void 0:e.workspace.TextDocuments}register(e){const n=e.LanguageMetaData;for(const r of n.fileExtensions)this.fileExtensionMap.has(r)&&console.warn(`The file extension ${r} is used by multiple languages. It is now assigned to '${n.languageId}'.`),this.fileExtensionMap.set(r,e);this.languageIdMap.set(n.languageId,e),this.languageIdMap.size===1?this.singleton=e:this.singleton=void 0}getServices(e){var n,r;if(this.singleton!==void 0)return this.singleton;if(this.languageIdMap.size===0)throw new Error("The service registry is empty. Use `register` to register the services of a language.");const i=(r=(n=this.textDocuments)===null||n===void 0?void 0:n.get(e))===null||r===void 0?void 0:r.languageId;if(i!==void 0){const o=this.languageIdMap.get(i);if(o)return o}const s=Ds.extname(e),a=this.fileExtensionMap.get(s);if(!a)throw i?new Error(`The service registry contains no services for the extension '${s}' for language '${i}'.`):new Error(`The service registry contains no services for the extension '${s}'.`);return a}hasServices(e){try{return this.getServices(e),!0}catch{return!1}}get all(){return Array.from(this.languageIdMap.values())}}function Xu(t){return{code:t}}var Kf;(function(t){t.all=["fast","slow","built-in"]})(Kf||(Kf={}));class BV{constructor(e){this.entries=new jf,this.entriesBefore=[],this.entriesAfter=[],this.reflection=e.shared.AstReflection}register(e,n=this,r="fast"){if(r==="built-in")throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(const[i,s]of Object.entries(e)){const a=s;if(Array.isArray(a))for(const o of a){const u={check:this.wrapValidationException(o,n),category:r};this.addEntry(i,u)}else if(typeof a=="function"){const o={check:this.wrapValidationException(a,n),category:r};this.addEntry(i,o)}else Xc()}}wrapValidationException(e,n){return async(r,i,s)=>{await this.handleException(()=>e.call(n,r,i,s),"An error occurred during validation",i,r)}}async handleException(e,n,r,i){try{await e()}catch(s){if(l0(s))throw s;console.error(`${n}:`,s),s instanceof Error&&s.stack&&console.error(s.stack);const a=s instanceof Error?s.message:String(s);r("error",`${n}: ${a}`,{node:i})}}addEntry(e,n){if(e==="AstNode"){this.entries.add("AstNode",n);return}for(const r of this.reflection.getAllSubTypes(e))this.entries.add(r,n)}getChecks(e,n){let r=pn(this.entries.get(e)).concat(this.entries.get("AstNode"));return n&&(r=r.filter(i=>n.includes(i.category))),r.map(i=>i.check)}registerBeforeDocument(e,n=this){this.entriesBefore.push(this.wrapPreparationException(e,"An error occurred during set-up of the validation",n))}registerAfterDocument(e,n=this){this.entriesAfter.push(this.wrapPreparationException(e,"An error occurred during tear-down of the validation",n))}wrapPreparationException(e,n,r){return async(i,s,a,o)=>{await this.handleException(()=>e.call(r,i,s,a,o),n,s,i)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}}class UV{constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData}async validateDocument(e,n={},r=xt.CancellationToken.None){const i=e.parseResult,s=[];if(await ir(r),(!n.categories||n.categories.includes("built-in"))&&(this.processLexingErrors(i,s,n),n.stopAfterLexingErrors&&s.some(a=>{var o;return((o=a.data)===null||o===void 0?void 0:o.code)===Or.LexingError})||(this.processParsingErrors(i,s,n),n.stopAfterParsingErrors&&s.some(a=>{var o;return((o=a.data)===null||o===void 0?void 0:o.code)===Or.ParsingError}))||(this.processLinkingErrors(e,s,n),n.stopAfterLinkingErrors&&s.some(a=>{var o;return((o=a.data)===null||o===void 0?void 0:o.code)===Or.LinkingError}))))return s;try{s.push(...await this.validateAst(i.value,n,r))}catch(a){if(l0(a))throw a;console.error("An error occurred during validation:",a)}return await ir(r),s}processLexingErrors(e,n,r){var i,s,a;const o=[...e.lexerErrors,...(s=(i=e.lexerReport)===null||i===void 0?void 0:i.diagnostics)!==null&&s!==void 0?s:[]];for(const u of o){const c=(a=u.severity)!==null&&a!==void 0?a:"error",l={severity:Bp(c),range:{start:{line:u.line-1,character:u.column-1},end:{line:u.line-1,character:u.column+u.length-1}},message:u.message,data:HV(c),source:this.getSource()};n.push(l)}}processParsingErrors(e,n,r){for(const i of e.parserErrors){let s;if(isNaN(i.token.startOffset)){if("previousToken"in i){const a=i.previousToken;if(isNaN(a.startOffset)){const o={line:0,character:0};s={start:o,end:o}}else{const o={line:a.endLine-1,character:a.endColumn};s={start:o,end:o}}}}else s=sm(i.token);if(s){const a={severity:Bp("error"),range:s,message:i.message,data:Xu(Or.ParsingError),source:this.getSource()};n.push(a)}}}processLinkingErrors(e,n,r){for(const i of e.references){const s=i.error;if(s){const a={node:s.container,property:s.property,index:s.index,data:{code:Or.LinkingError,containerType:s.container.$type,property:s.property,refText:s.reference.$refText}};n.push(this.toDiagnostic("error",s.message,a))}}}async validateAst(e,n,r=xt.CancellationToken.None){const i=[],s=(a,o,u)=>{i.push(this.toDiagnostic(a,o,u))};return await this.validateAstBefore(e,n,s,r),await this.validateAstNodes(e,n,s,r),await this.validateAstAfter(e,n,s,r),i}async validateAstBefore(e,n,r,i=xt.CancellationToken.None){var s;const a=this.validationRegistry.checksBefore;for(const o of a)await ir(i),await o(e,r,(s=n.categories)!==null&&s!==void 0?s:[],i)}async validateAstNodes(e,n,r,i=xt.CancellationToken.None){await Promise.all(Va(e).map(async s=>{await ir(i);const a=this.validationRegistry.getChecks(s.$type,n.categories);for(const o of a)await o(s,r,i)}))}async validateAstAfter(e,n,r,i=xt.CancellationToken.None){var s;const a=this.validationRegistry.checksAfter;for(const o of a)await ir(i),await o(e,r,(s=n.categories)!==null&&s!==void 0?s:[],i)}toDiagnostic(e,n,r){return{message:n,range:GV(r),severity:Bp(e),code:r.code,codeDescription:r.codeDescription,tags:r.tags,relatedInformation:r.relatedInformation,data:r.data,source:this.getSource()}}getSource(){return this.metadata.languageId}}function GV(t){if(t.range)return t.range;let e;return typeof t.property=="string"?e=KT(t.node.$cstNode,t.property,t.index):typeof t.keyword=="string"&&(e=ZW(t.node.$cstNode,t.keyword,t.index)),e??(e=t.node.$cstNode),e?e.range:{start:{line:0,character:0},end:{line:0,character:0}}}function Bp(t){switch(t){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+t)}}function HV(t){switch(t){case"error":return Xu(Or.LexingError);case"warning":return Xu(Or.LexingWarning);case"info":return Xu(Or.LexingInfo);case"hint":return Xu(Or.LexingHint);default:throw new Error("Invalid diagnostic severity: "+t)}}var Or;(function(t){t.LexingError="lexing-error",t.LexingWarning="lexing-warning",t.LexingInfo="lexing-info",t.LexingHint="lexing-hint",t.ParsingError="parsing-error",t.LinkingError="linking-error"})(Or||(Or={}));class WV{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,n,r){const i=r??vs(e);n??(n=this.nameProvider.getName(e));const s=this.astNodeLocator.getAstNodePath(e);if(!n)throw new Error(`Node at path ${s} has no name.`);let a;const o=()=>{var u;return a??(a=Sf((u=this.nameProvider.getNameNode(e))!==null&&u!==void 0?u:e.$cstNode))};return{node:e,name:n,get nameSegment(){return o()},selectionSegment:Sf(e.$cstNode),type:e.$type,documentUri:i.uri,path:s}}}class zV{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,n=xt.CancellationToken.None){const r=[],i=e.parseResult.value;for(const s of Va(i))await ir(n),YT(s).filter(a=>!bh(a)).forEach(a=>{const o=this.createDescription(a);o&&r.push(o)});return r}createDescription(e){const n=e.reference.$nodeDescription,r=e.reference.$refNode;if(!n||!r)return;const i=vs(e.container).uri;return{sourceUri:i,sourcePath:this.nodeLocator.getAstNodePath(e.container),targetUri:n.documentUri,targetPath:n.path,segment:Sf(r),local:Ds.equals(n.documentUri,i)}}}class YV{constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){const n=this.getAstNodePath(e.$container),r=this.getPathSegment(e);return n+this.segmentSeparator+r}return""}getPathSegment({$containerProperty:e,$containerIndex:n}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return n!==void 0?e+this.indexSeparator+n:e}getAstNode(e,n){return n.split(this.segmentSeparator).reduce((i,s)=>{if(!i||s.length===0)return i;const a=s.indexOf(this.indexSeparator);if(a>0){const o=s.substring(0,a),u=parseInt(s.substring(a+1)),c=i[o];return c==null?void 0:c[u]}return i[s]},e)}}var XV=t3();class VV{constructor(e){this._ready=new cv,this.settings={},this.workspaceConfig=!1,this.onConfigurationSectionUpdateEmitter=new XV.Emitter,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var n,r;this.workspaceConfig=(r=(n=e.capabilities.workspace)===null||n===void 0?void 0:n.configuration)!==null&&r!==void 0?r:!1}async initialized(e){if(this.workspaceConfig){if(e.register){const n=this.serviceRegistry.all;e.register({section:n.map(r=>this.toSectionName(r.LanguageMetaData.languageId))})}if(e.fetchConfiguration){const n=this.serviceRegistry.all.map(i=>({section:this.toSectionName(i.LanguageMetaData.languageId)})),r=await e.fetchConfiguration(n);n.forEach((i,s)=>{this.updateSectionConfiguration(i.section,r[s])})}}this._ready.resolve()}updateConfiguration(e){e.settings&&Object.keys(e.settings).forEach(n=>{const r=e.settings[n];this.updateSectionConfiguration(n,r),this.onConfigurationSectionUpdateEmitter.fire({section:n,configuration:r})})}updateSectionConfiguration(e,n){this.settings[e]=n}async getConfiguration(e,n){await this.ready;const r=this.toSectionName(e);if(this.settings[r])return this.settings[r][n]}toSectionName(e){return`${e}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}}var tc;(function(t){function e(n){return{dispose:async()=>await n()}}t.create=e})(tc||(tc={}));class qV{constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new jf,this.documentPhaseListeners=new jf,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=mt.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.textDocuments=e.workspace.TextDocuments,this.indexManager=e.workspace.IndexManager,this.serviceRegistry=e.ServiceRegistry}async build(e,n={},r=xt.CancellationToken.None){var i,s;for(const a of e){const o=a.uri.toString();if(a.state===mt.Validated){if(typeof n.validation=="boolean"&&n.validation)a.state=mt.IndexedReferences,a.diagnostics=void 0,this.buildState.delete(o);else if(typeof n.validation=="object"){const u=this.buildState.get(o),c=(i=u==null?void 0:u.result)===null||i===void 0?void 0:i.validationChecks;if(c){const h=((s=n.validation.categories)!==null&&s!==void 0?s:Kf.all).filter(d=>!c.includes(d));h.length>0&&(this.buildState.set(o,{completed:!1,options:{validation:Object.assign(Object.assign({},n.validation),{categories:h})},result:u.result}),a.state=mt.IndexedReferences)}}}else this.buildState.delete(o)}this.currentState=mt.Changed,await this.emitUpdate(e.map(a=>a.uri),[]),await this.buildDocuments(e,n,r)}async update(e,n,r=xt.CancellationToken.None){this.currentState=mt.Changed;for(const a of n)this.langiumDocuments.deleteDocument(a),this.buildState.delete(a.toString()),this.indexManager.remove(a);for(const a of e){if(!this.langiumDocuments.invalidateDocument(a)){const u=this.langiumDocumentFactory.fromModel({$type:"INVALID"},a);u.state=mt.Changed,this.langiumDocuments.addDocument(u)}this.buildState.delete(a.toString())}const i=pn(e).concat(n).map(a=>a.toString()).toSet();this.langiumDocuments.all.filter(a=>!i.has(a.uri.toString())&&this.shouldRelink(a,i)).forEach(a=>{this.serviceRegistry.getServices(a.uri).references.Linker.unlink(a),a.state=Math.min(a.state,mt.ComputedScopes),a.diagnostics=void 0}),await this.emitUpdate(e,n),await ir(r);const s=this.sortDocuments(this.langiumDocuments.all.filter(a=>{var o;return a.state<mt.Linked||!(!((o=this.buildState.get(a.uri.toString()))===null||o===void 0)&&o.completed)}).toArray());await this.buildDocuments(s,this.updateBuildOptions,r)}async emitUpdate(e,n){await Promise.all(this.updateListeners.map(r=>r(e,n)))}sortDocuments(e){let n=0,r=e.length-1;for(;n<r;){for(;n<e.length&&this.hasTextDocument(e[n]);)n++;for(;r>=0&&!this.hasTextDocument(e[r]);)r--;n<r&&([e[n],e[r]]=[e[r],e[n]])}return e}hasTextDocument(e){var n;return!!(!((n=this.textDocuments)===null||n===void 0)&&n.get(e.uri))}shouldRelink(e,n){return e.references.some(r=>r.error!==void 0)?!0:this.indexManager.isAffected(e,n)}onUpdate(e){return this.updateListeners.push(e),tc.create(()=>{const n=this.updateListeners.indexOf(e);n>=0&&this.updateListeners.splice(n,1)})}async buildDocuments(e,n,r){this.prepareBuild(e,n),await this.runCancelable(e,mt.Parsed,r,s=>this.langiumDocumentFactory.update(s,r)),await this.runCancelable(e,mt.IndexedContent,r,s=>this.indexManager.updateContent(s,r)),await this.runCancelable(e,mt.ComputedScopes,r,async s=>{const a=this.serviceRegistry.getServices(s.uri).references.ScopeComputation;s.precomputedScopes=await a.computeLocalScopes(s,r)}),await this.runCancelable(e,mt.Linked,r,s=>this.serviceRegistry.getServices(s.uri).references.Linker.link(s,r)),await this.runCancelable(e,mt.IndexedReferences,r,s=>this.indexManager.updateReferences(s,r));const i=e.filter(s=>this.shouldValidate(s));await this.runCancelable(i,mt.Validated,r,s=>this.validate(s,r));for(const s of e){const a=this.buildState.get(s.uri.toString());a&&(a.completed=!0)}}prepareBuild(e,n){for(const r of e){const i=r.uri.toString(),s=this.buildState.get(i);(!s||s.completed)&&this.buildState.set(i,{completed:!1,options:n,result:s==null?void 0:s.result})}}async runCancelable(e,n,r,i){const s=e.filter(o=>o.state<n);for(const o of s)await ir(r),await i(o),o.state=n,await this.notifyDocumentPhase(o,n,r);const a=e.filter(o=>o.state===n);await this.notifyBuildPhase(a,n,r),this.currentState=n}onBuildPhase(e,n){return this.buildPhaseListeners.add(e,n),tc.create(()=>{this.buildPhaseListeners.delete(e,n)})}onDocumentPhase(e,n){return this.documentPhaseListeners.add(e,n),tc.create(()=>{this.documentPhaseListeners.delete(e,n)})}waitUntil(e,n,r){let i;if(n&&"path"in n?i=n:r=n,r??(r=xt.CancellationToken.None),i){const s=this.langiumDocuments.getDocument(i);if(s&&s.state>e)return Promise.resolve(i)}return this.currentState>=e?Promise.resolve(void 0):r.isCancellationRequested?Promise.reject(qf):new Promise((s,a)=>{const o=this.onBuildPhase(e,()=>{if(o.dispose(),u.dispose(),i){const c=this.langiumDocuments.getDocument(i);s(c==null?void 0:c.uri)}else s(void 0)}),u=r.onCancellationRequested(()=>{o.dispose(),u.dispose(),a(qf)})})}async notifyDocumentPhase(e,n,r){const s=this.documentPhaseListeners.get(n).slice();for(const a of s)try{await a(e,r)}catch(o){if(!l0(o))throw o}}async notifyBuildPhase(e,n,r){if(e.length===0)return;const s=this.buildPhaseListeners.get(n).slice();for(const a of s)await ir(r),await a(e,r)}shouldValidate(e){return!!this.getBuildOptions(e).validation}async validate(e,n){var r,i;const s=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,a=this.getBuildOptions(e).validation,o=typeof a=="object"?a:void 0,u=await s.validateDocument(e,o,n);e.diagnostics?e.diagnostics.push(...u):e.diagnostics=u;const c=this.buildState.get(e.uri.toString());if(c){(r=c.result)!==null&&r!==void 0||(c.result={});const l=(i=o==null?void 0:o.categories)!==null&&i!==void 0?i:Kf.all;c.result.validationChecks?c.result.validationChecks.push(...l):c.result.validationChecks=[...l]}}getBuildOptions(e){var n,r;return(r=(n=this.buildState.get(e.uri.toString()))===null||n===void 0?void 0:n.options)!==null&&r!==void 0?r:{}}}class jV{constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new LV,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,n){const r=vs(e).uri,i=[];return this.referenceIndex.forEach(s=>{s.forEach(a=>{Ds.equals(a.targetUri,r)&&a.targetPath===n&&i.push(a)})}),pn(i)}allElements(e,n){let r=pn(this.symbolIndex.keys());return n&&(r=r.filter(i=>!n||n.has(i))),r.map(i=>this.getFileDescriptions(i,e)).flat()}getFileDescriptions(e,n){var r;return n?this.symbolByTypeIndex.get(e,n,()=>{var s;return((s=this.symbolIndex.get(e))!==null&&s!==void 0?s:[]).filter(o=>this.astReflection.isSubtype(o.type,n))}):(r=this.symbolIndex.get(e))!==null&&r!==void 0?r:[]}remove(e){const n=e.toString();this.symbolIndex.delete(n),this.symbolByTypeIndex.clear(n),this.referenceIndex.delete(n)}async updateContent(e,n=xt.CancellationToken.None){const i=await this.serviceRegistry.getServices(e.uri).references.ScopeComputation.computeExports(e,n),s=e.uri.toString();this.symbolIndex.set(s,i),this.symbolByTypeIndex.clear(s)}async updateReferences(e,n=xt.CancellationToken.None){const i=await this.serviceRegistry.getServices(e.uri).workspace.ReferenceDescriptionProvider.createDescriptions(e,n);this.referenceIndex.set(e.uri.toString(),i)}isAffected(e,n){const r=this.referenceIndex.get(e.uri.toString());return r?r.some(i=>!i.local&&n.has(i.targetUri.toString())):!1}}class KV{constructor(e){this.initialBuildOptions={},this._ready=new cv,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(e){var n;this.folders=(n=e.workspaceFolders)!==null&&n!==void 0?n:void 0}initialized(e){return this.mutex.write(n=>{var r;return this.initializeWorkspace((r=this.folders)!==null&&r!==void 0?r:[],n)})}async initializeWorkspace(e,n=xt.CancellationToken.None){const r=await this.performStartup(e);await ir(n),await this.documentBuilder.build(r,this.initialBuildOptions,n)}async performStartup(e){const n=this.serviceRegistry.all.flatMap(s=>s.LanguageMetaData.fileExtensions),r=[],i=s=>{r.push(s),this.langiumDocuments.hasDocument(s.uri)||this.langiumDocuments.addDocument(s)};return await this.loadAdditionalDocuments(e,i),await Promise.all(e.map(s=>[s,this.getRootFolder(s)]).map(async s=>this.traverseFolder(...s,n,i))),this._ready.resolve(),r}loadAdditionalDocuments(e,n){return Promise.resolve()}getRootFolder(e){return ua.parse(e.uri)}async traverseFolder(e,n,r,i){const s=await this.fileSystemProvider.readDirectory(n);await Promise.all(s.map(async a=>{if(this.includeEntry(e,a,r)){if(a.isDirectory)await this.traverseFolder(e,a.uri,r,i);else if(a.isFile){const o=await this.langiumDocuments.getOrCreateDocument(a.uri);i(o)}}}))}includeEntry(e,n,r){const i=Ds.basename(n.uri);if(i.startsWith("."))return!1;if(n.isDirectory)return i!=="node_modules"&&i!=="out";if(n.isFile){const s=Ds.extname(n.uri);return r.includes(s)}return!1}}class ZV{buildUnexpectedCharactersMessage(e,n,r,i,s){return hm.buildUnexpectedCharactersMessage(e,n,r,i,s)}buildUnableToPopLexerModeMessage(e){return hm.buildUnableToPopLexerModeMessage(e)}}const JV={mode:"full"};class QV{constructor(e){this.errorMessageProvider=e.parser.LexerErrorMessageProvider,this.tokenBuilder=e.parser.TokenBuilder;const n=this.tokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(n);const r=fw(n)?Object.values(n):n,i=e.LanguageMetaData.mode==="production";this.chevrotainLexer=new Xn(r,{positionTracking:"full",skipValidations:i,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(e,n=JV){var r,i,s;const a=this.chevrotainLexer.tokenize(e);return{tokens:a.tokens,errors:a.errors,hidden:(r=a.groups.hidden)!==null&&r!==void 0?r:[],report:(s=(i=this.tokenBuilder).flushLexingReport)===null||s===void 0?void 0:s.call(i,e)}}toTokenTypeDictionary(e){if(fw(e))return e;const n=a3(e)?Object.values(e.modes).flat():e,r={};return n.forEach(i=>r[i.name]=i),r}}function eq(t){return Array.isArray(t)&&(t.length===0||"name"in t[0])}function a3(t){return t&&"modes"in t&&"defaultMode"in t}function fw(t){return!eq(t)&&!a3(t)}function tq(t,e,n){let r,i;typeof t=="string"?(i=e,r=n):(i=t.range.start,r=e),i||(i=nt.create(0,0));const s=o3(t),a=lv(r),o=iq({lines:s,position:i,options:a});return cq({index:0,tokens:o,position:i})}function nq(t,e){const n=lv(e),r=o3(t);if(r.length===0)return!1;const i=r[0],s=r[r.length-1],a=n.start,o=n.end;return!!(a!=null&&a.exec(i))&&!!(o!=null&&o.exec(s))}function o3(t){let e="";return typeof t=="string"?e=t:e=t.text,e.split($W)}const dw=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,rq=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function iq(t){var e,n,r;const i=[];let s=t.position.line,a=t.position.character;for(let o=0;o<t.lines.length;o++){const u=o===0,c=o===t.lines.length-1;let l=t.lines[o],h=0;if(u&&t.options.start){const f=(e=t.options.start)===null||e===void 0?void 0:e.exec(l);f&&(h=f.index+f[0].length)}else{const f=(n=t.options.line)===null||n===void 0?void 0:n.exec(l);f&&(h=f.index+f[0].length)}if(c){const f=(r=t.options.end)===null||r===void 0?void 0:r.exec(l);f&&(l=l.substring(0,f.index))}if(l=l.substring(0,uq(l)),Pm(l,h)>=l.length){if(i.length>0){const f=nt.create(s,a);i.push({type:"break",content:"",range:je.create(f,f)})}}else{dw.lastIndex=h;const f=dw.exec(l);if(f){const p=f[0],g=f[1],m=nt.create(s,a+h),y=nt.create(s,a+h+p.length);i.push({type:"tag",content:g,range:je.create(m,y)}),h+=p.length,h=Pm(l,h)}if(h<l.length){const p=l.substring(h),g=Array.from(p.matchAll(rq));i.push(...sq(g,p,s,a+h))}}s++,a=0}return i.length>0&&i[i.length-1].type==="break"?i.slice(0,-1):i}function sq(t,e,n,r){const i=[];if(t.length===0){const s=nt.create(n,r),a=nt.create(n,r+e.length);i.push({type:"text",content:e,range:je.create(s,a)})}else{let s=0;for(const o of t){const u=o.index,c=e.substring(s,u);c.length>0&&i.push({type:"text",content:e.substring(s,u),range:je.create(nt.create(n,s+r),nt.create(n,u+r))});let l=c.length+1;const h=o[1];if(i.push({type:"inline-tag",content:h,range:je.create(nt.create(n,s+l+r),nt.create(n,s+l+h.length+r))}),l+=h.length,o.length===4){l+=o[2].length;const d=o[3];i.push({type:"text",content:d,range:je.create(nt.create(n,s+l+r),nt.create(n,s+l+d.length+r))})}else i.push({type:"text",content:"",range:je.create(nt.create(n,s+l+r),nt.create(n,s+l+r))});s=u+o[0].length}const a=e.substring(s);a.length>0&&i.push({type:"text",content:a,range:je.create(nt.create(n,s+r),nt.create(n,s+r+a.length))})}return i}const aq=/\S/,oq=/\s*$/;function Pm(t,e){const n=t.substring(e).match(aq);return n?e+n.index:t.length}function uq(t){const e=t.match(oq);if(e&&typeof e.index=="number")return e.index}function cq(t){var e,n,r,i;const s=nt.create(t.position.line,t.position.character);if(t.tokens.length===0)return new pw([],je.create(s,s));const a=[];for(;t.index<t.tokens.length;){const c=lq(t,a[a.length-1]);c&&a.push(c)}const o=(n=(e=a[0])===null||e===void 0?void 0:e.range.start)!==null&&n!==void 0?n:s,u=(i=(r=a[a.length-1])===null||r===void 0?void 0:r.range.end)!==null&&i!==void 0?i:s;return new pw(a,je.create(o,u))}function lq(t,e){const n=t.tokens[t.index];if(n.type==="tag")return c3(t,!1);if(n.type==="text"||n.type==="inline-tag")return u3(t);hq(n,e),t.index++}function hq(t,e){if(e){const n=new h3("",t.range);"inlines"in e?e.inlines.push(n):e.content.inlines.push(n)}}function u3(t){let e=t.tokens[t.index];const n=e;let r=e;const i=[];for(;e&&e.type!=="break"&&e.type!=="tag";)i.push(fq(t)),r=e,e=t.tokens[t.index];return new $m(i,je.create(n.range.start,r.range.end))}function fq(t){return t.tokens[t.index].type==="inline-tag"?c3(t,!0):l3(t)}function c3(t,e){const n=t.tokens[t.index++],r=n.content.substring(1),i=t.tokens[t.index];if((i==null?void 0:i.type)==="text")if(e){const s=l3(t);return new Gp(r,new $m([s],s.range),e,je.create(n.range.start,s.range.end))}else{const s=u3(t);return new Gp(r,s,e,je.create(n.range.start,s.range.end))}else{const s=n.range;return new Gp(r,new $m([],s),e,s)}}function l3(t){const e=t.tokens[t.index++];return new h3(e.content,e.range)}function lv(t){if(!t)return lv({start:"/**",end:"*/",line:"*"});const{start:e,end:n,line:r}=t;return{start:Up(e,!0),end:Up(n,!1),line:Up(r,!0)}}function Up(t,e){if(typeof t=="string"||typeof t=="object"){const n=typeof t=="string"?n0(t):t.source;return e?new RegExp(`^\\s*${n}`):new RegExp(`\\s*${n}\\s*$`)}else return t}class pw{constructor(e,n){this.elements=e,this.range=n}getTag(e){return this.getAllTags().find(n=>n.name===e)}getTags(e){return this.getAllTags().filter(n=>n.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(const n of this.elements)if(e.length===0)e=n.toString();else{const r=n.toString();e+=gw(e)+r}return e.trim()}toMarkdown(e){let n="";for(const r of this.elements)if(n.length===0)n=r.toMarkdown(e);else{const i=r.toMarkdown(e);n+=gw(n)+i}return n.trim()}}class Gp{constructor(e,n,r,i){this.name=e,this.content=n,this.inline=r,this.range=i}toString(){let e=`@${this.name}`;const n=this.content.toString();return this.content.inlines.length===1?e=`${e} ${n}`:this.content.inlines.length>1&&(e=`${e}
${n}`),this.inline?`{${e}}`:e}toMarkdown(e){var n,r;return(r=(n=e==null?void 0:e.renderTag)===null||n===void 0?void 0:n.call(e,this))!==null&&r!==void 0?r:this.toMarkdownDefault(e)}toMarkdownDefault(e){const n=this.content.toMarkdown(e);if(this.inline){const s=dq(this.name,n,e??{});if(typeof s=="string")return s}let r="";(e==null?void 0:e.tag)==="italic"||(e==null?void 0:e.tag)===void 0?r="*":(e==null?void 0:e.tag)==="bold"?r="**":(e==null?void 0:e.tag)==="bold-italic"&&(r="***");let i=`${r}@${this.name}${r}`;return this.content.inlines.length===1?i=`${i}  ${n}`:this.content.inlines.length>1&&(i=`${i}
${n}`),this.inline?`{${i}}`:i}}function dq(t,e,n){var r,i;if(t==="linkplain"||t==="linkcode"||t==="link"){const s=e.indexOf(" ");let a=e;if(s>0){const u=Pm(e,s);a=e.substring(u),e=e.substring(0,s)}return(t==="linkcode"||t==="link"&&n.link==="code")&&(a=`\`${a}\``),(i=(r=n.renderLink)===null||r===void 0?void 0:r.call(n,e,a))!==null&&i!==void 0?i:pq(e,a)}}function pq(t,e){try{return ua.parse(t,!0),`[${e}](${t})`}catch{return t}}class $m{constructor(e,n){this.inlines=e,this.range=n}toString(){let e="";for(let n=0;n<this.inlines.length;n++){const r=this.inlines[n],i=this.inlines[n+1];e+=r.toString(),i&&i.range.start.line>r.range.start.line&&(e+=`
`)}return e}toMarkdown(e){let n="";for(let r=0;r<this.inlines.length;r++){const i=this.inlines[r],s=this.inlines[r+1];n+=i.toMarkdown(e),s&&s.range.start.line>i.range.start.line&&(n+=`
`)}return n}}class h3{constructor(e,n){this.text=e,this.range=n}toString(){return this.text}toMarkdown(){return this.text}}function gw(t){return t.endsWith(`
`)?`
`:`

`}class gq{constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){const n=this.commentProvider.getComment(e);if(n&&nq(n))return tq(n).toMarkdown({renderLink:(i,s)=>this.documentationLinkRenderer(e,i,s),renderTag:i=>this.documentationTagRenderer(e,i)})}documentationLinkRenderer(e,n,r){var i;const s=(i=this.findNameInPrecomputedScopes(e,n))!==null&&i!==void 0?i:this.findNameInGlobalScope(e,n);if(s&&s.nameSegment){const a=s.nameSegment.range.start.line+1,o=s.nameSegment.range.start.character+1,u=s.documentUri.with({fragment:`L${a},${o}`});return`[${r}](${u.toString()})`}else return}documentationTagRenderer(e,n){}findNameInPrecomputedScopes(e,n){const i=vs(e).precomputedScopes;if(!i)return;let s=e;do{const o=i.get(s).find(u=>u.name===n);if(o)return o;s=s.$container}while(s)}findNameInGlobalScope(e,n){return this.indexManager.allElements().find(i=>i.name===n)}}class mq{constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var n;return OV(e)?e.$comment:(n=pW(e.$cstNode,this.grammarConfig().multilineCommentRules))===null||n===void 0?void 0:n.text}}class yq{constructor(e){this.syncParser=e.parser.LangiumParser}parse(e,n){return Promise.resolve(this.syncParser.parse(e))}}class vq{constructor(){this.previousTokenSource=new xt.CancellationTokenSource,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();const n=DV();return this.previousTokenSource=n,this.enqueue(this.writeQueue,e,n.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,n,r=xt.CancellationToken.None){const i=new cv,s={action:n,deferred:i,cancellationToken:r};return e.push(s),this.performNextOperation(),i.promise}async performNextOperation(){if(!this.done)return;const e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else if(this.readQueue.length>0)e.push(...this.readQueue.splice(0,this.readQueue.length));else return;this.done=!1,await Promise.all(e.map(async({action:n,deferred:r,cancellationToken:i})=>{try{const s=await Promise.resolve().then(()=>n(i));r.resolve(s)}catch(s){l0(s)?r.resolve(void 0):r.reject(s)}})),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}}class bq{constructor(e){this.grammarElementIdMap=new cw,this.tokenTypeIdMap=new cw,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport?this.dehydrateLexerReport(e.lexerReport):void 0,parserErrors:e.parserErrors.map(n=>Object.assign(Object.assign({},n),{message:n.message})),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}dehydrateLexerReport(e){return e}createDehyrationContext(e){const n=new Map,r=new Map;for(const i of Va(e))n.set(i,{});if(e.$cstNode)for(const i of im(e.$cstNode))r.set(i,{});return{astNodes:n,cstNodes:r}}dehydrateAstNode(e,n){const r=n.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,e.$cstNode!==void 0&&(r.$cstNode=this.dehydrateCstNode(e.$cstNode,n));for(const[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){const a=[];r[i]=a;for(const o of s)Cn(o)?a.push(this.dehydrateAstNode(o,n)):pi(o)?a.push(this.dehydrateReference(o,n)):a.push(o)}else Cn(s)?r[i]=this.dehydrateAstNode(s,n):pi(s)?r[i]=this.dehydrateReference(s,n):s!==void 0&&(r[i]=s);return r}dehydrateReference(e,n){const r={};return r.$refText=e.$refText,e.$refNode&&(r.$refNode=n.cstNodes.get(e.$refNode)),r}dehydrateCstNode(e,n){const r=n.cstNodes.get(e);return PT(e)?r.fullText=e.fullText:r.grammarSource=this.getGrammarElementId(e.grammarSource),r.hidden=e.hidden,r.astNode=n.astNodes.get(e.astNode),Dc(e)?r.content=e.content.map(i=>this.dehydrateCstNode(i,n)):OT(e)&&(r.tokenType=e.tokenType.name,r.offset=e.offset,r.length=e.length,r.startLine=e.range.start.line,r.startColumn=e.range.start.character,r.endLine=e.range.end.line,r.endColumn=e.range.end.character),r}hydrate(e){const n=e.value,r=this.createHydrationContext(n);return"$cstNode"in n&&this.hydrateCstNode(n.$cstNode,r),{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport,parserErrors:e.parserErrors,value:this.hydrateAstNode(n,r)}}createHydrationContext(e){const n=new Map,r=new Map;for(const s of Va(e))n.set(s,{});let i;if(e.$cstNode)for(const s of im(e.$cstNode)){let a;"fullText"in s?(a=new Xk(s.fullText),i=a):"content"in s?a=new ov:"tokenType"in s&&(a=this.hydrateCstLeafNode(s)),a&&(r.set(s,a),a.root=i)}return{astNodes:n,cstNodes:r}}hydrateAstNode(e,n){const r=n.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,e.$cstNode&&(r.$cstNode=n.cstNodes.get(e.$cstNode));for(const[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){const a=[];r[i]=a;for(const o of s)Cn(o)?a.push(this.setParent(this.hydrateAstNode(o,n),r)):pi(o)?a.push(this.hydrateReference(o,r,i,n)):a.push(o)}else Cn(s)?r[i]=this.setParent(this.hydrateAstNode(s,n),r):pi(s)?r[i]=this.hydrateReference(s,r,i,n):s!==void 0&&(r[i]=s);return r}setParent(e,n){return e.$container=n,e}hydrateReference(e,n,r,i){return this.linker.buildReference(n,r,i.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,n,r=0){const i=n.cstNodes.get(e);if(typeof e.grammarSource=="number"&&(i.grammarSource=this.getGrammarElement(e.grammarSource)),i.astNode=n.astNodes.get(e.astNode),Dc(i))for(const s of e.content){const a=this.hydrateCstNode(s,n,r++);i.content.push(a)}return i}hydrateCstLeafNode(e){const n=this.getTokenType(e.tokenType),r=e.offset,i=e.length,s=e.startLine,a=e.startColumn,o=e.endLine,u=e.endColumn,c=e.hidden;return new Nm(r,i,{start:{line:s,character:a},end:{line:o,character:u}},n,c)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){if(e)return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.getKey(e)}createGrammarElementIdMap(){let e=0;for(const n of Va(this.grammar))mW(n)&&this.grammarElementIdMap.set(n,e++)}}function xq(t){return{documentation:{CommentProvider:e=>new mq(e),DocumentationProvider:e=>new gq(e)},parser:{AsyncParser:e=>new yq(e),GrammarConfig:e=>oz(e),LangiumParser:e=>pV(e),CompletionParser:e=>dV(e),ValueConverter:()=>new yV,TokenBuilder:()=>new mV,Lexer:e=>new QV(e),ParserErrorMessageProvider:()=>new jk,LexerErrorMessageProvider:()=>new ZV},workspace:{AstNodeLocator:()=>new YV,AstNodeDescriptionProvider:e=>new WV(e),ReferenceDescriptionProvider:e=>new zV(e)},references:{Linker:e=>new CV(e),NameProvider:()=>new kV,ScopeProvider:e=>new IV(e),ScopeComputation:e=>new SV(e),References:e=>new FV(e)},serializer:{Hydrator:e=>new bq(e),JsonSerializer:e=>new PV(e)},validation:{DocumentValidator:e=>new UV(e),ValidationRegistry:e=>new BV(e)},shared:()=>t.shared}}function Eq(t){return{ServiceRegistry:e=>new $V(e),workspace:{LangiumDocuments:e=>new AV(e),LangiumDocumentFactory:e=>new _V(e),DocumentBuilder:e=>new qV(e),IndexManager:e=>new jV(e),WorkspaceManager:e=>new KV(e),FileSystemProvider:e=>t.fileSystemProvider(e),WorkspaceLock:()=>new vq,ConfigurationProvider:e=>new VV(e)}}}var mw;(function(t){t.merge=(e,n)=>Zf(Zf({},e),n)})(mw||(mw={}));function yw(t,e,n,r,i,s,a,o,u){const c=[t,e,n,r,i,s,a,o,u].reduce(Zf,{});return f3(c)}const Dq=Symbol("isProxy");function f3(t,e){const n=new Proxy({},{deleteProperty:()=>!1,set:()=>{throw new Error("Cannot set property on injected service container")},get:(r,i)=>i===Dq?!0:bw(r,i,t,e||n),getOwnPropertyDescriptor:(r,i)=>(bw(r,i,t,e||n),Object.getOwnPropertyDescriptor(r,i)),has:(r,i)=>i in t,ownKeys:()=>[...Object.getOwnPropertyNames(t)]});return n}const vw=Symbol();function bw(t,e,n,r){if(e in t){if(t[e]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:t[e]});if(t[e]===vw)throw new Error('Cycle detected. Please make "'+String(e)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies');return t[e]}else if(e in n){const i=n[e];t[e]=vw;try{t[e]=typeof i=="function"?i(r):f3(i,r)}catch(s){throw t[e]=s instanceof Error?s:void 0,s}return t[e]}else return}function Zf(t,e){if(e){for(const[n,r]of Object.entries(e))if(r!==void 0){const i=t[n];i!==null&&r!==null&&typeof i=="object"&&typeof r=="object"?t[n]=Zf(i,r):t[n]=r}}return t}class wq{readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}}const _q={fileSystemProvider:()=>new wq},Aq={Grammar:()=>{},LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})},Cq={AstReflection:()=>new zT};function Tq(){const t=yw(Eq(_q),Cq),e=yw(xq({shared:t}),Aq);return t.ServiceRegistry.register(e),e}function IZ(t){var e;const n=Tq(),r=n.serializer.JsonSerializer.deserialize(t);return n.shared.workspace.LangiumDocumentFactory.fromModel(r,ua.parse(`memory://${(e=r.name)!==null&&e!==void 0?e:"grammar"}.langium`)),r}const cn=[];for(let t=0;t<256;++t)cn.push((t+256).toString(16).slice(1));function kq(t,e=0){return(cn[t[e+0]]+cn[t[e+1]]+cn[t[e+2]]+cn[t[e+3]]+"-"+cn[t[e+4]]+cn[t[e+5]]+"-"+cn[t[e+6]]+cn[t[e+7]]+"-"+cn[t[e+8]]+cn[t[e+9]]+"-"+cn[t[e+10]]+cn[t[e+11]]+cn[t[e+12]]+cn[t[e+13]]+cn[t[e+14]]+cn[t[e+15]]).toLowerCase()}let Hp;const Fq=new Uint8Array(16);function Sq(){if(!Hp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Hp=crypto.getRandomValues.bind(crypto)}return Hp(Fq)}const Rq=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xw={randomUUID:Rq};function OZ(t,e,n){var i;if(xw.randomUUID&&!t)return xw.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??Sq();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,kq(r)}function Ew(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function d3(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Wp(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Nq(t){return t.target.depth}function PZ(t){return t.depth}function $Z(t,e){return e-1-t.height}function Lq(t,e){return t.sourceLinks.length?t.depth:e-1}function BZ(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?d3(t.sourceLinks,Nq)-1:0}function Xl(t){return function(){return t}}function Dw(t,e){return Jf(t.source,e.source)||t.index-e.index}function ww(t,e){return Jf(t.target,e.target)||t.index-e.index}function Jf(t,e){return t.y0-e.y0}function zp(t){return t.value}function Mq(t){return t.index}function Iq(t){return t.nodes}function Oq(t){return t.links}function _w(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function Aw({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const i of e.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of e.targetLinks)i.y1=r+i.width/2,r+=i.width}}function UZ(){let t=0,e=0,n=1,r=1,i=24,s=8,a,o=Mq,u=Lq,c,l,h=Iq,d=Oq,f=6;function p(){const _={nodes:h.apply(null,arguments),links:d.apply(null,arguments)};return g(_),m(_),y(_),b(_),w(_),Aw(_),_}p.update=function(_){return Aw(_),_},p.nodeId=function(_){return arguments.length?(o=typeof _=="function"?_:Xl(_),p):o},p.nodeAlign=function(_){return arguments.length?(u=typeof _=="function"?_:Xl(_),p):u},p.nodeSort=function(_){return arguments.length?(c=_,p):c},p.nodeWidth=function(_){return arguments.length?(i=+_,p):i},p.nodePadding=function(_){return arguments.length?(s=a=+_,p):s},p.nodes=function(_){return arguments.length?(h=typeof _=="function"?_:Xl(_),p):h},p.links=function(_){return arguments.length?(d=typeof _=="function"?_:Xl(_),p):d},p.linkSort=function(_){return arguments.length?(l=_,p):l},p.size=function(_){return arguments.length?(t=e=0,n=+_[0],r=+_[1],p):[n-t,r-e]},p.extent=function(_){return arguments.length?(t=+_[0][0],n=+_[1][0],e=+_[0][1],r=+_[1][1],p):[[t,e],[n,r]]},p.iterations=function(_){return arguments.length?(f=+_,p):f};function g({nodes:_,links:C}){for(const[F,I]of _.entries())I.index=F,I.sourceLinks=[],I.targetLinks=[];const T=new Map(_.map((F,I)=>[o(F,I,_),F]));for(const[F,I]of C.entries()){I.index=F;let{source:P,target:U}=I;typeof P!="object"&&(P=I.source=_w(T,P)),typeof U!="object"&&(U=I.target=_w(T,U)),P.sourceLinks.push(I),U.targetLinks.push(I)}if(l!=null)for(const{sourceLinks:F,targetLinks:I}of _)F.sort(l),I.sort(l)}function m({nodes:_}){for(const C of _)C.value=C.fixedValue===void 0?Math.max(Wp(C.sourceLinks,zp),Wp(C.targetLinks,zp)):C.fixedValue}function y({nodes:_}){const C=_.length;let T=new Set(_),F=new Set,I=0;for(;T.size;){for(const P of T){P.depth=I;for(const{target:U}of P.sourceLinks)F.add(U)}if(++I>C)throw new Error("circular link");T=F,F=new Set}}function b({nodes:_}){const C=_.length;let T=new Set(_),F=new Set,I=0;for(;T.size;){for(const P of T){P.height=I;for(const{source:U}of P.targetLinks)F.add(U)}if(++I>C)throw new Error("circular link");T=F,F=new Set}}function v({nodes:_}){const C=Ew(_,I=>I.depth)+1,T=(n-t-i)/(C-1),F=new Array(C);for(const I of _){const P=Math.max(0,Math.min(C-1,Math.floor(u.call(null,I,C))));I.layer=P,I.x0=t+P*T,I.x1=I.x0+i,F[P]?F[P].push(I):F[P]=[I]}if(c)for(const I of F)I.sort(c);return F}function x(_){const C=d3(_,T=>(r-e-(T.length-1)*a)/Wp(T,zp));for(const T of _){let F=e;for(const I of T){I.y0=F,I.y1=F+I.value*C,F=I.y1+a;for(const P of I.sourceLinks)P.width=P.value*C}F=(r-F+a)/(T.length+1);for(let I=0;I<T.length;++I){const P=T[I];P.y0+=F*(I+1),P.y1+=F*(I+1)}S(T)}}function w(_){const C=v(_);a=Math.min(s,(r-e)/(Ew(C,T=>T.length)-1)),x(C);for(let T=0;T<f;++T){const F=Math.pow(.99,T),I=Math.max(1-F,(T+1)/f);D(C,F,I),k(C,F,I)}}function k(_,C,T){for(let F=1,I=_.length;F<I;++F){const P=_[F];for(const U of P){let q=0,Y=0;for(const{source:V,value:K}of U.targetLinks){let ae=K*(U.layer-V.layer);q+=M(V,U)*ae,Y+=ae}if(!(Y>0))continue;let te=(q/Y-U.y0)*C;U.y0+=te,U.y1+=te,L(U)}c===void 0&&P.sort(Jf),A(P,T)}}function D(_,C,T){for(let F=_.length,I=F-2;I>=0;--I){const P=_[I];for(const U of P){let q=0,Y=0;for(const{target:V,value:K}of U.sourceLinks){let ae=K*(V.layer-U.layer);q+=E(U,V)*ae,Y+=ae}if(!(Y>0))continue;let te=(q/Y-U.y0)*C;U.y0+=te,U.y1+=te,L(U)}c===void 0&&P.sort(Jf),A(P,T)}}function A(_,C){const T=_.length>>1,F=_[T];N(_,F.y0-a,T-1,C),R(_,F.y1+a,T+1,C),N(_,r,_.length-1,C),R(_,e,0,C)}function R(_,C,T,F){for(;T<_.length;++T){const I=_[T],P=(C-I.y0)*F;P>1e-6&&(I.y0+=P,I.y1+=P),C=I.y1+a}}function N(_,C,T,F){for(;T>=0;--T){const I=_[T],P=(I.y1-C)*F;P>1e-6&&(I.y0-=P,I.y1-=P),C=I.y0-a}}function L({sourceLinks:_,targetLinks:C}){if(l===void 0){for(const{source:{sourceLinks:T}}of C)T.sort(ww);for(const{target:{targetLinks:T}}of _)T.sort(Dw)}}function S(_){if(l===void 0)for(const{sourceLinks:C,targetLinks:T}of _)C.sort(ww),T.sort(Dw)}function M(_,C){let T=_.y0-(_.sourceLinks.length-1)*a/2;for(const{target:F,width:I}of _.sourceLinks){if(F===C)break;T+=I+a}for(const{source:F,width:I}of C.targetLinks){if(F===_)break;T-=I}return T}function E(_,C){let T=C.y0-(C.targetLinks.length-1)*a/2;for(const{source:F,width:I}of C.targetLinks){if(F===_)break;T+=I+a}for(const{target:F,width:I}of _.sourceLinks){if(F===C)break;T-=I}return T}return p}var Bm=Math.PI,Um=2*Bm,Is=1e-6,Pq=Um-Is;function Gm(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function p3(){return new Gm}Gm.prototype=p3.prototype={constructor:Gm,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,a=this._y1,o=n-t,u=r-e,c=s-t,l=a-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Is)if(!(Math.abs(l*o-u*c)>Is)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var d=n-s,f=r-a,p=o*o+u*u,g=d*d+f*f,m=Math.sqrt(p),y=Math.sqrt(h),b=i*Math.tan((Bm-Math.acos((p+h-g)/(2*m*y)))/2),v=b/y,x=b/m;Math.abs(v-1)>Is&&(this._+="L"+(t+v*c)+","+(e+v*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>c*f)+","+(this._x1=t+x*o)+","+(this._y1=e+x*u)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n,s=!!s;var a=n*Math.cos(r),o=n*Math.sin(r),u=t+a,c=e+o,l=1^s,h=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+c:(Math.abs(this._x1-u)>Is||Math.abs(this._y1-c)>Is)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%Um+Um),h>Pq?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-o)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>Is&&(this._+="A"+n+","+n+",0,"+ +(h>=Bm)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Cw(t){return function(){return t}}function $q(t){return t[0]}function Bq(t){return t[1]}var Uq=Array.prototype.slice;function Gq(t){return t.source}function Hq(t){return t.target}function Wq(t){var e=Gq,n=Hq,r=$q,i=Bq,s=null;function a(){var o,u=Uq.call(arguments),c=e.apply(this,u),l=n.apply(this,u);if(s||(s=o=p3()),t(s,+r.apply(this,(u[0]=c,u)),+i.apply(this,u),+r.apply(this,(u[0]=l,u)),+i.apply(this,u)),o)return s=null,o+""||null}return a.source=function(o){return arguments.length?(e=o,a):e},a.target=function(o){return arguments.length?(n=o,a):n},a.x=function(o){return arguments.length?(r=typeof o=="function"?o:Cw(+o),a):r},a.y=function(o){return arguments.length?(i=typeof o=="function"?o:Cw(+o),a):i},a.context=function(o){return arguments.length?(s=o??null,a):s},a}function zq(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function Yq(){return Wq(zq)}function Xq(t){return[t.source.x1,t.y0]}function Vq(t){return[t.target.x0,t.y1]}function GZ(){return Yq().source(Xq).target(Vq)}var Th={exports:{}},kh={exports:{}},qq=kh.exports,Tw;function jq(){return Tw||(Tw=1,(function(t,e){(function(r,i){t.exports=i()})(qq,function(){return(function(n){var r={};function i(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return n[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.i=function(s){return s},i.d=function(s,a,o){i.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:o})},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=28)})([(function(n,r,i){function s(){}s.QUALITY=1,s.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,s.DEFAULT_INCREMENTAL=!1,s.DEFAULT_ANIMATION_ON_LAYOUT=!0,s.DEFAULT_ANIMATION_DURING_LAYOUT=!1,s.DEFAULT_ANIMATION_PERIOD=50,s.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,s.DEFAULT_GRAPH_MARGIN=15,s.NODE_DIMENSIONS_INCLUDE_LABELS=!1,s.SIMPLE_NODE_SIZE=40,s.SIMPLE_NODE_HALF_SIZE=s.SIMPLE_NODE_SIZE/2,s.EMPTY_COMPOUND_NODE_SIZE=40,s.MIN_EDGE_LENGTH=1,s.WORLD_BOUNDARY=1e6,s.INITIAL_WORLD_BOUNDARY=s.WORLD_BOUNDARY/1e3,s.WORLD_CENTER_X=1200,s.WORLD_CENTER_Y=900,n.exports=s}),(function(n,r,i){var s=i(2),a=i(8),o=i(9);function u(l,h,d){s.call(this,d),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=d,this.bendpoints=[],this.source=l,this.target=h}u.prototype=Object.create(s.prototype);for(var c in s)u[c]=s[c];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(l){if(this.source===l)return this.target;if(this.target===l)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(l,h){for(var d=this.getOtherEnd(l),f=h.getGraphManager().getRoot();;){if(d.getOwner()==h)return d;if(d.getOwner()==f)break;d=d.getOwner().getParent()}return null},u.prototype.updateLength=function(){var l=new Array(4);this.isOverlapingSourceAndTarget=a.getIntersection(this.target.getRect(),this.source.getRect(),l),this.isOverlapingSourceAndTarget||(this.lengthX=l[0]-l[2],this.lengthY=l[1]-l[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},n.exports=u}),(function(n,r,i){function s(a){this.vGraphObject=a}n.exports=s}),(function(n,r,i){var s=i(2),a=i(10),o=i(13),u=i(0),c=i(16),l=i(5);function h(f,p,g,m){g==null&&m==null&&(m=p),s.call(this,m),f.graphManager!=null&&(f=f.graphManager),this.estimatedSize=a.MIN_VALUE,this.inclusionTreeDepth=a.MAX_VALUE,this.vGraphObject=m,this.edges=[],this.graphManager=f,g!=null&&p!=null?this.rect=new o(p.x,p.y,g.width,g.height):this.rect=new o}h.prototype=Object.create(s.prototype);for(var d in s)h[d]=s[d];h.prototype.getEdges=function(){return this.edges},h.prototype.getChild=function(){return this.child},h.prototype.getOwner=function(){return this.owner},h.prototype.getWidth=function(){return this.rect.width},h.prototype.setWidth=function(f){this.rect.width=f},h.prototype.getHeight=function(){return this.rect.height},h.prototype.setHeight=function(f){this.rect.height=f},h.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},h.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},h.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},h.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},h.prototype.getRect=function(){return this.rect},h.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},h.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},h.prototype.setRect=function(f,p){this.rect.x=f.x,this.rect.y=f.y,this.rect.width=p.width,this.rect.height=p.height},h.prototype.setCenter=function(f,p){this.rect.x=f-this.rect.width/2,this.rect.y=p-this.rect.height/2},h.prototype.setLocation=function(f,p){this.rect.x=f,this.rect.y=p},h.prototype.moveBy=function(f,p){this.rect.x+=f,this.rect.y+=p},h.prototype.getEdgeListToNode=function(f){var p=[],g=this;return g.edges.forEach(function(m){if(m.target==f){if(m.source!=g)throw"Incorrect edge source!";p.push(m)}}),p},h.prototype.getEdgesBetween=function(f){var p=[],g=this;return g.edges.forEach(function(m){if(!(m.source==g||m.target==g))throw"Incorrect edge source and/or target";(m.target==f||m.source==f)&&p.push(m)}),p},h.prototype.getNeighborsList=function(){var f=new Set,p=this;return p.edges.forEach(function(g){if(g.source==p)f.add(g.target);else{if(g.target!=p)throw"Incorrect incidency!";f.add(g.source)}}),f},h.prototype.withChildren=function(){var f=new Set,p,g;if(f.add(this),this.child!=null)for(var m=this.child.getNodes(),y=0;y<m.length;y++)p=m[y],g=p.withChildren(),g.forEach(function(b){f.add(b)});return f},h.prototype.getNoOfChildren=function(){var f=0,p;if(this.child==null)f=1;else for(var g=this.child.getNodes(),m=0;m<g.length;m++)p=g[m],f+=p.getNoOfChildren();return f==0&&(f=1),f},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},h.prototype.scatter=function(){var f,p,g=-u.INITIAL_WORLD_BOUNDARY,m=u.INITIAL_WORLD_BOUNDARY;f=u.WORLD_CENTER_X+c.nextDouble()*(m-g)+g;var y=-u.INITIAL_WORLD_BOUNDARY,b=u.INITIAL_WORLD_BOUNDARY;p=u.WORLD_CENTER_Y+c.nextDouble()*(b-y)+y,this.rect.x=f,this.rect.y=p},h.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var f=this.getChild();if(f.updateBounds(!0),this.rect.x=f.getLeft(),this.rect.y=f.getTop(),this.setWidth(f.getRight()-f.getLeft()),this.setHeight(f.getBottom()-f.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var p=f.getRight()-f.getLeft(),g=f.getBottom()-f.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(p+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>p?(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(p+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(g+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>g?(this.rect.y-=(this.labelHeight-g)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(g+this.labelHeight))}}},h.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==a.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},h.prototype.transform=function(f){var p=this.rect.x;p>u.WORLD_BOUNDARY?p=u.WORLD_BOUNDARY:p<-u.WORLD_BOUNDARY&&(p=-u.WORLD_BOUNDARY);var g=this.rect.y;g>u.WORLD_BOUNDARY?g=u.WORLD_BOUNDARY:g<-u.WORLD_BOUNDARY&&(g=-u.WORLD_BOUNDARY);var m=new l(p,g),y=f.inverseTransformPoint(m);this.setLocation(y.x,y.y)},h.prototype.getLeft=function(){return this.rect.x},h.prototype.getRight=function(){return this.rect.x+this.rect.width},h.prototype.getTop=function(){return this.rect.y},h.prototype.getBottom=function(){return this.rect.y+this.rect.height},h.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},n.exports=h}),(function(n,r,i){var s=i(0);function a(){}for(var o in s)a[o]=s[o];a.MAX_ITERATIONS=2500,a.DEFAULT_EDGE_LENGTH=50,a.DEFAULT_SPRING_STRENGTH=.45,a.DEFAULT_REPULSION_STRENGTH=4500,a.DEFAULT_GRAVITY_STRENGTH=.4,a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,a.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,a.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,a.COOLING_ADAPTATION_FACTOR=.33,a.ADAPTATION_LOWER_NODE_LIMIT=1e3,a.ADAPTATION_UPPER_NODE_LIMIT=5e3,a.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,a.MAX_NODE_DISPLACEMENT=a.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,a.MIN_REPULSION_DIST=a.DEFAULT_EDGE_LENGTH/10,a.CONVERGENCE_CHECK_PERIOD=100,a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,a.MIN_EDGE_LENGTH=1,a.GRID_CALCULATION_CHECK_PERIOD=10,n.exports=a}),(function(n,r,i){function s(a,o){a==null&&o==null?(this.x=0,this.y=0):(this.x=a,this.y=o)}s.prototype.getX=function(){return this.x},s.prototype.getY=function(){return this.y},s.prototype.setX=function(a){this.x=a},s.prototype.setY=function(a){this.y=a},s.prototype.getDifference=function(a){return new DimensionD(this.x-a.x,this.y-a.y)},s.prototype.getCopy=function(){return new s(this.x,this.y)},s.prototype.translate=function(a){return this.x+=a.width,this.y+=a.height,this},n.exports=s}),(function(n,r,i){var s=i(2),a=i(10),o=i(0),u=i(7),c=i(3),l=i(1),h=i(13),d=i(12),f=i(11);function p(m,y,b){s.call(this,b),this.estimatedSize=a.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=m,y!=null&&y instanceof u?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}p.prototype=Object.create(s.prototype);for(var g in s)p[g]=s[g];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(m,y,b){if(y==null&&b==null){var v=m;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(v)>-1)throw"Node already in graph!";return v.owner=this,this.getNodes().push(v),v}else{var x=m;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(b)>-1))throw"Source or target not in graph!";if(!(y.owner==b.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner!=b.owner?null:(x.source=y,x.target=b,x.isInterGraph=!1,this.getEdges().push(x),y.edges.push(x),b!=y&&b.edges.push(x),x)}},p.prototype.remove=function(m){var y=m;if(m instanceof c){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var b=y.edges.slice(),v,x=b.length,w=0;w<x;w++)v=b[w],v.isInterGraph?this.graphManager.remove(v):v.source.owner.remove(v);var k=this.nodes.indexOf(y);if(k==-1)throw"Node not in owner node list!";this.nodes.splice(k,1)}else if(m instanceof l){var v=m;if(v==null)throw"Edge is null!";if(!(v.source!=null&&v.target!=null))throw"Source and/or target is null!";if(!(v.source.owner!=null&&v.target.owner!=null&&v.source.owner==this&&v.target.owner==this))throw"Source and/or target owner is invalid!";var D=v.source.edges.indexOf(v),A=v.target.edges.indexOf(v);if(!(D>-1&&A>-1))throw"Source and/or target doesn't know this edge!";v.source.edges.splice(D,1),v.target!=v.source&&v.target.edges.splice(A,1);var k=v.source.owner.getEdges().indexOf(v);if(k==-1)throw"Not in owner's edge list!";v.source.owner.getEdges().splice(k,1)}},p.prototype.updateLeftTop=function(){for(var m=a.MAX_VALUE,y=a.MAX_VALUE,b,v,x,w=this.getNodes(),k=w.length,D=0;D<k;D++){var A=w[D];b=A.getTop(),v=A.getLeft(),m>b&&(m=b),y>v&&(y=v)}return m==a.MAX_VALUE?null:(w[0].getParent().paddingLeft!=null?x=w[0].getParent().paddingLeft:x=this.margin,this.left=y-x,this.top=m-x,new d(this.left,this.top))},p.prototype.updateBounds=function(m){for(var y=a.MAX_VALUE,b=-a.MAX_VALUE,v=a.MAX_VALUE,x=-a.MAX_VALUE,w,k,D,A,R,N=this.nodes,L=N.length,S=0;S<L;S++){var M=N[S];m&&M.child!=null&&M.updateBounds(),w=M.getLeft(),k=M.getRight(),D=M.getTop(),A=M.getBottom(),y>w&&(y=w),b<k&&(b=k),v>D&&(v=D),x<A&&(x=A)}var E=new h(y,v,b-y,x-v);y==a.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),N[0].getParent().paddingLeft!=null?R=N[0].getParent().paddingLeft:R=this.margin,this.left=E.x-R,this.right=E.x+E.width+R,this.top=E.y-R,this.bottom=E.y+E.height+R},p.calculateBounds=function(m){for(var y=a.MAX_VALUE,b=-a.MAX_VALUE,v=a.MAX_VALUE,x=-a.MAX_VALUE,w,k,D,A,R=m.length,N=0;N<R;N++){var L=m[N];w=L.getLeft(),k=L.getRight(),D=L.getTop(),A=L.getBottom(),y>w&&(y=w),b<k&&(b=k),v>D&&(v=D),x<A&&(x=A)}var S=new h(y,v,b-y,x-v);return S},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var m=0,y=this.nodes,b=y.length,v=0;v<b;v++){var x=y[v];m+=x.calcEstimatedSize()}return m==0?this.estimatedSize=o.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=m/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var m=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new f,b=new Set,v=this.nodes[0],x,w,k=v.withChildren();for(k.forEach(function(S){y.push(S),b.add(S)});y.length!==0;){v=y.shift(),x=v.getEdges();for(var D=x.length,A=0;A<D;A++){var R=x[A];if(w=R.getOtherEndInGraph(v,this),w!=null&&!b.has(w)){var N=w.withChildren();N.forEach(function(S){y.push(S),b.add(S)})}}}if(this.isConnected=!1,b.size>=this.nodes.length){var L=0;b.forEach(function(S){S.owner==m&&L++}),L==this.nodes.length&&(this.isConnected=!0)}},n.exports=p}),(function(n,r,i){var s,a=i(1);function o(u){s=i(6),this.layout=u,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var u=this.layout.newGraph(),c=this.layout.newNode(null),l=this.add(u,c);return this.setRootGraph(l),this.rootGraph},o.prototype.add=function(u,c,l,h,d){if(l==null&&h==null&&d==null){if(u==null)throw"Graph is null!";if(c==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(c.child!=null)throw"Already has a child!";return u.parent=c,c.child=u,u}else{d=l,h=c,l=u;var f=h.getOwner(),p=d.getOwner();if(!(f!=null&&f.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(p!=null&&p.getGraphManager()==this))throw"Target not in this graph mgr!";if(f==p)return l.isInterGraph=!1,f.add(l,h,d);if(l.isInterGraph=!0,l.source=h,l.target=d,this.edges.indexOf(l)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(l),!(l.source!=null&&l.target!=null))throw"Edge source and/or target is null!";if(!(l.source.edges.indexOf(l)==-1&&l.target.edges.indexOf(l)==-1))throw"Edge already in source and/or target incidency list!";return l.source.edges.push(l),l.target.edges.push(l),l}},o.prototype.remove=function(u){if(u instanceof s){var c=u;if(c.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(c==this.rootGraph||c.parent!=null&&c.parent.graphManager==this))throw"Invalid parent node!";var l=[];l=l.concat(c.getEdges());for(var h,d=l.length,f=0;f<d;f++)h=l[f],c.remove(h);var p=[];p=p.concat(c.getNodes());var g;d=p.length;for(var f=0;f<d;f++)g=p[f],c.remove(g);c==this.rootGraph&&this.setRootGraph(null);var m=this.graphs.indexOf(c);this.graphs.splice(m,1),c.parent=null}else if(u instanceof a){if(h=u,h==null)throw"Edge is null!";if(!h.isInterGraph)throw"Not an inter-graph edge!";if(!(h.source!=null&&h.target!=null))throw"Source and/or target is null!";if(!(h.source.edges.indexOf(h)!=-1&&h.target.edges.indexOf(h)!=-1))throw"Source and/or target doesn't know this edge!";var m=h.source.edges.indexOf(h);if(h.source.edges.splice(m,1),m=h.target.edges.indexOf(h),h.target.edges.splice(m,1),!(h.source.owner!=null&&h.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(h.source.owner.getGraphManager().edges.indexOf(h)==-1)throw"Not in owner graph manager's edge list!";var m=h.source.owner.getGraphManager().edges.indexOf(h);h.source.owner.getGraphManager().edges.splice(m,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],c=this.getGraphs(),l=c.length,h=0;h<l;h++)u=u.concat(c[h].getNodes());this.allNodes=u}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],c=this.getGraphs();c.length;for(var l=0;l<c.length;l++)u=u.concat(c[l].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(u,c){if(!(u!=null&&c!=null))throw"assert failed";if(u==c)return!0;var l=u.getOwner(),h;do{if(h=l.getParent(),h==null)break;if(h==c)return!0;if(l=h.getOwner(),l==null)break}while(!0);l=c.getOwner();do{if(h=l.getParent(),h==null)break;if(h==u)return!0;if(l=h.getOwner(),l==null)break}while(!0);return!1},o.prototype.calcLowestCommonAncestors=function(){for(var u,c,l,h,d,f=this.getAllEdges(),p=f.length,g=0;g<p;g++){if(u=f[g],c=u.source,l=u.target,u.lca=null,u.sourceInLca=c,u.targetInLca=l,c==l){u.lca=c.getOwner();continue}for(h=c.getOwner();u.lca==null;){for(u.targetInLca=l,d=l.getOwner();u.lca==null;){if(d==h){u.lca=d;break}if(d==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=d.getParent(),d=u.targetInLca.getOwner()}if(h==this.rootGraph)break;u.lca==null&&(u.sourceInLca=h.getParent(),h=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},o.prototype.calcLowestCommonAncestor=function(u,c){if(u==c)return u.getOwner();var l=u.getOwner();do{if(l==null)break;var h=c.getOwner();do{if(h==null)break;if(h==l)return h;h=h.getParent().getOwner()}while(!0);l=l.getParent().getOwner()}while(!0);return l},o.prototype.calcInclusionTreeDepths=function(u,c){u==null&&c==null&&(u=this.rootGraph,c=1);for(var l,h=u.getNodes(),d=h.length,f=0;f<d;f++)l=h[f],l.inclusionTreeDepth=c,l.child!=null&&this.calcInclusionTreeDepths(l.child,c+1)},o.prototype.includesInvalidEdge=function(){for(var u,c=[],l=this.edges.length,h=0;h<l;h++)u=this.edges[h],this.isOneAncestorOfOther(u.source,u.target)&&c.push(u);for(var h=0;h<c.length;h++)this.remove(c[h]);return!1},n.exports=o}),(function(n,r,i){var s=i(12);function a(){}a.calcSeparationAmount=function(o,u,c,l){if(!o.intersects(u))throw"assert failed";var h=new Array(2);this.decideDirectionsForOverlappingNodes(o,u,h),c[0]=Math.min(o.getRight(),u.getRight())-Math.max(o.x,u.x),c[1]=Math.min(o.getBottom(),u.getBottom())-Math.max(o.y,u.y),o.getX()<=u.getX()&&o.getRight()>=u.getRight()?c[0]+=Math.min(u.getX()-o.getX(),o.getRight()-u.getRight()):u.getX()<=o.getX()&&u.getRight()>=o.getRight()&&(c[0]+=Math.min(o.getX()-u.getX(),u.getRight()-o.getRight())),o.getY()<=u.getY()&&o.getBottom()>=u.getBottom()?c[1]+=Math.min(u.getY()-o.getY(),o.getBottom()-u.getBottom()):u.getY()<=o.getY()&&u.getBottom()>=o.getBottom()&&(c[1]+=Math.min(o.getY()-u.getY(),u.getBottom()-o.getBottom()));var d=Math.abs((u.getCenterY()-o.getCenterY())/(u.getCenterX()-o.getCenterX()));u.getCenterY()===o.getCenterY()&&u.getCenterX()===o.getCenterX()&&(d=1);var f=d*c[0],p=c[1]/d;c[0]<p?p=c[0]:f=c[1],c[0]=-1*h[0]*(p/2+l),c[1]=-1*h[1]*(f/2+l)},a.decideDirectionsForOverlappingNodes=function(o,u,c){o.getCenterX()<u.getCenterX()?c[0]=-1:c[0]=1,o.getCenterY()<u.getCenterY()?c[1]=-1:c[1]=1},a.getIntersection2=function(o,u,c){var l=o.getCenterX(),h=o.getCenterY(),d=u.getCenterX(),f=u.getCenterY();if(o.intersects(u))return c[0]=l,c[1]=h,c[2]=d,c[3]=f,!0;var p=o.getX(),g=o.getY(),m=o.getRight(),y=o.getX(),b=o.getBottom(),v=o.getRight(),x=o.getWidthHalf(),w=o.getHeightHalf(),k=u.getX(),D=u.getY(),A=u.getRight(),R=u.getX(),N=u.getBottom(),L=u.getRight(),S=u.getWidthHalf(),M=u.getHeightHalf(),E=!1,_=!1;if(l===d){if(h>f)return c[0]=l,c[1]=g,c[2]=d,c[3]=N,!1;if(h<f)return c[0]=l,c[1]=b,c[2]=d,c[3]=D,!1}else if(h===f){if(l>d)return c[0]=p,c[1]=h,c[2]=A,c[3]=f,!1;if(l<d)return c[0]=m,c[1]=h,c[2]=k,c[3]=f,!1}else{var C=o.height/o.width,T=u.height/u.width,F=(f-h)/(d-l),I=void 0,P=void 0,U=void 0,q=void 0,Y=void 0,te=void 0;if(-C===F?l>d?(c[0]=y,c[1]=b,E=!0):(c[0]=m,c[1]=g,E=!0):C===F&&(l>d?(c[0]=p,c[1]=g,E=!0):(c[0]=v,c[1]=b,E=!0)),-T===F?d>l?(c[2]=R,c[3]=N,_=!0):(c[2]=A,c[3]=D,_=!0):T===F&&(d>l?(c[2]=k,c[3]=D,_=!0):(c[2]=L,c[3]=N,_=!0)),E&&_)return!1;if(l>d?h>f?(I=this.getCardinalDirection(C,F,4),P=this.getCardinalDirection(T,F,2)):(I=this.getCardinalDirection(-C,F,3),P=this.getCardinalDirection(-T,F,1)):h>f?(I=this.getCardinalDirection(-C,F,1),P=this.getCardinalDirection(-T,F,3)):(I=this.getCardinalDirection(C,F,2),P=this.getCardinalDirection(T,F,4)),!E)switch(I){case 1:q=g,U=l+-w/F,c[0]=U,c[1]=q;break;case 2:U=v,q=h+x*F,c[0]=U,c[1]=q;break;case 3:q=b,U=l+w/F,c[0]=U,c[1]=q;break;case 4:U=y,q=h+-x*F,c[0]=U,c[1]=q;break}if(!_)switch(P){case 1:te=D,Y=d+-M/F,c[2]=Y,c[3]=te;break;case 2:Y=L,te=f+S*F,c[2]=Y,c[3]=te;break;case 3:te=N,Y=d+M/F,c[2]=Y,c[3]=te;break;case 4:Y=R,te=f+-S*F,c[2]=Y,c[3]=te;break}}return!1},a.getCardinalDirection=function(o,u,c){return o>u?c:1+c%4},a.getIntersection=function(o,u,c,l){if(l==null)return this.getIntersection2(o,u,c);var h=o.x,d=o.y,f=u.x,p=u.y,g=c.x,m=c.y,y=l.x,b=l.y,v=void 0,x=void 0,w=void 0,k=void 0,D=void 0,A=void 0,R=void 0,N=void 0,L=void 0;return w=p-d,D=h-f,R=f*d-h*p,k=b-m,A=g-y,N=y*m-g*b,L=w*A-k*D,L===0?null:(v=(D*N-A*R)/L,x=(k*R-w*N)/L,new s(v,x))},a.angleOfVector=function(o,u,c,l){var h=void 0;return o!==c?(h=Math.atan((l-u)/(c-o)),c<o?h+=Math.PI:l<u&&(h+=this.TWO_PI)):l<u?h=this.ONE_AND_HALF_PI:h=this.HALF_PI,h},a.doIntersect=function(o,u,c,l){var h=o.x,d=o.y,f=u.x,p=u.y,g=c.x,m=c.y,y=l.x,b=l.y,v=(f-h)*(b-m)-(y-g)*(p-d);if(v===0)return!1;var x=((b-m)*(y-h)+(g-y)*(b-d))/v,w=((d-p)*(y-h)+(f-h)*(b-d))/v;return 0<x&&x<1&&0<w&&w<1},a.findCircleLineIntersections=function(o,u,c,l,h,d,f){var p=(c-o)*(c-o)+(l-u)*(l-u),g=2*((o-h)*(c-o)+(u-d)*(l-u)),m=(o-h)*(o-h)+(u-d)*(u-d)-f*f,y=g*g-4*p*m;if(y>=0){var b=(-g+Math.sqrt(g*g-4*p*m))/(2*p),v=(-g-Math.sqrt(g*g-4*p*m))/(2*p),x=null;return b>=0&&b<=1?[b]:v>=0&&v<=1?[v]:x}else return null},a.HALF_PI=.5*Math.PI,a.ONE_AND_HALF_PI=1.5*Math.PI,a.TWO_PI=2*Math.PI,a.THREE_PI=3*Math.PI,n.exports=a}),(function(n,r,i){function s(){}s.sign=function(a){return a>0?1:a<0?-1:0},s.floor=function(a){return a<0?Math.ceil(a):Math.floor(a)},s.ceil=function(a){return a<0?Math.floor(a):Math.ceil(a)},n.exports=s}),(function(n,r,i){function s(){}s.MAX_VALUE=2147483647,s.MIN_VALUE=-2147483648,n.exports=s}),(function(n,r,i){var s=(function(){function h(d,f){for(var p=0;p<f.length;p++){var g=f[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}return function(d,f,p){return f&&h(d.prototype,f),p&&h(d,p),d}})();function a(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(d){return{value:d,next:null,prev:null}},u=function(d,f,p,g){return d!==null?d.next=f:g.head=f,p!==null?p.prev=f:g.tail=f,f.prev=d,f.next=p,g.length++,f},c=function(d,f){var p=d.prev,g=d.next;return p!==null?p.next=g:f.head=g,g!==null?g.prev=p:f.tail=p,d.prev=d.next=null,f.length--,d},l=(function(){function h(d){var f=this;a(this,h),this.length=0,this.head=null,this.tail=null,d!=null&&d.forEach(function(p){return f.push(p)})}return s(h,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(f,p){return u(p.prev,o(f),p,this)}},{key:"insertAfter",value:function(f,p){return u(p,o(f),p.next,this)}},{key:"insertNodeBefore",value:function(f,p){return u(p.prev,f,p,this)}},{key:"insertNodeAfter",value:function(f,p){return u(p,f,p.next,this)}},{key:"push",value:function(f){return u(this.tail,o(f),null,this)}},{key:"unshift",value:function(f){return u(null,o(f),this.head,this)}},{key:"remove",value:function(f){return c(f,this)}},{key:"pop",value:function(){return c(this.tail,this).value}},{key:"popNode",value:function(){return c(this.tail,this)}},{key:"shift",value:function(){return c(this.head,this).value}},{key:"shiftNode",value:function(){return c(this.head,this)}},{key:"get_object_at",value:function(f){if(f<=this.length()){for(var p=1,g=this.head;p<f;)g=g.next,p++;return g.value}}},{key:"set_object_at",value:function(f,p){if(f<=this.length()){for(var g=1,m=this.head;g<f;)m=m.next,g++;m.value=p}}}]),h})();n.exports=l}),(function(n,r,i){function s(a,o,u){this.x=null,this.y=null,a==null&&o==null&&u==null?(this.x=0,this.y=0):typeof a=="number"&&typeof o=="number"&&u==null?(this.x=a,this.y=o):a.constructor.name=="Point"&&o==null&&u==null&&(u=a,this.x=u.x,this.y=u.y)}s.prototype.getX=function(){return this.x},s.prototype.getY=function(){return this.y},s.prototype.getLocation=function(){return new s(this.x,this.y)},s.prototype.setLocation=function(a,o,u){a.constructor.name=="Point"&&o==null&&u==null?(u=a,this.setLocation(u.x,u.y)):typeof a=="number"&&typeof o=="number"&&u==null&&(parseInt(a)==a&&parseInt(o)==o?this.move(a,o):(this.x=Math.floor(a+.5),this.y=Math.floor(o+.5)))},s.prototype.move=function(a,o){this.x=a,this.y=o},s.prototype.translate=function(a,o){this.x+=a,this.y+=o},s.prototype.equals=function(a){if(a.constructor.name=="Point"){var o=a;return this.x==o.x&&this.y==o.y}return this==a},s.prototype.toString=function(){return new s().constructor.name+"[x="+this.x+",y="+this.y+"]"},n.exports=s}),(function(n,r,i){function s(a,o,u,c){this.x=0,this.y=0,this.width=0,this.height=0,a!=null&&o!=null&&u!=null&&c!=null&&(this.x=a,this.y=o,this.width=u,this.height=c)}s.prototype.getX=function(){return this.x},s.prototype.setX=function(a){this.x=a},s.prototype.getY=function(){return this.y},s.prototype.setY=function(a){this.y=a},s.prototype.getWidth=function(){return this.width},s.prototype.setWidth=function(a){this.width=a},s.prototype.getHeight=function(){return this.height},s.prototype.setHeight=function(a){this.height=a},s.prototype.getRight=function(){return this.x+this.width},s.prototype.getBottom=function(){return this.y+this.height},s.prototype.intersects=function(a){return!(this.getRight()<a.x||this.getBottom()<a.y||a.getRight()<this.x||a.getBottom()<this.y)},s.prototype.getCenterX=function(){return this.x+this.width/2},s.prototype.getMinX=function(){return this.getX()},s.prototype.getMaxX=function(){return this.getX()+this.width},s.prototype.getCenterY=function(){return this.y+this.height/2},s.prototype.getMinY=function(){return this.getY()},s.prototype.getMaxY=function(){return this.getY()+this.height},s.prototype.getWidthHalf=function(){return this.width/2},s.prototype.getHeightHalf=function(){return this.height/2},n.exports=s}),(function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function a(){}a.lastID=0,a.createID=function(o){return a.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=a.getString(),a.lastID++),o.uniqueID)},a.getString=function(o){return o==null&&(o=a.lastID),"Object#"+o},a.isPrimitive=function(o){var u=typeof o>"u"?"undefined":s(o);return o==null||u!="object"&&u!="function"},n.exports=a}),(function(n,r,i){function s(g){if(Array.isArray(g)){for(var m=0,y=Array(g.length);m<g.length;m++)y[m]=g[m];return y}else return Array.from(g)}var a=i(0),o=i(7),u=i(3),c=i(1),l=i(6),h=i(5),d=i(17),f=i(29);function p(g){f.call(this),this.layoutQuality=a.QUALITY,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=a.DEFAULT_INCREMENTAL,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,g!=null&&(this.isRemoteUse=g)}p.RANDOM_SEED=1,p.prototype=Object.create(f.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var g=new o(this);return this.graphManager=g,g},p.prototype.newGraph=function(g){return new l(null,this.graphManager,g)},p.prototype.newNode=function(g){return new u(this.graphManager,g)},p.prototype.newEdge=function(g){return new c(null,null,g)},p.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var g;return this.checkLayoutSuccess()?g=!1:g=this.layout(),a.ANIMATE==="during"?!1:(g&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,g)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var g=this.graphManager.getAllEdges(),m=0;m<g.length;m++)g[m];for(var y=this.graphManager.getRoot().getNodes(),m=0;m<y.length;m++)y[m];this.update(this.graphManager.getRoot())}},p.prototype.update=function(g){if(g==null)this.update2();else if(g instanceof u){var m=g;if(m.getChild()!=null)for(var y=m.getChild().getNodes(),b=0;b<y.length;b++)update(y[b]);if(m.vGraphObject!=null){var v=m.vGraphObject;v.update(m)}}else if(g instanceof c){var x=g;if(x.vGraphObject!=null){var w=x.vGraphObject;w.update(x)}}else if(g instanceof l){var k=g;if(k.vGraphObject!=null){var D=k.vGraphObject;D.update(k)}}},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=a.QUALITY,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=a.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(g){if(g==null)this.transform(new h(0,0));else{var m=new d,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){m.setWorldOrgX(g.x),m.setWorldOrgY(g.y),m.setDeviceOrgX(y.x),m.setDeviceOrgY(y.y);for(var b=this.getAllNodes(),v,x=0;x<b.length;x++)v=b[x],v.transform(m)}}},p.prototype.positionNodesRandomly=function(g){if(g==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var m,y,b=g.getNodes(),v=0;v<b.length;v++)m=b[v],y=m.getChild(),y==null||y.getNodes().length==0?m.scatter():(this.positionNodesRandomly(y),m.updateBounds())},p.prototype.getFlatForest=function(){for(var g=[],m=!0,y=this.graphManager.getRoot().getNodes(),b=!0,v=0;v<y.length;v++)y[v].getChild()!=null&&(b=!1);if(!b)return g;var x=new Set,w=[],k=new Map,D=[];for(D=D.concat(y);D.length>0&&m;){for(w.push(D[0]);w.length>0&&m;){var A=w[0];w.splice(0,1),x.add(A);for(var R=A.getEdges(),v=0;v<R.length;v++){var N=R[v].getOtherEnd(A);if(k.get(A)!=N)if(!x.has(N))w.push(N),k.set(N,A);else{m=!1;break}}}if(!m)g=[];else{var L=[].concat(s(x));g.push(L);for(var v=0;v<L.length;v++){var S=L[v],M=D.indexOf(S);M>-1&&D.splice(M,1)}x=new Set,k=new Map}}return g},p.prototype.createDummyNodesForBendpoints=function(g){for(var m=[],y=g.source,b=this.graphManager.calcLowestCommonAncestor(g.source,g.target),v=0;v<g.bendpoints.length;v++){var x=this.newNode(null);x.setRect(new Point(0,0),new Dimension(1,1)),b.add(x);var w=this.newEdge(null);this.graphManager.add(w,y,x),m.add(x),y=x}var w=this.newEdge(null);return this.graphManager.add(w,y,g.target),this.edgeToDummyNodes.set(g,m),g.isInterGraph()?this.graphManager.remove(g):b.remove(g),m},p.prototype.createBendpointsFromDummyNodes=function(){var g=[];g=g.concat(this.graphManager.getAllEdges()),g=[].concat(s(this.edgeToDummyNodes.keys())).concat(g);for(var m=0;m<g.length;m++){var y=g[m];if(y.bendpoints.length>0){for(var b=this.edgeToDummyNodes.get(y),v=0;v<b.length;v++){var x=b[v],w=new h(x.getCenterX(),x.getCenterY()),k=y.bendpoints.get(v);k.x=w.x,k.y=w.y,x.getOwner().remove(x)}this.graphManager.add(y,y.source,y.target)}}},p.transform=function(g,m,y,b){if(y!=null&&b!=null){var v=m;if(g<=50){var x=m/y;v-=(m-x)/50*(50-g)}else{var w=m*b;v+=(w-m)/50*(g-50)}return v}else{var k,D;return g<=50?(k=9*m/500,D=m/10):(k=9*m/50,D=-8*m),k*g+D}},p.findCenterOfTree=function(g){var m=[];m=m.concat(g);var y=[],b=new Map,v=!1,x=null;(m.length==1||m.length==2)&&(v=!0,x=m[0]);for(var w=0;w<m.length;w++){var k=m[w],D=k.getNeighborsList().size;b.set(k,k.getNeighborsList().size),D==1&&y.push(k)}var A=[];for(A=A.concat(y);!v;){var R=[];R=R.concat(A),A=[];for(var w=0;w<m.length;w++){var k=m[w],N=m.indexOf(k);N>=0&&m.splice(N,1);var L=k.getNeighborsList();L.forEach(function(E){if(y.indexOf(E)<0){var _=b.get(E),C=_-1;C==1&&A.push(E),b.set(E,C)}})}y=y.concat(A),(m.length==1||m.length==2)&&(v=!0,x=m[0])}return x},p.prototype.setGraphManager=function(g){this.graphManager=g},n.exports=p}),(function(n,r,i){function s(){}s.seed=1,s.x=0,s.nextDouble=function(){return s.x=Math.sin(s.seed++)*1e4,s.x-Math.floor(s.x)},n.exports=s}),(function(n,r,i){var s=i(5);function a(o,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}a.prototype.getWorldOrgX=function(){return this.lworldOrgX},a.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},a.prototype.getWorldOrgY=function(){return this.lworldOrgY},a.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},a.prototype.getWorldExtX=function(){return this.lworldExtX},a.prototype.setWorldExtX=function(o){this.lworldExtX=o},a.prototype.getWorldExtY=function(){return this.lworldExtY},a.prototype.setWorldExtY=function(o){this.lworldExtY=o},a.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},a.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},a.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},a.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},a.prototype.getDeviceExtX=function(){return this.ldeviceExtX},a.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},a.prototype.getDeviceExtY=function(){return this.ldeviceExtY},a.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},a.prototype.transformX=function(o){var u=0,c=this.lworldExtX;return c!=0&&(u=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/c),u},a.prototype.transformY=function(o){var u=0,c=this.lworldExtY;return c!=0&&(u=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/c),u},a.prototype.inverseTransformX=function(o){var u=0,c=this.ldeviceExtX;return c!=0&&(u=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/c),u},a.prototype.inverseTransformY=function(o){var u=0,c=this.ldeviceExtY;return c!=0&&(u=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/c),u},a.prototype.inverseTransformPoint=function(o){var u=new s(this.inverseTransformX(o.x),this.inverseTransformY(o.y));return u},n.exports=a}),(function(n,r,i){function s(f){if(Array.isArray(f)){for(var p=0,g=Array(f.length);p<f.length;p++)g[p]=f[p];return g}else return Array.from(f)}var a=i(15),o=i(4),u=i(0),c=i(8),l=i(9);function h(){a.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}h.prototype=Object.create(a.prototype);for(var d in a)h[d]=a[d];h.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},h.prototype.calcIdealEdgeLengths=function(){for(var f,p,g,m,y,b,v,x=this.getGraphManager().getAllEdges(),w=0;w<x.length;w++)f=x[w],p=f.idealLength,f.isInterGraph&&(m=f.getSource(),y=f.getTarget(),b=f.getSourceInLca().getEstimatedSize(),v=f.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(f.idealLength+=b+v-2*u.SIMPLE_NODE_SIZE),g=f.getLca().getInclusionTreeDepth(),f.idealLength+=p*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(m.getInclusionTreeDepth()+y.getInclusionTreeDepth()-2*g))},h.prototype.initSpringEmbedder=function(){var f=this.getAllNodes().length;this.incremental?(f>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(f-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(f>o.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(o.COOLING_ADAPTATION_FACTOR,1-(f-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},h.prototype.calcSpringForces=function(){for(var f=this.getAllEdges(),p,g=0;g<f.length;g++)p=f[g],this.calcSpringForce(p,p.idealLength)},h.prototype.calcRepulsionForces=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g,m,y,b,v=this.getAllNodes(),x;if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&f&&this.updateGrid(),x=new Set,g=0;g<v.length;g++)y=v[g],this.calculateRepulsionForceOfANode(y,x,f,p),x.add(y);else for(g=0;g<v.length;g++)for(y=v[g],m=g+1;m<v.length;m++)b=v[m],y.getOwner()==b.getOwner()&&this.calcRepulsionForce(y,b)},h.prototype.calcGravitationalForces=function(){for(var f,p=this.getAllNodesToApplyGravitation(),g=0;g<p.length;g++)f=p[g],this.calcGravitationalForce(f)},h.prototype.moveNodes=function(){for(var f=this.getAllNodes(),p,g=0;g<f.length;g++)p=f[g],p.move()},h.prototype.calcSpringForce=function(f,p){var g=f.getSource(),m=f.getTarget(),y,b,v,x;if(this.uniformLeafNodeSizes&&g.getChild()==null&&m.getChild()==null)f.updateLengthSimple();else if(f.updateLength(),f.isOverlapingSourceAndTarget)return;y=f.getLength(),y!=0&&(b=f.edgeElasticity*(y-p),v=b*(f.lengthX/y),x=b*(f.lengthY/y),g.springForceX+=v,g.springForceY+=x,m.springForceX-=v,m.springForceY-=x)},h.prototype.calcRepulsionForce=function(f,p){var g=f.getRect(),m=p.getRect(),y=new Array(2),b=new Array(4),v,x,w,k,D,A,R;if(g.intersects(m)){c.calcSeparationAmount(g,m,y,o.DEFAULT_EDGE_LENGTH/2),A=2*y[0],R=2*y[1];var N=f.noOfChildren*p.noOfChildren/(f.noOfChildren+p.noOfChildren);f.repulsionForceX-=N*A,f.repulsionForceY-=N*R,p.repulsionForceX+=N*A,p.repulsionForceY+=N*R}else this.uniformLeafNodeSizes&&f.getChild()==null&&p.getChild()==null?(v=m.getCenterX()-g.getCenterX(),x=m.getCenterY()-g.getCenterY()):(c.getIntersection(g,m,b),v=b[2]-b[0],x=b[3]-b[1]),Math.abs(v)<o.MIN_REPULSION_DIST&&(v=l.sign(v)*o.MIN_REPULSION_DIST),Math.abs(x)<o.MIN_REPULSION_DIST&&(x=l.sign(x)*o.MIN_REPULSION_DIST),w=v*v+x*x,k=Math.sqrt(w),D=(f.nodeRepulsion/2+p.nodeRepulsion/2)*f.noOfChildren*p.noOfChildren/w,A=D*v/k,R=D*x/k,f.repulsionForceX-=A,f.repulsionForceY-=R,p.repulsionForceX+=A,p.repulsionForceY+=R},h.prototype.calcGravitationalForce=function(f){var p,g,m,y,b,v,x,w;p=f.getOwner(),g=(p.getRight()+p.getLeft())/2,m=(p.getTop()+p.getBottom())/2,y=f.getCenterX()-g,b=f.getCenterY()-m,v=Math.abs(y)+f.getWidth()/2,x=Math.abs(b)+f.getHeight()/2,f.getOwner()==this.graphManager.getRoot()?(w=p.getEstimatedSize()*this.gravityRangeFactor,(v>w||x>w)&&(f.gravitationForceX=-this.gravityConstant*y,f.gravitationForceY=-this.gravityConstant*b)):(w=p.getEstimatedSize()*this.compoundGravityRangeFactor,(v>w||x>w)&&(f.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,f.gravitationForceY=-this.gravityConstant*b*this.compoundGravityConstant))},h.prototype.isConverged=function(){var f,p=!1;return this.totalIterations>this.maxIterations/3&&(p=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),f=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,f||p},h.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},h.prototype.calcNoOfChildrenForAllNodes=function(){for(var f,p=this.graphManager.getAllNodes(),g=0;g<p.length;g++)f=p[g],f.noOfChildren=f.getNoOfChildren()},h.prototype.calcGrid=function(f){var p=0,g=0;p=parseInt(Math.ceil((f.getRight()-f.getLeft())/this.repulsionRange)),g=parseInt(Math.ceil((f.getBottom()-f.getTop())/this.repulsionRange));for(var m=new Array(p),y=0;y<p;y++)m[y]=new Array(g);for(var y=0;y<p;y++)for(var b=0;b<g;b++)m[y][b]=new Array;return m},h.prototype.addNodeToGrid=function(f,p,g){var m=0,y=0,b=0,v=0;m=parseInt(Math.floor((f.getRect().x-p)/this.repulsionRange)),y=parseInt(Math.floor((f.getRect().width+f.getRect().x-p)/this.repulsionRange)),b=parseInt(Math.floor((f.getRect().y-g)/this.repulsionRange)),v=parseInt(Math.floor((f.getRect().height+f.getRect().y-g)/this.repulsionRange));for(var x=m;x<=y;x++)for(var w=b;w<=v;w++)this.grid[x][w].push(f),f.setGridCoordinates(m,y,b,v)},h.prototype.updateGrid=function(){var f,p,g=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),f=0;f<g.length;f++)p=g[f],this.addNodeToGrid(p,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},h.prototype.calculateRepulsionForceOfANode=function(f,p,g,m){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&g||m){var y=new Set;f.surrounding=new Array;for(var b,v=this.grid,x=f.startX-1;x<f.finishX+2;x++)for(var w=f.startY-1;w<f.finishY+2;w++)if(!(x<0||w<0||x>=v.length||w>=v[0].length)){for(var k=0;k<v[x][w].length;k++)if(b=v[x][w][k],!(f.getOwner()!=b.getOwner()||f==b)&&!p.has(b)&&!y.has(b)){var D=Math.abs(f.getCenterX()-b.getCenterX())-(f.getWidth()/2+b.getWidth()/2),A=Math.abs(f.getCenterY()-b.getCenterY())-(f.getHeight()/2+b.getHeight()/2);D<=this.repulsionRange&&A<=this.repulsionRange&&y.add(b)}}f.surrounding=[].concat(s(y))}for(x=0;x<f.surrounding.length;x++)this.calcRepulsionForce(f,f.surrounding[x])},h.prototype.calcRepulsionRange=function(){return 0},n.exports=h}),(function(n,r,i){var s=i(1),a=i(4);function o(c,l,h){s.call(this,c,l,h),this.idealLength=a.DEFAULT_EDGE_LENGTH,this.edgeElasticity=a.DEFAULT_SPRING_STRENGTH}o.prototype=Object.create(s.prototype);for(var u in s)o[u]=s[u];n.exports=o}),(function(n,r,i){var s=i(3),a=i(4);function o(c,l,h,d){s.call(this,c,l,h,d),this.nodeRepulsion=a.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}o.prototype=Object.create(s.prototype);for(var u in s)o[u]=s[u];o.prototype.setGridCoordinates=function(c,l,h,d){this.startX=c,this.finishX=l,this.startY=h,this.finishY=d},n.exports=o}),(function(n,r,i){function s(a,o){this.width=0,this.height=0,a!==null&&o!==null&&(this.height=o,this.width=a)}s.prototype.getWidth=function(){return this.width},s.prototype.setWidth=function(a){this.width=a},s.prototype.getHeight=function(){return this.height},s.prototype.setHeight=function(a){this.height=a},n.exports=s}),(function(n,r,i){var s=i(14);function a(){this.map={},this.keys=[]}a.prototype.put=function(o,u){var c=s.createID(o);this.contains(c)||(this.map[c]=u,this.keys.push(o))},a.prototype.contains=function(o){return s.createID(o),this.map[o]!=null},a.prototype.get=function(o){var u=s.createID(o);return this.map[u]},a.prototype.keySet=function(){return this.keys},n.exports=a}),(function(n,r,i){var s=i(14);function a(){this.set={}}a.prototype.add=function(o){var u=s.createID(o);this.contains(u)||(this.set[u]=o)},a.prototype.remove=function(o){delete this.set[s.createID(o)]},a.prototype.clear=function(){this.set={}},a.prototype.contains=function(o){return this.set[s.createID(o)]==o},a.prototype.isEmpty=function(){return this.size()===0},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAllTo=function(o){for(var u=Object.keys(this.set),c=u.length,l=0;l<c;l++)o.push(this.set[u[l]])},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAll=function(o){for(var u=o.length,c=0;c<u;c++){var l=o[c];this.add(l)}},n.exports=a}),(function(n,r,i){function s(){}s.multMat=function(a,o){for(var u=[],c=0;c<a.length;c++){u[c]=[];for(var l=0;l<o[0].length;l++){u[c][l]=0;for(var h=0;h<a[0].length;h++)u[c][l]+=a[c][h]*o[h][l]}}return u},s.transpose=function(a){for(var o=[],u=0;u<a[0].length;u++){o[u]=[];for(var c=0;c<a.length;c++)o[u][c]=a[c][u]}return o},s.multCons=function(a,o){for(var u=[],c=0;c<a.length;c++)u[c]=a[c]*o;return u},s.minusOp=function(a,o){for(var u=[],c=0;c<a.length;c++)u[c]=a[c]-o[c];return u},s.dotProduct=function(a,o){for(var u=0,c=0;c<a.length;c++)u+=a[c]*o[c];return u},s.mag=function(a){return Math.sqrt(this.dotProduct(a,a))},s.normalize=function(a){for(var o=[],u=this.mag(a),c=0;c<a.length;c++)o[c]=a[c]/u;return o},s.multGamma=function(a){for(var o=[],u=0,c=0;c<a.length;c++)u+=a[c];u*=-1/a.length;for(var l=0;l<a.length;l++)o[l]=u+a[l];return o},s.multL=function(a,o,u){for(var c=[],l=[],h=[],d=0;d<o[0].length;d++){for(var f=0,p=0;p<o.length;p++)f+=-.5*o[p][d]*a[p];l[d]=f}for(var g=0;g<u.length;g++){for(var m=0,y=0;y<u.length;y++)m+=u[g][y]*l[y];h[g]=m}for(var b=0;b<o.length;b++){for(var v=0,x=0;x<o[0].length;x++)v+=o[b][x]*h[x];c[b]=v}return c},n.exports=s}),(function(n,r,i){var s=(function(){function c(l,h){for(var d=0;d<h.length;d++){var f=h[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,h,d){return h&&c(l.prototype,h),d&&c(l,d),l}})();function a(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}var o=i(11),u=(function(){function c(l,h){a(this,c),(h!==null||h!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var d=void 0;l instanceof o?d=l.size():d=l.length,this._quicksort(l,0,d-1)}return s(c,[{key:"_quicksort",value:function(h,d,f){if(d<f){var p=this._partition(h,d,f);this._quicksort(h,d,p),this._quicksort(h,p+1,f)}}},{key:"_partition",value:function(h,d,f){for(var p=this._get(h,d),g=d,m=f;;){for(;this.compareFunction(p,this._get(h,m));)m--;for(;this.compareFunction(this._get(h,g),p);)g++;if(g<m)this._swap(h,g,m),g++,m--;else return m}}},{key:"_get",value:function(h,d){return h instanceof o?h.get_object_at(d):h[d]}},{key:"_set",value:function(h,d,f){h instanceof o?h.set_object_at(d,f):h[d]=f}},{key:"_swap",value:function(h,d,f){var p=this._get(h,d);this._set(h,d,this._get(h,f)),this._set(h,f,p)}},{key:"_defaultCompareFunction",value:function(h,d){return d>h}}]),c})();n.exports=u}),(function(n,r,i){function s(){}s.svd=function(a){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=a.length,this.n=a[0].length;var o=Math.min(this.m,this.n);this.s=(function(oe){for(var Te=[];oe-- >0;)Te.push(0);return Te})(Math.min(this.m+1,this.n)),this.U=(function(oe){var Te=function Ue(Je){if(Je.length==0)return 0;for(var Lt=[],at=0;at<Je[0];at++)Lt.push(Ue(Je.slice(1)));return Lt};return Te(oe)})([this.m,o]),this.V=(function(oe){var Te=function Ue(Je){if(Je.length==0)return 0;for(var Lt=[],at=0;at<Je[0];at++)Lt.push(Ue(Je.slice(1)));return Lt};return Te(oe)})([this.n,this.n]);for(var u=(function(oe){for(var Te=[];oe-- >0;)Te.push(0);return Te})(this.n),c=(function(oe){for(var Te=[];oe-- >0;)Te.push(0);return Te})(this.m),l=!0,h=Math.min(this.m-1,this.n),d=Math.max(0,Math.min(this.n-2,this.m)),f=0;f<Math.max(h,d);f++){if(f<h){this.s[f]=0;for(var p=f;p<this.m;p++)this.s[f]=s.hypot(this.s[f],a[p][f]);if(this.s[f]!==0){a[f][f]<0&&(this.s[f]=-this.s[f]);for(var g=f;g<this.m;g++)a[g][f]/=this.s[f];a[f][f]+=1}this.s[f]=-this.s[f]}for(var m=f+1;m<this.n;m++){if((function(oe,Te){return oe&&Te})(f<h,this.s[f]!==0)){for(var y=0,b=f;b<this.m;b++)y+=a[b][f]*a[b][m];y=-y/a[f][f];for(var v=f;v<this.m;v++)a[v][m]+=y*a[v][f]}u[m]=a[f][m]}if((function(oe,Te){return Te})(l,f<h))for(var x=f;x<this.m;x++)this.U[x][f]=a[x][f];if(f<d){u[f]=0;for(var w=f+1;w<this.n;w++)u[f]=s.hypot(u[f],u[w]);if(u[f]!==0){u[f+1]<0&&(u[f]=-u[f]);for(var k=f+1;k<this.n;k++)u[k]/=u[f];u[f+1]+=1}if(u[f]=-u[f],(function(oe,Te){return oe&&Te})(f+1<this.m,u[f]!==0)){for(var D=f+1;D<this.m;D++)c[D]=0;for(var A=f+1;A<this.n;A++)for(var R=f+1;R<this.m;R++)c[R]+=u[A]*a[R][A];for(var N=f+1;N<this.n;N++)for(var L=-u[N]/u[f+1],S=f+1;S<this.m;S++)a[S][N]+=L*c[S]}for(var M=f+1;M<this.n;M++)this.V[M][f]=u[M]}}var E=Math.min(this.n,this.m+1);h<this.n&&(this.s[h]=a[h][h]),this.m<E&&(this.s[E-1]=0),d+1<E&&(u[d]=a[d][E-1]),u[E-1]=0;{for(var _=h;_<o;_++){for(var C=0;C<this.m;C++)this.U[C][_]=0;this.U[_][_]=1}for(var T=h-1;T>=0;T--)if(this.s[T]!==0){for(var F=T+1;F<o;F++){for(var I=0,P=T;P<this.m;P++)I+=this.U[P][T]*this.U[P][F];I=-I/this.U[T][T];for(var U=T;U<this.m;U++)this.U[U][F]+=I*this.U[U][T]}for(var q=T;q<this.m;q++)this.U[q][T]=-this.U[q][T];this.U[T][T]=1+this.U[T][T];for(var Y=0;Y<T-1;Y++)this.U[Y][T]=0}else{for(var te=0;te<this.m;te++)this.U[te][T]=0;this.U[T][T]=1}}for(var V=this.n-1;V>=0;V--){if((function(oe,Te){return oe&&Te})(V<d,u[V]!==0))for(var K=V+1;K<o;K++){for(var ae=0,se=V+1;se<this.n;se++)ae+=this.V[se][V]*this.V[se][K];ae=-ae/this.V[V+1][V];for(var B=V+1;B<this.n;B++)this.V[B][K]+=ae*this.V[B][V]}for(var W=0;W<this.n;W++)this.V[W][V]=0;this.V[V][V]=1}for(var Q=E-1,H=Math.pow(2,-52),pe=Math.pow(2,-966);E>0;){var J=void 0,Be=void 0;for(J=E-2;J>=-1&&J!==-1;J--)if(Math.abs(u[J])<=pe+H*(Math.abs(this.s[J])+Math.abs(this.s[J+1]))){u[J]=0;break}if(J===E-2)Be=4;else{var Se=void 0;for(Se=E-1;Se>=J&&Se!==J;Se--){var Rt=(Se!==E?Math.abs(u[Se]):0)+(Se!==J+1?Math.abs(u[Se-1]):0);if(Math.abs(this.s[Se])<=pe+H*Rt){this.s[Se]=0;break}}Se===J?Be=3:Se===E-1?Be=1:(Be=2,J=Se)}switch(J++,Be){case 1:{var Tt=u[E-2];u[E-2]=0;for(var Ke=E-2;Ke>=J;Ke--){var Yt=s.hypot(this.s[Ke],Tt),Fn=this.s[Ke]/Yt,Kr=Tt/Yt;this.s[Ke]=Yt,Ke!==J&&(Tt=-Kr*u[Ke-1],u[Ke-1]=Fn*u[Ke-1]);for(var Nt=0;Nt<this.n;Nt++)Yt=Fn*this.V[Nt][Ke]+Kr*this.V[Nt][E-1],this.V[Nt][E-1]=-Kr*this.V[Nt][Ke]+Fn*this.V[Nt][E-1],this.V[Nt][Ke]=Yt}}break;case 2:{var Xt=u[J-1];u[J-1]=0;for(var Dt=J;Dt<E;Dt++){var yt=s.hypot(this.s[Dt],Xt),wt=this.s[Dt]/yt,gr=Xt/yt;this.s[Dt]=yt,Xt=-gr*u[Dt],u[Dt]=wt*u[Dt];for(var nn=0;nn<this.m;nn++)yt=wt*this.U[nn][Dt]+gr*this.U[nn][J-1],this.U[nn][J-1]=-gr*this.U[nn][Dt]+wt*this.U[nn][J-1],this.U[nn][Dt]=yt}}break;case 3:{var Hn=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[E-1]),Math.abs(this.s[E-2])),Math.abs(u[E-2])),Math.abs(this.s[J])),Math.abs(u[J])),rn=this.s[E-1]/Hn,re=this.s[E-2]/Hn,ce=u[E-2]/Hn,xe=this.s[J]/Hn,Ee=u[J]/Hn,ye=((re+rn)*(re-rn)+ce*ce)/2,Ie=rn*ce*(rn*ce),Ze=0;(function(oe,Te){return oe||Te})(ye!==0,Ie!==0)&&(Ze=Math.sqrt(ye*ye+Ie),ye<0&&(Ze=-Ze),Ze=Ie/(ye+Ze));for(var qe=(xe+rn)*(xe-rn)+Ze,De=xe*Ee,me=J;me<E-1;me++){var Xe=s.hypot(qe,De),ze=qe/Xe,O=De/Xe;me!==J&&(u[me-1]=Xe),qe=ze*this.s[me]+O*u[me],u[me]=ze*u[me]-O*this.s[me],De=O*this.s[me+1],this.s[me+1]=ze*this.s[me+1];for(var X=0;X<this.n;X++)Xe=ze*this.V[X][me]+O*this.V[X][me+1],this.V[X][me+1]=-O*this.V[X][me]+ze*this.V[X][me+1],this.V[X][me]=Xe;if(Xe=s.hypot(qe,De),ze=qe/Xe,O=De/Xe,this.s[me]=Xe,qe=ze*u[me]+O*this.s[me+1],this.s[me+1]=-O*u[me]+ze*this.s[me+1],De=O*u[me+1],u[me+1]=ze*u[me+1],me<this.m-1)for(var z=0;z<this.m;z++)Xe=ze*this.U[z][me]+O*this.U[z][me+1],this.U[z][me+1]=-O*this.U[z][me]+ze*this.U[z][me+1],this.U[z][me]=Xe}u[E-2]=qe}break;case 4:{if(this.s[J]<=0){this.s[J]=this.s[J]<0?-this.s[J]:0;for(var ne=0;ne<=Q;ne++)this.V[ne][J]=-this.V[ne][J]}for(;J<Q&&!(this.s[J]>=this.s[J+1]);){var ke=this.s[J];if(this.s[J]=this.s[J+1],this.s[J+1]=ke,J<this.n-1)for(var he=0;he<this.n;he++)ke=this.V[he][J+1],this.V[he][J+1]=this.V[he][J],this.V[he][J]=ke;if(J<this.m-1)for(var Z=0;Z<this.m;Z++)ke=this.U[Z][J+1],this.U[Z][J+1]=this.U[Z][J],this.U[Z][J]=ke;J++}E--}break}}var ue={U:this.U,V:this.V,S:this.s};return ue},s.hypot=function(a,o){var u=void 0;return Math.abs(a)>Math.abs(o)?(u=o/a,u=Math.abs(a)*Math.sqrt(1+u*u)):o!=0?(u=a/o,u=Math.abs(o)*Math.sqrt(1+u*u)):u=0,u},n.exports=s}),(function(n,r,i){var s=(function(){function u(c,l){for(var h=0;h<l.length;h++){var d=l[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,l,h){return l&&u(c.prototype,l),h&&u(c,h),c}})();function a(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}var o=(function(){function u(c,l){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;a(this,u),this.sequence1=c,this.sequence2=l,this.match_score=h,this.mismatch_penalty=d,this.gap_penalty=f,this.iMax=c.length+1,this.jMax=l.length+1,this.grid=new Array(this.iMax);for(var p=0;p<this.iMax;p++){this.grid[p]=new Array(this.jMax);for(var g=0;g<this.jMax;g++)this.grid[p][g]=0}this.tracebackGrid=new Array(this.iMax);for(var m=0;m<this.iMax;m++){this.tracebackGrid[m]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.tracebackGrid[m][y]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return s(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var l=1;l<this.jMax;l++)this.grid[0][l]=this.grid[0][l-1]+this.gap_penalty,this.tracebackGrid[0][l]=[!1,!1,!0];for(var h=1;h<this.iMax;h++)this.grid[h][0]=this.grid[h-1][0]+this.gap_penalty,this.tracebackGrid[h][0]=[!1,!0,!1];for(var d=1;d<this.iMax;d++)for(var f=1;f<this.jMax;f++){var p=void 0;this.sequence1[d-1]===this.sequence2[f-1]?p=this.grid[d-1][f-1]+this.match_score:p=this.grid[d-1][f-1]+this.mismatch_penalty;var g=this.grid[d-1][f]+this.gap_penalty,m=this.grid[d][f-1]+this.gap_penalty,y=[p,g,m],b=this.arrayAllMaxIndexes(y);this.grid[d][f]=y[b[0]],this.tracebackGrid[d][f]=[b.includes(0),b.includes(1),b.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var l=[];for(l.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});l[0];){var h=l[0],d=this.tracebackGrid[h.pos[0]][h.pos[1]];d[0]&&l.push({pos:[h.pos[0]-1,h.pos[1]-1],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),d[1]&&l.push({pos:[h.pos[0]-1,h.pos[1]],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:"-"+h.seq2}),d[2]&&l.push({pos:[h.pos[0],h.pos[1]-1],seq1:"-"+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),h.pos[0]===0&&h.pos[1]===0&&this.alignments.push({sequence1:h.seq1,sequence2:h.seq2}),l.shift()}return this.alignments}},{key:"getAllIndexes",value:function(l,h){for(var d=[],f=-1;(f=l.indexOf(h,f+1))!==-1;)d.push(f);return d}},{key:"arrayAllMaxIndexes",value:function(l){return this.getAllIndexes(l,Math.max.apply(null,l))}}]),u})();n.exports=o}),(function(n,r,i){var s=function(){};s.FDLayout=i(18),s.FDLayoutConstants=i(4),s.FDLayoutEdge=i(19),s.FDLayoutNode=i(20),s.DimensionD=i(21),s.HashMap=i(22),s.HashSet=i(23),s.IGeometry=i(8),s.IMath=i(9),s.Integer=i(10),s.Point=i(12),s.PointD=i(5),s.RandomSeed=i(16),s.RectangleD=i(13),s.Transform=i(17),s.UniqueIDGeneretor=i(14),s.Quicksort=i(25),s.LinkedList=i(11),s.LGraphObject=i(2),s.LGraph=i(6),s.LEdge=i(1),s.LGraphManager=i(7),s.LNode=i(3),s.Layout=i(15),s.LayoutConstants=i(0),s.NeedlemanWunsch=i(27),s.Matrix=i(24),s.SVD=i(26),n.exports=s}),(function(n,r,i){function s(){this.listeners=[]}var a=s.prototype;a.addListener=function(o,u){this.listeners.push({event:o,callback:u})},a.removeListener=function(o,u){for(var c=this.listeners.length;c>=0;c--){var l=this.listeners[c];l.event===o&&l.callback===u&&this.listeners.splice(c,1)}},a.emit=function(o,u){for(var c=0;c<this.listeners.length;c++){var l=this.listeners[c];o===l.event&&l.callback(u)}},n.exports=s})])})})(kh)),kh.exports}var Kq=Th.exports,kw;function HZ(){return kw||(kw=1,(function(t,e){(function(r,i){t.exports=i(jq())})(Kq,function(n){return(()=>{var r={45:((o,u,c)=>{var l={};l.layoutBase=c(551),l.CoSEConstants=c(806),l.CoSEEdge=c(767),l.CoSEGraph=c(880),l.CoSEGraphManager=c(578),l.CoSELayout=c(765),l.CoSENode=c(991),l.ConstraintHandler=c(902),o.exports=l}),806:((o,u,c)=>{var l=c(551).FDLayoutConstants;function h(){}for(var d in l)h[d]=l[d];h.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,h.DEFAULT_RADIAL_SEPARATION=l.DEFAULT_EDGE_LENGTH,h.DEFAULT_COMPONENT_SEPERATION=60,h.TILE=!0,h.TILING_PADDING_VERTICAL=10,h.TILING_PADDING_HORIZONTAL=10,h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!0,h.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,h.TREE_REDUCTION_ON_INCREMENTAL=!0,h.PURE_INCREMENTAL=h.DEFAULT_INCREMENTAL,o.exports=h}),767:((o,u,c)=>{var l=c(551).FDLayoutEdge;function h(f,p,g){l.call(this,f,p,g)}h.prototype=Object.create(l.prototype);for(var d in l)h[d]=l[d];o.exports=h}),880:((o,u,c)=>{var l=c(551).LGraph;function h(f,p,g){l.call(this,f,p,g)}h.prototype=Object.create(l.prototype);for(var d in l)h[d]=l[d];o.exports=h}),578:((o,u,c)=>{var l=c(551).LGraphManager;function h(f){l.call(this,f)}h.prototype=Object.create(l.prototype);for(var d in l)h[d]=l[d];o.exports=h}),765:((o,u,c)=>{var l=c(551).FDLayout,h=c(578),d=c(880),f=c(991),p=c(767),g=c(806),m=c(902),y=c(551).FDLayoutConstants,b=c(551).LayoutConstants,v=c(551).Point,x=c(551).PointD,w=c(551).DimensionD,k=c(551).Layout,D=c(551).Integer,A=c(551).IGeometry,R=c(551).LGraph,N=c(551).Transform,L=c(551).LinkedList;function S(){l.call(this),this.toBeTiled={},this.constraints={}}S.prototype=Object.create(l.prototype);for(var M in l)S[M]=l[M];S.prototype.newGraphManager=function(){var E=new h(this);return this.graphManager=E,E},S.prototype.newGraph=function(E){return new d(null,this.graphManager,E)},S.prototype.newNode=function(E){return new f(this.graphManager,E)},S.prototype.newEdge=function(E){return new p(null,null,E)},S.prototype.initParameters=function(){l.prototype.initParameters.call(this,arguments),this.isSubLayout||(g.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=g.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=g.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=y.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=y.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=y.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=y.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},S.prototype.initSpringEmbedder=function(){l.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/y.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},S.prototype.layout=function(){var E=b.DEFAULT_CREATE_BENDS_AS_NEEDED;return E&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},S.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(g.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var _=new Set(this.getAllNodes()),C=this.nodesWithGravity.filter(function(I){return _.has(I)});this.graphManager.setAllNodesToApplyGravitation(C)}}else{var E=this.getFlatForest();if(E.length>0)this.positionNodesRadially(E);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var _=new Set(this.getAllNodes()),C=this.nodesWithGravity.filter(function(T){return _.has(T)});this.graphManager.setAllNodesToApplyGravitation(C),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(m.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),g.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},S.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%y.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),_=this.nodesWithGravity.filter(function(F){return E.has(F)});this.graphManager.setAllNodesToApplyGravitation(_),this.graphManager.updateBounds(),this.updateGrid(),g.PURE_INCREMENTAL?this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),g.PURE_INCREMENTAL?this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var C=!this.isTreeGrowing&&!this.isGrowthFinished,T=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(C,T),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},S.prototype.getPositionsData=function(){for(var E=this.graphManager.getAllNodes(),_={},C=0;C<E.length;C++){var T=E[C].rect,F=E[C].id;_[F]={id:F,x:T.getCenterX(),y:T.getCenterY(),w:T.width,h:T.height}}return _},S.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var E=!1;if(y.ANIMATE==="during")this.emit("layoutstarted");else{for(;!E;)E=this.tick();this.graphManager.updateBounds()}},S.prototype.moveNodes=function(){for(var E=this.getAllNodes(),_,C=0;C<E.length;C++)_=E[C],_.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var C=0;C<E.length;C++)_=E[C],_.move()},S.prototype.initConstraintVariables=function(){var E=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var _=this.graphManager.getAllNodes(),C=0;C<_.length;C++){var T=_[C];this.idToNodeMap.set(T.id,T)}var F=function B(W){for(var Q=W.getChild().getNodes(),H,pe=0,J=0;J<Q.length;J++)H=Q[J],H.getChild()==null?E.fixedNodeSet.has(H.id)&&(pe+=100):pe+=B(H);return pe};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(Q){E.fixedNodeSet.add(Q.nodeId)});for(var _=this.graphManager.getAllNodes(),T,C=0;C<_.length;C++)if(T=_[C],T.getChild()!=null){var I=F(T);I>0&&(T.fixedNodeWeight=I)}}if(this.constraints.relativePlacementConstraint){var P=new Map,U=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(B){E.fixedNodesOnHorizontal.add(B),E.fixedNodesOnVertical.add(B)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var q=this.constraints.alignmentConstraint.vertical,C=0;C<q.length;C++)this.dummyToNodeForVerticalAlignment.set("dummy"+C,[]),q[C].forEach(function(W){P.set(W,"dummy"+C),E.dummyToNodeForVerticalAlignment.get("dummy"+C).push(W),E.fixedNodeSet.has(W)&&E.fixedNodesOnHorizontal.add("dummy"+C)});if(this.constraints.alignmentConstraint.horizontal)for(var Y=this.constraints.alignmentConstraint.horizontal,C=0;C<Y.length;C++)this.dummyToNodeForHorizontalAlignment.set("dummy"+C,[]),Y[C].forEach(function(W){U.set(W,"dummy"+C),E.dummyToNodeForHorizontalAlignment.get("dummy"+C).push(W),E.fixedNodeSet.has(W)&&E.fixedNodesOnVertical.add("dummy"+C)})}if(g.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(B){var W,Q,H;for(H=B.length-1;H>=2*B.length/3;H--)W=Math.floor(Math.random()*(H+1)),Q=B[H],B[H]=B[W],B[W]=Q;return B},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(B){if(B.left){var W=P.has(B.left)?P.get(B.left):B.left,Q=P.has(B.right)?P.get(B.right):B.right;E.nodesInRelativeHorizontal.includes(W)||(E.nodesInRelativeHorizontal.push(W),E.nodeToRelativeConstraintMapHorizontal.set(W,[]),E.dummyToNodeForVerticalAlignment.has(W)?E.nodeToTempPositionMapHorizontal.set(W,E.idToNodeMap.get(E.dummyToNodeForVerticalAlignment.get(W)[0]).getCenterX()):E.nodeToTempPositionMapHorizontal.set(W,E.idToNodeMap.get(W).getCenterX())),E.nodesInRelativeHorizontal.includes(Q)||(E.nodesInRelativeHorizontal.push(Q),E.nodeToRelativeConstraintMapHorizontal.set(Q,[]),E.dummyToNodeForVerticalAlignment.has(Q)?E.nodeToTempPositionMapHorizontal.set(Q,E.idToNodeMap.get(E.dummyToNodeForVerticalAlignment.get(Q)[0]).getCenterX()):E.nodeToTempPositionMapHorizontal.set(Q,E.idToNodeMap.get(Q).getCenterX())),E.nodeToRelativeConstraintMapHorizontal.get(W).push({right:Q,gap:B.gap}),E.nodeToRelativeConstraintMapHorizontal.get(Q).push({left:W,gap:B.gap})}else{var H=U.has(B.top)?U.get(B.top):B.top,pe=U.has(B.bottom)?U.get(B.bottom):B.bottom;E.nodesInRelativeVertical.includes(H)||(E.nodesInRelativeVertical.push(H),E.nodeToRelativeConstraintMapVertical.set(H,[]),E.dummyToNodeForHorizontalAlignment.has(H)?E.nodeToTempPositionMapVertical.set(H,E.idToNodeMap.get(E.dummyToNodeForHorizontalAlignment.get(H)[0]).getCenterY()):E.nodeToTempPositionMapVertical.set(H,E.idToNodeMap.get(H).getCenterY())),E.nodesInRelativeVertical.includes(pe)||(E.nodesInRelativeVertical.push(pe),E.nodeToRelativeConstraintMapVertical.set(pe,[]),E.dummyToNodeForHorizontalAlignment.has(pe)?E.nodeToTempPositionMapVertical.set(pe,E.idToNodeMap.get(E.dummyToNodeForHorizontalAlignment.get(pe)[0]).getCenterY()):E.nodeToTempPositionMapVertical.set(pe,E.idToNodeMap.get(pe).getCenterY())),E.nodeToRelativeConstraintMapVertical.get(H).push({bottom:pe,gap:B.gap}),E.nodeToRelativeConstraintMapVertical.get(pe).push({top:H,gap:B.gap})}});else{var te=new Map,V=new Map;this.constraints.relativePlacementConstraint.forEach(function(B){if(B.left){var W=P.has(B.left)?P.get(B.left):B.left,Q=P.has(B.right)?P.get(B.right):B.right;te.has(W)?te.get(W).push(Q):te.set(W,[Q]),te.has(Q)?te.get(Q).push(W):te.set(Q,[W])}else{var H=U.has(B.top)?U.get(B.top):B.top,pe=U.has(B.bottom)?U.get(B.bottom):B.bottom;V.has(H)?V.get(H).push(pe):V.set(H,[pe]),V.has(pe)?V.get(pe).push(H):V.set(pe,[H])}});var K=function(W,Q){var H=[],pe=[],J=new L,Be=new Set,Se=0;return W.forEach(function(Rt,Tt){if(!Be.has(Tt)){H[Se]=[],pe[Se]=!1;var Ke=Tt;for(J.push(Ke),Be.add(Ke),H[Se].push(Ke);J.length!=0;){Ke=J.shift(),Q.has(Ke)&&(pe[Se]=!0);var Yt=W.get(Ke);Yt.forEach(function(Fn){Be.has(Fn)||(J.push(Fn),Be.add(Fn),H[Se].push(Fn))})}Se++}}),{components:H,isFixed:pe}},ae=K(te,E.fixedNodesOnHorizontal);this.componentsOnHorizontal=ae.components,this.fixedComponentsOnHorizontal=ae.isFixed;var se=K(V,E.fixedNodesOnVertical);this.componentsOnVertical=se.components,this.fixedComponentsOnVertical=se.isFixed}}},S.prototype.updateDisplacements=function(){var E=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(se){var B=E.idToNodeMap.get(se.nodeId);B.displacementX=0,B.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var _=this.constraints.alignmentConstraint.vertical,C=0;C<_.length;C++){for(var T=0,F=0;F<_[C].length;F++){if(this.fixedNodeSet.has(_[C][F])){T=0;break}T+=this.idToNodeMap.get(_[C][F]).displacementX}for(var I=T/_[C].length,F=0;F<_[C].length;F++)this.idToNodeMap.get(_[C][F]).displacementX=I}if(this.constraints.alignmentConstraint.horizontal)for(var P=this.constraints.alignmentConstraint.horizontal,C=0;C<P.length;C++){for(var U=0,F=0;F<P[C].length;F++){if(this.fixedNodeSet.has(P[C][F])){U=0;break}U+=this.idToNodeMap.get(P[C][F]).displacementY}for(var q=U/P[C].length,F=0;F<P[C].length;F++)this.idToNodeMap.get(P[C][F]).displacementY=q}}if(this.constraints.relativePlacementConstraint)if(g.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(se){if(!E.fixedNodesOnHorizontal.has(se)){var B=0;E.dummyToNodeForVerticalAlignment.has(se)?B=E.idToNodeMap.get(E.dummyToNodeForVerticalAlignment.get(se)[0]).displacementX:B=E.idToNodeMap.get(se).displacementX,E.nodeToRelativeConstraintMapHorizontal.get(se).forEach(function(W){if(W.right){var Q=E.nodeToTempPositionMapHorizontal.get(W.right)-E.nodeToTempPositionMapHorizontal.get(se)-B;Q<W.gap&&(B-=W.gap-Q)}else{var Q=E.nodeToTempPositionMapHorizontal.get(se)-E.nodeToTempPositionMapHorizontal.get(W.left)+B;Q<W.gap&&(B+=W.gap-Q)}}),E.nodeToTempPositionMapHorizontal.set(se,E.nodeToTempPositionMapHorizontal.get(se)+B),E.dummyToNodeForVerticalAlignment.has(se)?E.dummyToNodeForVerticalAlignment.get(se).forEach(function(W){E.idToNodeMap.get(W).displacementX=B}):E.idToNodeMap.get(se).displacementX=B}}),this.nodesInRelativeVertical.forEach(function(se){if(!E.fixedNodesOnHorizontal.has(se)){var B=0;E.dummyToNodeForHorizontalAlignment.has(se)?B=E.idToNodeMap.get(E.dummyToNodeForHorizontalAlignment.get(se)[0]).displacementY:B=E.idToNodeMap.get(se).displacementY,E.nodeToRelativeConstraintMapVertical.get(se).forEach(function(W){if(W.bottom){var Q=E.nodeToTempPositionMapVertical.get(W.bottom)-E.nodeToTempPositionMapVertical.get(se)-B;Q<W.gap&&(B-=W.gap-Q)}else{var Q=E.nodeToTempPositionMapVertical.get(se)-E.nodeToTempPositionMapVertical.get(W.top)+B;Q<W.gap&&(B+=W.gap-Q)}}),E.nodeToTempPositionMapVertical.set(se,E.nodeToTempPositionMapVertical.get(se)+B),E.dummyToNodeForHorizontalAlignment.has(se)?E.dummyToNodeForHorizontalAlignment.get(se).forEach(function(W){E.idToNodeMap.get(W).displacementY=B}):E.idToNodeMap.get(se).displacementY=B}});else{for(var C=0;C<this.componentsOnHorizontal.length;C++){var Y=this.componentsOnHorizontal[C];if(this.fixedComponentsOnHorizontal[C])for(var F=0;F<Y.length;F++)this.dummyToNodeForVerticalAlignment.has(Y[F])?this.dummyToNodeForVerticalAlignment.get(Y[F]).forEach(function(W){E.idToNodeMap.get(W).displacementX=0}):this.idToNodeMap.get(Y[F]).displacementX=0;else{for(var te=0,V=0,F=0;F<Y.length;F++)if(this.dummyToNodeForVerticalAlignment.has(Y[F])){var K=this.dummyToNodeForVerticalAlignment.get(Y[F]);te+=K.length*this.idToNodeMap.get(K[0]).displacementX,V+=K.length}else te+=this.idToNodeMap.get(Y[F]).displacementX,V++;for(var ae=te/V,F=0;F<Y.length;F++)this.dummyToNodeForVerticalAlignment.has(Y[F])?this.dummyToNodeForVerticalAlignment.get(Y[F]).forEach(function(W){E.idToNodeMap.get(W).displacementX=ae}):this.idToNodeMap.get(Y[F]).displacementX=ae}}for(var C=0;C<this.componentsOnVertical.length;C++){var Y=this.componentsOnVertical[C];if(this.fixedComponentsOnVertical[C])for(var F=0;F<Y.length;F++)this.dummyToNodeForHorizontalAlignment.has(Y[F])?this.dummyToNodeForHorizontalAlignment.get(Y[F]).forEach(function(Q){E.idToNodeMap.get(Q).displacementY=0}):this.idToNodeMap.get(Y[F]).displacementY=0;else{for(var te=0,V=0,F=0;F<Y.length;F++)if(this.dummyToNodeForHorizontalAlignment.has(Y[F])){var K=this.dummyToNodeForHorizontalAlignment.get(Y[F]);te+=K.length*this.idToNodeMap.get(K[0]).displacementY,V+=K.length}else te+=this.idToNodeMap.get(Y[F]).displacementY,V++;for(var ae=te/V,F=0;F<Y.length;F++)this.dummyToNodeForHorizontalAlignment.has(Y[F])?this.dummyToNodeForHorizontalAlignment.get(Y[F]).forEach(function(J){E.idToNodeMap.get(J).displacementY=ae}):this.idToNodeMap.get(Y[F]).displacementY=ae}}}},S.prototype.calculateNodesToApplyGravitationTo=function(){var E=[],_,C=this.graphManager.getGraphs(),T=C.length,F;for(F=0;F<T;F++)_=C[F],_.updateConnected(),_.isConnected||(E=E.concat(_.getNodes()));return E},S.prototype.createBendpoints=function(){var E=[];E=E.concat(this.graphManager.getAllEdges());var _=new Set,C;for(C=0;C<E.length;C++){var T=E[C];if(!_.has(T)){var F=T.getSource(),I=T.getTarget();if(F==I)T.getBendpoints().push(new x),T.getBendpoints().push(new x),this.createDummyNodesForBendpoints(T),_.add(T);else{var P=[];if(P=P.concat(F.getEdgeListToNode(I)),P=P.concat(I.getEdgeListToNode(F)),!_.has(P[0])){if(P.length>1){var U;for(U=0;U<P.length;U++){var q=P[U];q.getBendpoints().push(new x),this.createDummyNodesForBendpoints(q)}}P.forEach(function(Y){_.add(Y)})}}}if(_.size==E.length)break}},S.prototype.positionNodesRadially=function(E){for(var _=new v(0,0),C=Math.ceil(Math.sqrt(E.length)),T=0,F=0,I=0,P=new x(0,0),U=0;U<E.length;U++){U%C==0&&(I=0,F=T,U!=0&&(F+=g.DEFAULT_COMPONENT_SEPERATION),T=0);var q=E[U],Y=k.findCenterOfTree(q);_.x=I,_.y=F,P=S.radialLayout(q,Y,_),P.y>T&&(T=Math.floor(P.y)),I=Math.floor(P.x+g.DEFAULT_COMPONENT_SEPERATION)}this.transform(new x(b.WORLD_CENTER_X-P.x/2,b.WORLD_CENTER_Y-P.y/2))},S.radialLayout=function(E,_,C){var T=Math.max(this.maxDiagonalInTree(E),g.DEFAULT_RADIAL_SEPARATION);S.branchRadialLayout(_,null,0,359,0,T);var F=R.calculateBounds(E),I=new N;I.setDeviceOrgX(F.getMinX()),I.setDeviceOrgY(F.getMinY()),I.setWorldOrgX(C.x),I.setWorldOrgY(C.y);for(var P=0;P<E.length;P++){var U=E[P];U.transform(I)}var q=new x(F.getMaxX(),F.getMaxY());return I.inverseTransformPoint(q)},S.branchRadialLayout=function(E,_,C,T,F,I){var P=(T-C+1)/2;P<0&&(P+=180);var U=(P+C)%360,q=U*A.TWO_PI/360,Y=F*Math.cos(q),te=F*Math.sin(q);E.setCenter(Y,te);var V=[];V=V.concat(E.getEdges());var K=V.length;_!=null&&K--;for(var ae=0,se=V.length,B,W=E.getEdgesBetween(_);W.length>1;){var Q=W[0];W.splice(0,1);var H=V.indexOf(Q);H>=0&&V.splice(H,1),se--,K--}_!=null?B=(V.indexOf(W[0])+1)%se:B=0;for(var pe=Math.abs(T-C)/K,J=B;ae!=K;J=++J%se){var Be=V[J].getOtherEnd(E);if(Be!=_){var Se=(C+ae*pe)%360,Rt=(Se+pe)%360;S.branchRadialLayout(Be,E,Se,Rt,F+I,I),ae++}}},S.maxDiagonalInTree=function(E){for(var _=D.MIN_VALUE,C=0;C<E.length;C++){var T=E[C],F=T.getDiagonal();F>_&&(_=F)}return _},S.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},S.prototype.groupZeroDegreeMembers=function(){var E=this,_={};this.memberGroups={},this.idToDummyNode={};for(var C=[],T=this.graphManager.getAllNodes(),F=0;F<T.length;F++){var I=T[F],P=I.getParent();this.getNodeDegreeWithChildren(I)===0&&(P.id==null||!this.getToBeTiled(P))&&C.push(I)}for(var F=0;F<C.length;F++){var I=C[F],U=I.getParent().id;typeof _[U]>"u"&&(_[U]=[]),_[U]=_[U].concat(I)}Object.keys(_).forEach(function(q){if(_[q].length>1){var Y="DummyCompound_"+q;E.memberGroups[Y]=_[q];var te=_[q][0].getParent(),V=new f(E.graphManager);V.id=Y,V.paddingLeft=te.paddingLeft||0,V.paddingRight=te.paddingRight||0,V.paddingBottom=te.paddingBottom||0,V.paddingTop=te.paddingTop||0,E.idToDummyNode[Y]=V;var K=E.getGraphManager().add(E.newGraph(),V),ae=te.getChild();ae.add(V);for(var se=0;se<_[q].length;se++){var B=_[q][se];ae.remove(B),K.add(B)}}})},S.prototype.clearCompounds=function(){var E={},_={};this.performDFSOnCompounds();for(var C=0;C<this.compoundOrder.length;C++)_[this.compoundOrder[C].id]=this.compoundOrder[C],E[this.compoundOrder[C].id]=[].concat(this.compoundOrder[C].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[C].getChild()),this.compoundOrder[C].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(E,_)},S.prototype.clearZeroDegreeMembers=function(){var E=this,_=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(C){var T=E.idToDummyNode[C];if(_[C]=E.tileNodes(E.memberGroups[C],T.paddingLeft+T.paddingRight),T.rect.width=_[C].width,T.rect.height=_[C].height,T.setCenter(_[C].centerX,_[C].centerY),T.labelMarginLeft=0,T.labelMarginTop=0,g.NODE_DIMENSIONS_INCLUDE_LABELS){var F=T.rect.width,I=T.rect.height;T.labelWidth&&(T.labelPosHorizontal=="left"?(T.rect.x-=T.labelWidth,T.setWidth(F+T.labelWidth),T.labelMarginLeft=T.labelWidth):T.labelPosHorizontal=="center"&&T.labelWidth>F?(T.rect.x-=(T.labelWidth-F)/2,T.setWidth(T.labelWidth),T.labelMarginLeft=(T.labelWidth-F)/2):T.labelPosHorizontal=="right"&&T.setWidth(F+T.labelWidth)),T.labelHeight&&(T.labelPosVertical=="top"?(T.rect.y-=T.labelHeight,T.setHeight(I+T.labelHeight),T.labelMarginTop=T.labelHeight):T.labelPosVertical=="center"&&T.labelHeight>I?(T.rect.y-=(T.labelHeight-I)/2,T.setHeight(T.labelHeight),T.labelMarginTop=(T.labelHeight-I)/2):T.labelPosVertical=="bottom"&&T.setHeight(I+T.labelHeight))}})},S.prototype.repopulateCompounds=function(){for(var E=this.compoundOrder.length-1;E>=0;E--){var _=this.compoundOrder[E],C=_.id,T=_.paddingLeft,F=_.paddingTop,I=_.labelMarginLeft,P=_.labelMarginTop;this.adjustLocations(this.tiledMemberPack[C],_.rect.x,_.rect.y,T,F,I,P)}},S.prototype.repopulateZeroDegreeMembers=function(){var E=this,_=this.tiledZeroDegreePack;Object.keys(_).forEach(function(C){var T=E.idToDummyNode[C],F=T.paddingLeft,I=T.paddingTop,P=T.labelMarginLeft,U=T.labelMarginTop;E.adjustLocations(_[C],T.rect.x,T.rect.y,F,I,P,U)})},S.prototype.getToBeTiled=function(E){var _=E.id;if(this.toBeTiled[_]!=null)return this.toBeTiled[_];var C=E.getChild();if(C==null)return this.toBeTiled[_]=!1,!1;for(var T=C.getNodes(),F=0;F<T.length;F++){var I=T[F];if(this.getNodeDegree(I)>0)return this.toBeTiled[_]=!1,!1;if(I.getChild()==null){this.toBeTiled[I.id]=!1;continue}if(!this.getToBeTiled(I))return this.toBeTiled[_]=!1,!1}return this.toBeTiled[_]=!0,!0},S.prototype.getNodeDegree=function(E){E.id;for(var _=E.getEdges(),C=0,T=0;T<_.length;T++){var F=_[T];F.getSource().id!==F.getTarget().id&&(C=C+1)}return C},S.prototype.getNodeDegreeWithChildren=function(E){var _=this.getNodeDegree(E);if(E.getChild()==null)return _;for(var C=E.getChild().getNodes(),T=0;T<C.length;T++){var F=C[T];_+=this.getNodeDegreeWithChildren(F)}return _},S.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},S.prototype.fillCompexOrderByDFS=function(E){for(var _=0;_<E.length;_++){var C=E[_];C.getChild()!=null&&this.fillCompexOrderByDFS(C.getChild().getNodes()),this.getToBeTiled(C)&&this.compoundOrder.push(C)}},S.prototype.adjustLocations=function(E,_,C,T,F,I,P){_+=T+I,C+=F+P;for(var U=_,q=0;q<E.rows.length;q++){var Y=E.rows[q];_=U;for(var te=0,V=0;V<Y.length;V++){var K=Y[V];K.rect.x=_,K.rect.y=C,_+=K.rect.width+E.horizontalPadding,K.rect.height>te&&(te=K.rect.height)}C+=te+E.verticalPadding}},S.prototype.tileCompoundMembers=function(E,_){var C=this;this.tiledMemberPack=[],Object.keys(E).forEach(function(T){var F=_[T];if(C.tiledMemberPack[T]=C.tileNodes(E[T],F.paddingLeft+F.paddingRight),F.rect.width=C.tiledMemberPack[T].width,F.rect.height=C.tiledMemberPack[T].height,F.setCenter(C.tiledMemberPack[T].centerX,C.tiledMemberPack[T].centerY),F.labelMarginLeft=0,F.labelMarginTop=0,g.NODE_DIMENSIONS_INCLUDE_LABELS){var I=F.rect.width,P=F.rect.height;F.labelWidth&&(F.labelPosHorizontal=="left"?(F.rect.x-=F.labelWidth,F.setWidth(I+F.labelWidth),F.labelMarginLeft=F.labelWidth):F.labelPosHorizontal=="center"&&F.labelWidth>I?(F.rect.x-=(F.labelWidth-I)/2,F.setWidth(F.labelWidth),F.labelMarginLeft=(F.labelWidth-I)/2):F.labelPosHorizontal=="right"&&F.setWidth(I+F.labelWidth)),F.labelHeight&&(F.labelPosVertical=="top"?(F.rect.y-=F.labelHeight,F.setHeight(P+F.labelHeight),F.labelMarginTop=F.labelHeight):F.labelPosVertical=="center"&&F.labelHeight>P?(F.rect.y-=(F.labelHeight-P)/2,F.setHeight(F.labelHeight),F.labelMarginTop=(F.labelHeight-P)/2):F.labelPosVertical=="bottom"&&F.setHeight(P+F.labelHeight))}})},S.prototype.tileNodes=function(E,_){var C=this.tileNodesByFavoringDim(E,_,!0),T=this.tileNodesByFavoringDim(E,_,!1),F=this.getOrgRatio(C),I=this.getOrgRatio(T),P;return I<F?P=T:P=C,P},S.prototype.getOrgRatio=function(E){var _=E.width,C=E.height,T=_/C;return T<1&&(T=1/T),T},S.prototype.calcIdealRowWidth=function(E,_){var C=g.TILING_PADDING_VERTICAL,T=g.TILING_PADDING_HORIZONTAL,F=E.length,I=0,P=0,U=0;E.forEach(function(se){I+=se.getWidth(),P+=se.getHeight(),se.getWidth()>U&&(U=se.getWidth())});var q=I/F,Y=P/F,te=Math.pow(C-T,2)+4*(q+T)*(Y+C)*F,V=(T-C+Math.sqrt(te))/(2*(q+T)),K;_?(K=Math.ceil(V),K==V&&K++):K=Math.floor(V);var ae=K*(q+T)-T;return U>ae&&(ae=U),ae+=T*2,ae},S.prototype.tileNodesByFavoringDim=function(E,_,C){var T=g.TILING_PADDING_VERTICAL,F=g.TILING_PADDING_HORIZONTAL,I=g.TILING_COMPARE_BY,P={rows:[],rowWidth:[],rowHeight:[],width:0,height:_,verticalPadding:T,horizontalPadding:F,centerX:0,centerY:0};I&&(P.idealRowWidth=this.calcIdealRowWidth(E,C));var U=function(B){return B.rect.width*B.rect.height},q=function(B,W){return U(W)-U(B)};E.sort(function(se,B){var W=q;return P.idealRowWidth?(W=I,W(se.id,B.id)):W(se,B)});for(var Y=0,te=0,V=0;V<E.length;V++){var K=E[V];Y+=K.getCenterX(),te+=K.getCenterY()}P.centerX=Y/E.length,P.centerY=te/E.length;for(var V=0;V<E.length;V++){var K=E[V];if(P.rows.length==0)this.insertNodeToRow(P,K,0,_);else if(this.canAddHorizontal(P,K.rect.width,K.rect.height)){var ae=P.rows.length-1;P.idealRowWidth||(ae=this.getShortestRowIndex(P)),this.insertNodeToRow(P,K,ae,_)}else this.insertNodeToRow(P,K,P.rows.length,_);this.shiftToLastRow(P)}return P},S.prototype.insertNodeToRow=function(E,_,C,T){var F=T;if(C==E.rows.length){var I=[];E.rows.push(I),E.rowWidth.push(F),E.rowHeight.push(0)}var P=E.rowWidth[C]+_.rect.width;E.rows[C].length>0&&(P+=E.horizontalPadding),E.rowWidth[C]=P,E.width<P&&(E.width=P);var U=_.rect.height;C>0&&(U+=E.verticalPadding);var q=0;U>E.rowHeight[C]&&(q=E.rowHeight[C],E.rowHeight[C]=U,q=E.rowHeight[C]-q),E.height+=q,E.rows[C].push(_)},S.prototype.getShortestRowIndex=function(E){for(var _=-1,C=Number.MAX_VALUE,T=0;T<E.rows.length;T++)E.rowWidth[T]<C&&(_=T,C=E.rowWidth[T]);return _},S.prototype.getLongestRowIndex=function(E){for(var _=-1,C=Number.MIN_VALUE,T=0;T<E.rows.length;T++)E.rowWidth[T]>C&&(_=T,C=E.rowWidth[T]);return _},S.prototype.canAddHorizontal=function(E,_,C){if(E.idealRowWidth){var T=E.rows.length-1,F=E.rowWidth[T];return F+_+E.horizontalPadding<=E.idealRowWidth}var I=this.getShortestRowIndex(E);if(I<0)return!0;var P=E.rowWidth[I];if(P+E.horizontalPadding+_<=E.width)return!0;var U=0;E.rowHeight[I]<C&&I>0&&(U=C+E.verticalPadding-E.rowHeight[I]);var q;E.width-P>=_+E.horizontalPadding?q=(E.height+U)/(P+_+E.horizontalPadding):q=(E.height+U)/E.width,U=C+E.verticalPadding;var Y;return E.width<_?Y=(E.height+U)/_:Y=(E.height+U)/E.width,Y<1&&(Y=1/Y),q<1&&(q=1/q),q<Y},S.prototype.shiftToLastRow=function(E){var _=this.getLongestRowIndex(E),C=E.rowWidth.length-1,T=E.rows[_],F=T[T.length-1],I=F.width+E.horizontalPadding;if(E.width-E.rowWidth[C]>I&&_!=C){T.splice(-1,1),E.rows[C].push(F),E.rowWidth[_]=E.rowWidth[_]-I,E.rowWidth[C]=E.rowWidth[C]+I,E.width=E.rowWidth[instance.getLongestRowIndex(E)];for(var P=Number.MIN_VALUE,U=0;U<T.length;U++)T[U].height>P&&(P=T[U].height);_>0&&(P+=E.verticalPadding);var q=E.rowHeight[_]+E.rowHeight[C];E.rowHeight[_]=P,E.rowHeight[C]<F.height+E.verticalPadding&&(E.rowHeight[C]=F.height+E.verticalPadding);var Y=E.rowHeight[_]+E.rowHeight[C];E.height+=Y-q,this.shiftToLastRow(E)}},S.prototype.tilingPreLayout=function(){g.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},S.prototype.tilingPostLayout=function(){g.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},S.prototype.reduceTrees=function(){for(var E=[],_=!0,C;_;){var T=this.graphManager.getAllNodes(),F=[];_=!1;for(var I=0;I<T.length;I++)if(C=T[I],C.getEdges().length==1&&!C.getEdges()[0].isInterGraph&&C.getChild()==null){if(g.PURE_INCREMENTAL){var P=C.getEdges()[0].getOtherEnd(C),U=new w(C.getCenterX()-P.getCenterX(),C.getCenterY()-P.getCenterY());F.push([C,C.getEdges()[0],C.getOwner(),U])}else F.push([C,C.getEdges()[0],C.getOwner()]);_=!0}if(_==!0){for(var q=[],Y=0;Y<F.length;Y++)F[Y][0].getEdges().length==1&&(q.push(F[Y]),F[Y][0].getOwner().remove(F[Y][0]));E.push(q),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=E},S.prototype.growTree=function(E){for(var _=E.length,C=E[_-1],T,F=0;F<C.length;F++)T=C[F],this.findPlaceforPrunedNode(T),T[2].add(T[0]),T[2].add(T[1],T[1].source,T[1].target);E.splice(E.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},S.prototype.findPlaceforPrunedNode=function(E){var _,C,T=E[0];if(T==E[1].source?C=E[1].target:C=E[1].source,g.PURE_INCREMENTAL)T.setCenter(C.getCenterX()+E[3].getWidth(),C.getCenterY()+E[3].getHeight());else{var F=C.startX,I=C.finishX,P=C.startY,U=C.finishY,q=0,Y=0,te=0,V=0,K=[q,te,Y,V];if(P>0)for(var ae=F;ae<=I;ae++)K[0]+=this.grid[ae][P-1].length+this.grid[ae][P].length-1;if(I<this.grid.length-1)for(var ae=P;ae<=U;ae++)K[1]+=this.grid[I+1][ae].length+this.grid[I][ae].length-1;if(U<this.grid[0].length-1)for(var ae=F;ae<=I;ae++)K[2]+=this.grid[ae][U+1].length+this.grid[ae][U].length-1;if(F>0)for(var ae=P;ae<=U;ae++)K[3]+=this.grid[F-1][ae].length+this.grid[F][ae].length-1;for(var se=D.MAX_VALUE,B,W,Q=0;Q<K.length;Q++)K[Q]<se?(se=K[Q],B=1,W=Q):K[Q]==se&&B++;if(B==3&&se==0)K[0]==0&&K[1]==0&&K[2]==0?_=1:K[0]==0&&K[1]==0&&K[3]==0?_=0:K[0]==0&&K[2]==0&&K[3]==0?_=3:K[1]==0&&K[2]==0&&K[3]==0&&(_=2);else if(B==2&&se==0){var H=Math.floor(Math.random()*2);K[0]==0&&K[1]==0?H==0?_=0:_=1:K[0]==0&&K[2]==0?H==0?_=0:_=2:K[0]==0&&K[3]==0?H==0?_=0:_=3:K[1]==0&&K[2]==0?H==0?_=1:_=2:K[1]==0&&K[3]==0?H==0?_=1:_=3:H==0?_=2:_=3}else if(B==4&&se==0){var H=Math.floor(Math.random()*4);_=H}else _=W;_==0?T.setCenter(C.getCenterX(),C.getCenterY()-C.getHeight()/2-y.DEFAULT_EDGE_LENGTH-T.getHeight()/2):_==1?T.setCenter(C.getCenterX()+C.getWidth()/2+y.DEFAULT_EDGE_LENGTH+T.getWidth()/2,C.getCenterY()):_==2?T.setCenter(C.getCenterX(),C.getCenterY()+C.getHeight()/2+y.DEFAULT_EDGE_LENGTH+T.getHeight()/2):T.setCenter(C.getCenterX()-C.getWidth()/2-y.DEFAULT_EDGE_LENGTH-T.getWidth()/2,C.getCenterY())}},o.exports=S}),991:((o,u,c)=>{var l=c(551).FDLayoutNode,h=c(551).IMath;function d(p,g,m,y){l.call(this,p,g,m,y)}d.prototype=Object.create(l.prototype);for(var f in l)d[f]=l[f];d.prototype.calculateDisplacement=function(){var p=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=p.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=p.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=p.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=p.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>p.coolingFactor*p.maxNodeDisplacement&&(this.displacementX=p.coolingFactor*p.maxNodeDisplacement*h.sign(this.displacementX)),Math.abs(this.displacementY)>p.coolingFactor*p.maxNodeDisplacement&&(this.displacementY=p.coolingFactor*p.maxNodeDisplacement*h.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},d.prototype.propogateDisplacementToChildren=function(p,g){for(var m=this.getChild().getNodes(),y,b=0;b<m.length;b++)y=m[b],y.getChild()==null?(y.displacementX+=p,y.displacementY+=g):y.propogateDisplacementToChildren(p,g)},d.prototype.move=function(){var p=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),p.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},d.prototype.setPred1=function(p){this.pred1=p},d.prototype.getPred1=function(){return pred1},d.prototype.getPred2=function(){return pred2},d.prototype.setNext=function(p){this.next=p},d.prototype.getNext=function(){return next},d.prototype.setProcessed=function(p){this.processed=p},d.prototype.isProcessed=function(){return processed},o.exports=d}),902:((o,u,c)=>{function l(m){if(Array.isArray(m)){for(var y=0,b=Array(m.length);y<m.length;y++)b[y]=m[y];return b}else return Array.from(m)}var h=c(806),d=c(551).LinkedList,f=c(551).Matrix,p=c(551).SVD;function g(){}g.handleConstraints=function(m){var y={};y.fixedNodeConstraint=m.constraints.fixedNodeConstraint,y.alignmentConstraint=m.constraints.alignmentConstraint,y.relativePlacementConstraint=m.constraints.relativePlacementConstraint;for(var b=new Map,v=new Map,x=[],w=[],k=m.getAllNodes(),D=0,A=0;A<k.length;A++){var R=k[A];R.getChild()==null&&(v.set(R.id,D++),x.push(R.getCenterX()),w.push(R.getCenterY()),b.set(R.id,R))}y.relativePlacementConstraint&&y.relativePlacementConstraint.forEach(function(re){!re.gap&&re.gap!=0&&(re.left?re.gap=h.DEFAULT_EDGE_LENGTH+b.get(re.left).getWidth()/2+b.get(re.right).getWidth()/2:re.gap=h.DEFAULT_EDGE_LENGTH+b.get(re.top).getHeight()/2+b.get(re.bottom).getHeight()/2)});var N=function(ce,xe){return{x:ce.x-xe.x,y:ce.y-xe.y}},L=function(ce){var xe=0,Ee=0;return ce.forEach(function(ye){xe+=x[v.get(ye)],Ee+=w[v.get(ye)]}),{x:xe/ce.size,y:Ee/ce.size}},S=function(ce,xe,Ee,ye,Ie){function Ze(z,ne){var ke=new Set(z),he=!0,Z=!1,ue=void 0;try{for(var oe=ne[Symbol.iterator](),Te;!(he=(Te=oe.next()).done);he=!0){var Ue=Te.value;ke.add(Ue)}}catch(Je){Z=!0,ue=Je}finally{try{!he&&oe.return&&oe.return()}finally{if(Z)throw ue}}return ke}var qe=new Map;ce.forEach(function(z,ne){qe.set(ne,0)}),ce.forEach(function(z,ne){z.forEach(function(ke){qe.set(ke.id,qe.get(ke.id)+1)})});var De=new Map,me=new Map,Xe=new d;qe.forEach(function(z,ne){z==0?(Xe.push(ne),Ee||(xe=="horizontal"?De.set(ne,v.has(ne)?x[v.get(ne)]:ye.get(ne)):De.set(ne,v.has(ne)?w[v.get(ne)]:ye.get(ne)))):De.set(ne,Number.NEGATIVE_INFINITY),Ee&&me.set(ne,new Set([ne]))}),Ee&&Ie.forEach(function(z){var ne=[];if(z.forEach(function(Z){Ee.has(Z)&&ne.push(Z)}),ne.length>0){var ke=0;ne.forEach(function(Z){xe=="horizontal"?(De.set(Z,v.has(Z)?x[v.get(Z)]:ye.get(Z)),ke+=De.get(Z)):(De.set(Z,v.has(Z)?w[v.get(Z)]:ye.get(Z)),ke+=De.get(Z))}),ke=ke/ne.length,z.forEach(function(Z){Ee.has(Z)||De.set(Z,ke)})}else{var he=0;z.forEach(function(Z){xe=="horizontal"?he+=v.has(Z)?x[v.get(Z)]:ye.get(Z):he+=v.has(Z)?w[v.get(Z)]:ye.get(Z)}),he=he/z.length,z.forEach(function(Z){De.set(Z,he)})}});for(var ze=function(){var ne=Xe.shift(),ke=ce.get(ne);ke.forEach(function(he){if(De.get(he.id)<De.get(ne)+he.gap)if(Ee&&Ee.has(he.id)){var Z=void 0;if(xe=="horizontal"?Z=v.has(he.id)?x[v.get(he.id)]:ye.get(he.id):Z=v.has(he.id)?w[v.get(he.id)]:ye.get(he.id),De.set(he.id,Z),Z<De.get(ne)+he.gap){var ue=De.get(ne)+he.gap-Z;me.get(ne).forEach(function(oe){De.set(oe,De.get(oe)-ue)})}}else De.set(he.id,De.get(ne)+he.gap);qe.set(he.id,qe.get(he.id)-1),qe.get(he.id)==0&&Xe.push(he.id),Ee&&me.set(he.id,Ze(me.get(ne),me.get(he.id)))})};Xe.length!=0;)ze();if(Ee){var O=new Set;ce.forEach(function(z,ne){z.length==0&&O.add(ne)});var X=[];me.forEach(function(z,ne){if(O.has(ne)){var ke=!1,he=!0,Z=!1,ue=void 0;try{for(var oe=z[Symbol.iterator](),Te;!(he=(Te=oe.next()).done);he=!0){var Ue=Te.value;Ee.has(Ue)&&(ke=!0)}}catch(at){Z=!0,ue=at}finally{try{!he&&oe.return&&oe.return()}finally{if(Z)throw ue}}if(!ke){var Je=!1,Lt=void 0;X.forEach(function(at,vn){at.has([].concat(l(z))[0])&&(Je=!0,Lt=vn)}),Je?z.forEach(function(at){X[Lt].add(at)}):X.push(new Set(z))}}}),X.forEach(function(z,ne){var ke=Number.POSITIVE_INFINITY,he=Number.POSITIVE_INFINITY,Z=Number.NEGATIVE_INFINITY,ue=Number.NEGATIVE_INFINITY,oe=!0,Te=!1,Ue=void 0;try{for(var Je=z[Symbol.iterator](),Lt;!(oe=(Lt=Je.next()).done);oe=!0){var at=Lt.value,vn=void 0;xe=="horizontal"?vn=v.has(at)?x[v.get(at)]:ye.get(at):vn=v.has(at)?w[v.get(at)]:ye.get(at);var Zn=De.get(at);vn<ke&&(ke=vn),vn>Z&&(Z=vn),Zn<he&&(he=Zn),Zn>ue&&(ue=Zn)}}catch($){Te=!0,Ue=$}finally{try{!oe&&Je.return&&Je.return()}finally{if(Te)throw Ue}}var Sn=(ke+Z)/2-(he+ue)/2,mr=!0,Tr=!1,yr=void 0;try{for(var Rn=z[Symbol.iterator](),Ji;!(mr=(Ji=Rn.next()).done);mr=!0){var ve=Ji.value;De.set(ve,De.get(ve)+Sn)}}catch($){Tr=!0,yr=$}finally{try{!mr&&Rn.return&&Rn.return()}finally{if(Tr)throw yr}}})}return De},M=function(ce){var xe=0,Ee=0,ye=0,Ie=0;if(ce.forEach(function(me){me.left?x[v.get(me.left)]-x[v.get(me.right)]>=0?xe++:Ee++:w[v.get(me.top)]-w[v.get(me.bottom)]>=0?ye++:Ie++}),xe>Ee&&ye>Ie)for(var Ze=0;Ze<v.size;Ze++)x[Ze]=-1*x[Ze],w[Ze]=-1*w[Ze];else if(xe>Ee)for(var qe=0;qe<v.size;qe++)x[qe]=-1*x[qe];else if(ye>Ie)for(var De=0;De<v.size;De++)w[De]=-1*w[De]},E=function(ce){var xe=[],Ee=new d,ye=new Set,Ie=0;return ce.forEach(function(Ze,qe){if(!ye.has(qe)){xe[Ie]=[];var De=qe;for(Ee.push(De),ye.add(De),xe[Ie].push(De);Ee.length!=0;){De=Ee.shift();var me=ce.get(De);me.forEach(function(Xe){ye.has(Xe.id)||(Ee.push(Xe.id),ye.add(Xe.id),xe[Ie].push(Xe.id))})}Ie++}}),xe},_=function(ce){var xe=new Map;return ce.forEach(function(Ee,ye){xe.set(ye,[])}),ce.forEach(function(Ee,ye){Ee.forEach(function(Ie){xe.get(ye).push(Ie),xe.get(Ie.id).push({id:ye,gap:Ie.gap,direction:Ie.direction})})}),xe},C=function(ce){var xe=new Map;return ce.forEach(function(Ee,ye){xe.set(ye,[])}),ce.forEach(function(Ee,ye){Ee.forEach(function(Ie){xe.get(Ie.id).push({id:ye,gap:Ie.gap,direction:Ie.direction})})}),xe},T=[],F=[],I=!1,P=!1,U=new Set,q=new Map,Y=new Map,te=[];if(y.fixedNodeConstraint&&y.fixedNodeConstraint.forEach(function(re){U.add(re.nodeId)}),y.relativePlacementConstraint&&(y.relativePlacementConstraint.forEach(function(re){re.left?(q.has(re.left)?q.get(re.left).push({id:re.right,gap:re.gap,direction:"horizontal"}):q.set(re.left,[{id:re.right,gap:re.gap,direction:"horizontal"}]),q.has(re.right)||q.set(re.right,[])):(q.has(re.top)?q.get(re.top).push({id:re.bottom,gap:re.gap,direction:"vertical"}):q.set(re.top,[{id:re.bottom,gap:re.gap,direction:"vertical"}]),q.has(re.bottom)||q.set(re.bottom,[]))}),Y=_(q),te=E(Y)),h.TRANSFORM_ON_CONSTRAINT_HANDLING){if(y.fixedNodeConstraint&&y.fixedNodeConstraint.length>1)y.fixedNodeConstraint.forEach(function(re,ce){T[ce]=[re.position.x,re.position.y],F[ce]=[x[v.get(re.nodeId)],w[v.get(re.nodeId)]]}),I=!0;else if(y.alignmentConstraint)(function(){var re=0;if(y.alignmentConstraint.vertical){for(var ce=y.alignmentConstraint.vertical,xe=function(De){var me=new Set;ce[De].forEach(function(O){me.add(O)});var Xe=new Set([].concat(l(me)).filter(function(O){return U.has(O)})),ze=void 0;Xe.size>0?ze=x[v.get(Xe.values().next().value)]:ze=L(me).x,ce[De].forEach(function(O){T[re]=[ze,w[v.get(O)]],F[re]=[x[v.get(O)],w[v.get(O)]],re++})},Ee=0;Ee<ce.length;Ee++)xe(Ee);I=!0}if(y.alignmentConstraint.horizontal){for(var ye=y.alignmentConstraint.horizontal,Ie=function(De){var me=new Set;ye[De].forEach(function(O){me.add(O)});var Xe=new Set([].concat(l(me)).filter(function(O){return U.has(O)})),ze=void 0;Xe.size>0?ze=x[v.get(Xe.values().next().value)]:ze=L(me).y,ye[De].forEach(function(O){T[re]=[x[v.get(O)],ze],F[re]=[x[v.get(O)],w[v.get(O)]],re++})},Ze=0;Ze<ye.length;Ze++)Ie(Ze);I=!0}y.relativePlacementConstraint&&(P=!0)})();else if(y.relativePlacementConstraint){for(var V=0,K=0,ae=0;ae<te.length;ae++)te[ae].length>V&&(V=te[ae].length,K=ae);if(V<Y.size/2)M(y.relativePlacementConstraint),I=!1,P=!1;else{var se=new Map,B=new Map,W=[];te[K].forEach(function(re){q.get(re).forEach(function(ce){ce.direction=="horizontal"?(se.has(re)?se.get(re).push(ce):se.set(re,[ce]),se.has(ce.id)||se.set(ce.id,[]),W.push({left:re,right:ce.id})):(B.has(re)?B.get(re).push(ce):B.set(re,[ce]),B.has(ce.id)||B.set(ce.id,[]),W.push({top:re,bottom:ce.id}))})}),M(W),P=!1;var Q=S(se,"horizontal"),H=S(B,"vertical");te[K].forEach(function(re,ce){F[ce]=[x[v.get(re)],w[v.get(re)]],T[ce]=[],Q.has(re)?T[ce][0]=Q.get(re):T[ce][0]=x[v.get(re)],H.has(re)?T[ce][1]=H.get(re):T[ce][1]=w[v.get(re)]}),I=!0}}if(I){for(var pe=void 0,J=f.transpose(T),Be=f.transpose(F),Se=0;Se<J.length;Se++)J[Se]=f.multGamma(J[Se]),Be[Se]=f.multGamma(Be[Se]);var Rt=f.multMat(J,f.transpose(Be)),Tt=p.svd(Rt);pe=f.multMat(Tt.V,f.transpose(Tt.U));for(var Ke=0;Ke<v.size;Ke++){var Yt=[x[Ke],w[Ke]],Fn=[pe[0][0],pe[1][0]],Kr=[pe[0][1],pe[1][1]];x[Ke]=f.dotProduct(Yt,Fn),w[Ke]=f.dotProduct(Yt,Kr)}P&&M(y.relativePlacementConstraint)}}if(h.ENFORCE_CONSTRAINTS){if(y.fixedNodeConstraint&&y.fixedNodeConstraint.length>0){var Nt={x:0,y:0};y.fixedNodeConstraint.forEach(function(re,ce){var xe={x:x[v.get(re.nodeId)],y:w[v.get(re.nodeId)]},Ee=re.position,ye=N(Ee,xe);Nt.x+=ye.x,Nt.y+=ye.y}),Nt.x/=y.fixedNodeConstraint.length,Nt.y/=y.fixedNodeConstraint.length,x.forEach(function(re,ce){x[ce]+=Nt.x}),w.forEach(function(re,ce){w[ce]+=Nt.y}),y.fixedNodeConstraint.forEach(function(re){x[v.get(re.nodeId)]=re.position.x,w[v.get(re.nodeId)]=re.position.y})}if(y.alignmentConstraint){if(y.alignmentConstraint.vertical)for(var Xt=y.alignmentConstraint.vertical,Dt=function(ce){var xe=new Set;Xt[ce].forEach(function(Ie){xe.add(Ie)});var Ee=new Set([].concat(l(xe)).filter(function(Ie){return U.has(Ie)})),ye=void 0;Ee.size>0?ye=x[v.get(Ee.values().next().value)]:ye=L(xe).x,xe.forEach(function(Ie){U.has(Ie)||(x[v.get(Ie)]=ye)})},yt=0;yt<Xt.length;yt++)Dt(yt);if(y.alignmentConstraint.horizontal)for(var wt=y.alignmentConstraint.horizontal,gr=function(ce){var xe=new Set;wt[ce].forEach(function(Ie){xe.add(Ie)});var Ee=new Set([].concat(l(xe)).filter(function(Ie){return U.has(Ie)})),ye=void 0;Ee.size>0?ye=w[v.get(Ee.values().next().value)]:ye=L(xe).y,xe.forEach(function(Ie){U.has(Ie)||(w[v.get(Ie)]=ye)})},nn=0;nn<wt.length;nn++)gr(nn)}y.relativePlacementConstraint&&(function(){var re=new Map,ce=new Map,xe=new Map,Ee=new Map,ye=new Map,Ie=new Map,Ze=new Set,qe=new Set;if(U.forEach(function(_e){Ze.add(_e),qe.add(_e)}),y.alignmentConstraint){if(y.alignmentConstraint.vertical)for(var De=y.alignmentConstraint.vertical,me=function(de){xe.set("dummy"+de,[]),De[de].forEach(function(Re){re.set(Re,"dummy"+de),xe.get("dummy"+de).push(Re),U.has(Re)&&Ze.add("dummy"+de)}),ye.set("dummy"+de,x[v.get(De[de][0])])},Xe=0;Xe<De.length;Xe++)me(Xe);if(y.alignmentConstraint.horizontal)for(var ze=y.alignmentConstraint.horizontal,O=function(de){Ee.set("dummy"+de,[]),ze[de].forEach(function(Re){ce.set(Re,"dummy"+de),Ee.get("dummy"+de).push(Re),U.has(Re)&&qe.add("dummy"+de)}),Ie.set("dummy"+de,w[v.get(ze[de][0])])},X=0;X<ze.length;X++)O(X)}var z=new Map,ne=new Map,ke=function(de){q.get(de).forEach(function(Re){var It=void 0,kt=void 0;Re.direction=="horizontal"?(It=re.get(de)?re.get(de):de,re.get(Re.id)?kt={id:re.get(Re.id),gap:Re.gap,direction:Re.direction}:kt=Re,z.has(It)?z.get(It).push(kt):z.set(It,[kt]),z.has(kt.id)||z.set(kt.id,[])):(It=ce.get(de)?ce.get(de):de,ce.get(Re.id)?kt={id:ce.get(Re.id),gap:Re.gap,direction:Re.direction}:kt=Re,ne.has(It)?ne.get(It).push(kt):ne.set(It,[kt]),ne.has(kt.id)||ne.set(kt.id,[]))})},he=!0,Z=!1,ue=void 0;try{for(var oe=q.keys()[Symbol.iterator](),Te;!(he=(Te=oe.next()).done);he=!0){var Ue=Te.value;ke(Ue)}}catch(_e){Z=!0,ue=_e}finally{try{!he&&oe.return&&oe.return()}finally{if(Z)throw ue}}var Je=_(z),Lt=_(ne),at=E(Je),vn=E(Lt),Zn=C(z),Sn=C(ne),mr=[],Tr=[];at.forEach(function(_e,de){mr[de]=[],_e.forEach(function(Re){Zn.get(Re).length==0&&mr[de].push(Re)})}),vn.forEach(function(_e,de){Tr[de]=[],_e.forEach(function(Re){Sn.get(Re).length==0&&Tr[de].push(Re)})});var yr=S(z,"horizontal",Ze,ye,mr),Rn=S(ne,"vertical",qe,Ie,Tr),Ji=function(de){xe.get(de)?xe.get(de).forEach(function(Re){x[v.get(Re)]=yr.get(de)}):x[v.get(de)]=yr.get(de)},ve=!0,$=!1,ee=void 0;try{for(var ge=yr.keys()[Symbol.iterator](),tt;!(ve=(tt=ge.next()).done);ve=!0){var _t=tt.value;Ji(_t)}}catch(_e){$=!0,ee=_e}finally{try{!ve&&ge.return&&ge.return()}finally{if($)throw ee}}var gt=function(de){Ee.get(de)?Ee.get(de).forEach(function(Re){w[v.get(Re)]=Rn.get(de)}):w[v.get(de)]=Rn.get(de)},Mt=!0,sn=!1,kr=void 0;try{for(var ie=Rn.keys()[Symbol.iterator](),le;!(Mt=(le=ie.next()).done);Mt=!0){var _t=le.value;gt(_t)}}catch(_e){sn=!0,kr=_e}finally{try{!Mt&&ie.return&&ie.return()}finally{if(sn)throw kr}}})()}for(var Hn=0;Hn<k.length;Hn++){var rn=k[Hn];rn.getChild()==null&&rn.setCenter(x[v.get(rn.id)],w[v.get(rn.id)])}},o.exports=g}),551:(o=>{o.exports=n})},i={};function s(o){var u=i[o];if(u!==void 0)return u.exports;var c=i[o]={exports:{}};return r[o](c,c.exports,s),c.exports}var a=s(45);return a})()})})(Th)),Th.exports}export{nK as $,kZ as A,FZ as B,Qq as C,gj as D,js as E,qj as F,Qj as G,QR as H,dd as I,aR as J,Xw as K,Jw as L,SR as M,qR as N,Ln as O,kc as P,eK as Q,Tn as R,id as S,Ij as T,tR as U,zw as V,zj as W,tK as X,Xj as Y,us as Z,ut as _,vF as a,Wj as a$,rK as a0,iK as a1,bK as a2,xj as a3,sd as a4,Kj as a5,Pj as a6,bj as a7,$j as a8,Oj as a9,jj as aA,Zj as aB,mj as aC,vj as aD,Hj as aE,ds as aF,Fj as aG,FR as aH,kj as aI,Tj as aJ,Sj as aK,Zw as aL,ad as aM,Kw as aN,sg as aO,yj as aP,ig as aQ,sR as aR,KR as aS,vR as aT,cg as aU,og as aV,Yj as aW,jN as aX,YN as aY,zN as aZ,D_ as a_,rR as aa,Dj as ab,_j as ac,Ej as ad,wj as ae,Cj as af,fs as ag,qw as ah,Aj as ai,Uj as aj,hs as ak,HR as al,Jj as am,bo as an,Gj as ao,Bj as ap,Ks as aq,Lj as ar,t_ as as,BR as at,Nj as au,ag as av,Mj as aw,Iv as ax,Rj as ay,ZR as az,tj as b,my as b$,Yw as b0,z6 as b1,SZ as b2,AK as b3,CK as b4,_K as b5,wK as b6,DK as b7,Z6 as b8,TK as b9,lZ as bA,oZ as bB,uZ as bC,vZ as bD,BK as bE,Zx as bF,bZ as bG,xZ as bH,Ci as bI,NZ as bJ,RZ as bK,EK as bL,oW as bM,yV as bN,mV as bO,IZ as bP,_q as bQ,yw as bR,Eq as bS,xq as bT,OK as bU,FK as bV,kK as bW,u$ as bX,LK as bY,RK as bZ,wC as b_,NK as ba,iZ as bb,sZ as bc,rZ as bd,nZ as be,tZ as bf,eZ as bg,QK as bh,P7 as bi,KK as bj,JK as bk,ZK as bl,VK as bm,jK as bn,qK as bo,XK as bp,HK as bq,GK as br,YK as bs,zK as bt,WK as bu,aZ as bv,yZ as bw,ct as bx,cZ as by,hZ as bz,hj as c,Ud as c0,m$ as c1,g$ as c2,ao as c3,p$ as c4,d$ as c5,ff as c6,Hc as c7,py as c8,dy as c9,Ma as ca,hf as cb,SK as cc,$K as cd,gC as ce,UK as cf,Q9 as cg,OZ as ch,UZ as ci,Lq as cj,BZ as ck,$Z as cl,PZ as cm,PK as cn,GZ as co,fC as cp,pC as cq,IK as cr,LZ as cs,HZ as ct,vK as cu,Wr as cv,He as cw,ij as d,aj as e,fj as f,rj as g,ej as h,uj as i,nj as j,dj as k,cj as l,X3 as m,pj as n,yF as o,sj as p,oj as q,ic as r,lj as s,_Z as t,wZ as u,EZ as v,TZ as w,AZ as x,DZ as y,CZ as z};
